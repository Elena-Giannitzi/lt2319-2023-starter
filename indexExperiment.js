(()=>{var e,t,r,n,o,i,s,a,c,u,p,l,f,h,d,v,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function g(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}function m(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var b={},S={},P=y.parcelRequireee0b;null==P&&((P=function(e){if(e in b)return b[e].exports;if(e in S){var t=S[e];delete S[e];var r={id:e,exports:{}};return b[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){S[e]=t},y.parcelRequireee0b=P),P.register("7qv08",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("jcdMA")),o=r(P("4sGTp")),i=r(P("9Elbq")),s=r(P("foXoB")),a=r(P("eVJPt")),c=r(P("3jIol")),u=r(P("kzUdv")),p=P("7Qtqa"),l=r(P("dUp1o")),f=r(P("4pHgM")),h=r(P("csUbC")),d=r(P("jvXSw")),v=r(P("9nosj")),y=r(P("fMfdO")),g=r(P("69fQu")),m=r(P("lNxzS")),b=[];e.exports.default=function(e){var t=(0,y.default)(e),r=t.audioContext,S=t.fetchCredentials,P=t.ponyfill,C=void 0===P?{AudioContext:window.AudioContext||window.webkitAudioContext}:P,R=t.speechSynthesisDeploymentId,x=t.speechSynthesisOutputFormat,O=void 0===x?"audio-24khz-160kbitrate-mono-mp3":x;return r||C.AudioContext?{speechSynthesis:new/*#__PURE__*/(function(e){(0,a.default)(x,e);var t,y,P=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(x);if(t){var n=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function x(){var e;return(0,i.default)(this,x),(e=P.call(this)).queue=new h.default({audioContext:r,ponyfill:C}),e.updateVoices(),e}return(0,s.default)(x,[{key:"cancel",value:function(){this.queue.stop()}},{key:"getVoices",value:function(){return b}},{key:"onvoiceschanged",get:function(){return(0,p.getEventAttributeValue)(this,"voiceschanged")},set:function(e){(0,p.setEventAttributeValue)(this,"voiceschanged",e)}},{key:"pause",value:function(){this.queue.pause()}},{key:"resume",value:function(){this.queue.resume()}},{key:"speak",value:function(e){if(!(e instanceof m.default))throw Error("invalid utterance");var t=(0,l.default)(),r=t.reject,n=t.resolve,o=t.promise,i=function(e){var t=e.error,n=e.message,o=Error(t);o.stack=n,r(o)};return e.addEventListener("end",n),e.addEventListener("error",i),e.preload({deploymentId:R,fetchCredentials:S,outputFormat:O}),this.queue.push(e),o.finally(function(){e.removeEventListener("end",n),e.removeEventListener("error",i)})}},{key:"speaking",get:function(){return this.queue.speaking}},{key:"updateVoices",value:(y=(0,o.default)(/*#__PURE__*/n.default.mark(function e(){var t,r,i,s,a,c=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:if(r=(t=e.sent).customVoiceHostname,i=t.region,s=t.speechSynthesisHostname,a=t.subscriptionKey,!R){e.next=14;break}if(!a){e.next=12;break}return console.warn("web-speech-cognitive-services: Listing of custom voice models are only available when using subscription key."),e.next=12,(0,f.default)(/*#__PURE__*/(0,o.default)(/*#__PURE__*/n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.default)({customVoiceHostname:r,deploymentId:R,region:i,speechSynthesisHostname:s,subscriptionKey:a});case 2:t=e.sent,c.getVoices=function(){return t};case 4:case"end":return e.stop()}},e)})));case 12:e.next=16;break;case 14:return e.next=16,(0,f.default)(/*#__PURE__*/(0,o.default)(/*#__PURE__*/n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.default,e.next=3,S();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:t=e.sent,c.getVoices=function(){return t};case 8:case"end":return e.stop()}},e)})));case 16:this.dispatchEvent(new g.default("voiceschanged"));case 17:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})}]),x}(p.EventTarget)),SpeechSynthesisEvent:g.default,SpeechSynthesisUtterance:m.default}:(console.warn("web-speech-cognitive-services: This browser does not support Web Audio and it will not work with Cognitive Services Speech Services."),{})}}),P.register("WuZRa",function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("jcdMA",function(e,t){// TODO(Babel 8): Remove this file.
var r=P("lXHOm")();e.exports=r;// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=
try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}),P.register("lXHOm",function(e,t){var r=P("73s0r").default;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=n=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},o=Object.prototype,i=o.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o,i=Object.create((t&&t.prototype instanceof d?t:d).prototype),s=new O(n||[]);return i._invoke=(o="suspendedStart",function(t,n){if("executing"===o)throw Error("Generator is already running");if("completed"===o){if("throw"===t)throw n;return E()}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var a=function e(t,r){var n=t.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return h;r.method="throw",r.arg=TypeError("The iterator does not provide a 'throw' method")}return h}var o=f(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,s);if(a){if(a===h)continue;return a}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===o)throw o="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o="executing";var c=f(e,r,s);if("normal"===c.type){if(o=s.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:s.done}}"throw"===c.type&&(o="completed",s.method="throw",s.arg=c.arg)}}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h={};function d(){}function v(){}function y(){}var g={};p(g,a,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(w([])));b&&b!==o&&i.call(b,a)&&(g=b);var S=y.prototype=d.prototype=Object.create(g);function P(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){var n;this._invoke=function(o,s){function a(){return new t(function(n,a){!function n(o,s,a,c){var u=f(e[o],e,s);if("throw"!==u.type){var p=u.arg,l=p.value;return l&&"object"==r(l)&&i.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,c)},function(e){n("throw",e,a,c)}):t.resolve(l).then(function(e){p.value=e,a(p)},function(e){return n("throw",e,a,c)})}c(u.arg)}(o,s,n,a)})}return n=n?n.then(a,a):a()}}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function w(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:E}}function E(){return{value:void 0,done:!0}}return v.prototype=y,p(S,"constructor",y),p(y,"constructor",v),v.displayName=p(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,p(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},P(C.prototype),p(C.prototype,c,function(){return this}),t.AsyncIterator=C,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var s=new C(l(e,r,n,o),i);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},P(S),p(S,u,"Generator"),p(S,a,function(){return this}),p(S,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=w,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("73s0r",function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("4sGTp",function(e,t){function r(e,t,r,n,o,i,s){try{var a=e[i](s),c=a.value}catch(e){r(e);return}a.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}a(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("9Elbq",function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("foXoB",function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("eVJPt",function(e,t){var r=P("1xeBK");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("1xeBK",function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("3jIol",function(e,t){var r=P("73s0r").default,n=P("t4Uxi");e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("t4Uxi",function(e,t){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("kzUdv",function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("7Qtqa",function(e,t){var r,n,o,i=P("cIQAh");Object.defineProperty(e.exports,"__esModule",{value:!0});var s=P("a3no4"),a=P("3YU1J"),c=P("h7B0G"),u=P("t4Uxi"),p=P("eVJPt"),l=P("3jIol"),f=P("kzUdv"),h=P("lbV37"),d=P("7BNdl"),v=P("9Elbq"),g=P("foXoB"),m=P("73s0r");function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var S=/*#__PURE__*/b(s),C=/*#__PURE__*/b(a),R=/*#__PURE__*/b(c),x=/*#__PURE__*/b(u),O=/*#__PURE__*/b(p),w=/*#__PURE__*/b(l),E=/*#__PURE__*/b(f),I=/*#__PURE__*/b(h),T=/*#__PURE__*/b(d),A=/*#__PURE__*/b(v),_=/*#__PURE__*/b(g),k=/*#__PURE__*/b(m);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=E.default(e);if(t){var o=E.default(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w.default(this,r)}}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){T.default(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}/**
 * Assert a condition.
 * @param condition The condition that it should satisfy.
 * @param message The error message.
 * @param args The arguments for replacing placeholders in the message.
 */function D(e,t){if(!e){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];throw TypeError(L(t,n))}}/**
 * Convert a text and arguments to one string.
 * @param message The formating text
 * @param args The arguments.
 */function L(e,t){var r=0;return e.replace(/%[os]/g,function(){return z(t[r++])})}/**
 * Convert a value to a string representation.
 * @param x The value to get the string representation.
 */function z(e){return"object"!==k.default(e)||null===e?String(e):Object.prototype.toString.call(e)}/**
 * The global object.
 *///istanbul ignore next
var B="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==y?y:"undefined"!=typeof globalThis?globalThis:void 0,F=/*#__PURE__*/function(){function e(t,r){A.default(this,e),this.code=t,this.message=r}return(/**
   * Report this warning.
   * @param args The arguments of the warning.
   */_.default(e,[{key:"warn",value:function(){var e;try{for(var t,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];// Call the user-defined warning handler if exists.
if(n){n(j(j({},this),{},{args:o}));return}// Otherwise, print the warning.
var s=(null!==(e=Error().stack)&&void 0!==e?e:"").replace(/^(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?\n){2}/g,"\n");(t=console).warn.apply(t,[this.message].concat(o,[s]))}catch(e){}}}]),e)}(),V=new F("W01","Unable to initialize event under dispatching."),G=new F("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),U=new F("W03","Assigning any truthy value to 'returnValue' property has no effect."),q=new F("W04","Unable to preventDefault on non-cancelable events."),K=new F("W05","Unable to preventDefault inside passive event listener invocation."),W=new F("W06","An event listener wasn't added because it has been added already: %o, %o"),H=new F("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),J=new F("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),Q=new F("W09","Event attribute handler must be a function: %o"),$=/*#__PURE__*/function(){function e(t,r){A.default(this,e),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});var n=null!=r?r:{};et.set(this,{type:String(t),bubbles:!!n.bubbles,cancelable:!!n.cancelable,composed:!!n.composed,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}return _.default(e,null,[{key:"NONE",/**
     * @see https://dom.spec.whatwg.org/#dom-event-none
     */get:function(){return Z}},{key:"CAPTURING_PHASE",get:function(){return Y}},{key:"AT_TARGET",get:function(){return X}},{key:"BUBBLING_PHASE",get:function(){return ee}}]),/**
   * The type of this event.
   * @see https://dom.spec.whatwg.org/#dom-event-type
   */_.default(e,[{key:"composedPath",/**
     * The event target of the current dispatching.
     * This doesn't support node tree.
     * @see https://dom.spec.whatwg.org/#dom-event-composedpath
     */value:function(){var e=er(this).currentTarget;return e?[e]:[]}},{key:"stopPropagation",/**
     * Stop event bubbling.
     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.
     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation
     */value:function(){er(this).stopPropagationFlag=!0}},{key:"stopImmediatePropagation",/**
     * Stop event bubbling and subsequent event listener callings.
     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation
     */value:function(){var e=er(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}},{key:"preventDefault",/**
     * Cancel the default behavior.
     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault
     */value:function(){en(er(this))}},{key:"initEvent",/**
     * @deprecated Don't use this method. The constructor did initialization.
     */value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=er(this);if(n.dispatchFlag){V.warn();return}et.set(this,j(j({},n),{},{type:String(e),bubbles:!!t,cancelable:!!r,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1}))}},{key:"type",get:function(){return er(this).type}},{key:"target",get:function(){return er(this).target}},{key:"srcElement",get:function(){return er(this).target}},{key:"currentTarget",get:function(){return er(this).currentTarget}},{key:"NONE",get:function(){return Z}},{key:"CAPTURING_PHASE",get:function(){return Y}},{key:"AT_TARGET",get:function(){return X}},{key:"BUBBLING_PHASE",get:function(){return ee}},{key:"eventPhase",get:function(){return er(this).dispatchFlag?2:0}},{key:"cancelBubble",get:function(){return er(this).stopPropagationFlag},set:function(e){e?er(this).stopPropagationFlag=!0:G.warn()}},{key:"bubbles",get:function(){return er(this).bubbles}},{key:"cancelable",get:function(){return er(this).cancelable}},{key:"returnValue",get:function(){return!er(this).canceledFlag},set:function(e){e?U.warn():en(er(this))}},{key:"defaultPrevented",get:function(){return er(this).canceledFlag}},{key:"composed",get:function(){return er(this).composed}},{key:"isTrusted",get:function(){return!1}},{key:"timeStamp",get:function(){return er(this).timeStamp}}]),e}(),Z=0,Y=1,X=2,ee=3,et=new WeakMap;/**
 * Get private data.
 * @param event The event object to get private data.
 * @param name The variable name to report.
 * @returns The private data of the event.
 */function er(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"this",r=et.get(e);return D(null!=r,"'%s' must be an object that Event constructor created, but got another one: %o",t,e),r}/**
 * https://dom.spec.whatwg.org/#set-the-canceled-flag
 * @param data private data.
 */function en(e){if(e.inPassiveListenerFlag){K.warn();return}if(!e.cancelable){q.warn();return}e.canceledFlag=!0}// Set enumerable
Object.defineProperty($,"NONE",{enumerable:!0}),Object.defineProperty($,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty($,"AT_TARGET",{enumerable:!0}),Object.defineProperty($,"BUBBLING_PHASE",{enumerable:!0});for(var eo=Object.getOwnPropertyNames($.prototype),ei=0;ei<eo.length;++ei)"constructor"!==eo[ei]&&Object.defineProperty($.prototype,eo[ei],{enumerable:!0});// Ensure `event instanceof window.Event` is `true`.
void 0!==B&&void 0!==B.Event&&Object.setPrototypeOf($.prototype,B.Event.prototype);var es={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function ea(e){for(var t=Object.keys(es),r=0;r<t.length;++r)!function(r){var n=t[r],o=es[n];Object.defineProperty(e,n,{get:function(){return o},configurable:!0,enumerable:!0})}(r)}/**
 * An implementation of `Event` interface, that wraps a given event object.
 * This class controls the internal state of `Event`.
 * @see https://dom.spec.whatwg.org/#interface-event
 */var ec=/*#__PURE__*/function(e){O.default(r,e);var t=M(r);function r(e){A.default(this,r),i=t.call(this,e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&R.default((n=x.default(i),E.default(r.prototype)),"stopPropagation",n).call(n),e.defaultPrevented&&R.default((o=x.default(i),E.default(r.prototype)),"preventDefault",o).call(o),eu.set(x.default(i),{original:e});for(var n,o,i,s=Object.keys(e),a=0;a<s.length;++a){var c=s[a];c in x.default(i)||Object.defineProperty(x.default(i),c,ef(e,c))}return i}return _.default(r,null,[{key:"wrap",/**
     * Wrap a given event object to control states.
     * @param event The event-like object to wrap.
     */value:function(e){return new(/**
 * Get the wrapper class of a given prototype.
 * @param originalEvent The event object to wrap.
 */function e(t){var r=Object.getPrototypeOf(t);if(null==r)return ec;var n=el.get(r);return null==n&&(n=/**
 * Define new wrapper class.
 * @param BaseEventWrapper The base wrapper class.
 * @param originalPrototype The prototype of the original event.
 */function(e,t){for(var r=/*#__PURE__*/function(e){O.default(r,e);var t=M(r);function r(){return A.default(this,r),t.apply(this,arguments)}return r}(e),n=Object.keys(t),o=0;o<n.length;++o)Object.defineProperty(r.prototype,n[o],ef(t,n[o]));return r}(e(r),r),el.set(r,n)),n}(e))(e)}}]),_.default(r,[{key:"stopPropagation",value:function(){R.default(E.default(r.prototype),"stopPropagation",this).call(this);var e=ep(this).original;"stopPropagation"in e&&e.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){R.default(E.default(r.prototype),"stopImmediatePropagation",this).call(this);var e=ep(this).original;"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}},{key:"preventDefault",value:function(){R.default(E.default(r.prototype),"preventDefault",this).call(this);var e=ep(this).original;"preventDefault"in e&&e.preventDefault()}},{key:"cancelBubble",get:function(){return R.default(E.default(r.prototype),"cancelBubble",this)},set:function(e){C.default(E.default(r.prototype),"cancelBubble",e,this,!0);var t=ep(this).original;"cancelBubble"in t&&(t.cancelBubble=e)}},{key:"returnValue",get:function(){return R.default(E.default(r.prototype),"returnValue",this)},set:function(e){C.default(E.default(r.prototype),"returnValue",e,this,!0);var t=ep(this).original;"returnValue"in t&&(t.returnValue=e)}},{key:"timeStamp",get:function(){var e=ep(this).original;return"timeStamp"in e?e.timeStamp:R.default(E.default(r.prototype),"timeStamp",this)}}]),r}($),eu=new WeakMap;/**
 * Get private data.
 * @param event The event object to get private data.
 * @returns The private data of the event.
 */function ep(e){var t=eu.get(e);return D(null!=t,"'this' is expected an Event object, but got",e),t}/**
 * Cache for wrapper classes.
 * @type {WeakMap<Object, Function>}
 * @private
 */var el=new WeakMap;// Make association for wrappers.
/**
 * Get the property descriptor to redirect a given property.
 */function ef(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return{get:function(){var e=ep(this).original,r=e[t];return"function"==typeof r?r.bind(e):r},set:function(e){ep(this).original[t]=e},configurable:r.configurable,enumerable:r.enumerable}}/**
 * Check if the given listener has the `capture` flag or not.
 * @param listener The listener to check.
 */function eh(e){return(1&e.flags)==1/* Capture */}/**
 * Check if the given listener has the `passive` flag or not.
 * @param listener The listener to check.
 */function ed(e){return(2&e.flags)==2/* Passive */}/**
 * Check if the given listener has the `once` flag or not.
 * @param listener The listener to check.
 */function ev(e){return(4&e.flags)==4/* Once */}/**
 * Find the index of given listener.
 * This returns `-1` if not found.
 * @param list The listener list.
 * @param callback The callback function to find.
 * @param capture The capture flag to find.
 */function ey(e,t,r){for(var n=e.listeners,o=0;o<n.length;++o)if(n[o].callback===t&&eh(n[o])===r)return o;return -1}/**
 * Add the given listener.
 * Does copy-on-write if needed.
 * @param list The listener list.
 * @param callback The callback function.
 * @param capture The capture flag.
 * @param passive The passive flag.
 * @param once The once flag.
 * @param signal The abort signal.
 */function eg(e,t,r,n,o,i){i&&(s=em.bind(null,e,t,r),i.addEventListener("abort",s));var s,a={callback:t,flags:(r?1:0)|(n?2:0)|(o?4:0),signal:i,signalListener:s};return e.cow?(e.cow=!1,e.listeners=[].concat(S.default(e.listeners),[a])):e.listeners.push(a),a}/**
 * Remove a listener.
 * @param list The listener list.
 * @param callback The callback function to find.
 * @param capture The capture flag to find.
 * @returns `true` if it mutated the list directly.
 */function em(e,t,r){var n=ey(e,t,r);return -1!==n&&eb(e,n)}/**
 * Remove a listener.
 * @param list The listener list.
 * @param index The index of the target listener.
 * @param disableCow Disable copy-on-write if true.
 * @returns `true` if it mutated the `listeners` array directly.
 */function eb(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.listeners[t];return(// Remove it from the array.
(n.flags|=8/* Removed */,n.signal&&n.signal.removeEventListener("abort",n.signalListener),e.cow&&!r)?(e.cow=!1,e.listeners=e.listeners.filter(function(e,r){return r!==t}),!1):(e.listeners.splice(t,1),!0))}/**
 * Get the listener list of the given type.
 * If the listener list has not been initialized, initialize and return it.
 * @param listenerMap The listener list map.
 * @param type The event type to get.
 */function eS(e,t){var r;return null!==(r=e[t])&&void 0!==r?r:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}el.set(Object.prototype,ec),void 0!==B&&void 0!==B.Event&&el.set(B.Event.prototype,ec);/**
 * An implementation of the `EventTarget` interface.
 * @see https://dom.spec.whatwg.org/#eventtarget
 */var eP=/*#__PURE__*/function(){/**
   * Initialize this instance.
   */function e(){A.default(this,e),eC.set(this,Object.create(null))}// Implementation
return _.default(e,[{key:"addEventListener",value:function(e,t,r){var n=eR(this),o=(ex(t),"object"===k.default(r)&&null!==r)?{type:String(e),callback:null!=t?t:void 0,capture:!!r.capture,passive:!!r.passive,once:!!r.once,signal:null!==(l=r.signal)&&void 0!==l?l:void 0}:{type:String(e),callback:null!=t?t:void 0,capture:!!r,passive:!1,once:!1,signal:void 0},i=o.callback,s=o.capture,a=o.once,c=o.passive,u=o.signal,p=o.type;if(null!=i&&(null==u||!u.aborted)){var l,f,h=eS(n,p),d=ey(h,i,s);// Find existing listener.
if(-1!==d){f=h.listeners[d],W.warn(eh(f)?"capture":"bubble",f.callback),ed(f)!==c&&H.warn("passive"),ev(f)!==a&&H.warn("once"),f.signal!==u&&H.warn("signal");return}// Add the new listener.
eg(h,i,s,c,a,u)}}// Implementation
},{key:"removeEventListener",value:function(e,t,r){var n=eR(this),o=(ex(t),"object"===k.default(r)&&null!==r)?{type:String(e),callback:null!=t?t:void 0,capture:!!r.capture}:{type:String(e),callback:null!=t?t:void 0,capture:!!r},i=o.callback,s=o.capture,a=n[o.type];null!=i&&a&&em(a,i,s)}// Implementation
},{key:"dispatchEvent",value:function(e){var t,n=eR(this)[String(e.type)];if(null==n)return!0;var s=e instanceof $?e:ec.wrap(e),a=er(s,"event");if(a.dispatchFlag)throw t="This event has been in dispatching.",B.DOMException?new B.DOMException(t,"InvalidStateError"):(null==o&&(Object.defineProperties((o=/*#__PURE__*/function(e){O.default(r,e);var t=M(r);function r(e){var n;return A.default(this,r),n=t.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(x.default(n),r),n}// eslint-disable-next-line class-methods-use-this
return _.default(r,[{key:"code",get:function(){return 11}// eslint-disable-next-line class-methods-use-this
},{key:"name",get:function(){return"InvalidStateError"}}]),r}(/*#__PURE__*/I.default(Error))).prototype,{code:{enumerable:!0},name:{enumerable:!0}}),ea(o),ea(o.prototype)),new o(t));if(a.dispatchFlag=!0,a.target=a.currentTarget=this,!a.stopPropagationFlag){var c=n.cow,u=n.listeners;// Set copy-on-write flag.
n.cow=!0;// Call listeners.
for(var p=0;p<u.length;++p){var l=u[p];// Skip if removed.
if((8&l.flags)!=8/* Removed */&&(ev(l)&&eb(n,p,!c)&&// same as the current value.
(p-=1),// Call this listener with the `passive` flag.
a.inPassiveListenerFlag=ed(l),/**
 * Call an event listener.
 * @param listener The listener to call.
 * @param target The event target object for `thisArg`.
 * @param event The event object for the first argument.
 * @param attribute `true` if this callback is an event attribute handler.
 */function(e,t,n){var o=e.callback;try{"function"==typeof o?o.call(t,n):"function"==typeof o.handleEvent&&o.handleEvent(n)}catch(e){!/**
 * Print a error message.
 * @param maybeError The error object.
 */function(e){try{var t=e instanceof Error?e:Error(z(e));// Call the user-defined error handler if exists.
if(r){r(t);return}// Dispatch an `error` event if this is on a browser.
if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if(void 0!==i&&"function"==typeof i.emit){i.emit("uncaughtException",t);return}// Otherwise, print the error.
console.error(t)}catch(e){}}(e)}}(l,this,s),a.inPassiveListenerFlag=!1,a.stopImmediatePropagationFlag))break}// Restore copy-on-write flag.
c||(n.cow=!1)}return a.target=null,a.currentTarget=null,a.stopImmediatePropagationFlag=!1,a.stopPropagationFlag=!1,a.dispatchFlag=!1,!a.canceledFlag}}]),e}(),eC=new WeakMap;/**
 * Get private data.
 * @param target The event target object to get private data.
 * @param name The variable name to report.
 * @returns The private data of the event.
 */function eR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"this",r=eC.get(e);return D(null!=r,"'%s' must be an object that EventTarget constructor created, but got another one: %o",t,e),r}/**
 * Assert the type of 'callback' argument.
 * @param callback The callback to check.
 */function ex(e){if("function"!=typeof e&&("object"!==k.default(e)||null===e||"function"!=typeof e.handleEvent)){if(null==e||"object"===k.default(e)){J.warn(e);return}throw TypeError(L(J.message,[e]))}}for(var eO=Object.getOwnPropertyNames(eP.prototype),ew=0;ew<eO.length;++ew)"constructor"!==eO[ew]&&Object.defineProperty(eP.prototype,eO[ew],{enumerable:!0});// Ensure `eventTarget instanceof window.EventTarget` is `true`.
/**
 * Get the current value of a given event attribute.
 * @param target The `EventTarget` object to get.
 * @param type The event type.
 */function eE(e,t){var r,n;return null!==(n=null===(r=eR(e,"target")[t])||void 0===r?void 0:r.attrCallback)&&void 0!==n?n:null}/**
 * Set an event listener to a given event attribute.
 * @param target The `EventTarget` object to set.
 * @param type The event type.
 * @param callback The event listener.
 */function eI(e,t,r){var n,o;null!=r&&"function"!=typeof r&&Q.warn(r),"function"==typeof r||"object"===k.default(r)&&null!==r?((n=eS(eR(e,"target"),String(t))).attrCallback=r,null==n.attrListener&&(n.attrListener=eg(n,function(e){var t=n.attrCallback;"function"==typeof t&&t.call(this,e)},!1,!1,!1,void 0))):(o=eR(e,"target")[String(t)])&&o.attrListener&&(em(o,o.attrListener.callback,!1),o.attrCallback=o.attrListener=void 0)}//------------------------------------------------------------------------------
/**
 * Define an event attribute.
 * @param target The `EventTarget` object to define an event attribute.
 * @param type The event type to define.
 * @param _eventClass Unused, but to infer `Event` class type.
 * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.
 */function eT(e,t,r){Object.defineProperty(e,"on".concat(t),{get:function(){return eE(this,t)},set:function(e){eI(this,t,e)},configurable:!0,enumerable:!0})}void 0!==B&&void 0!==B.EventTarget&&Object.setPrototypeOf(eP.prototype,B.EventTarget.prototype),e.exports.Event=$,e.exports.EventTarget=eP,e.exports.default=eP,e.exports.defineCustomEventTarget=/**
 * Define an `EventTarget` class that has event attibutes.
 * @param types The types to define event attributes.
 * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.
 */function(){for(var e=/*#__PURE__*/function(e){O.default(r,e);var t=M(r);function r(){return A.default(this,r),t.apply(this,arguments)}return r}(eP),t=0;t<arguments.length;++t)eT(e.prototype,t<0||arguments.length<=t?void 0:arguments[t]);return e},e.exports.defineEventAttribute=eT,e.exports.getEventAttributeValue=eE,e.exports.setErrorHandler=/**
 * Set the error handler.
 * @param value The error handler to set.
 */function(e){D("function"==typeof e||void 0===e,"The error handler must be a function or undefined, but got %o.",e),r=e},e.exports.setEventAttributeValue=eI,e.exports.setWarningHandler=/**
 * Set the warning handler.
 * @param value The warning handler to set.
 */function(e){D("function"==typeof e||void 0===e,"The warning handler must be a function or undefined, but got %o.",e),n=e}}),P.register("cIQAh",function(e,t){// shim for using process in browser
var r,n,o,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);// if setTimeout wasn't available but was latter defined
if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{// when when somebody has screwed with setTimeout but no I.E. maddness
return r(e,0)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
return r.call(null,e,0)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u=[],p=!1,l=-1;function f(){p&&o&&(p=!1,o.length?u=o.concat(u):l=-1,u.length&&h())}function h(){if(!p){var e=c(f);p=!0;for(var t=u.length;t;){for(o=u,u=[];++l<t;)o&&o[l].run();l=-1,t=u.length}o=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);// if clearTimeout wasn't available but was latter defined
if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
return n.call(null,e)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
// Some versions of I.E. have different rules for clearTimeout vs setTimeout
return n.call(this,e)}}}(e)}}// v8 likes predictible objects
function d(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||p||c(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}),P.register("a3no4",function(e,t){var r=P("1HiBS"),n=P("8stmY"),o=P("e1jTH"),i=P("a56Ey");e.exports=function(e){return r(e)||n(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("1HiBS",function(e,t){var r=P("kfSpe");e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("kfSpe",function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("8stmY",function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("e1jTH",function(e,t){var r=P("kfSpe");e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("a56Ey",function(e,t){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("3YU1J",function(e,t){var r=P("ajXjM"),n=P("7BNdl");function o(e,t,i,s){return(o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,o,i){var s,a=r(e,t);if(a){if((s=Object.getOwnPropertyDescriptor(a,t)).set)return s.set.call(i,o),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(i,t)){if(!s.writable)return!1;s.value=o,Object.defineProperty(i,t,s)}else n(i,t,o);return!0})(e,t,i,s)}e.exports=function(e,t,r,n,i){if(!o(e,t,r,n||e)&&i)throw Error("failed to set property");return r},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("ajXjM",function(e,t){var r=P("kzUdv");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("7BNdl",function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("h7B0G",function(e,t){var r=P("ajXjM");function n(){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=n=Reflect.get.bind():e.exports=n=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("lbV37",function(e,t){var r=P("kzUdv"),n=P("1xeBK"),o=P("5yhn0"),i=P("gijNY");function s(t){var a="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(e))return a.get(e);a.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("5yhn0",function(e,t){e.exports=function(e){return -1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("gijNY",function(e,t){var r=P("1xeBK"),n=P("czV73");function o(t,i,s){return n()?e.exports=o=Reflect.construct.bind():e.exports=o=function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports,o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("czV73",function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("dUp1o",function(e,t){g(e.exports),m(e.exports,"default",()=>n);var r=P("eoW3W"),n=// ../p-defer/index.js
function(){var e={};return e.promise=new(r&&r.__esModule?r.default:r)(function(t,r){e.resolve=t,e.reject=r}),e}}),P.register("eoW3W",function(e,t){e.exports=P("4AkVf")}),P.register("4AkVf",function(e,t){var r=P("lqq9U");P("2SVrA"),e.exports=r}),P.register("lqq9U",function(e,t){P("dys8K"),P("1Fv1S"),P("6y3lM"),P("e9wCa"),P("l5Tyo"),P("iNOlm"),P("4JrOG"),P("aJE5j");var r=P("Olmz6");e.exports=r.Promise}),P.register("dys8K",function(e,t){// TODO: Remove this module from `core-js@4` since it's replaced to module below
P("keYoo")}),P.register("keYoo",function(e,t){var r=P("eeBqG"),n=P("adxOP"),o=P("8oeIE"),i=P("1M4wk"),s=P("dwLNy"),a=P("dGz1F"),c=P("kpY9i"),u=P("aAcKG"),p=P("5z7BT"),l=P("aTYB6"),f=P("8t9Za"),h=P("b7w8k"),d=P("5kvFi")("toStringTag"),v=Error,y=[].push,g=function(e,t/* , options */){var r,s=n(m,this);i?r=i(v(),s?o(this):m):c(r=s?this:a(m),d,"Error"),void 0!==t&&c(r,"message",h(t)),l(r,g,r.stack,1),arguments.length>2&&p(r,arguments[2]);var u=[];return f(e,y,{that:u}),c(r,"errors",u),r};i?i(g,v):s(g,v,{name:!0});var m=g.prototype=a(v.prototype,{constructor:u(1,g),message:u(1,""),name:u(1,"AggregateError")});// `AggregateError` constructor
// https://tc39.es/ecma262/#sec-aggregate-error-constructor
r({global:!0,constructor:!0,arity:2},{AggregateError:g})}),P.register("eeBqG",function(e,t){var r=P("gE1Fb"),n=P("7h72j"),o=P("2kh0S"),i=P("5UejN"),s=P("dfV1h").f,a=P("8bZGN"),c=P("Olmz6"),u=P("9iiMd"),p=P("kpY9i"),l=P("k4SmH"),f=function(e){var t=function(r,o,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,o)}return new e(r,o,i)}return n(e,this,arguments)};return t.prototype=e.prototype,t};/*
  options.target         - name of the target object
  options.global         - target is the global object
  options.stat           - export as static methods of target
  options.proto          - export as prototype methods of target
  options.real           - real prototype method for the `pure` version
  options.forced         - export even if the native feature is available
  options.bind           - bind methods to the target, required for the `pure` version
  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe         - use the simple assignment of property instead of delete + defineProperty
  options.sham           - add a flag to not completely full polyfills
  options.enumerable     - export as enumerable property
  options.dontCallGetSet - prevent calling a getter on target
  options.name           - the .name of the function if it does not match the key
*/e.exports=function(e,t){var n,h,d,v,y,g,m,b,S,P=e.target,C=e.global,R=e.stat,x=e.proto,O=C?r:R?r[P]:(r[P]||{}).prototype,w=C?c:c[P]||p(c,P,{})[P],E=w.prototype;for(v in t)// contains in native
h=!(n=a(C?v:P+(R?".":"#")+v,e.forced))&&O&&l(O,v),g=w[v],h&&(m=e.dontCallGetSet?(S=s(O,v))&&S.value:O[v]),// export native or implementation
y=h&&m?m:t[v],(!h||typeof g!=typeof y)&&(b=e.bind&&h?u(y,r):e.wrap&&h?f(y):x&&i(y)?o(y):y,(e.sham||y&&y.sham||g&&g.sham)&&p(b,"sham",!0),p(w,v,b),x&&(l(c,d=P+"Prototype")||p(c,d,{}),// export virtual prototype methods
p(c[d],v,y),e.real&&E&&(n||!E[v])&&p(E,v,y)))}}),P.register("gE1Fb",function(e,t){var r=function(e){return e&&e.Math==Math&&e};// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||// eslint-disable-next-line no-restricted-globals -- safe
r("object"==typeof self&&self)||r("object"==typeof y&&y)||// eslint-disable-next-line no-new-func -- fallback
function(){return this}()||e.exports||Function("return this")()}),P.register("7h72j",function(e,t){var r=P("7Kegi"),n=Function.prototype,o=n.apply,i=n.call;// eslint-disable-next-line es/no-reflect -- safe
e.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(o):function(){return i.apply(o,arguments)})}),P.register("7Kegi",function(e,t){var r=P("41ngv");e.exports=!r(function(){// eslint-disable-next-line es/no-function-prototype-bind -- safe
var e=(function(){}).bind();// eslint-disable-next-line no-prototype-builtins -- safe
return"function"!=typeof e||e.hasOwnProperty("prototype")})}),P.register("41ngv",function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}}),P.register("2kh0S",function(e,t){var r=P("bLlIN"),n=P("ftDfc");e.exports=function(e){// Nashorn bug:
//   https://github.com/zloirock/core-js/issues/1128
//   https://github.com/zloirock/core-js/issues/1130
if("Function"===r(e))return n(e)}}),P.register("bLlIN",function(e,t){var r=P("ftDfc"),n=r({}.toString),o=r("".slice);e.exports=function(e){return o(n(e),8,-1)}}),P.register("ftDfc",function(e,t){var r=P("7Kegi"),n=Function.prototype,o=n.call,i=r&&n.bind.bind(o,o);e.exports=r?i:function(e){return function(){return o.apply(e,arguments)}}}),P.register("5UejN",function(e,t){var r=P("78uGk"),n=r.all;// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===n}:function(e){return"function"==typeof e}}),P.register("78uGk",function(e,t){var r="object"==typeof document&&document.all;e.exports={all:r,IS_HTMLDDA:void 0===r&&void 0!==r}}),P.register("dfV1h",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n=P("2aEkV"),o=P("93yYq"),i=P("bJfre"),s=P("aAcKG"),a=P("glwGn"),c=P("6HOrM"),u=P("k4SmH"),p=P("3l0ZW"),l=Object.getOwnPropertyDescriptor;r=n?l:function(e,t){if(e=a(e),t=c(t),p)try{return l(e,t)}catch(e){}if(u(e,t))return s(!o(i.f,e,t),e[t])}}),P.register("2aEkV",function(e,t){var r=P("41ngv");// Detect IE8's incomplete defineProperty implementation
e.exports=!r(function(){// eslint-disable-next-line es/no-object-defineproperty -- required for testing
return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})}),P.register("93yYq",function(e,t){var r=P("7Kegi"),n=Function.prototype.call;e.exports=r?n.bind(n):function(){return n.apply(n,arguments)}}),P.register("bJfre",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor;r=o&&!n.call({1:2},1)?function(e){var t=o(this,e);return!!t&&t.enumerable}:n}),P.register("aAcKG",function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}}),P.register("glwGn",function(e,t){// toObject with fallback for non-array-like ES3 strings
var r=P("8rIET"),n=P("bwrlj");e.exports=function(e){return r(n(e))}}),P.register("8rIET",function(e,t){var r=P("ftDfc"),n=P("41ngv"),o=P("bLlIN"),i=Object,s=r("".split);// fallback for non-array-like ES3 and non-enumerable old V8 strings
e.exports=n(function(){// throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
// eslint-disable-next-line no-prototype-builtins -- safe
return!i("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?s(e,""):i(e)}:i}),P.register("bwrlj",function(e,t){var r=P("t9ftc"),n=TypeError;// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
e.exports=function(e){if(r(e))throw n("Can't call method on "+e);return e}}),P.register("t9ftc",function(e,t){// we can't use just `it == null` since of `document.all` special case
// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec
e.exports=function(e){return null==e}}),P.register("6HOrM",function(e,t){var r=P("dXRzv"),n=P("aZBNm");// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
e.exports=function(e){var t=r(e,"string");return n(t)?t:t+""}}),P.register("dXRzv",function(e,t){var r=P("93yYq"),n=P("88FJn"),o=P("aZBNm"),i=P("ba6VP"),s=P("pnAY9"),a=P("5kvFi"),c=TypeError,u=a("toPrimitive");// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
e.exports=function(e,t){if(!n(e)||o(e))return e;var a,p=i(e,u);if(p){if(void 0===t&&(t="default"),!n(a=r(p,e,t))||o(a))return a;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}}),P.register("88FJn",function(e,t){var r=P("5UejN"),n=P("78uGk"),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}}),P.register("aZBNm",function(e,t){var r=P("49lxC"),n=P("5UejN"),o=P("adxOP"),i=P("h9FoS"),s=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return n(t)&&o(t.prototype,s(e))}}),P.register("49lxC",function(e,t){var r=P("Olmz6"),n=P("gE1Fb"),o=P("5UejN"),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(n[e]):r[e]&&r[e][t]||n[e]&&n[e][t]}}),P.register("Olmz6",function(e,t){e.exports={}}),P.register("adxOP",function(e,t){var r=P("ftDfc");e.exports=r({}.isPrototypeOf)}),P.register("h9FoS",function(e,t){/* eslint-disable es/no-symbol -- required for testing */var r=P("031Q1");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}),P.register("031Q1",function(e,t){/* eslint-disable es/no-symbol -- required for testing */var r=P("d2jNL"),n=P("41ngv"),o=P("gE1Fb").String;// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
e.exports=!!Object.getOwnPropertySymbols&&!n(function(){var e=Symbol();// Chrome 38 Symbol has incorrect toString conversion
// `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
// nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,
// of course, fail.
return!o(e)||!(Object(e) instanceof Symbol)||// Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
!Symbol.sham&&r&&r<41})}),P.register("d2jNL",function(e,t){var r,n,o=P("gE1Fb"),i=P("c6LuN"),s=o.process,a=o.Deno,c=s&&s.versions||a&&a.version,u=c&&c.v8;u&&// in old Chrome, versions of V8 isn't V8 = Chrome / 10
// but their correct versions are not interesting for us
(n=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!n&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(n=+r[1]),e.exports=n}),P.register("c6LuN",function(e,t){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""}),P.register("ba6VP",function(e,t){var r=P("2l0n7"),n=P("t9ftc");// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
e.exports=function(e,t){var o=e[t];return n(o)?void 0:r(o)}}),P.register("2l0n7",function(e,t){var r=P("5UejN"),n=P("4HgaB"),o=TypeError;// `Assert: IsCallable(argument) is true`
e.exports=function(e){if(r(e))return e;throw o(n(e)+" is not a function")}}),P.register("4HgaB",function(e,t){var r=String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}}),P.register("pnAY9",function(e,t){var r=P("93yYq"),n=P("5UejN"),o=P("88FJn"),i=TypeError;// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
e.exports=function(e,t){var s,a;if("string"===t&&n(s=e.toString)&&!o(a=r(s,e))||n(s=e.valueOf)&&!o(a=r(s,e))||"string"!==t&&n(s=e.toString)&&!o(a=r(s,e)))return a;throw i("Can't convert object to primitive value")}}),P.register("5kvFi",function(e,t){var r=P("gE1Fb"),n=P("2o2LA"),o=P("k4SmH"),i=P("8uTWO"),s=P("031Q1"),a=P("h9FoS"),c=r.Symbol,u=n("wks"),p=a?c.for||c:c&&c.withoutSetter||i;e.exports=function(e){return o(u,e)||(u[e]=s&&o(c,e)?c[e]:p("Symbol."+e)),u[e]}}),P.register("2o2LA",function(e,t){var r=P("dLfM4"),n=P("b4QZo");(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})}),P.register("dLfM4",function(e,t){e.exports=!0}),P.register("b4QZo",function(e,t){var r=P("gE1Fb"),n=P("36GDH"),o="__core-js_shared__",i=r[o]||n(o,{});e.exports=i}),P.register("36GDH",function(e,t){var r=P("gE1Fb"),n=Object.defineProperty;e.exports=function(e,t){try{n(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}}),P.register("k4SmH",function(e,t){var r=P("ftDfc"),n=P("eDOMH"),o=r({}.hasOwnProperty);// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
// eslint-disable-next-line es/no-object-hasown -- safe
e.exports=Object.hasOwn||function(e,t){return o(n(e),t)}}),P.register("eDOMH",function(e,t){var r=P("bwrlj"),n=Object;// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
e.exports=function(e){return n(r(e))}}),P.register("8uTWO",function(e,t){var r=P("ftDfc"),n=0,o=Math.random(),i=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++n+o,36)}}),P.register("3l0ZW",function(e,t){var r=P("2aEkV"),n=P("41ngv"),o=P("e8zKX");// Thanks to IE8 for its funny defineProperty
e.exports=!r&&!n(function(){// eslint-disable-next-line es/no-object-defineproperty -- required for testing
return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})}),P.register("e8zKX",function(e,t){var r=P("gE1Fb"),n=P("88FJn"),o=r.document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}}),P.register("8bZGN",function(e,t){var r=P("41ngv"),n=P("5UejN"),o=/#|\.prototype\./,i=function(e,t){var o=a[s(e)];return o==u||o!=c&&(n(t)?r(t):!!t)},s=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i}),P.register("9iiMd",function(e,t){var r=P("2kh0S"),n=P("2l0n7"),o=P("7Kegi"),i=r(r.bind);// optional / simple context binding
e.exports=function(e,t){return n(e),void 0===t?e:o?i(e,t):function(){return e.apply(t,arguments)}}}),P.register("kpY9i",function(e,t){var r=P("2aEkV"),n=P("4Z5EA"),o=P("aAcKG");e.exports=r?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}}),P.register("4Z5EA",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n=P("2aEkV"),o=P("3l0ZW"),i=P("7RoK2"),s=P("9ORS6"),a=P("6HOrM"),c=TypeError,u=Object.defineProperty,p=Object.getOwnPropertyDescriptor,l="enumerable",f="configurable",h="writable";r=n?i?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&h in r&&!r[h]){var n=p(e,t);n&&n[h]&&(e[t]=r.value,r={configurable:f in r?r[f]:n[f],enumerable:l in r?r[l]:n[l],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),o)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}}),P.register("7RoK2",function(e,t){var r=P("2aEkV"),n=P("41ngv");// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
e.exports=r&&n(function(){// eslint-disable-next-line es/no-object-defineproperty -- required for testing
return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})}),P.register("9ORS6",function(e,t){var r=P("88FJn"),n=String,o=TypeError;// `Assert: Type(argument) is Object`
e.exports=function(e){if(r(e))return e;throw o(n(e)+" is not an object")}}),P.register("8oeIE",function(e,t){var r=P("k4SmH"),n=P("5UejN"),o=P("eDOMH"),i=P("glcDo"),s=P("eldsf"),a=i("IE_PROTO"),c=Object,u=c.prototype;// `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
// eslint-disable-next-line es/no-object-getprototypeof -- safe
e.exports=s?c.getPrototypeOf:function(e){var t=o(e);if(r(t,a))return t[a];var i=t.constructor;return n(i)&&t instanceof i?i.prototype:t instanceof c?u:null}}),P.register("glcDo",function(e,t){var r=P("2o2LA"),n=P("8uTWO"),o=r("keys");e.exports=function(e){return o[e]||(o[e]=n(e))}}),P.register("eldsf",function(e,t){var r=P("41ngv");e.exports=!r(function(){function e(){}// eslint-disable-next-line es/no-object-getprototypeof -- required for testing
return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})}),P.register("1M4wk",function(e,t){/* eslint-disable no-proto -- safe */var r=P("6P8iL"),n=P("9ORS6"),o=P("aGW1d");// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=r(Object.prototype,"__proto__","set"))(i,[]),t=i instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e(r,i):r.__proto__=i,r}}():void 0)}),P.register("6P8iL",function(e,t){var r=P("ftDfc"),n=P("2l0n7");e.exports=function(e,t,o){try{// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
return r(n(Object.getOwnPropertyDescriptor(e,t)[o]))}catch(e){}}}),P.register("aGW1d",function(e,t){var r=P("5UejN"),n=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+n(e)+" as a prototype")}}),P.register("dwLNy",function(e,t){var r=P("k4SmH"),n=P("hzl6o"),o=P("dfV1h"),i=P("4Z5EA");e.exports=function(e,t,s){for(var a=n(t),c=i.f,u=o.f,p=0;p<a.length;p++){var l=a[p];r(e,l)||s&&r(s,l)||c(e,l,u(t,l))}}}),P.register("hzl6o",function(e,t){var r=P("49lxC"),n=P("ftDfc"),o=P("76EAq"),i=P("6qQgJ"),s=P("9ORS6"),a=n([].concat);// all object keys, includes non-enumerable and symbols
e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=i.f;return r?a(t,r(e)):t}}),P.register("76EAq",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n=P("eB2qf"),o=P("h3DVS").concat("length","prototype");r=Object.getOwnPropertyNames||function(e){return n(e,o)}}),P.register("eB2qf",function(e,t){var r=P("ftDfc"),n=P("k4SmH"),o=P("glwGn"),i=P("8pLpJ").indexOf,s=P("6gVkg"),a=r([].push);e.exports=function(e,t){var r,c=o(e),u=0,p=[];for(r in c)!n(s,r)&&n(c,r)&&a(p,r);// Don't enum bug & hidden keys
for(;t.length>u;)n(c,r=t[u++])&&(~i(p,r)||a(p,r));return p}}),P.register("8pLpJ",function(e,t){var r=P("glwGn"),n=P("kUEN9"),o=P("myRD3"),i=function(e){return function(t,i,s){var a,c=r(t),u=o(c),p=n(s,u);// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare -- NaN check
if(e&&i!=i){for(;u>p;)// eslint-disable-next-line no-self-compare -- NaN check
if((a=c[p++])!=a)return!0;// Array#indexOf ignores holes, Array#includes - not
}else for(;u>p;p++)if((e||p in c)&&c[p]===i)return e||p||0;return!e&&-1}};e.exports={// `Array.prototype.includes` method
// https://tc39.es/ecma262/#sec-array.prototype.includes
includes:i(!0),// `Array.prototype.indexOf` method
// https://tc39.es/ecma262/#sec-array.prototype.indexof
indexOf:i(!1)}}),P.register("kUEN9",function(e,t){var r=P("4vlVl"),n=Math.max,o=Math.min;// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
e.exports=function(e,t){var i=r(e);return i<0?n(i+t,0):o(i,t)}}),P.register("4vlVl",function(e,t){var r=P("7cNgN");// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
e.exports=function(e){var t=+e;// eslint-disable-next-line no-self-compare -- NaN check
return t!=t||0===t?0:r(t)}}),P.register("7cNgN",function(e,t){var r=Math.ceil,n=Math.floor;// `Math.trunc` method
// https://tc39.es/ecma262/#sec-math.trunc
// eslint-disable-next-line es/no-math-trunc -- safe
e.exports=Math.trunc||function(e){var t=+e;return(t>0?n:r)(t)}}),P.register("myRD3",function(e,t){var r=P("fjGzl");// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
e.exports=function(e){return r(e.length)}}),P.register("fjGzl",function(e,t){var r=P("4vlVl"),n=Math.min;// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
e.exports=function(e){return e>0?n(r(e),9007199254740991):0;// 2 ** 53 - 1 == 9007199254740991
}}),P.register("6gVkg",function(e,t){e.exports={}}),P.register("h3DVS",function(e,t){// IE8- don't enum bug keys
e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),P.register("6qQgJ",function(e,t){var r;m(e.exports,"f",()=>r,e=>r=e),r=Object.getOwnPropertySymbols}),P.register("dGz1F",function(e,t){/* global ActiveXObject -- old IE, WSH */var r,n=P("9ORS6"),o=P("40bab"),i=P("h3DVS"),s=P("6gVkg"),a=P("lD6Vc"),c=P("e8zKX"),u=P("glcDo"),p="prototype",l="script",f=u("IE_PROTO"),h=function(){},d=function(e){return"<"+l+">"+e+"</"+l+">"},v=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){// Thrash, waste and sodomy: IE GC bug
var e,t=c("iframe");return t.style.display="none",a.appendChild(t),// https://github.com/zloirock/core-js/issues/475
t.src=String("java"+l+":"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F},g=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}g="undefined"!=typeof document?document.domain&&r?v(r)// old IE
:y():v(r);// WSH
for(var e=i.length;e--;)delete g[p][i[e]];return g()};s[f]=!0,// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
// eslint-disable-next-line es/no-object-create -- safe
e.exports=Object.create||function(e,t){var r;return null!==e?(h[p]=n(e),r=new h,h[p]=null,// add "__proto__" for Object.getPrototypeOf polyfill
r[f]=e):r=g(),void 0===t?r:o.f(r,t)}}),P.register("40bab",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n=P("2aEkV"),o=P("7RoK2"),i=P("4Z5EA"),s=P("9ORS6"),a=P("glwGn"),c=P("b7ejo");r=n&&!o?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),o=c(t),u=o.length,p=0;u>p;)i.f(e,r=o[p++],n[r]);return e}}),P.register("b7ejo",function(e,t){var r=P("eB2qf"),n=P("h3DVS");// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
e.exports=Object.keys||function(e){return r(e,n)}}),P.register("lD6Vc",function(e,t){var r=P("49lxC");e.exports=r("document","documentElement")}),P.register("5z7BT",function(e,t){var r=P("88FJn"),n=P("kpY9i");// `InstallErrorCause` abstract operation
// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause
e.exports=function(e,t){r(t)&&"cause"in t&&n(e,"cause",t.cause)}}),P.register("aTYB6",function(e,t){var r=P("kpY9i"),n=P("37Imt"),o=P("cd7hf"),i=Error.captureStackTrace;e.exports=function(e,t,s,a){o&&(i?i(e,t):r(e,"stack",n(s,a)))}}),P.register("37Imt",function(e,t){var r=P("ftDfc"),n=Error,o=r("".replace),i=String(n("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,a=s.test(i);e.exports=function(e,t){if(a&&"string"==typeof e&&!n.prepareStackTrace)for(;t--;)e=o(e,s,"");return e}}),P.register("cd7hf",function(e,t){var r=P("41ngv"),n=P("aAcKG");e.exports=!r(function(){var e=Error("a");return!("stack"in e)||(// eslint-disable-next-line es/no-object-defineproperty -- safe
Object.defineProperty(e,"stack",n(1,7)),7!==e.stack)})}),P.register("8t9Za",function(e,t){var r=P("9iiMd"),n=P("93yYq"),o=P("9ORS6"),i=P("4HgaB"),s=P("d2AVJ"),a=P("myRD3"),c=P("adxOP"),u=P("ePhAy"),p=P("j7QFE"),l=P("3lfL2"),f=TypeError,h=function(e,t){this.stopped=e,this.result=t},d=h.prototype;e.exports=function(e,t,v){var y,g,m,b,S,P,C,R=v&&v.that,x=!!(v&&v.AS_ENTRIES),O=!!(v&&v.IS_RECORD),w=!!(v&&v.IS_ITERATOR),E=!!(v&&v.INTERRUPTED),I=r(t,R),T=function(e){return y&&l(y,"normal",e),new h(!0,e)},A=function(e){return x?(o(e),E?I(e[0],e[1],T):I(e[0],e[1])):E?I(e,T):I(e)};if(O)y=e.iterator;else if(w)y=e;else{if(!(g=p(e)))throw f(i(e)+" is not iterable");// optimisation for array iterators
if(s(g)){for(m=0,b=a(e);b>m;m++)if((S=A(e[m]))&&c(d,S))return S;return new h(!1)}y=u(e,g)}for(P=O?e.next:y.next;!(C=n(P,y)).done;){try{S=A(C.value)}catch(e){l(y,"throw",e)}if("object"==typeof S&&S&&c(d,S))return S}return new h(!1)}}),P.register("d2AVJ",function(e,t){var r=P("5kvFi"),n=P("1AVYy"),o=r("iterator"),i=Array.prototype;// check on default Array iterator
e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}}),P.register("1AVYy",function(e,t){e.exports={}}),P.register("ePhAy",function(e,t){var r=P("93yYq"),n=P("2l0n7"),o=P("9ORS6"),i=P("4HgaB"),s=P("j7QFE"),a=TypeError;e.exports=function(e,t){var c=arguments.length<2?s(e):t;if(n(c))return o(r(c,e));throw a(i(e)+" is not iterable")}}),P.register("j7QFE",function(e,t){var r=P("8DJCy"),n=P("ba6VP"),o=P("t9ftc"),i=P("1AVYy"),s=P("5kvFi")("iterator");e.exports=function(e){if(!o(e))return n(e,s)||n(e,"@@iterator")||i[r(e)]}}),P.register("8DJCy",function(e,t){var r=P("fATWD"),n=P("5UejN"),o=P("bLlIN"),i=P("5kvFi")("toStringTag"),s=Object,a="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(e){}};// getting tag from ES6+ `Object.prototype.toString`
e.exports=r?o:function(e){var t,r,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=c(t=s(e),i))?r:a?o(t):"Object"==(u=o(t))&&n(t.callee)?"Arguments":u}}),P.register("fATWD",function(e,t){var r=P("5kvFi")("toStringTag"),n={};n[r]="z",e.exports="[object z]"===String(n)}),P.register("3lfL2",function(e,t){var r=P("93yYq"),n=P("9ORS6"),o=P("ba6VP");e.exports=function(e,t,i){var s,a;n(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw i;return i}s=r(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw i;if(a)throw s;return n(s),i}}),P.register("b7w8k",function(e,t){var r=P("dB4v1");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}}),P.register("dB4v1",function(e,t){var r=P("8DJCy"),n=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}}),P.register("1Fv1S",function(e,t){var r=P("glwGn"),n=P("UJJWW"),o=P("1AVYy"),i=P("jC1Lt"),s=P("4Z5EA").f,a=P("2t0aR"),c=P("7dgPl"),u=P("dLfM4"),p=P("2aEkV"),l="Array Iterator",f=i.set,h=i.getterFor(l);// `Array.prototype.entries` method
// https://tc39.es/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.es/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.es/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.es/ecma262/#sec-createarrayiterator
e.exports=a(Array,"Array",function(e,t){f(this,{type:l,target:r(e),index:0,kind:t// kind
});// `%ArrayIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next
},function(){var e=h(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,c(void 0,!0)):"keys"==r?c(n,!1):"values"==r?c(t[n],!1):c([n,t[n]],!1)},"values");// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.es/ecma262/#sec-createunmappedargumentsobject
// https://tc39.es/ecma262/#sec-createmappedargumentsobject
var d=o.Arguments=o.Array;// V8 ~ Chrome 45- bug
if(// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
n("keys"),n("values"),n("entries"),!u&&p&&"values"!==d.name)try{s(d,"name",{value:"values"})}catch(e){}}),P.register("UJJWW",function(e,t){e.exports=function(){}}),P.register("jC1Lt",function(e,t){var r,n,o,i=P("d5sML"),s=P("gE1Fb"),a=P("88FJn"),c=P("kpY9i"),u=P("k4SmH"),p=P("b4QZo"),l=P("glcDo"),f=P("6gVkg"),h="Object already initialized",d=s.TypeError,v=s.WeakMap;if(i||p.state){var y=p.state||(p.state=new v);/* eslint-disable no-self-assign -- prototype methods protection */y.get=y.get,y.has=y.has,y.set=y.set,/* eslint-enable no-self-assign -- prototype methods protection */r=function(e,t){if(y.has(e))throw d(h);return t.facade=e,y.set(e,t),t},n=function(e){return y.get(e)||{}},o=function(e){return y.has(e)}}else{var g=l("state");f[g]=!0,r=function(e,t){if(u(e,g))throw d(h);return t.facade=e,c(e,g,t),t},n=function(e){return u(e,g)?e[g]:{}},o=function(e){return u(e,g)}}e.exports={set:r,get:n,has:o,enforce:function(e){return o(e)?n(e):r(e,{})},getterFor:function(e){return function(t){var r;if(!a(t)||(r=n(t)).type!==e)throw d("Incompatible receiver, "+e+" required");return r}}}}),P.register("d5sML",function(e,t){var r=P("gE1Fb"),n=P("5UejN"),o=r.WeakMap;e.exports=n(o)&&/native code/.test(String(o))}),P.register("2t0aR",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("dLfM4"),i=P("g6BEr"),s=P("5UejN"),a=P("c44oJ"),c=P("8oeIE"),u=P("1M4wk"),p=P("3lslz"),l=P("kpY9i"),f=P("dSFuu"),h=P("5kvFi"),d=P("1AVYy"),v=P("9zU4H"),y=i.PROPER,g=i.CONFIGURABLE,m=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,S=h("iterator"),C="keys",R="values",x="entries",O=function(){return this};e.exports=function(e,t,i,h,v,P,w){a(i,t,h);var E,I,T,A=function(e){if(e===v&&j)return j;if(!b&&e in M)return M[e];switch(e){case C:case R:case x:return function(){return new i(this,e)}}return function(){return new i(this)}},_=t+" Iterator",k=!1,M=e.prototype,N=M[S]||M["@@iterator"]||v&&M[v],j=!b&&N||A(v),D="Array"==t&&M.entries||N;// export additional methods
if(D&&(E=c(D.call(new e)))!==Object.prototype&&E.next&&(o||c(E)===m||(u?u(E,m):s(E[S])||f(E,S,O)),// Set @@toStringTag to native iterators
p(E,_,!0,!0),o&&(d[_]=O)),y&&v==R&&N&&N.name!==R&&(!o&&g?l(M,"name",R):(k=!0,j=function(){return n(N,this)})),v){if(I={values:A(R),keys:P?j:A(C),entries:A(x)},w)for(T in I)!b&&!k&&T in M||f(M,T,I[T]);else r({target:t,proto:!0,forced:b||k},I)}return(!o||w)&&M[S]!==j&&f(M,S,j,{name:v}),d[t]=j,I}}),P.register("g6BEr",function(e,t){var r=P("2aEkV"),n=P("k4SmH"),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=n(o,"name"),a=s&&(!r||r&&i(o,"name").configurable);e.exports={EXISTS:s,PROPER:s&&"something"===(function(){}).name,CONFIGURABLE:a}}),P.register("c44oJ",function(e,t){var r=P("9zU4H").IteratorPrototype,n=P("dGz1F"),o=P("aAcKG"),i=P("3lslz"),s=P("1AVYy"),a=function(){return this};e.exports=function(e,t,c,u){var p=t+" Iterator";return e.prototype=n(r,{next:o(+!u,c)}),i(e,p,!1,!0),s[p]=a,e}}),P.register("9zU4H",function(e,t){var r,n,o,i=P("41ngv"),s=P("5UejN"),a=P("88FJn"),c=P("dGz1F"),u=P("8oeIE"),p=P("dSFuu"),l=P("5kvFi"),f=P("dLfM4"),h=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(n=u(u(o)))!==Object.prototype&&(r=n):d=!0),!a(r)||i(function(){var e={};// FF44- legacy iterators case
return r[h].call(e)!==e})?r={}:f&&(r=c(r)),s(r[h])||p(r,h,function(){return this}),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}}),P.register("dSFuu",function(e,t){var r=P("kpY9i");e.exports=function(e,t,n,o){return o&&o.enumerable?e[t]=n:r(e,t,n),e}}),P.register("3lslz",function(e,t){var r=P("fATWD"),n=P("4Z5EA").f,o=P("kpY9i"),i=P("k4SmH"),s=P("351FU"),a=P("5kvFi")("toStringTag");e.exports=function(e,t,c,u){if(e){var p=c?e:e.prototype;i(p,a)||n(p,a,{configurable:!0,value:t}),u&&!r&&o(p,"toString",s)}}}),P.register("351FU",function(e,t){var r=P("fATWD"),n=P("8DJCy");// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
e.exports=r?({}).toString:function(){return"[object "+n(this)+"]"}}),P.register("7dgPl",function(e,t){// `CreateIterResultObject` abstract operation
// https://tc39.es/ecma262/#sec-createiterresultobject
e.exports=function(e,t){return{value:e,done:t}}}),P.register("6y3lM",function(e,t){// empty
}),P.register("e9wCa",function(e,t){// TODO: Remove this module from `core-js@4` since it's split to modules listed below
P("anaxG"),P("1A8Ik"),P("6Do6y"),P("iV3Fy"),P("hRGzG"),P("5Rn4Z")}),P.register("anaxG",function(e,t){var r,n,o,i,s=P("eeBqG"),a=P("dLfM4"),c=P("c7Y4Q"),u=P("gE1Fb"),p=P("93yYq"),l=P("dSFuu"),f=P("1M4wk"),h=P("3lslz"),d=P("9IWEf"),v=P("2l0n7"),y=P("5UejN"),g=P("88FJn"),m=P("fLGeN"),b=P("jKC9U"),S=P("4zenF").set,C=P("dZGyW"),R=P("8Zlse"),x=P("dNSgL"),O=P("cvHVU"),w=P("jC1Lt"),E=P("76U2L"),I=P("6QUPB"),T=P("bm7zf"),A="Promise",_=I.CONSTRUCTOR,k=I.REJECTION_EVENT,M=I.SUBCLASSING,N=w.getterFor(A),j=w.set,D=E&&E.prototype,L=E,z=D,B=u.TypeError,F=u.document,V=u.process,G=T.f,U=G,q=!!(F&&F.createEvent&&u.dispatchEvent),K="unhandledrejection",W=function(e){var t;return!!(g(e)&&y(t=e.then))&&t},H=function(e,t){var r,n,o,i=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{a?(s||(2===t.rejection&&Y(t),t.rejection=1),!0===a?r=i:(l&&l.enter(),r=a(i),l&&(l.exit(),o=!0)),r===e.promise?u(B("Promise-chain cycle")):(n=W(r))?p(n,r,c,u):c(r)):u(i)}catch(e){l&&!o&&l.exit(),u(e)}},J=function(e,t){e.notified||(e.notified=!0,C(function(){for(var r,n=e.reactions;r=n.get();)H(r,e);e.notified=!1,t&&!e.rejection&&$(e)}))},Q=function(e,t,r){var n,o;q?((n=F.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!k&&(o=u["on"+e])?o(n):e===K&&R("Unhandled promise rejection",r)},$=function(e){p(S,u,function(){var t,r=e.facade,n=e.value;if(Z(e)&&(t=x(function(){c?V.emit("unhandledRejection",n,r):Q(K,r,n)}),// Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
e.rejection=c||Z(e)?2:1,t.error))throw t.value})},Z=function(e){return 1!==e.rejection&&!e.parent},Y=function(e){p(S,u,function(){var t=e.facade;c?V.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)})},X=function(e,t,r){return function(n){e(t,n,r)}},ee=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,J(e,!0))},et=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw B("Promise can't be resolved itself");var n=W(t);n?C(function(){var r={done:!1};try{p(n,t,X(et,r,e),X(ee,r,e))}catch(t){ee(r,t,e)}}):(e.value=t,e.state=1,J(e,!1))}catch(t){ee({done:!1},t,e)}}};// constructor polyfill
if(_&&(z=// 25.4.3.1 Promise(executor)
(L=function(e){m(this,z),v(e),p(r,this);var t=N(this);try{e(X(et,t),X(ee,t))}catch(e){ee(t,e)}}).prototype,// `Promise.prototype.then` method
// https://tc39.es/ecma262/#sec-promise.prototype.then
// eslint-disable-next-line no-unused-vars -- required for `.length`
(r=function(e){j(this,{type:A,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=l(z,"then",function(e,t){var r=N(this),n=G(b(this,L));return r.parent=!0,n.ok=!y(e)||e,n.fail=y(t)&&t,n.domain=c?V.domain:void 0,0==r.state?r.reactions.add(n):C(function(){H(n,r)}),n.promise}),n=function(){var e=new r,t=N(e);this.promise=e,this.resolve=X(et,t),this.reject=X(ee,t)},T.f=G=function(e){return e===L||e===o?new n(e):U(e)},!a&&y(E)&&D!==Object.prototype)){i=D.then,M||l(D,"then",function(e,t){var r=this;return new L(function(e,t){p(i,r,e,t)}).then(e,t);// https://github.com/zloirock/core-js/issues/640
},{unsafe:!0});// make `.constructor === Promise` work for native promise-based APIs
try{delete D.constructor}catch(e){}f&&f(D,z)}s({global:!0,constructor:!0,wrap:!0,forced:_},{Promise:L}),h(L,A,!1,!0),d(A)}),P.register("c7Y4Q",function(e,t){var r=P("cIQAh"),n=P("bLlIN");e.exports=void 0!==r&&"process"==n(r)}),P.register("9IWEf",function(e,t){var r=P("49lxC"),n=P("6miXH"),o=P("5kvFi"),i=P("2aEkV"),s=o("species");e.exports=function(e){var t=r(e);i&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}}),P.register("6miXH",function(e,t){var r=P("4Z5EA");e.exports=function(e,t,n){return r.f(e,t,n)}}),P.register("fLGeN",function(e,t){var r=P("adxOP"),n=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw n("Incorrect invocation")}}),P.register("jKC9U",function(e,t){var r=P("9ORS6"),n=P("btoiU"),o=P("t9ftc"),i=P("5kvFi")("species");// `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor
e.exports=function(e,t){var s,a=r(e).constructor;return void 0===a||o(s=r(a)[i])?t:n(s)}}),P.register("btoiU",function(e,t){var r=P("962O0"),n=P("4HgaB"),o=TypeError;// `Assert: IsConstructor(argument) is true`
e.exports=function(e){if(r(e))return e;throw o(n(e)+" is not a constructor")}}),P.register("962O0",function(e,t){var r=P("ftDfc"),n=P("41ngv"),o=P("5UejN"),i=P("8DJCy"),s=P("49lxC"),a=P("5pG6F"),c=function(){},u=[],p=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,f=r(l.exec),h=!l.exec(c),d=function(e){if(!o(e))return!1;try{return p(c,u,e),!0}catch(e){return!1}},v=function(e){if(!o(e))return!1;switch(i(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{// we can't check .prototype since constructors produced by .bind haven't it
// `Function#toString` throws on some built-it function in some legacy engines
// (for example, `DOMQuad` and similar in FF41-)
return h||!!f(l,a(e))}catch(e){return!0}};v.sham=!0,// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
e.exports=!p||n(function(){var e;return d(d.call)||!d(Object)||!d(function(){e=!0})||e})?v:d}),P.register("5pG6F",function(e,t){var r=P("ftDfc"),n=P("5UejN"),o=P("b4QZo"),i=r(Function.toString);n(o.inspectSource)||(o.inspectSource=function(e){return i(e)}),e.exports=o.inspectSource}),P.register("4zenF",function(e,t){var r,n,o,i,s=P("gE1Fb"),a=P("7h72j"),c=P("9iiMd"),u=P("5UejN"),p=P("k4SmH"),l=P("41ngv"),f=P("lD6Vc"),h=P("fkmwC"),d=P("e8zKX"),v=P("ix5ub"),y=P("5cGs5"),g=P("c7Y4Q"),m=s.setImmediate,b=s.clearImmediate,S=s.process,C=s.Dispatch,R=s.Function,x=s.MessageChannel,O=s.String,w=0,E={},I="onreadystatechange";l(function(){// Deno throws a ReferenceError on `location` access without `--location` flag
r=s.location});var T=function(e){if(p(E,e)){var t=E[e];delete E[e],t()}},A=function(e){return function(){T(e)}},_=function(e){T(e.data)},k=function(e){// old engines have not location.origin
s.postMessage(O(e),r.protocol+"//"+r.host)};m&&b||(m=function(e){v(arguments.length,1);var t=u(e)?e:R(e),r=h(arguments,1);return E[++w]=function(){a(t,void 0,r)},n(w),w},b=function(e){delete E[e]},g?n=function(e){S.nextTick(A(e))}:C&&C.now?n=function(e){C.now(A(e))}:x&&!y?(i=(o=new x).port2,o.port1.onmessage=_,n=c(i.postMessage,i)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!l(k)?(n=k,s.addEventListener("message",_,!1)):n=I in d("script")?function(e){f.appendChild(d("script"))[I]=function(){f.removeChild(this),T(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:m,clear:b}}),P.register("fkmwC",function(e,t){var r=P("ftDfc");e.exports=r([].slice)}),P.register("ix5ub",function(e,t){var r=TypeError;e.exports=function(e,t){if(e<t)throw r("Not enough arguments");return e}}),P.register("5cGs5",function(e,t){var r=P("c6LuN");// eslint-disable-next-line redos/no-vulnerable -- safe
e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)}),P.register("dZGyW",function(e,t){var r,n,o,i,s,a=P("gE1Fb"),c=P("9iiMd"),u=P("dfV1h").f,p=P("4zenF").set,l=P("cvHVU"),f=P("5cGs5"),h=P("icI5q"),d=P("5QPHi"),v=P("c7Y4Q"),y=a.MutationObserver||a.WebKitMutationObserver,g=a.document,m=a.process,b=a.Promise,S=u(a,"queueMicrotask"),C=S&&S.value;// modern engines have queueMicrotask method
if(!C){var R=new l,x=function(){var e,t;for(v&&(e=m.domain)&&e.exit();t=R.get();)try{t()}catch(e){throw R.head&&r(),e}e&&e.enter()};f||v||d||!y||!g?!h&&b&&b.resolve?(// workaround of WebKit ~ iOS Safari 10.1 bug
// Promise.resolve without an argument throws an error in LG WebOS 2
(i=b.resolve(void 0)).constructor=b,s=c(i.then,i),r=function(){s(x)}):v?r=function(){m.nextTick(x)}:(// `webpack` dev server bug on IE global methods - use bind(fn, global)
p=c(p,a),r=function(){p(x)}):(n=!0,o=g.createTextNode(""),new y(x).observe(o,{characterData:!0}),r=function(){o.data=n=!n}),C=function(e){R.head||r(),R.add(e)}}e.exports=C}),P.register("cvHVU",function(e,t){var r=function(){this.head=null,this.tail=null};r.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=r}),P.register("icI5q",function(e,t){var r=P("c6LuN");e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble}),P.register("5QPHi",function(e,t){var r=P("c6LuN");e.exports=/web0s(?!.*chrome)/i.test(r)}),P.register("8Zlse",function(e,t){e.exports=function(e,t){try{// eslint-disable-next-line no-console -- safe
1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}}),P.register("dNSgL",function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}}),P.register("76U2L",function(e,t){var r=P("gE1Fb");e.exports=r.Promise}),P.register("6QUPB",function(e,t){var r=P("gE1Fb"),n=P("76U2L"),o=P("5UejN"),i=P("8bZGN"),s=P("5pG6F"),a=P("5kvFi"),c=P("cmVpu"),u=P("imGou"),p=P("dLfM4"),l=P("d2jNL"),f=n&&n.prototype,h=a("species"),d=!1,v=o(r.PromiseRejectionEvent),y=i("Promise",function(){var e=s(n),t=e!==String(n);// V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
// https://bugs.chromium.org/p/chromium/issues/detail?id=830565
// We can't detect it synchronously, so just check versions
if(!t&&66===l||p&&!(f.catch&&f.finally))return!0;// We can't use @@species feature detection in V8 since it causes
// deoptimization and performance degradation
// https://github.com/zloirock/core-js/issues/679
if(!l||l<51||!/native code/.test(e)){// Detect correctness of subclassing with @@species support
var r=new n(function(e){e(1)}),o=function(e){e(function(){},function(){})};if((r.constructor={})[h]=o,!(d=r.then(function(){}) instanceof o))return!0;// Unhandled rejections tracking support, NodeJS Promise without it fails @@species test
}return!t&&(c||u)&&!v});e.exports={CONSTRUCTOR:y,REJECTION_EVENT:v,SUBCLASSING:d}}),P.register("cmVpu",function(e,t){var r=P("imGou"),n=P("c7Y4Q");e.exports=!r&&!n&&"object"==typeof window&&"object"==typeof document}),P.register("imGou",function(e,t){/* global Deno -- Deno case */e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version}),P.register("bm7zf",function(e,t){m(e.exports,"f",()=>r,e=>r=e);var r,n=P("2l0n7"),o=TypeError,i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw o("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};r=function(e){return new i(e)}}),P.register("1A8Ik",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("2l0n7"),i=P("bm7zf"),s=P("dNSgL"),a=P("8t9Za");// `Promise.all` method
// https://tc39.es/ecma262/#sec-promise.all
r({target:"Promise",stat:!0,forced:P("dxhbo")},{all:function(e){var t=this,r=i.f(t),c=r.resolve,u=r.reject,p=s(function(){var r=o(t.resolve),i=[],s=0,p=1;a(e,function(e){var o=s++,a=!1;p++,n(r,t,e).then(function(e){!a&&(a=!0,i[o]=e,--p||c(i))},u)}),--p||c(i)});return p.error&&u(p.value),r.promise}})}),P.register("dxhbo",function(e,t){var r=P("76U2L"),n=P("9zLny"),o=P("6QUPB").CONSTRUCTOR;e.exports=o||!n(function(e){r.all(e).then(void 0,function(){})})}),P.register("9zLny",function(e,t){var r=P("5kvFi")("iterator"),n=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){n=!0}};i[r]=function(){return this},// eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing
Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var o=!1;try{var i={};i[r]=function(){return{next:function(){return{done:o=!0}}}},e(i)}catch(e){}return o}}),P.register("6Do6y",function(e,t){var r=P("eeBqG"),n=P("dLfM4"),o=P("6QUPB").CONSTRUCTOR,i=P("76U2L"),s=P("49lxC"),a=P("5UejN"),c=P("dSFuu"),u=i&&i.prototype;// makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`
if(// `Promise.prototype.catch` method
// https://tc39.es/ecma262/#sec-promise.prototype.catch
r({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(e){return this.then(void 0,e)}}),!n&&a(i)){var p=s("Promise").prototype.catch;u.catch!==p&&c(u,"catch",p,{unsafe:!0})}}),P.register("iV3Fy",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("2l0n7"),i=P("bm7zf"),s=P("dNSgL"),a=P("8t9Za");// `Promise.race` method
// https://tc39.es/ecma262/#sec-promise.race
r({target:"Promise",stat:!0,forced:P("dxhbo")},{race:function(e){var t=this,r=i.f(t),c=r.reject,u=s(function(){var i=o(t.resolve);a(e,function(e){n(i,t,e).then(r.resolve,c)})});return u.error&&c(u.value),r.promise}})}),P.register("hRGzG",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("bm7zf");// `Promise.reject` method
// https://tc39.es/ecma262/#sec-promise.reject
r({target:"Promise",stat:!0,forced:P("6QUPB").CONSTRUCTOR},{reject:function(e){var t=o.f(this);return n(t.reject,void 0,e),t.promise}})}),P.register("5Rn4Z",function(e,t){var r=P("eeBqG"),n=P("49lxC"),o=P("dLfM4"),i=P("76U2L"),s=P("6QUPB").CONSTRUCTOR,a=P("dQlau"),c=n("Promise"),u=o&&!s;// `Promise.resolve` method
// https://tc39.es/ecma262/#sec-promise.resolve
r({target:"Promise",stat:!0,forced:o||s},{resolve:function(e){return a(u&&this===c?i:this,e)}})}),P.register("dQlau",function(e,t){var r=P("9ORS6"),n=P("88FJn"),o=P("bm7zf");e.exports=function(e,t){if(r(e),n(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}}),P.register("l5Tyo",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("2l0n7"),i=P("bm7zf"),s=P("dNSgL"),a=P("8t9Za");// `Promise.allSettled` method
// https://tc39.es/ecma262/#sec-promise.allsettled
r({target:"Promise",stat:!0,forced:P("dxhbo")},{allSettled:function(e){var t=this,r=i.f(t),c=r.resolve,u=r.reject,p=s(function(){var r=o(t.resolve),i=[],s=0,u=1;a(e,function(e){var o=s++,a=!1;u++,n(r,t,e).then(function(e){!a&&(a=!0,i[o]={status:"fulfilled",value:e},--u||c(i))},function(e){!a&&(a=!0,i[o]={status:"rejected",reason:e},--u||c(i))})}),--u||c(i)});return p.error&&u(p.value),r.promise}})}),P.register("iNOlm",function(e,t){var r=P("eeBqG"),n=P("93yYq"),o=P("2l0n7"),i=P("49lxC"),s=P("bm7zf"),a=P("dNSgL"),c=P("8t9Za"),u=P("dxhbo"),p="No one promise resolved";// `Promise.any` method
// https://tc39.es/ecma262/#sec-promise.any
r({target:"Promise",stat:!0,forced:u},{any:function(e){var t=this,r=i("AggregateError"),u=s.f(t),l=u.resolve,f=u.reject,h=a(function(){var i=o(t.resolve),s=[],a=0,u=1,h=!1;c(e,function(e){var o=a++,c=!1;u++,n(i,t,e).then(function(e){c||h||(h=!0,l(e))},function(e){!c&&!h&&(c=!0,s[o]=e,--u||f(new r(s,p)))})}),--u||f(new r(s,p))});return h.error&&f(h.value),u.promise}})}),P.register("4JrOG",function(e,t){var r=P("eeBqG"),n=P("dLfM4"),o=P("76U2L"),i=P("41ngv"),s=P("49lxC"),a=P("5UejN"),c=P("jKC9U"),u=P("dQlau"),p=P("dSFuu"),l=o&&o.prototype;// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`
if(// `Promise.prototype.finally` method
// https://tc39.es/ecma262/#sec-promise.prototype.finally
r({target:"Promise",proto:!0,real:!0,forced:!!o&&i(function(){// eslint-disable-next-line unicorn/no-thenable -- required for testing
l.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=c(this,s("Promise")),r=a(e);return this.then(r?function(r){return u(t,e()).then(function(){return r})}:e,r?function(r){return u(t,e()).then(function(){throw r})}:e)}}),!n&&a(o)){var f=s("Promise").prototype.finally;l.finally!==f&&p(l,"finally",f,{unsafe:!0})}}),P.register("aJE5j",function(e,t){var r=P("bQJBk").charAt,n=P("dB4v1"),o=P("jC1Lt"),i=P("2t0aR"),s=P("7dgPl"),a="String Iterator",c=o.set,u=o.getterFor(a);// `String.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-string.prototype-@@iterator
i(String,"String",function(e){c(this,{type:a,string:n(e),index:0});// `%StringIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next
},function(){var e,t=u(this),n=t.string,o=t.index;return o>=n.length?s(void 0,!0):(e=r(n,o),t.index+=e.length,s(e,!1))})}),P.register("bQJBk",function(e,t){var r=P("ftDfc"),n=P("4vlVl"),o=P("dB4v1"),i=P("bwrlj"),s=r("".charAt),a=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,r){var u,p,l=o(i(t)),f=n(r),h=l.length;return f<0||f>=h?e?"":void 0:(u=a(l,f))<55296||u>56319||f+1===h||(p=a(l,f+1))<56320||p>57343?e?s(l,f):u:e?c(l,f,f+2):(u-55296<<10)+(p-56320)+65536}};e.exports={// `String.prototype.codePointAt` method
// https://tc39.es/ecma262/#sec-string.prototype.codepointat
codeAt:u(!1),// `String.prototype.at` method
// https://github.com/mathiasbynens/String.prototype.at
charAt:u(!0)}}),P.register("2SVrA",function(e,t){P("1Fv1S");var r=P("9lhXB"),n=P("gE1Fb"),o=P("8DJCy"),i=P("kpY9i"),s=P("1AVYy"),a=P("5kvFi")("toStringTag");for(var c in r){var u=n[c],p=u&&u.prototype;p&&o(p)!==a&&i(p,a,c),s[c]=s.Array}}),P.register("9lhXB",function(e,t){// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),P.register("4pHgM",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var r=e.call(t);if("function"==typeof r.then)return new Promise(function(e){r.then(e,function(){return e()})});return r}catch(e){}},e.exports=e.exports.default,e.exports.default=e.exports.default}),P.register("csUbC",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("jcdMA")),o=r(P("4sGTp")),i=r(P("9Elbq")),s=r(P("foXoB")),a=r(P("jyBcW")),c=r(P("1by13")),u=/*#__PURE__*/function(){var e;function t(e){var r=e.audioContext,n=e.ponyfill;(0,i.default)(this,t),this.consumer=null,this.paused=!1,this.queue=[],this.getAudioContext=(0,a.default)(function(){return r||new n.AudioContext})}return(0,s.default)(t,[{key:"pause",value:function(){this.paused=!0,this.consumer&&this.consumer.pause()}},{key:"push",value:function(e){this.queue.push(e),this.startConsumer()}},{key:"resume",value:function(){this.paused=!1,this.consumer?this.consumer.resume():this.startConsumer()}},{key:"speaking",get:function(){return!!this.consumer}},{key:"startConsumer",value:(e=(0,o.default)(/*#__PURE__*/n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.paused&&this.queue.length&&!this.consumer)){e.next=7;break}return this.consumer=new c.default(this.getAudioContext()),e.next=4,this.consumer.start(this.queue);case 4:this.consumer=null,e.next=0;break;case 7:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"stop",value:function(){this.queue.splice(0),this.consumer&&this.consumer.stop()}}]),t}();e.exports.default=u}),P.register("jyBcW",function(e,t){g(e.exports),m(e.exports,"default",()=>o);var r=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var n,o,i=0;i<e.length;i++)if(!((n=e[i])===(o=t[i])||r(n)&&r(o)))return!1;return!0}function o(e,t){void 0===t&&(t=n);var r=null;function o(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var i=e.apply(this,n);return r={lastResult:i,lastArgs:n,lastThis:this},i}return o.clear=function(){r=null},o}}),P.register("1by13",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("jcdMA")),o=r(P("4sGTp")),i=r(P("9Elbq")),s=r(P("foXoB")),a=/*#__PURE__*/function(){var e;function t(e){(0,i.default)(this,t),this.audioContext=e}return(0,s.default)(t,[{key:"pause",value:function(){this.audioContext&&this.audioContext.suspend(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("pause"))}},{key:"resume",value:function(){this.audioContext&&this.audioContext.resume(),this.playingUtterance&&this.playingUtterance.dispatchEvent(new CustomEvent("resume"))}},{key:"start",value:(e=(0,o.default)(/*#__PURE__*/n.default.mark(function e(t){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.shift())){e.next=7;break}return this.playingUtterance=r,e.next=4,r.play(this.audioContext);case 4:this.playingUtterance=null,e.next=0;break;case 7:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"stop",value:function(){this.playingUtterance&&this.playingUtterance.stop(),"suspended"===this.audioContext.state&&// This would generate these events: "start", "pause", "end"
// Without this code, the "end" event will not emit until resume() is called
// Cancelling an unstarted utterance will not emit any "start" or "end" event
this.audioContext.resume()}}]),t}();e.exports.default=a}),P.register("jvXSw",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return a.apply(this,arguments)};var n=r(P("jcdMA")),o=r(P("4sGTp")),i=r(P("1F2Pq"));function s(){return(s=(0,o.default)(/*#__PURE__*/n.default.mark(function e(t){var r,o,i,s,a,c;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.customVoiceHostname,o=t.deploymentId,i=t.region,s=t.subscriptionKey,a=r||"".concat(i,".customvoice.api.speech.microsoft.com"),e.next=4,fetch("https://".concat(encodeURI(a),"/api/texttospeech/v2.0/endpoints/").concat(encodeURIComponent(o)),{headers:{accept:"application/json","ocp-apim-subscription-key":s}});case 4:if((c=e.sent).ok){e.next=7;break}throw Error("Failed to fetch custom voices");case 7:return e.abrupt("return",c.json());case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function a(){return(a=(0,o.default)(/*#__PURE__*/n.default.mark(function e(t){var r,o,a,c,u;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.customVoiceHostname,o=t.deploymentId,a=t.region,c=t.subscriptionKey,e.next=3,/* eslint no-magic-numbers: ["error", { "ignore": [0, 1, -1] }] */function(e){return s.apply(this,arguments)}({customVoiceHostname:r,deploymentId:o,region:a,subscriptionKey:c});case 3:return u=e.sent.models,e.abrupt("return",u.map(function(e){var t=e.properties.Gender,r=e.locale,n=e.name;return new i.default({gender:t,lang:r,voiceURI:n})}).sort(function(e,t){var r=e.name,n=t.name;return r>n?1:r<n?-1:0}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}}),P.register("1F2Pq",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("9Elbq")),o=r(P("foXoB")),i=/*#__PURE__*/function(){function e(t){var r=t.gender,o=t.lang,i=t.voiceURI;(0,n.default)(this,e),this._default=!1,this._gender=r,this._lang=o,this._localService=!1,this._name=i,this._voiceURI=i}return(0,o.default)(e,[{key:"default",get:function(){return this._default}},{key:"gender",get:function(){return this._gender}},{key:"lang",get:function(){return this._lang}},{key:"localService",get:function(){return this._localService}},{key:"name",get:function(){return this._name}},{key:"voiceURI",get:function(){return this._voiceURI}}]),e}();e.exports.default=i}),P.register("9nosj",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return c.apply(this,arguments)};var n=r(P("jcdMA")),o=r(P("7BNdl")),i=r(P("4sGTp")),s=r(P("1F2Pq"));function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(){return(c=(0,i.default)(/*#__PURE__*/n.default.mark(function e(t){var r,i,c,u,p,l,f;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.authorizationToken,i=t.region,c=t.speechSynthesisHostname,u=t.subscriptionKey,// Although encodeURI on a hostname doesn't work as expected for hostname, at least, it will fail peacefully.
p=c||"".concat(encodeURI(i),".tts.speech.microsoft.com"),e.next=4,fetch("https://".concat(p,"/cognitiveservices/voices/list"),{headers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({"content-type":"application/json"},r?{authorization:"Bearer ".concat(r)}:{"Ocp-Apim-Subscription-Key":u})});case 4:if((l=e.sent).ok){e.next=7;break}throw Error("Failed to fetch voices");case 7:return e.next=9,l.json();case 9:return f=e.sent,e.abrupt("return",f.map(function(e){var t=e.Gender,r=e.Locale,n=e.Name;return new s.default({gender:t,lang:r,voiceURI:n})}).sort(function(e,t){var r=e.name,n=t.name;return r>n?1:r<n?-1:0}));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}}),P.register("fMfdO",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.authorizationToken,u=r.credentials,f=r.looseEvent,h=r.looseEvents,d=r.region,v=void 0===d?"westus":d,y=r.subscriptionKey,g=(0,s.default)(r,c);if(void 0!==f&&(console.warn('web-speech-cognitive-services: The option "looseEvent" should be named as "looseEvents".'),h=f),!u){if(o||y)console.warn("web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14."),e=(0,i.default)(/*#__PURE__*/n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=8;break}return e.next=3,(0,a.default)(o);case 3:e.t1=e.sent,e.t2=v,e.t0={authorizationToken:e.t1,region:e.t2},e.next=13;break;case 8:return e.t3=v,e.next=11,(0,a.default)(y);case 11:e.t4=e.sent,e.t0={region:e.t3,subscriptionKey:e.t4};case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e)})),u=function(){return e.apply(this,arguments)};else throw Error("web-speech-cognitive-services: Credentials must be specified.")}return p(p({},g),{},{fetchCredentials:(t=(0,i.default)(/*#__PURE__*/n.default.mark(function e(){var t,r,o,i,s,c,p,f;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)(u);case 2:if(r=(t=e.sent).authorizationToken,o=t.customVoiceHostname,i=t.region,s=t.speechRecognitionHostname,c=t.speechSynthesisHostname,p=t.subscriptionKey,!(!r&&!p||r&&p)){e.next=13;break}throw Error('web-speech-cognitive-services: Either "authorizationToken" or "subscriptionKey" must be provided.');case 13:if(!(!i&&!(s&&c))){e.next=17;break}throw Error('web-speech-cognitive-services: Either "region" or "speechRecognitionHostname" and "speechSynthesisHostname" must be set.');case 17:if(!(i&&(o||s||c))){e.next=21;break}throw Error('web-speech-cognitive-services: Only either "region" or "customVoiceHostname", "speechRecognitionHostname" and "speechSynthesisHostname" can be set.');case 21:if(!r){e.next=26;break}if(!("string"!=typeof r)){e.next=24;break}throw Error('web-speech-cognitive-services: "authorizationToken" must be a string.');case 24:e.next=28;break;case 26:if(!("string"!=typeof p)){e.next=28;break}throw Error('web-speech-cognitive-services: "subscriptionKey" must be a string.');case 28:return l&&p&&(console.warn("web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead."),l=!1),f=r?{authorizationToken:r}:{subscriptionKey:p},i?f.region=i:(f.customVoiceHostname=o,f.speechRecognitionHostname=s,f.speechSynthesisHostname=c),e.abrupt("return",f);case 32:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),looseEvents:h})};var n=r(P("jcdMA")),o=r(P("7BNdl")),i=r(P("4sGTp")),s=r(P("9SXDt")),a=r(P("2f3s8")),c=["authorizationToken","credentials","looseEvent","looseEvents","region","subscriptionKey"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=!0}),P.register("9SXDt",function(e,t){var r=P("f6VNg");e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("f6VNg",function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports}),P.register("2f3s8",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return"function"==typeof e?e():e}}),P.register("69fQu",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("foXoB")),o=r(P("9Elbq")),i=r(P("eVJPt")),s=r(P("3jIol")),a=r(P("kzUdv")),c=/*#__PURE__*/function(e){(0,i.default)(c,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,a.default)(c);if(t){var n=(0,a.default)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e){return(0,o.default)(this,c),r.call(this,e)}return(0,n.default)(c)}(P("7Qtqa").Event);e.exports.default=c}),P.register("lNxzS",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("jcdMA")),o=r(P("4sGTp")),i=r(P("9Elbq")),s=r(P("foXoB")),a=r(P("eVJPt")),c=r(P("3jIol")),u=r(P("kzUdv")),p=P("7Qtqa"),l=r(P("75mzU")),f=r(P("4E7Au")),h=r(P("69fQu")),d=r(P("7Xa3W"));function v(e,t){return new Promise(function(r,n){var o=e.decodeAudioData(t,r,n);// Newer implementation of "decodeAudioData" will return a Promise
o&&"function"==typeof o.then&&r(o)})}var y=/*#__PURE__*/function(e){(0,a.default)(g,e);var t,r,y=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(g);if(t){var n=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return(0,c.default)(this,e)});function g(e){var t;return(0,i.default)(this,g),(t=y.call(this))._lang=null,t._pitch=1,t._rate=1,t._voice=null,t._volume=1,t.text=e,t.onboundary=null,t.onend=null,t.onerror=null,t.onmark=null,t.onpause=null,t.onresume=null,t.onstart=null,t}return(0,s.default)(g,[{key:"lang",get:function(){return this._lang},set:function(e){this._lang=e}},{key:"onboundary",get:function(){return(0,p.getEventAttributeValue)(this,"boundary")},set:function(e){(0,p.setEventAttributeValue)(this,"boundary",e)}},{key:"onend",get:function(){return(0,p.getEventAttributeValue)(this,"end")},set:function(e){(0,p.setEventAttributeValue)(this,"end",e)}},{key:"onerror",get:function(){return(0,p.getEventAttributeValue)(this,"error")},set:function(e){(0,p.setEventAttributeValue)(this,"error",e)}},{key:"onmark",get:function(){return(0,p.getEventAttributeValue)(this,"mark")},set:function(e){(0,p.setEventAttributeValue)(this,"mark",e)}},{key:"onpause",get:function(){return(0,p.getEventAttributeValue)(this,"pause")},set:function(e){(0,p.setEventAttributeValue)(this,"pause",e)}},{key:"onresume",get:function(){return(0,p.getEventAttributeValue)(this,"resume")},set:function(e){(0,p.setEventAttributeValue)(this,"resume",e)}},{key:"onstart",get:function(){return(0,p.getEventAttributeValue)(this,"start")},set:function(e){(0,p.setEventAttributeValue)(this,"start",e)}},{key:"pitch",get:function(){return this._pitch},set:function(e){this._pitch=e}},{key:"rate",get:function(){return this._rate},set:function(e){this._rate=e}},{key:"voice",get:function(){return this._voice},set:function(e){this._voice=e}},{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"preload",value:function(e){var t=e.deploymentId,r=e.fetchCredentials,n=e.outputFormat;this.arrayBufferPromise=(0,f.default)({fetchCredentials:r,deploymentId:t,lang:this.lang||window.navigator.language,outputFormat:n,pitch:this.pitch,rate:this.rate,text:this.text,voice:this.voice&&this.voice.voiceURI,volume:this.volume}),// We will ignore the reject result and handled in play() later.
this.arrayBufferPromise.catch()}},{key:"play",value:(r=(0,o.default)(/*#__PURE__*/n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,// We should emit "start" event even if preload() failed.
this.dispatchEvent(new h.default("start")),r=t.createBufferSource(),e.t0=v,e.t1=t,e.next=7,this.arrayBufferPromise;case 7:return e.t2=e.sent,e.next=10,(0,e.t0)(e.t1,e.t2);case 10:return o=e.sent,this._playingSource=r,e.next=14,function(e,t,r){return new Promise(function(n,o){var i=new l.default,s=new l.default,a=(0,d.default)(e,"statechange",function(e){return"closed"===e.target.state&&i.eventListener()});try{r.buffer=t,r.onended=s.eventListener,r.connect(e.destination),r.start(0),Promise.race([i.upcoming(),s.upcoming()]).then(n)}catch(e){o(e)}finally{a()}})}(t,o,r);case 14:this._playingSource=null,this.dispatchEvent(new h.default("end")),e.next=21;break;case 18:e.prev=18,e.t3=e.catch(0),// "message" is not in spec but to provide a friendly message.
this.dispatchEvent(new ErrorEvent("error",{error:"synthesis-failed",message:e.t3.stack}));case 21:case"end":return e.stop()}},e,this,[[0,18]])})),function(e){return r.apply(this,arguments)})},{key:"stop",value:function(){this._playingSource&&this._playingSource.stop()}}]),g}(p.EventTarget);e.exports.default=y}),P.register("75mzU",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var r,n=(r=P("8JiZF"))&&r.__esModule?r:{default:r};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=/*#__PURE__*/function(){var e,t;function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.defers=[],this.upcomingDeferred=null,this.eventListener=this.eventListener.bind(this),this.options=t,this.one=this.one.bind(this),this.upcoming=this.upcoming.bind(this),this[Symbol.iterator]=function(){return{next:function(){return{done:!1,value:e.upcoming()}}}}}return e=[{key:"eventListener",value:function(e){var t=this.defers.shift(),r=this.options.array?[].slice.call(arguments):e;t&&t.resolve(r),this.upcomingDeferred&&(this.upcomingDeferred.resolve(r),this.upcomingDeferred=null)}},{key:"one",value:function(){var e=(0,n.default)();return this.defers.push(e),e.promise}},{key:"upcoming",value:function(){return this.upcomingDeferred||(this.upcomingDeferred=(0,n.default)()),this.upcomingDeferred.promise}}],o(r.prototype,e),t&&o(r,t),r}();e.exports.default=i,e.exports=e.exports.default,e.exports.default=e.exports.default}),P.register("8JiZF",function(e,t){e.exports=function(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e}}),P.register("4E7Au",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return p.apply(this,arguments)};var n=r(P("jcdMA")),o=r(P("7BNdl")),i=r(P("4sGTp")),s=P("dhBeB"),a=r(P("9ji2H")),c=r(P("iCqLR"));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(){return(p=(0,i.default)(/*#__PURE__*/n.default.mark(function e(t){var r,i,p,l,f,h,d,v,y,g,m,b,S,P,C,R,x,O,w,E,I,T;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.deploymentId,i=t.fetchCredentials,l=void 0===(p=t.lang)?"en-US":p,h=void 0===(f=t.outputFormat)?"riff-16khz-16bit-mono-pcm":f,d=t.pitch,v=t.rate,y=t.text,m=void 0===(g=t.voice)?"Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)":g,b=t.volume,y){e.next=3;break}return e.abrupt("return",(0,s.decode)("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"));case 3:return e.next=5,i();case 5:if(P=(S=e.sent).authorizationToken,C=S.region,R=S.speechSynthesisHostname,x=S.subscriptionKey,!(P&&x||!P&&!x)){e.next=14;break}throw Error('Only "authorizationToken" or "subscriptionKey" should be set.');case 14:if(!(C&&R||!C&&!R)){e.next=16;break}throw Error('Only "region" or "speechSynthesisHostnamename" should be set.');case 16:return O=(0,c.default)(y)?y:(0,a.default)({lang:l,pitch:d,rate:v,text:y,voice:m,volume:b}),w=R||(r?"".concat(encodeURI(C),".voice.speech.microsoft.com"):"".concat(encodeURI(C),".tts.speech.microsoft.com")),E=r?"?deploymentId=".concat(encodeURI(r)):"",I="https://".concat(w,"/cognitiveservices/v1").concat(E),e.next=22,fetch(I,{headers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":h},P?{Authorization:"Bearer ".concat(P)}:{"Ocp-Apim-Subscription-Key":x}),method:"POST",body:O});case 22:if((T=e.sent).ok){e.next=25;break}throw Error("web-speech-cognitive-services: Failed to syntheis speech, server returned ".concat(T.status));case 25:return e.abrupt("return",T.arrayBuffer());case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}}),P.register("dhBeB",function(e,t){m(e.exports,"decode",()=>i);for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),o=0;o<r.length;o++)n[r.charCodeAt(o)]=o;/*
 * base64-arraybuffer 1.0.2 <https://github.com/niklasvh/base64-arraybuffer>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var i=function(e){var t,r,o,i,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var p=new ArrayBuffer(a),l=new Uint8Array(p);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],o=n[e.charCodeAt(t+1)],i=n[e.charCodeAt(t+2)],s=n[e.charCodeAt(t+3)],l[u++]=r<<2|o>>4,l[u++]=(15&o)<<4|i>>2,l[u++]=(3&i)<<6|63&s;return p}}),P.register("9ji2H",function(e,t){/* eslint no-magic-numbers: ["error", { "ignore": [0, 1, 100] }] */// Cognitive Services does not support unsigned percentage
// It must be converted into +/- first.
function r(e){var t=Math.round((e-1)*100);return t>=0&&(t="+"+t),t+"%"}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=e.lang,n=e.pitch,o=void 0===n?1:n,i=e.rate,s=void 0===i?1:i,a=e.text,c=e.voice,u=e.volume;return'<speak version="1.0" xml:lang="'.concat(t,'">\n  <voice xml:lang="').concat(t,'" name="').concat(c,'">\n    <prosody pitch="').concat(r(o),'" rate="').concat(r(s),'" volume="').concat(r(u),'">\n      ').concat(a,"\n    </prosody>\n  </voice>\n</speak>")}}),P.register("iCqLR",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return r.test(e)||n.test(e)};var r=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*<speak([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|\/?>)/,n=/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*<\?xml[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/}),P.register("7Xa3W",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){return e.addEventListener(t,r),function(){return e.removeEventListener(t,r)}}}),P.register("YULxE",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createSpeechRecognitionPonyfillFromRecognizer=A,e.exports.default=void 0;var n=r(P("jcdMA")),o=r(P("a3no4")),i=r(P("7BNdl")),s=r(P("4sGTp")),a=r(P("foXoB")),c=r(P("9Elbq")),u=r(P("eVJPt")),p=r(P("3jIol")),l=r(P("kzUdv")),f=P("7Qtqa"),h=r(P("rnzjd")),d=r(P("5xfiI")),v=r(P("fMfdO")),y=r(P("hK8p4")),g=r(P("aqpzV"));function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var o=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}// https://docs.microsoft.com/en-us/javascript/api/microsoft-cognitiveservices-speech-sdk/speechconfig?view=azure-node-latest#outputformat
// {
//   "RecognitionStatus": "Success",
//   "Offset": 900000,
//   "Duration": 49000000,
//   "NBest": [
//     {
//       "Confidence": 0.738919,
//       "Lexical": "second",
//       "ITN": "second",
//       "MaskedITN": "second",
//       "Display": "Second."
//     }
//   ]
// }
// {
//   "RecognitionStatus": "InitialSilenceTimeout",
//   "Offset": 50000000,
//   "Duration": 0
// }
var C=g.default.AudioConfig,R=g.default.OutputFormat,x=g.default.ResultReason,O=g.default.SpeechConfig,w=g.default.SpeechRecognizer;function E(e){var t=e.duration,r=e.errorDetails,n=e.json,o=e.offset,i=e.properties,s=e.reason,a=e.resultId,c=e.text;return{duration:t,errorDetails:r,json:JSON.parse(n),offset:o,properties:i,reason:s,resultId:a,text:c}}function I(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise(function(t,n){return e.apply(void 0,r.concat([t,n]))})}}var T=/*#__PURE__*/function(e){(0,u.default)(r,e);var t=S(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.data,s=o.emma,a=o.interpretation,u=o.resultIndex,p=o.results;return(0,c.default)(this,r),(n=t.call(this,e)).data=i,n.emma=s,n.interpretation=a,n.resultIndex=u,n.results=p,n}return(0,a.default)(r)}(f.Event);function A(e){var t=e.createRecognizer,r=e.enableTelemetry,i=e.looseEvents,p=e.referenceGrammars,l=e.textNormalization;// If enableTelemetry is set to null or non-boolean, we will default to true.
w.enableTelemetry(!1!==r);var v=/*#__PURE__*/function(e){(0,u.default)(g,e);var r,v=S(g);function g(){var e;return(0,c.default)(this,g),(e=v.call(this))._continuous=!1,e._interimResults=!1,e._lang="undefined"!=typeof window?window.document.documentElement.getAttribute("lang")||window.navigator.language:"en-US",e._grammars=new y.default,e._maxAlternatives=1,e}return(0,a.default)(g,[{key:"emitCognitiveServices",value:function(e,t){this.dispatchEvent(new T("cognitiveservices",{data:b(b({},t),{},{type:e})}))}},{key:"continuous",get:function(){return this._continuous},set:function(e){this._continuous=e}},{key:"grammars",get:function(){return this._grammars},set:function(e){if(e instanceof y.default)this._grammars=e;else throw Error("The provided value is not of type 'SpeechGrammarList'")}},{key:"interimResults",get:function(){return this._interimResults},set:function(e){this._interimResults=e}},{key:"maxAlternatives",get:function(){return this._maxAlternatives},set:function(e){this._maxAlternatives=e}},{key:"lang",get:function(){return this._lang},set:function(e){this._lang=e}},{key:"onaudioend",get:function(){return(0,f.getEventAttributeValue)(this,"audioend")},set:function(e){(0,f.setEventAttributeValue)(this,"audioend",e)}},{key:"onaudiostart",get:function(){return(0,f.getEventAttributeValue)(this,"audiostart")},set:function(e){(0,f.setEventAttributeValue)(this,"audiostart",e)}},{key:"oncognitiveservices",get:function(){return(0,f.getEventAttributeValue)(this,"cognitiveservices")},set:function(e){(0,f.setEventAttributeValue)(this,"cognitiveservices",e)}},{key:"onend",get:function(){return(0,f.getEventAttributeValue)(this,"end")},set:function(e){(0,f.setEventAttributeValue)(this,"end",e)}},{key:"onerror",get:function(){return(0,f.getEventAttributeValue)(this,"error")},set:function(e){(0,f.setEventAttributeValue)(this,"error",e)}},{key:"onresult",get:function(){return(0,f.getEventAttributeValue)(this,"result")},set:function(e){(0,f.setEventAttributeValue)(this,"result",e)}},{key:"onsoundend",get:function(){return(0,f.getEventAttributeValue)(this,"soundend")},set:function(e){(0,f.setEventAttributeValue)(this,"soundend",e)}},{key:"onsoundstart",get:function(){return(0,f.getEventAttributeValue)(this,"soundstart")},set:function(e){(0,f.setEventAttributeValue)(this,"soundstart",e)}},{key:"onspeechend",get:function(){return(0,f.getEventAttributeValue)(this,"speechend")},set:function(e){(0,f.setEventAttributeValue)(this,"speechend",e)}},{key:"onspeechstart",get:function(){return(0,f.getEventAttributeValue)(this,"speechstart")},set:function(e){(0,f.setEventAttributeValue)(this,"speechstart",e)}},{key:"onstart",get:function(){return(0,f.getEventAttributeValue)(this,"start")},set:function(e){(0,f.setEventAttributeValue)(this,"start",e)}},{key:"start",value:function(){var e=this;this._startOnce().catch(function(t){e.dispatchEvent(new ErrorEvent("error",{error:t,message:t&&(t.stack||t.message)}))})}},{key:"_startOnce",value:(r=(0,s.default)(/*#__PURE__*/n.default.mark(function e(){var r,a,c,u,f,v,y,g,m,S,P,C,R,O,w,A,_=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(this.lang);case 2:return c=(a=function(e){var t,r,o=e.attach,i=e.attach.bind(e);return(// We will only modify "attach" function once.
e.attach=/*#__PURE__*/(0,s.default)(/*#__PURE__*/n.default.mark(function o(){var a;return n.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i();case 2:return a=o.sent,o.abrupt("return",b(b({},a),{},{read:function(){var o=(0,s.default)(/*#__PURE__*/n.default.mark(function o(){var i;return n.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.read();case 2:if(i=n.sent,!t&&function(e){var t=new Int16Array(e);return[].reduce.call(t,function(e,t){return e+Math.abs(t)},0)/t.length}(i.buffer)>150&&(e.events.onEvent({name:"FirstAudibleChunk"}),t=!0),!r){n.next=6;break}return n.abrupt("return",{buffer:new ArrayBuffer(0),isEnd:!0,timeReceived:Date.now()});case 6:return n.abrupt("return",i);case 7:case"end":return n.stop()}},o)}));return function(){return o.apply(this,arguments)}}()}));case 4:case"end":return o.stop()}},o)})),{audioConfig:e,pause:function(){r=!0},unprepare:function(){e.attach=o}})}((r=e.sent).audioConfig)).pause,u=a.unprepare,e.prev=4,f=(0,d.default)(),m=r.audioConfig.events.attach(function(e){var t=e.name;"AudioSourceReadyEvent"===t?f.push({audioSourceReady:{}}):"AudioSourceOffEvent"===t?f.push({audioSourceOff:{}}):"FirstAudibleChunk"===t&&f.push({firstAudibleChunk:{}})}).detach,r.canceled=function(e,t){var r=t.errorDetails,n=t.offset,o=t.reason,i=t.sessionId;f.push({canceled:{errorDetails:r,offset:n,reason:o,sessionId:i}})},r.recognized=function(e,t){var r=t.offset,n=t.result,o=t.sessionId;f.push({recognized:{offset:r,result:E(n),sessionId:o}})},r.recognizing=function(e,t){var r=t.offset,n=t.result,o=t.sessionId;f.push({recognizing:{offset:r,result:E(n),sessionId:o}})},r.sessionStarted=function(e,t){var r=t.sessionId;f.push({sessionStarted:{sessionId:r}})},r.sessionStopped=function(e,t){var r=t.sessionId;// "sessionStopped" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.
f.push({sessionStopped:{sessionId:r}})},r.speechStartDetected=function(e,t){var r=t.offset,n=t.sessionId;f.push({speechStartDetected:{offset:r,sessionId:n}})},r.speechEndDetected=function(e,t){var r=t.sessionId;// "speechEndDetected" is never fired, probably because we are using startContinuousRecognitionAsync instead of recognizeOnceAsync.
// Update: "speechEndDetected" is fired for DLSpeech.listenOnceAsync()
f.push({speechEndDetected:{sessionId:r}})},S=this.grammars.phrases,P=r.privReco.dynamicGrammar,p&&p.length&&P.addReferenceGrammar(p),S&&S.length&&P.addPhrase(S),e.next=20,I(r.startContinuousRecognitionAsync.bind(r))();case 20:r.stopContinuousRecognitionAsync?(this.abort=function(){return f.push({abort:{}})},this.stop=function(){return f.push({stop:{}})}):this.abort=this.stop=void 0,O=[],w=/*#__PURE__*/n.default.mark(function e(t){var s,a,u,p,d,m,b,S,P,w,E,A;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.shift();case 2:if(a=(s=e.sent).abort,u=s.audioSourceOff,p=s.audioSourceReady,d=s.canceled,m=s.firstAudibleChunk,b=s.recognized,S=s.recognizing,P=s.stop,Object.keys(s).forEach(function(e){return _.emitCognitiveServices(e,s[e])}),w=d&&d.errorDetails,!/Permission[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]denied/.test(w||"")){e.next=9;break}return(// If microphone is not allowed, we should not emit "start" event.
R={error:"not-allowed",type:"error"},e.abrupt("return","break"));case 9:if(t||_.dispatchEvent(new T("start")),!w){e.next=15;break}return/1006/.test(w)?(C||(_.dispatchEvent(new T("audiostart")),_.dispatchEvent(new T("audioend"))),R={error:"network",type:"error"}):R={error:"unknown",type:"error"},e.abrupt("return","break");case 15:if(!(a||P)){e.next=22;break}// But for defensive purpose, we make sure "stopContinuousRecognitionAsync" is available before we can call.
if(a?(R={error:"aborted",type:"error"},g="abort"):(// When we pause, we will send { isEnd: true }, Speech Services will send us "recognized" event.
c(),g="stop"),!(a&&r.stopContinuousRecognitionAsync)){e.next=20;break}return e.next=20,I(r.stopContinuousRecognitionAsync.bind(r))();case 20:e.next=61;break;case 22:if(!p){e.next=27;break}_.dispatchEvent(new T("audiostart")),C=!0,e.next=61;break;case 27:if(!m){e.next=32;break}_.dispatchEvent(new T("soundstart")),v=!0,e.next=61;break;case 32:if(!u){e.next=40;break}return(// Looks like we don't need this line and all the tests are still working.
// Guessing probably stopping is already truthy.
// stopping = true;
y&&_.dispatchEvent(new T("speechend")),v&&_.dispatchEvent(new T("soundend")),C&&_.dispatchEvent(new T("audioend")),C=v=y=!1,e.abrupt("return","break"));case 40:if(!("abort"!==g)){e.next=61;break}if(!(b&&b.result&&b.result.reason===x.NoMatch)){e.next=45;break}R={error:"no-speech",type:"error"},e.next=61;break;case 45:if(!(b||S)){e.next=61;break}if(C||(// Unconfirmed prevention of quirks
_.dispatchEvent(new T("audiostart")),C=!0),v||(_.dispatchEvent(new T("soundstart")),v=!0),y||(_.dispatchEvent(new T("speechstart")),y=!0),!b){e.next=60;break}if((A=!!(E=(0,h.default)(b.result,{maxAlternatives:_.maxAlternatives,textNormalization:l}))[0].transcript)&&(O=[].concat((0,o.default)(O),[E]),_.continuous&&_.dispatchEvent(new T("result",{results:O}))),R=_.continuous&&A?null:{results:O,type:"result"},!(!_.continuous&&r.stopContinuousRecognitionAsync)){e.next=57;break}return e.next=57,I(r.stopContinuousRecognitionAsync.bind(r))();case 57:i&&R&&A&&(_.dispatchEvent(new T(R.type,R)),R=null),e.next=61;break;case 60:S&&_.interimResults&&_.dispatchEvent(new T("result",{results:[].concat((0,o.default)(O),[(0,h.default)(S.result,{maxAlternatives:_.maxAlternatives,textNormalization:l})])}));case 61:case"end":return e.stop()}},e)}),A=0;case 24:if(!(!g||C)){e.next=32;break}return e.delegateYield(w(A),"t0",26);case 26:if("break"!==e.t0){e.next=29;break}return e.abrupt("break",32);case 29:A++,e.next=24;break;case 32:y&&this.dispatchEvent(new T("speechend")),v&&this.dispatchEvent(new T("soundend")),C&&this.dispatchEvent(new T("audioend")),R&&("result"!==R.type||R.results.length||(R={error:"no-speech",type:"error"}),"error"===R.type?this.dispatchEvent(new ErrorEvent("error",R)):this.dispatchEvent(new T(R.type,R))),// This is mainly for "microphone blocked" story.
this.dispatchEvent(new T("end")),m(),e.next=44;break;case 40:throw e.prev=40,e.t1=e.catch(4),// Logging out the erorr because Speech SDK would fail silently.
console.error(e.t1),e.t1;case 44:return e.prev=44,u(),r.dispose(),e.finish(44);case 48:case"end":return e.stop()}},e,this,[[4,40,44,48]])})),function(){return r.apply(this,arguments)})}]),g}(f.EventTarget);return{SpeechGrammarList:y.default,SpeechRecognition:v,SpeechRecognitionEvent:T}}e.exports.default=function(e){var t,r=(0,v.default)(e),o=r.audioConfig,i=void 0===o?C.fromDefaultMicrophoneInput():o,a=r.enableTelemetry,c=r.fetchCredentials,u=r.looseEvents,p=r.referenceGrammars,l=r.speechRecognitionEndpointId,f=r.textNormalization;if(!i&&(!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia))return console.warn("web-speech-cognitive-services: This browser does not support WebRTC and it will not work with Cognitive Services Speech Services."),{};var h=(t=(0,s.default)(/*#__PURE__*/n.default.mark(function e(t){var r,o,s,a,u,p,f;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return o=(r=e.sent).authorizationToken,s=r.region,a=r.speechRecognitionHostname,u=r.subscriptionKey,a?(f={hostname:a,port:443,protocol:"wss:"},o?(p=O.fromHost(f)).authorizationToken=o:p=O.fromHost(f,u)):p=o?O.fromAuthorizationToken(o,s):O.fromSubscription(u,s),l&&(p.endpointId=l),p.outputFormat=R.Detailed,p.speechRecognitionLanguage=t||"en-US",e.abrupt("return",new w(p,i));case 12:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return A({audioConfig:i,createRecognizer:h,enableTelemetry:void 0===a||a,looseEvents:u,referenceGrammars:p,textNormalization:void 0===f?"display":f})}}),P.register("rnzjd",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxAlternatives,o=t.textNormalization,a=void 0===o?"display":o;if(e.reason!==i&&(e.reason!==s||e.json.NBest)){if(e.reason===s)return(0,n.default)((e.json.NBest||[]).slice(0,void 0===r?1/0:r).map(function(e){var t=e.Confidence,r=e.Display,n=e.ITN,o=e.Lexical,i=e.MaskedITN;return{confidence:t,transcript:"itn"===a?n:"lexical"===a?o:"maskeditn"===a?i:r}}),{isFinal:!0})}else{var c=[{confidence:.5,transcript:e.text}];return e.reason===s&&(c.isFinal=!0),c}return[]};var n=r(P("6Wwhp")),o=r(P("aqpzV")).default.ResultReason,i=o.RecognizingSpeech,s=o.RecognizedSpeech}),P.register("6Wwhp",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var r=i(i(i({},[].reduce.call(e,function(e,t,r){return e[r]=t,e},{})),t),{},(0,n.default)({length:e.length},Symbol.iterator,function(){return[].slice.call(r)[Symbol.iterator]()}));return r};var n=r(P("7BNdl"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,n.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}}),P.register("aqpzV",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var r=P("jZFlq"),n={AudioConfig:r.AudioConfig,OutputFormat:r.OutputFormat,ResultReason:r.ResultReason,SpeechConfig:r.SpeechConfig,SpeechRecognizer:r.SpeechRecognizer};e.exports.default=n}),P.register("jZFlq",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0});var o=P("8nLmq");// Common.Storage.SetLocalStorage(new Common.Browser.LocalStorage());
// Common.Storage.SetSessionStorage(new Common.Browser.SessionStorage());
P("aQGWi").Events.instance.attachConsoleListener(new o.ConsoleLoggingListener),// Speech SDK API
n(P("9pfmZ"),e.exports)}),P.register("8nLmq",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(P("cF1dX"),e.exports),n(P("69sbX"),e.exports),n(P("cbRUE"),e.exports),n(P("8D6Lp"),e.exports),n(P("2RKAy"),e.exports),n(P("de26M"),e.exports),n(P("2Nlr9"),e.exports),n(P("9oPjI"),e.exports),n(P("dQE5q"),e.exports),n(P("9nHn9"),e.exports),n(P("kTF5z"),e.exports)}),P.register("cF1dX",function(e,t){/* eslint-disable @typescript-eslint/no-unsafe-assignment */// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&r(t,e,o);return n(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConsoleLoggingListener=void 0;var i=o(P("1DJXa")),s=P("lLzU6"),a=P("eyacr"),c=/** @class */function(){function e(e){void 0===e&&(e=s.LogLevel.None),this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}return Object.defineProperty(e.prototype,"logPath",{set:function(e){a.Contracts.throwIfNullOrUndefined(i.openSync,"\nFile System access not available"),this.privLogPath=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableConsoleOutput",{set:function(e){this.privEnableConsoleOutput=e},enumerable:!1,configurable:!0}),e.prototype.onEvent=function(e){if(e.eventType>=this.privLogLevelFilter){var t=this.toString(e);if(this.privLogPath&&i.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case s.LogLevel.Debug:// eslint-disable-next-line no-console
console.debug(t);break;case s.LogLevel.Info:// eslint-disable-next-line no-console
console.info(t);break;case s.LogLevel.Warning:// eslint-disable-next-line no-console
console.warn(t);break;case s.LogLevel.Error:// eslint-disable-next-line no-console
console.error(t);break;default:// eslint-disable-next-line no-console
console.log(t)}}},e.prototype.toString=function(e){var t=[""+e.eventTime,""+e.name];for(var r in e)if(r&&e.hasOwnProperty(r)&&"eventTime"!==r&&"eventType"!==r&&"eventId"!==r&&"name"!==r&&"constructor"!==r){// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
var n=e[r],o="<NULL>";null!=n&&(o="number"==typeof n||"string"==typeof n?n.toString():JSON.stringify(n)),t.push(r+": "+o)}return t.join(" | ")},e}();e.exports.ConsoleLoggingListener=c}),P.register("1DJXa",function(e,t){}),P.register("lLzU6",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LogLevel=void 0;var r=P("aQGWi");Object.defineProperty(e.exports,"LogLevel",{enumerable:!0,get:function(){return r.EventType}})}),P.register("aQGWi",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(P("1CrCG"),e.exports),n(P("g6xwN"),e.exports),n(P("9hz9l"),e.exports),n(P("kkdvv"),e.exports),n(P("eD9xE"),e.exports),n(P("haGs1"),e.exports),n(P("k9bMn"),e.exports),n(P("ls7JO"),e.exports),n(P("2QPZq"),e.exports),n(P("6No2z"),e.exports),n(P("eNSLV"),e.exports),n(P("kstZD"),e.exports),n(P("bAOqV"),e.exports),n(P("6u4UZ"),e.exports),n(P("jQeSl"),e.exports),n(P("gc1h5"),e.exports),n(P("7ArIb"),e.exports),n(P("a83p7"),e.exports),n(P("gp8Wz"),e.exports),n(P("kiHjH"),e.exports),n(P("fWb2B"),e.exports),n(P("j7801"),e.exports),n(P("j0HbF"),e.exports),n(P("3xpNp"),e.exports),n(P("6aAOQ"),e.exports),n(P("kB6AF"),e.exports);var o=P("kwDiF");Object.defineProperty(e.exports,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),n(P("1qtOX"),e.exports),n(P("3SRw5"),e.exports),n(P("jl3jo"),e.exports),n(P("b9eCk"),e.exports),n(P("780kN"),e.exports)}),P.register("1CrCG",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AudioStreamNodeErrorEvent=e.exports.AudioStreamNodeDetachedEvent=e.exports.AudioStreamNodeAttachedEvent=e.exports.AudioStreamNodeAttachingEvent=e.exports.AudioStreamNodeEvent=e.exports.AudioSourceErrorEvent=e.exports.AudioSourceOffEvent=e.exports.AudioSourceReadyEvent=e.exports.AudioSourceInitializingEvent=e.exports.AudioSourceEvent=void 0;var o=P("fWb2B"),i=/** @class */function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privAudioSourceId=r,i}return n(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);e.exports.AudioSourceEvent=i;var s=/** @class */function(e){function t(t){return e.call(this,"AudioSourceInitializingEvent",t)||this}return n(t,e),t}(i);e.exports.AudioSourceInitializingEvent=s;var a=/** @class */function(e){function t(t){return e.call(this,"AudioSourceReadyEvent",t)||this}return n(t,e),t}(i);e.exports.AudioSourceReadyEvent=a;var c=/** @class */function(e){function t(t){return e.call(this,"AudioSourceOffEvent",t)||this}return n(t,e),t}(i);e.exports.AudioSourceOffEvent=c;var u=/** @class */function(e){function t(t,r){var n=e.call(this,"AudioSourceErrorEvent",t,o.EventType.Error)||this;return n.privError=r,n}return n(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(i);e.exports.AudioSourceErrorEvent=u;var p=/** @class */function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.privAudioNodeId=n,o}return n(t,e),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(i);e.exports.AudioStreamNodeEvent=p;var l=/** @class */function(e){function t(t,r){return e.call(this,"AudioStreamNodeAttachingEvent",t,r)||this}return n(t,e),t}(p);e.exports.AudioStreamNodeAttachingEvent=l;var f=/** @class */function(e){function t(t,r){return e.call(this,"AudioStreamNodeAttachedEvent",t,r)||this}return n(t,e),t}(p);e.exports.AudioStreamNodeAttachedEvent=f;var h=/** @class */function(e){function t(t,r){return e.call(this,"AudioStreamNodeDetachedEvent",t,r)||this}return n(t,e),t}(p);e.exports.AudioStreamNodeDetachedEvent=h;var d=/** @class */function(e){function t(t,r,n){var o=e.call(this,"AudioStreamNodeErrorEvent",t,r)||this;return o.privError=n,o}return n(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(p);e.exports.AudioStreamNodeErrorEvent=d}),P.register("fWb2B",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PlatformEvent=e.exports.EventType=void 0;var r,n=P("6No2z");(r=e.exports.EventType||(e.exports.EventType={}))[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None";var o=/** @class */function(){function e(e,t){this.privName=e,this.privEventId=n.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=t,this.privMetadata={}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.privName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventId",{get:function(){return this.privEventId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTime",{get:function(){return this.privEventTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventType",{get:function(){return this.privEventType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();e.exports.PlatformEvent=o}),P.register("6No2z",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createNoDashGuid=e.exports.createGuid=void 0;var r=P("gJ3ci"),n=function(){return r.default()};e.exports.createGuid=n,e.exports.createNoDashGuid=function(){return n().replace(/-/g,"").toUpperCase()}}),P.register("gJ3ci",function(e,t){m(e.exports,"default",()=>i);var r=P("5tAW3"),n=P("l4hVp"),o=P("2QgbO"),i=function(e,t,i){if(r.default.randomUUID&&!t&&!e)return(0,r.default).randomUUID();e=e||{};let s=e.random||(e.rng||(0,n.default))();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=s[e];return t}return(0,o.unsafeStringify)(s)}}),P.register("5tAW3",function(e,t){m(e.exports,"default",()=>n);let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var n={randomUUID:r}}),P.register("l4hVp",function(e,t){let r;m(e.exports,"default",()=>o);let n=new Uint8Array(16);function o(){// lazy load so that environments that need to polyfill have a chance to do so
if(!r&&!// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}}),P.register("2QgbO",function(e,t){m(e.exports,"unsafeStringify",()=>n),P("9FoHr");/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */let r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function n(e,t=0){// Note: Be careful editing this code!  It's been tuned for performance
// and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}}),P.register("9FoHr",function(e,t){m(e.exports,"default",()=>n);var r=P("krOvc"),n=function(e){return"string"==typeof e&&(0,r.default).test(e)}}),P.register("krOvc",function(e,t){m(e.exports,"default",()=>r);var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}),P.register("g6xwN",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionMessageSentEvent=e.exports.ConnectionMessageReceivedEvent=e.exports.ConnectionEstablishErrorEvent=e.exports.ConnectionErrorEvent=e.exports.ConnectionClosedEvent=e.exports.ConnectionEstablishedEvent=e.exports.ConnectionStartEvent=e.exports.ConnectionEvent=e.exports.ServiceEvent=void 0;var o=P("fWb2B"),i=/** @class */function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privJsonResult=r,i}return n(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);e.exports.ServiceEvent=i;var s=/** @class */function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privConnectionId=r,i}return n(t,e),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this.privConnectionId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);e.exports.ConnectionEvent=s;var a=/** @class */function(e){function t(t,r,n){var o=e.call(this,"ConnectionStartEvent",t)||this;return o.privUri=r,o.privHeaders=n,o}return n(t,e),Object.defineProperty(t.prototype,"uri",{get:function(){return this.privUri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionStartEvent=a;var c=/** @class */function(e){function t(t){return e.call(this,"ConnectionEstablishedEvent",t)||this}return n(t,e),t}(s);e.exports.ConnectionEstablishedEvent=c;var u=/** @class */function(e){function t(t,r,n){var i=e.call(this,"ConnectionClosedEvent",t,o.EventType.Debug)||this;return i.privReason=n,i.privStatusCode=r,i}return n(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionClosedEvent=u;var p=/** @class */function(e){function t(t,r,n){var i=e.call(this,"ConnectionErrorEvent",t,o.EventType.Debug)||this;return i.privMessage=r,i.privType=n,i}return n(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.privType},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionErrorEvent=p;var l=/** @class */function(e){function t(t,r,n){var i=e.call(this,"ConnectionEstablishErrorEvent",t,o.EventType.Error)||this;return i.privStatusCode=r,i.privReason=n,i}return n(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionEstablishErrorEvent=l;var f=/** @class */function(e){function t(t,r,n){var o=e.call(this,"ConnectionMessageReceivedEvent",t)||this;return o.privNetworkReceivedTime=r,o.privMessage=n,o}return n(t,e),Object.defineProperty(t.prototype,"networkReceivedTime",{get:function(){return this.privNetworkReceivedTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionMessageReceivedEvent=f;var h=/** @class */function(e){function t(t,r,n){var o=e.call(this,"ConnectionMessageSentEvent",t)||this;return o.privNetworkSentTime=r,o.privMessage=n,o}return n(t,e),Object.defineProperty(t.prototype,"networkSentTime",{get:function(){return this.privNetworkSentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(s);e.exports.ConnectionMessageSentEvent=h}),P.register("9hz9l",function(e,t){/* eslint-disable @typescript-eslint/no-unsafe-return */// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionMessage=e.exports.MessageType=void 0;var r,n,o=P("k9bMn"),i=P("6No2z");(r=n=e.exports.MessageType||(e.exports.MessageType={}))[r.Text=0]="Text",r[r.Binary=1]="Binary";var s=/** @class */function(){function e(e,t,r,s){if(this.privBody=null,e===n.Text&&t&&"string"!=typeof t)throw new o.InvalidOperationError("Payload must be a string");if(e===n.Binary&&t&&!(t instanceof ArrayBuffer))throw new o.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
this.privBody=t,this.privHeaders=r||{},this.privId=s||i.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBody",{get:function(){if(this.privMessageType===n.Binary)throw new o.InvalidOperationError("Not supported for binary message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){if(this.privMessageType===n.Text)throw new o.InvalidOperationError("Not supported for text message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();e.exports.ConnectionMessage=s}),P.register("k9bMn",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ObjectDisposedError=e.exports.InvalidOperationError=e.exports.ArgumentNullError=void 0;/* eslint-disable max-classes-per-file *//**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */var o=/** @class */function(e){/**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */function t(t){var r=e.call(this,t)||this;return r.name="ArgumentNull",r.message=t,r}return n(t,e),t}(Error);e.exports.ArgumentNullError=o;/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */var i=/** @class */function(e){/**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */function t(t){var r=e.call(this,t)||this;return r.name="InvalidOperation",r.message=t,r}return n(t,e),t}(Error);e.exports.InvalidOperationError=i;/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */var s=/** @class */function(e){/**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */function t(t,r){var n=e.call(this,r)||this;return n.name=t+"ObjectDisposed",n.message=r,n}return n(t,e),t}(Error);e.exports.ObjectDisposedError=s}),P.register("kkdvv",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionOpenResponse=void 0;var r=/** @class */function(){function e(e,t){this.privStatusCode=e,this.privReason=t}return Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();e.exports.ConnectionOpenResponse=r}),P.register("eD9xE",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DeferralMap=void 0;/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class DefferalMap
 */var r=/** @class */function(){function e(){this.privMap={}}return e.prototype.add=function(e,t){this.privMap[e]=t},e.prototype.getId=function(e){return this.privMap[e]},e.prototype.complete=function(e,t){try{this.privMap[e].resolve(t)}catch(t){this.privMap[e].reject(t)}finally{this.privMap[e]=void 0}},e}();e.exports.DeferralMap=r}),P.register("haGs1",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SendingAgentContextMessageEvent=e.exports.DialogEvent=void 0;var o=P("fWb2B"),i=/** @class */function(e){function t(t,r){return void 0===r&&(r=o.EventType.Info),e.call(this,t,r)||this}return n(t,e),t}(o.PlatformEvent);e.exports.DialogEvent=i;var s=/** @class */function(e){function t(t){var r=e.call(this,"SendingAgentContextMessageEvent")||this;return r.privAgentConfig=t,r}return n(t,e),Object.defineProperty(t.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),t}(i);e.exports.SendingAgentContextMessageEvent=s}),P.register("ls7JO",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Events=void 0;var r=P("k9bMn"),n=P("2QPZq"),o=/** @class */function(){function e(){}return e.setEventSource=function(t){if(!t)throw new r.ArgumentNullError("eventSource");e.privInstance=t},Object.defineProperty(e,"instance",{get:function(){return e.privInstance},enumerable:!1,configurable:!0}),e.privInstance=new n.EventSource,e}();e.exports.Events=o}),P.register("2QPZq",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EventSource=void 0;var r=P("k9bMn"),n=P("6No2z"),o=/** @class */function(){function e(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}return e.prototype.onEvent=function(e){if(this.isDisposed())throw new r.ObjectDisposedError("EventSource");if(this.metadata)for(var t in this.metadata)t&&e.metadata&&!e.metadata[t]&&(e.metadata[t]=this.metadata[t]);for(var n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](e)},e.prototype.attach=function(e){var t=this,r=n.createNoDashGuid();return this.privEventListeners[r]=e,{detach:function(){return delete t.privEventListeners[r],Promise.resolve()}}},e.prototype.attachListener=function(e){return this.attach(function(t){return e.onEvent(t)})},e.prototype.attachConsoleListener=function(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(function(t){return e.onEvent(t)}),this.privConsoleListener},e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(){this.privEventListeners=null,this.privIsDisposed=!0},Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();e.exports.EventSource=o}),P.register("eNSLV",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("kstZD",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionState=void 0,(r=e.exports.ConnectionState||(e.exports.ConnectionState={}))[r.None=0]="None",r[r.Connected=1]="Connected",r[r.Connecting=2]="Connecting",r[r.Disconnected=3]="Disconnected"}),P.register("bAOqV",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("6u4UZ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("jQeSl",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("gc1h5",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("7ArIb",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("a83p7",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("gp8Wz",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("kiHjH",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.List=void 0;var r=P("k9bMn"),n=/** @class */function(){function e(e){// copy the list rather than taking as is.
if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(var t=0;t<e.length;t++){var r=e[t];this.privList.push(r)}}return e.prototype.get=function(e){return this.throwIfDisposed(),this.privList[e]},e.prototype.first=function(){return this.get(0)},e.prototype.last=function(){return this.get(this.length()-1)},e.prototype.add=function(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)},e.prototype.insertAt=function(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)},e.prototype.removeFirst=function(){return this.throwIfDisposed(),this.removeAt(0)},e.prototype.removeLast=function(){return this.throwIfDisposed(),this.removeAt(this.length()-1)},e.prototype.removeAt=function(e){return this.throwIfDisposed(),this.remove(e,1)[0]},e.prototype.remove=function(e,t){this.throwIfDisposed();var r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r},e.prototype.clear=function(){this.throwIfDisposed(),this.remove(0,this.length())},e.prototype.length=function(){return this.throwIfDisposed(),this.privList.length},e.prototype.onAdded=function(e){var t=this;this.throwIfDisposed();var r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=e,{detach:function(){return delete t.privAddSubscriptions[r],Promise.resolve()}}},e.prototype.onRemoved=function(e){var t=this;this.throwIfDisposed();var r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=e,{detach:function(){return delete t.privRemoveSubscriptions[r],Promise.resolve()}}},e.prototype.onDisposed=function(e){var t=this;this.throwIfDisposed();var r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=e,{detach:function(){return delete t.privDisposedSubscriptions[r],Promise.resolve()}}},e.prototype.join=function(e){return this.throwIfDisposed(),this.privList.join(e)},e.prototype.toArray=function(){var e=[];return this.privList.forEach(function(t){e.push(t)}),e},e.prototype.any=function(e){return(this.throwIfDisposed(),e)?this.where(e).length()>0:this.length()>0},e.prototype.all=function(e){return this.throwIfDisposed(),this.where(e).length()===this.length()},e.prototype.forEach=function(e){this.throwIfDisposed();for(var t=0;t<this.length();t++)e(this.privList[t],t)},e.prototype.select=function(t){this.throwIfDisposed();for(var r=[],n=0;n<this.privList.length;n++)r.push(t(this.privList[n],n));return new e(r)},e.prototype.where=function(t){this.throwIfDisposed();for(var r=new e,n=0;n<this.privList.length;n++)t(this.privList[n],n)&&r.add(this.privList[n]);return r},e.prototype.orderBy=function(t){this.throwIfDisposed();var r=this.toArray().sort(t);return new e(r)},e.prototype.orderByDesc=function(e){return this.throwIfDisposed(),this.orderBy(function(t,r){return e(r,t)})},e.prototype.clone=function(){return this.throwIfDisposed(),new e(this.toArray())},e.prototype.concat=function(t){return this.throwIfDisposed(),new e(this.privList.concat(t.toArray()))},e.prototype.concatArray=function(t){return this.throwIfDisposed(),new e(this.privList.concat(t))},e.prototype.isDisposed=function(){return null==this.privList},e.prototype.dispose=function(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))},e.prototype.throwIfDisposed=function(){if(this.isDisposed())throw new r.ObjectDisposedError("List",this.privDisposeReason)},e.prototype.triggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},e}();e.exports.List=n}),P.register("j7801",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.marshalPromiseToCallbacks=e.exports.Sink=e.exports.Deferred=e.exports.PromiseResultEventSource=e.exports.PromiseResult=e.exports.PromiseState=void 0,(r=n=e.exports.PromiseState||(e.exports.PromiseState={}))[r.None=0]="None",r[r.Resolved=1]="Resolved",r[r.Rejected=2]="Rejected";var r,n,o=/** @class */function(){function e(e){var t=this;this.throwIfError=function(){if(t.isError)throw t.error},e.on(function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!1,t.privResult=e)},function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!0,t.privError=e)})}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this.privIsCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return this.privIsError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();e.exports.PromiseResult=o;var i=function(){var e=this;this.setResult=function(t){e.privOnSetResult(t)},this.setError=function(t){e.privOnSetError(t)},this.on=function(t,r){e.privOnSetResult=t,e.privOnSetError=r}};e.exports.PromiseResultEventSource=i;var s=/** @class */function(){function e(){var e=this;this.resolve=function(t){return e.privResolve(t),e},this.reject=function(t){return e.privReject(t),e},// eslint-disable-next-line @typescript-eslint/explicit-function-return-type
this.privPromise=new Promise(function(t,r){e.privResolve=t,e.privReject=r})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this.privPromise},enumerable:!1,configurable:!0}),e}();e.exports.Deferred=s;var a=/** @class */function(){function e(){this.privState=n.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new i,this.privPromiseResult=new o(this.privPromiseResultEvents)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privPromiseResult},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){if(this.privState!==n.None)throw Error("'Cannot resolve a completed promise'");this.privState=n.Resolved,this.privPromiseResultEvents.setResult(e);for(var t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()},e.prototype.reject=function(e){if(this.privState!==n.None)throw Error("'Cannot reject a completed promise'");this.privState=n.Rejected,this.privPromiseResultEvents.setError(e);for(var t=0,r=this.privErrorHandlers;t<r.length;t++){var o=r[t];this.executeErrorCallback(e,o)}this.detachHandlers()},e.prototype.on=function(e,t){null==e&&(e=function(){}),this.privState===n.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===n.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===n.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())},e.prototype.executeSuccessCallback=function(e,t,r){try{t(e)}catch(e){this.executeErrorCallback("'Unhandled callback error: "+e+"'",r)}},e.prototype.executeErrorCallback=function(e,t){if(t)try{t(e)}catch(t){throw Error("'Unhandled callback error: "+t+". InnerError: "+e+"'")}else throw Error("'Unhandled error: "+e+"'")},e.prototype.detachHandlers=function(){this.privErrorHandlers=[],this.privSuccessHandlers=[]},e}();e.exports.Sink=a,e.exports.marshalPromiseToCallbacks=// eslint-disable-next-line prefer-arrow/prefer-arrow-functions
function(e,t,r){e.then(function(e){try{t&&t(e)}catch(e){if(r)try{e instanceof Error?r(e.name+": "+e.message):r(e);// eslint-disable-next-line no-empty
}catch(e){}}},function(e){if(r)try{e instanceof Error?r(e.name+": "+e.message):r(e);// eslint-disable-next-line no-empty
}catch(e){}})}}),P.register("j0HbF",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n,o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Queue=void 0;var s=P("k9bMn"),a=P("kiHjH"),c=P("j7801");(r=n||(n={}))[r.Dequeue=0]="Dequeue",r[r.Peek=1]="Peek";var u=/** @class */function(){function e(e){var t=this;this.privPromiseStore=new a.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new a.List,this.privDetachables=[],this.privSubscribers=new a.List,this.privDetachables.push(this.privList.onAdded(function(){return t.drain()}))}return e.prototype.enqueue=function(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(function(t){return t(e)}))},e.prototype.enqueueFromPromise=function(e){var t=this;this.throwIfDispose(),e.then(function(e){t.privList.add(e);// eslint-disable-next-line @typescript-eslint/no-empty-function
},function(){})},e.prototype.dequeue=function(){this.throwIfDispose();var e=new c.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:n.Dequeue}),this.drain()),e.promise},e.prototype.peek=function(){this.throwIfDispose();var e=new c.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:n.Peek}),this.drain()),e.promise},e.prototype.length=function(){return this.throwIfDispose(),this.privList.length()},e.prototype.isDisposed=function(){return null==this.privSubscribers},e.prototype.drainAndDispose=function(e,t){return o(this,void 0,void 0,function(){var r,n,o,s,a=this;return i(this,function(i){switch(i.label){case 0:if(!(!this.isDisposed()&&!this.privIsDisposing))return[3/*break*/,5];if(this.privDisposeReason=t,this.privIsDisposing=!0,r=this.privSubscribers){for(;r.length()>0;)// TODO: this needs work (Resolve(null) instead?).
r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}n=0,o=this.privDetachables,i.label=1;case 1:if(!(n<o.length))return[3/*break*/,4];return[4/*yield*/,o[n].detach()];case 2:i.sent(),i.label=3;case 3:return n++,[3/*break*/,1];case 4:if(this.privPromiseStore.length()>0&&e)return s=[],this.privPromiseStore.toArray().forEach(function(e){s.push(e)}),[2/*return*/,Promise.all(s).finally(function(){a.privSubscribers=null,a.privList.forEach(function(t){e(t)}),a.privList=null}).then()];this.privSubscribers=null,this.privList=null,i.label=5;case 5:return[2/*return*/]}})})},e.prototype.dispose=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.drainAndDispose(null,e)];case 1:return t.sent(),[2/*return*/]}})})},e.prototype.drain=function(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;var e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){var r=e.removeFirst();if(r.type===n.Peek)r.deferral.resolve(t.first());else{var o=t.removeFirst();r.deferral.resolve(o)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}},e.prototype.throwIfDispose=function(){if(this.isDisposed()){if(this.privDisposeReason)throw new s.InvalidOperationError(this.privDisposeReason);throw new s.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new s.InvalidOperationError("Queue disposing")},e}();e.exports.Queue=u}),P.register("3xpNp",function(e,t){/* eslint-disable @typescript-eslint/no-unsafe-assignment */// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RawWebsocketMessage=void 0;var r=P("9hz9l"),n=P("k9bMn"),o=P("6No2z"),i=/** @class */function(){function e(e,t,i){if(this.privPayload=null,!t)throw new n.ArgumentNullError("payload");// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
if(e===r.MessageType.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new n.InvalidOperationError("Payload must be ArrayBuffer");if(e===r.MessageType.Text&&"string"!=typeof t)throw new n.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=i||o.createNoDashGuid()}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){// eslint-disable-next-line @typescript-eslint/no-unsafe-return
return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){if(this.privMessageType===r.MessageType.Binary)throw new n.InvalidOperationError("Not supported for binary message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryContent",{get:function(){if(this.privMessageType===r.MessageType.Text)throw new n.InvalidOperationError("Not supported for text message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();e.exports.RawWebsocketMessage=i}),P.register("6aAOQ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RiffPcmEncoder=void 0;var r=/** @class */function(){function e(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}return e.prototype.encode=function(e){var t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;var r=2*t.length,n=new ArrayBuffer(r),o=new DataView(n);return this.floatTo16BitPCM(o,0,t),n},e.prototype.setString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},e.prototype.floatTo16BitPCM=function(e,t,r){for(var n=0;n<r.length;n++,t+=2){var o=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,o<0?32768*o:32767*o,!0)}},e.prototype.downSampleAudioFrame=function(e,t,r){if(!e)return null;if(r===t||r>t)return e;for(var n=t/r,o=Math.round(e.length/n),i=new Float32Array(o),s=0,a=0;a<o;){for(var c=Math.round((a+1)*n),u=0,p=0;s<c&&s<e.length;)u+=e[s++],p++;i[a++]=u/p}return i},e}();e.exports.RiffPcmEncoder=r}),P.register("kB6AF",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Stream=void 0;var o=P("k9bMn"),i=P("6No2z"),s=P("j0HbF"),a=/** @class */function(){function e(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||i.createNoDashGuid(),this.privReaderQueue=new s.Queue}return Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsWriteEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReadEnded",{get:function(){return this.privIsReadEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)},e.prototype.writeStreamChunk=function(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){// Do nothing
}},e.prototype.read=function(){var e=this;if(this.privIsReadEnded)throw new o.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(function(t){return r(e,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!(void 0===t||t.isEnd))return[3/*break*/,2];return[4/*yield*/,this.privReaderQueue.dispose("End of stream reached")];case 1:e.sent(),e.label=2;case 2:return[2/*return*/,t]}})})})},e.prototype.readEnded=function(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.Queue)},e.prototype.throwIfClosed=function(){if(this.privIsWriteEnded)throw new o.InvalidOperationError("Stream closed")},e}();e.exports.Stream=a}),P.register("kwDiF",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationStatus=void 0,/**
     * @member TranslationStatus.Success
     */(r=e.exports.TranslationStatus||(e.exports.TranslationStatus={}))[r.Success=0]="Success",/**
     * @member TranslationStatus.Error
     */r[r.Error=1]="Error"}),P.register("1qtOX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ChunkedArrayBufferStream=void 0;var o=/** @class */function(e){function t(t,r){var n=e.call(this,r)||this;return n.privTargetChunkSize=t,n.privNextBufferReadyBytes=0,n}return n(t,e),t.prototype.writeStreamChunk=function(t){// No pending write, and the buffer is the right size so write it.
if(t.isEnd||0===this.privNextBufferReadyBytes&&t.buffer.byteLength===this.privTargetChunkSize){e.prototype.writeStreamChunk.call(this,t);return}for(var r=0;r<t.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=t.timeReceived);// Find out how many bytes we can copy into the read buffer.
var n=Math.min(t.buffer.byteLength-r,this.privTargetChunkSize-this.privNextBufferReadyBytes),o=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(t.buffer.slice(r,n+r));o.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,r+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}},t.prototype.close=function(){0===this.privNextBufferReadyBytes||this.isClosed||e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),e.prototype.close.call(this)},t}(P("aQGWi").Stream);e.exports.ChunkedArrayBufferStream=o}),P.register("3SRw5",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("jl3jo",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Timeout=void 0;var r=/** @class */function(){function e(){}return e.load=function(){// Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.
var t=new Map([[0,function(){}]]),r=new Map,n="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),o=new Worker(n);// eslint-disable-line @typescript-eslint/no-empty-function
return o.addEventListener("message",function(n){var o=n.data;if(e.isCallNotification(o)){var i=o.params.timerId,s=t.get(i);if("number"==typeof s){var a=r.get(s);if(void 0===a||a!==i)throw Error("The timer is in an undefined state.")}else if(void 0!==s)s(),// A timeout can be safely deleted because it is only called once.
t.delete(i);else throw Error("The timer is in an undefined state.")}else if(e.isClearResponse(o)){var c=o.id,a=r.get(c);if(void 0===a)throw Error("The timer is in an undefined state.");r.delete(c),t.delete(a)}else throw Error(o.error.message)}),{clearTimeout:function(e){var n=Math.random();r.set(n,e),t.set(e,n),o.postMessage({id:n,method:"clear",params:{timerId:e}})},setTimeout:function(e,r){var n=Math.random();return t.set(n,e),o.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n}}),n}}},e.loadWorkerTimers=function(){return function(){return null!==e.workerTimers||(e.workerTimers=e.load()),e.workerTimers}},e.isCallNotification=function(e){return void 0!==e.method&&"call"===e.method},e.isClearResponse=function(e){return null===e.error&&"number"==typeof e.id},e.workerTimers=null,e.clearTimeout=function(t){return e.timers().clearTimeout(t)},e.setTimeout=function(t,r){return e.timers().setTimeout(t,r)},e.timers=e.loadWorkerTimers(),e}();e.exports.Timeout=r}),P.register("b9eCk",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.OCSPCacheUpdateErrorEvent=e.exports.OCSPResponseRetrievedEvent=e.exports.OCSPCacheFetchErrorEvent=e.exports.OCSPVerificationFailedEvent=e.exports.OCSPCacheHitEvent=e.exports.OCSPCacheEntryNeedsRefreshEvent=e.exports.OCSPCacheEntryExpiredEvent=e.exports.OCSPWSUpgradeStartedEvent=e.exports.OCSPStapleReceivedEvent=e.exports.OCSPCacheUpdateCompleteEvent=e.exports.OCSPDiskCacheStoreEvent=e.exports.OCSPMemoryCacheStoreEvent=e.exports.OCSPCacheUpdateNeededEvent=e.exports.OCSPDiskCacheHitEvent=e.exports.OCSPCacheMissEvent=e.exports.OCSPMemoryCacheHitEvent=e.exports.OCSPEvent=void 0;var o=P("fWb2B"),i=/** @class */function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.privSignature=n,o}return n(t,e),t}(o.PlatformEvent);e.exports.OCSPEvent=i;var s=/** @class */function(e){function t(t){return e.call(this,"OCSPMemoryCacheHitEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPMemoryCacheHitEvent=s;var a=/** @class */function(e){function t(t){return e.call(this,"OCSPCacheMissEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPCacheMissEvent=a;var c=/** @class */function(e){function t(t){return e.call(this,"OCSPDiskCacheHitEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPDiskCacheHitEvent=c;var u=/** @class */function(e){function t(t){return e.call(this,"OCSPCacheUpdateNeededEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPCacheUpdateNeededEvent=u;var p=/** @class */function(e){function t(t){return e.call(this,"OCSPMemoryCacheStoreEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPMemoryCacheStoreEvent=p;var l=/** @class */function(e){function t(t){return e.call(this,"OCSPDiskCacheStoreEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPDiskCacheStoreEvent=l;var f=/** @class */function(e){function t(t){return e.call(this,"OCSPCacheUpdateCompleteEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPCacheUpdateCompleteEvent=f;var h=/** @class */function(e){function t(){return e.call(this,"OCSPStapleReceivedEvent",o.EventType.Debug,"")||this}return n(t,e),t}(i);e.exports.OCSPStapleReceivedEvent=h;var d=/** @class */function(e){function t(t){return e.call(this,"OCSPWSUpgradeStartedEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPWSUpgradeStartedEvent=d;var v=/** @class */function(e){function t(t,r){var n=e.call(this,"OCSPCacheEntryExpiredEvent",o.EventType.Debug,t)||this;return n.privExpireTime=r,n}return n(t,e),t}(i);e.exports.OCSPCacheEntryExpiredEvent=v;var y=/** @class */function(e){function t(t,r,n){var i=e.call(this,"OCSPCacheEntryNeedsRefreshEvent",o.EventType.Debug,t)||this;return i.privExpireTime=n,i.privStartTime=r,i}return n(t,e),t}(i);e.exports.OCSPCacheEntryNeedsRefreshEvent=y;var g=/** @class */function(e){function t(t,r,n){var i=e.call(this,"OCSPCacheHitEvent",o.EventType.Debug,t)||this;return i.privExpireTime=n,i.privExpireTimeString=new Date(n).toLocaleDateString(),i.privStartTime=r,i.privStartTimeString=new Date(r).toLocaleTimeString(),i}return n(t,e),t}(i);e.exports.OCSPCacheHitEvent=g;var m=/** @class */function(e){function t(t,r){var n=e.call(this,"OCSPVerificationFailedEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return n(t,e),t}(i);e.exports.OCSPVerificationFailedEvent=m;var b=/** @class */function(e){function t(t,r){var n=e.call(this,"OCSPCacheFetchErrorEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return n(t,e),t}(i);e.exports.OCSPCacheFetchErrorEvent=b;var S=/** @class */function(e){function t(t){return e.call(this,"OCSPResponseRetrievedEvent",o.EventType.Debug,t)||this}return n(t,e),t}(i);e.exports.OCSPResponseRetrievedEvent=S;var C=/** @class */function(e){function t(t,r){var n=e.call(this,"OCSPCacheUpdateErrorEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return n(t,e),t}(i);e.exports.OCSPCacheUpdateErrorEvent=C}),P.register("780kN",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BackgroundEvent=void 0;var o=P("aQGWi"),i=/** @class */function(e){function t(t){var r=e.call(this,"BackgroundEvent",o.EventType.Error)||this;return r.privError=t,r}return n(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);e.exports.BackgroundEvent=i}),P.register("eyacr",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Contracts=void 0;/**
 * @class Contracts
 * @private
 */var r=/** @class */function(){function e(){}return e.throwIfNullOrUndefined=function(e,t){if(null==e)throw Error("throwIfNullOrUndefined:"+t)},e.throwIfNull=function(e,t){if(null===e)throw Error("throwIfNull:"+t)},e.throwIfNullOrWhitespace=function(t,r){if(e.throwIfNullOrUndefined(t,r),(""+t).trim().length<1)throw Error("throwIfNullOrWhitespace:"+r)},e.throwIfNullOrTooLong=function(t,r,n){if(e.throwIfNullOrUndefined(t,r),(""+t).length>n)throw Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")},e.throwIfNullOrTooShort=function(t,r,n){if(e.throwIfNullOrUndefined(t,r),(""+t).length<n)throw Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")},e.throwIfDisposed=function(e){if(e)throw Error("the object is already disposed")},e.throwIfArrayEmptyOrWhitespace=function(t,r){if(e.throwIfNullOrUndefined(t,r),0===t.length)throw Error("throwIfArrayEmptyOrWhitespace:"+r);for(var n=0;n<t.length;n++){var o=t[n];e.throwIfNullOrWhitespace(o,r)}},e.throwIfFileDoesNotExist=function(t,r){e.throwIfNullOrWhitespace(t,r);// TODO check for file existence.
},e.throwIfNotUndefined=function(e,t){if(void 0!==e)throw Error("throwIfNotUndefined:"+t)},e}();e.exports.Contracts=r}),P.register("69sbX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("cbRUE",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MicAudioSource=e.exports.AudioWorkletSourceURLPropertyName=void 0;var o=P("f7AdM"),i=P("aQGWi"),s=P("9k8LZ");e.exports.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var a=/** @class */function(){function t(e,r,n,o){this.privRecorder=e,this.deviceId=r,this.privStreams={},this.privOutputChunkSize=t.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||i.createNoDashGuid(),this.privEvents=new i.EventSource,this.privMediaStream=o||null,this.privIsClosing=!1}return Object.defineProperty(t.prototype,"format",{get:function(){return Promise.resolve(t.AUDIOFORMAT)},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){var e=this;if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new i.Deferred;try{this.createAudioContext()}catch(e){return e instanceof Error?this.privInitializeDeferral.reject(e.name+": "+e.message):this.privInitializeDeferral.reject(e),this.privInitializeDeferral.promise}var t=window.navigator,r=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia;if(t.mediaDevices&&(r=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r).catch(n)}),r){var n=function(){e.onEvent(new i.AudioSourceInitializingEvent(e.privId)),e.privMediaStream&&e.privMediaStream.active?(e.onEvent(new i.AudioSourceReadyEvent(e.privId)),e.privInitializeDeferral.resolve()):r({audio:!e.deviceId||{deviceId:e.deviceId},video:!1},function(t){e.privMediaStream=t,e.onEvent(new i.AudioSourceReadyEvent(e.privId)),e.privInitializeDeferral.resolve()},function(t){var r="Error occurred during microphone initialization: "+t;e.privInitializeDeferral.reject(r),e.onEvent(new i.AudioSourceErrorEvent(e.privId,r))})};"suspended"===this.privContext.state?// https://github.com/WebAudio/web-audio-api/issues/790
this.privContext.resume().then(n).catch(function(t){e.privInitializeDeferral.reject("Failed to initialize audio context: "+t)}):n()}else{var o="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(o),this.onEvent(new i.AudioSourceErrorEvent(o,""))}return this.privInitializeDeferral.promise},t.prototype.id=function(){return this.privId},t.prototype.attach=function(e){var t=this;return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then(function(o){return t.onEvent(new i.AudioStreamNodeAttachedEvent(t.privId,e)),{detach:function(){return r(t,void 0,void 0,function(){return n(this,function(t){return o.readEnded(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),[2/*return*/,this.turnOff()]})})},id:function(){return e},read:function(){return o.read()}}})},t.prototype.detach=function(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)))},t.prototype.turnOff=function(){return r(this,void 0,void 0,function(){var e,t;return n(this,function(r){switch(r.label){case 0:for(e in this.privStreams)e&&(t=this.privStreams[e])&&t.close();if(this.onEvent(new i.AudioSourceOffEvent(this.privId)),!this.privInitializeDeferral)return[3/*break*/,2];// Correctly handle when browser forces mic off before turnOn() completes
// eslint-disable-next-line @typescript-eslint/await-thenable
return[4/*yield*/,this.privInitializeDeferral];case 1:// Correctly handle when browser forces mic off before turnOn() completes
// eslint-disable-next-line @typescript-eslint/await-thenable
r.sent(),this.privInitializeDeferral=null,r.label=2;case 2:return[4/*yield*/,this.destroyAudioContext()];case 3:return r.sent(),[2/*return*/]}})})},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return this.getMicrophoneLabel().then(function(e){return{bitspersample:t.AUDIOFORMAT.bitsPerSample,channelcount:t.AUDIOFORMAT.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:t.AUDIOFORMAT.samplesPerSec,type:o.type.Microphones}})},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(t,r){if(t===e.exports.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(r);else throw Error("Property '"+t+"' is not supported on Microphone.")},t.prototype.getMicrophoneLabel=function(){var e=this,t="microphone";// If we did this already, return the value.
if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);// If the stream isn't currently running, we can't query devices because security.
if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(t);// Setup a default
this.privMicrophoneLabel=t;// Get the id of the device running the audio track.
var r=this.privMediaStream.getTracks()[0].getSettings().deviceId;// If the browser doesn't support getting the device ID, set a default and return.
if(void 0===r)return Promise.resolve(this.privMicrophoneLabel);var n=new i.Deferred;return(// Enumerate the media devices.
navigator.mediaDevices.enumerateDevices().then(function(t){for(var o=0;o<t.length;o++){var i=t[o];if(i.deviceId===r){// Found the device
e.privMicrophoneLabel=i.label;break}}n.resolve(e.privMicrophoneLabel)},function(){return n.resolve(e.privMicrophoneLabel)}),n.promise)},t.prototype.listen=function(e){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return[4/*yield*/,this.turnOn()];case 1:r.sent(),t=new i.ChunkedArrayBufferStream(this.privOutputChunkSize,e),this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new i.AudioStreamNodeErrorEvent(this.privId,e,t)),t}return[2/*return*/,t]}})})},t.prototype.onEvent=function(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)},t.prototype.createAudioContext=function(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(t.AUDIOFORMAT.samplesPerSec))},t.prototype.destroyAudioContext=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:if(!this.privContext)return[2/*return*/];if(this.privRecorder.releaseMediaResources(this.privContext),e=!1,"close"in this.privContext&&(e=!0),!e)return[3/*break*/,3];if(this.privIsClosing)return[3/*break*/,2];return(// The audio context close may take enough time that the close is called twice
this.privIsClosing=!0,[4/*yield*/,this.privContext.close()]);case 1:t.sent(),this.privContext=null,this.privIsClosing=!1,t.label=2;case 2:return[3/*break*/,5];case 3:if(!(null!==this.privContext&&"running"===this.privContext.state))return[3/*break*/,5];// Suspend actually takes a callback, but analogous to the
// resume method, it'll be only fired if suspend is called
// in a direct response to a user action. The later is not always
// the case, as TurnOff is also called, when we receive an
// end-of-speech message from the service. So, doing a best effort
// fire-and-forget here.
return[4/*yield*/,this.privContext.suspend()];case 4:// Suspend actually takes a callback, but analogous to the
// resume method, it'll be only fired if suspend is called
// in a direct response to a user action. The later is not always
// the case, as TurnOff is also called, when we receive an
// end-of-speech message from the service. So, doing a best effort
// fire-and-forget here.
t.sent(),t.label=5;case 5:return[2/*return*/]}})})},t.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat(),t}();e.exports.MicAudioSource=a}),P.register("f7AdM",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AutoDetectSourceLanguagesOpenRangeOptionName=e.exports.ForceDictationPropertyName=e.exports.ServicePropertiesPropertyName=e.exports.CancellationErrorCodePropertyName=e.exports.OutputFormatPropertyName=void 0,// Make sure not to export internal modules.
//
n(P("6nmfX"),e.exports),n(P("eQsqc"),e.exports),n(P("bEBGY"),e.exports),n(P("eYRfv"),e.exports),n(P("8tklx"),e.exports),n(P("525Nm"),e.exports),n(P("b9sNN"),e.exports),n(P("dpFUI"),e.exports),n(P("e8WsR"),e.exports),n(P("4nFox"),e.exports),n(P("6mSDu"),e.exports),n(P("1kF6N"),e.exports),n(P("bmNoP"),e.exports),n(P("lQgwD"),e.exports),n(P("dXIRS"),e.exports),n(P("8Ianm"),e.exports),n(P("dhQLy"),e.exports),n(P("gipJG"),e.exports),n(P("aUPev"),e.exports),n(P("kKVVF"),e.exports),n(P("45xOT"),e.exports),n(P("5EFRZ"),e.exports),n(P("aGFIK"),e.exports),n(P("8UIs1"),e.exports),n(P("fVMYt"),e.exports),n(P("g7bOa"),e.exports),n(P("KpUNJ"),e.exports),n(P("foEJC"),e.exports),n(P("jd3sg"),e.exports),n(P("6zidg"),e.exports),n(P("bviRa"),e.exports),n(P("hQxFe"),e.exports),n(P("afxEW"),e.exports),n(P("fuBRi"),e.exports),n(P("98T6H"),e.exports),n(P("hRQw8"),e.exports),n(P("aZTMF"),e.exports),n(P("4IY4X"),e.exports),n(P("lxqu7"),e.exports),n(P("cbLPJ"),e.exports),n(P("j739h"),e.exports),n(P("dlibP"),e.exports),n(P("b4Kqc"),e.exports),n(P("8Aewq"),e.exports),n(P("7sRyH"),e.exports),n(P("fYNMc"),e.exports),n(P("a0sqs"),e.exports),n(P("crODb"),e.exports),n(P("p7FK8"),e.exports),n(P("8kTWd"),e.exports),n(P("jNHgx"),e.exports),n(P("4adYo"),e.exports),e.exports.OutputFormatPropertyName="OutputFormat",e.exports.CancellationErrorCodePropertyName="CancellationErrorCode",e.exports.ServicePropertiesPropertyName="ServiceProperties",e.exports.ForceDictationPropertyName="ForceDictation",e.exports.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}),P.register("6nmfX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CognitiveSubscriptionKeyAuthentication=void 0;var r=P("aQGWi"),n=P("eJOps"),o=P("bEBGY"),i=/** @class */function(){/**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */function e(e){if(!e)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(n.HeaderNames.AuthKey,e)}return(/**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.fetch=function(e){return Promise.resolve(this.privAuthInfo)},/**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.fetchOnExpiry=function(e){return Promise.resolve(this.privAuthInfo)},e)}();e.exports.CognitiveSubscriptionKeyAuthentication=i}),P.register("eJOps",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.HeaderNames=void 0;var r=/** @class */function(){function e(){}return e.AuthKey="Ocp-Apim-Subscription-Key",e.Authorization="Authorization",e.SpIDAuthKey="Apim-Subscription-Id",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",e}();e.exports.HeaderNames=r}),P.register("bEBGY",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AuthInfo=void 0;var r=/** @class */function(){function e(e,t){this.privHeaderName=e,this.privToken=t}return Object.defineProperty(e.prototype,"headerName",{get:function(){return this.privHeaderName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privToken},enumerable:!1,configurable:!0}),e}();e.exports.AuthInfo=r}),P.register("eQsqc",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CognitiveTokenAuthentication=void 0;var r=P("aQGWi"),n=P("bEBGY"),o=P("eJOps"),i=/** @class */function(){function e(e,t){if(!e)throw new r.ArgumentNullError("fetchCallback");if(!t)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}return e.prototype.fetch=function(t){return this.privFetchCallback(t).then(function(t){return new n.AuthInfo(o.HeaderNames.Authorization,void 0===t?void 0:e.privTokenPrefix+t)})},e.prototype.fetchOnExpiry=function(t){return this.privFetchOnExpiryCallback(t).then(function(t){return new n.AuthInfo(o.HeaderNames.Authorization,void 0===t?void 0:e.privTokenPrefix+t)})},e.privTokenPrefix="bearer ",e}();e.exports.CognitiveTokenAuthentication=i}),P.register("eYRfv",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("8tklx",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("525Nm",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentConnectionFactory=void 0;var o=P("8nLmq"),i=P("9pfmZ"),s=P("lsi6M"),a=P("f7AdM"),c=P("eJOps"),u=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!n){var u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_IntentRegion),p=s.ConnectionFactoryBase.getHostSuffix(u);n=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+u+".sr.speech"+p)+"/speech/recognition/interactive/cognitiveservices/v1"}var l={format:"simple",language:e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,l,n);var f={};void 0!==t.token&&""!==t.token&&(f[t.headerName]=t.token),f[c.HeaderNames.ConnectionId]=r,e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,n);var h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(n,l,f,new a.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),h,r)},t.prototype.getSpeechRegionFromIntentRegion=function(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}},t}(s.ConnectionFactoryBase);e.exports.IntentConnectionFactory=u}),P.register("9pfmZ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0});var r=P("gFJqi");Object.defineProperty(e.exports,"AudioConfig",{enumerable:!0,get:function(){return r.AudioConfig}});var n=P("9k8LZ");Object.defineProperty(e.exports,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e.exports,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var o=P("lHjgt");Object.defineProperty(e.exports,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(e.exports,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(e.exports,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var i=P("cyBvg");Object.defineProperty(e.exports,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e.exports,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e.exports,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=P("7aXWJ");Object.defineProperty(e.exports,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=P("lGMy7");Object.defineProperty(e.exports,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var c=P("cRonD");Object.defineProperty(e.exports,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return c.PushAudioOutputStreamCallback}});var u=P("k5MuU");Object.defineProperty(e.exports,"KeywordRecognitionModel",{enumerable:!0,get:function(){return u.KeywordRecognitionModel}});var p=P("9r1Xb");Object.defineProperty(e.exports,"SessionEventArgs",{enumerable:!0,get:function(){return p.SessionEventArgs}});var l=P("eT5U3");Object.defineProperty(e.exports,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var f=P("7uWHb");Object.defineProperty(e.exports,"OutputFormat",{enumerable:!0,get:function(){return f.OutputFormat}});var h=P("ed6fV");Object.defineProperty(e.exports,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return h.IntentRecognitionEventArgs}});var d=P("f9kLv");Object.defineProperty(e.exports,"RecognitionResult",{enumerable:!0,get:function(){return d.RecognitionResult}});var v=P("fFzYC");Object.defineProperty(e.exports,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var y=P("1ASsK");Object.defineProperty(e.exports,"IntentRecognitionResult",{enumerable:!0,get:function(){return y.IntentRecognitionResult}});var g=P("fTamu");Object.defineProperty(e.exports,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return g.LanguageUnderstandingModel}});var m=P("i9Vwg");Object.defineProperty(e.exports,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionEventArgs}}),Object.defineProperty(e.exports,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return m.ConversationTranscriptionEventArgs}}),Object.defineProperty(e.exports,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return m.MeetingTranscriptionEventArgs}});var b=P("a3h8M");Object.defineProperty(e.exports,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionCanceledEventArgs}});var S=P("2UJ3f");Object.defineProperty(e.exports,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=P("2abry");Object.defineProperty(e.exports,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var R=P("dCqCk");Object.defineProperty(e.exports,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var x=P("bCPKy");Object.defineProperty(e.exports,"TranslationSynthesisResult",{enumerable:!0,get:function(){return x.TranslationSynthesisResult}});var O=P("fpgtH");Object.defineProperty(e.exports,"ResultReason",{enumerable:!0,get:function(){return O.ResultReason}});var w=P("5DN3u");Object.defineProperty(e.exports,"SpeechConfig",{enumerable:!0,get:function(){return w.SpeechConfig}}),Object.defineProperty(e.exports,"SpeechConfigImpl",{enumerable:!0,get:function(){return w.SpeechConfigImpl}});var E=P("bphFi");Object.defineProperty(e.exports,"SpeechTranslationConfig",{enumerable:!0,get:function(){return E.SpeechTranslationConfig}}),Object.defineProperty(e.exports,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return E.SpeechTranslationConfigImpl}});var I=P("c7EsH");Object.defineProperty(e.exports,"PropertyCollection",{enumerable:!0,get:function(){return I.PropertyCollection}});var T=P("2p9Jb");Object.defineProperty(e.exports,"PropertyId",{enumerable:!0,get:function(){return T.PropertyId}});var A=P("c9eo5");Object.defineProperty(e.exports,"Recognizer",{enumerable:!0,get:function(){return A.Recognizer}});var _=P("1sFs4");Object.defineProperty(e.exports,"SpeechRecognizer",{enumerable:!0,get:function(){return _.SpeechRecognizer}});var k=P("dGP87");Object.defineProperty(e.exports,"IntentRecognizer",{enumerable:!0,get:function(){return k.IntentRecognizer}});var M=P("5WVdM");Object.defineProperty(e.exports,"VoiceProfileType",{enumerable:!0,get:function(){return M.VoiceProfileType}});var N=P("jSNw1");Object.defineProperty(e.exports,"TranslationRecognizer",{enumerable:!0,get:function(){return N.TranslationRecognizer}});var j=P("856tT");Object.defineProperty(e.exports,"Translations",{enumerable:!0,get:function(){return j.Translations}});var D=P("aCiCl");Object.defineProperty(e.exports,"NoMatchReason",{enumerable:!0,get:function(){return D.NoMatchReason}});var L=P("fFDUY");Object.defineProperty(e.exports,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var z=P("WZjIA");Object.defineProperty(e.exports,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return z.TranslationRecognitionCanceledEventArgs}});var B=P("kD1vA");Object.defineProperty(e.exports,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.IntentRecognitionCanceledEventArgs}});var F=P("bSShX");Object.defineProperty(e.exports,"CancellationDetailsBase",{enumerable:!0,get:function(){return F.CancellationDetailsBase}});var V=P("7WNRd");Object.defineProperty(e.exports,"CancellationDetails",{enumerable:!0,get:function(){return V.CancellationDetails}});var G=P("dXcZ8");Object.defineProperty(e.exports,"CancellationErrorCode",{enumerable:!0,get:function(){return G.CancellationErrorCode}});var U=P("aYe4l");Object.defineProperty(e.exports,"ConnectionEventArgs",{enumerable:!0,get:function(){return U.ConnectionEventArgs}});var q=P("dWsx5");Object.defineProperty(e.exports,"ServiceEventArgs",{enumerable:!0,get:function(){return q.ServiceEventArgs}});var K=P("1Tr7s");Object.defineProperty(e.exports,"Connection",{enumerable:!0,get:function(){return K.Connection}});var W=P("3Vfbi");Object.defineProperty(e.exports,"PhraseListGrammar",{enumerable:!0,get:function(){return W.PhraseListGrammar}});var H=P("jLc9Z");Object.defineProperty(e.exports,"DialogServiceConfig",{enumerable:!0,get:function(){return H.DialogServiceConfig}});var J=P("6eWGz");Object.defineProperty(e.exports,"BotFrameworkConfig",{enumerable:!0,get:function(){return J.BotFrameworkConfig}});var Q=P("80IbD");Object.defineProperty(e.exports,"CustomCommandsConfig",{enumerable:!0,get:function(){return Q.CustomCommandsConfig}});var $=P("dUVVq");Object.defineProperty(e.exports,"DialogServiceConnector",{enumerable:!0,get:function(){return $.DialogServiceConnector}});var Z=P("kKIo3");Object.defineProperty(e.exports,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Z.ActivityReceivedEventArgs}});var Y=P("8ruDz");Object.defineProperty(e.exports,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Y.TurnStatusReceivedEventArgs}});var X=P("czjvI");Object.defineProperty(e.exports,"ServicePropertyChannel",{enumerable:!0,get:function(){return X.ServicePropertyChannel}});var ee=P("5MXZf");Object.defineProperty(e.exports,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var et=P("6AsKM");Object.defineProperty(e.exports,"BaseAudioPlayer",{enumerable:!0,get:function(){return et.BaseAudioPlayer}});var er=P("br6GM");Object.defineProperty(e.exports,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return er.ConnectionMessageEventArgs}});var en=P("40s5N");Object.defineProperty(e.exports,"ConnectionMessage",{enumerable:!0,get:function(){return en.ConnectionMessage}});var eo=P("eGmpr");Object.defineProperty(e.exports,"VoiceProfile",{enumerable:!0,get:function(){return eo.VoiceProfile}});var ei=P("ek6H7");Object.defineProperty(e.exports,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return ei.VoiceProfileEnrollmentResult}}),Object.defineProperty(e.exports,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return ei.VoiceProfileEnrollmentCancellationDetails}});var es=P("eoFl5");Object.defineProperty(e.exports,"VoiceProfileResult",{enumerable:!0,get:function(){return es.VoiceProfileResult}}),Object.defineProperty(e.exports,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return es.VoiceProfileCancellationDetails}});var ea=P("fuHtR");Object.defineProperty(e.exports,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ea.VoiceProfilePhraseResult}});var ec=P("3MFqC");Object.defineProperty(e.exports,"VoiceProfileClient",{enumerable:!0,get:function(){return ec.VoiceProfileClient}});var eu=P("RKQJ9");Object.defineProperty(e.exports,"SpeakerRecognizer",{enumerable:!0,get:function(){return eu.SpeakerRecognizer}});var ep=P("2Zjwl");Object.defineProperty(e.exports,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ep.SpeakerIdentificationModel}});var el=P("8Y1fC");Object.defineProperty(e.exports,"SpeakerVerificationModel",{enumerable:!0,get:function(){return el.SpeakerVerificationModel}});var ef=P("365MX");Object.defineProperty(e.exports,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return ef.AutoDetectSourceLanguageConfig}});var eh=P("khHxj");Object.defineProperty(e.exports,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return eh.AutoDetectSourceLanguageResult}});var ed=P("iep6H");Object.defineProperty(e.exports,"SourceLanguageConfig",{enumerable:!0,get:function(){return ed.SourceLanguageConfig}});var ev=P("6ik4C");Object.defineProperty(e.exports,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return ev.SpeakerRecognitionResult}}),Object.defineProperty(e.exports,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return ev.SpeakerRecognitionResultType}}),Object.defineProperty(e.exports,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return ev.SpeakerRecognitionCancellationDetails}});var ey=P("a0QDp");Object.defineProperty(e.exports,"Conversation",{enumerable:!0,get:function(){return ey.Conversation}}),Object.defineProperty(e.exports,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ey.ConversationExpirationEventArgs}}),Object.defineProperty(e.exports,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ey.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e.exports,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ey.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e.exports,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ey.ConversationTranslationEventArgs}}),Object.defineProperty(e.exports,"ConversationTranslationResult",{enumerable:!0,get:function(){return ey.ConversationTranslationResult}}),Object.defineProperty(e.exports,"ConversationTranslator",{enumerable:!0,get:function(){return ey.ConversationTranslator}}),Object.defineProperty(e.exports,"ConversationTranscriber",{enumerable:!0,get:function(){return ey.ConversationTranscriber}}),Object.defineProperty(e.exports,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ey.ConversationTranscriptionResult}}),Object.defineProperty(e.exports,"Meeting",{enumerable:!0,get:function(){return ey.Meeting}}),Object.defineProperty(e.exports,"MeetingTranscriber",{enumerable:!0,get:function(){return ey.MeetingTranscriber}}),Object.defineProperty(e.exports,"Participant",{enumerable:!0,get:function(){return ey.Participant}}),Object.defineProperty(e.exports,"ParticipantChangedReason",{enumerable:!0,get:function(){return ey.ParticipantChangedReason}}),Object.defineProperty(e.exports,"User",{enumerable:!0,get:function(){return ey.User}});var eg=P("kgSJT");Object.defineProperty(e.exports,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return eg.SpeechSynthesisOutputFormat}});var em=P("liGtQ");Object.defineProperty(e.exports,"SpeechSynthesizer",{enumerable:!0,get:function(){return em.SpeechSynthesizer}});var eb=P("jm3Wr");Object.defineProperty(e.exports,"SynthesisResult",{enumerable:!0,get:function(){return eb.SynthesisResult}});var eS=P("1s4bA");Object.defineProperty(e.exports,"SpeechSynthesisResult",{enumerable:!0,get:function(){return eS.SpeechSynthesisResult}});var eP=P("hQiLa");Object.defineProperty(e.exports,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return eP.SpeechSynthesisEventArgs}});var eC=P("37b2n");Object.defineProperty(e.exports,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return eC.SpeechSynthesisWordBoundaryEventArgs}});var eR=P("eV5S6");Object.defineProperty(e.exports,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return eR.SpeechSynthesisBookmarkEventArgs}});var ex=P("kSZp2");Object.defineProperty(e.exports,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return ex.SpeechSynthesisVisemeEventArgs}});var eO=P("eGyA4");Object.defineProperty(e.exports,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return eO.SpeechSynthesisBoundaryType}});var ew=P("iosz0");Object.defineProperty(e.exports,"SynthesisVoicesResult",{enumerable:!0,get:function(){return ew.SynthesisVoicesResult}});var eE=P("jmnMC");Object.defineProperty(e.exports,"VoiceInfo",{enumerable:!0,get:function(){return eE.VoiceInfo}});var eI=P("2rYjG");Object.defineProperty(e.exports,"SpeakerAudioDestination",{enumerable:!0,get:function(){return eI.SpeakerAudioDestination}});var eT=P("9QHhe");Object.defineProperty(e.exports,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return eT.ConversationTranscriptionCanceledEventArgs}});var eA=P("itCA2");Object.defineProperty(e.exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return eA.MeetingTranscriptionCanceledEventArgs}});var e_=P("dFlS7");Object.defineProperty(e.exports,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return e_.PronunciationAssessmentGradingSystem}});var ek=P("iWFqn");Object.defineProperty(e.exports,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ek.PronunciationAssessmentGranularity}});var eM=P("aFT8k");Object.defineProperty(e.exports,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return eM.PronunciationAssessmentConfig}});var eN=P("gcyL0");Object.defineProperty(e.exports,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return eN.PronunciationAssessmentResult}});var ej=P("8r1t5");Object.defineProperty(e.exports,"LanguageIdMode",{enumerable:!0,get:function(){return ej.LanguageIdMode}});var eD=P("erpit");Object.defineProperty(e.exports,"Diagnostics",{enumerable:!0,get:function(){return eD.Diagnostics}});var eL=P("lLzU6");Object.defineProperty(e.exports,"LogLevel",{enumerable:!0,get:function(){return eL.LogLevel}})}),P.register("gFJqi",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AudioOutputConfigImpl=e.exports.AudioConfigImpl=e.exports.AudioConfig=void 0;var o=P("8nLmq"),i=P("eyacr"),s=P("9pfmZ"),a=P("aDs2b"),c=P("lHjgt"),u=P("cyBvg"),p=/** @class */function(){function e(){}return(/**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */e.fromDefaultMicrophoneInput=function(){var e=new o.PcmRecorder(!0);return new l(new o.MicAudioSource(e))},/**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     * Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */e.fromMicrophoneInput=function(e){var t=new o.PcmRecorder(!0);return new l(new o.MicAudioSource(t,e))},/**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */e.fromWavFileInput=function(e,t){return void 0===t&&(t="unnamedBuffer.wav"),new l(new o.FileAudioSource(e,t))},/**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback | MediaStream} audioStream - Specifies the custom audio input
     * stream. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */e.fromStreamInput=function(e){if(e instanceof s.PullAudioInputStreamCallback)return new l(new c.PullAudioInputStreamImpl(e));if(e instanceof s.AudioInputStream)return new l(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){var t=new o.PcmRecorder(!1);return new l(new o.MicAudioSource(t,null,null,e))}throw Error("Not Supported Type")},/**
     * Creates an AudioConfig object representing the default speaker.
     * @member AudioConfig.fromDefaultSpeakerOutput
     * @function
     * @public
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */e.fromDefaultSpeakerOutput=function(){return new f(new s.SpeakerAudioDestination)},/**
     * Creates an AudioConfig object representing the custom IPlayer object.
     * You can use the IPlayer object to control pause, resume, etc.
     * @member AudioConfig.fromSpeakerOutput
     * @function
     * @public
     * @param {IPlayer} player - the IPlayer object for playback.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.12.0
     */e.fromSpeakerOutput=function(t){if(void 0===t)return e.fromDefaultSpeakerOutput();if(t instanceof s.SpeakerAudioDestination)return new f(t);throw Error("Not Supported Type")},/**
     * Creates an AudioConfig object representing a specified output audio file
     * @member AudioConfig.fromAudioFileOutput
     * @function
     * @public
     * @param {PathLike} filename - the filename of the output audio file
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */e.fromAudioFileOutput=function(e){return new f(new a.AudioFileWriter(e))},/**
     * Creates an AudioConfig object representing a specified audio output stream
     * @member AudioConfig.fromStreamOutput
     * @function
     * @public
     * @param {AudioOutputStream | PushAudioOutputStreamCallback} audioStream - Specifies the custom audio output
     * stream.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */e.fromStreamOutput=function(e){if(e instanceof s.PushAudioOutputStreamCallback)return new f(new u.PushAudioOutputStreamImpl(e));if(e instanceof s.PushAudioOutputStream||e instanceof s.PullAudioOutputStream)return new f(e);throw Error("Not Supported Type")},e)}();e.exports.AudioConfig=p;/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */var l=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */function t(t){var r=e.call(this)||this;return r.privSource=t,r}return n(t,e),Object.defineProperty(t.prototype,"format",{/**
         * Format information for the audio
         */get:function(){return this.privSource.format},enumerable:!1,configurable:!0}),/**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){this.privSource.turnOff().then(function(){e&&e()},function(e){t&&t(e)})},/**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */t.prototype.id=function(){return this.privSource.id()},/**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */t.prototype.turnOn=function(){return this.privSource.turnOn()},/**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */t.prototype.attach=function(e){return this.privSource.attach(e)},/**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */t.prototype.detach=function(e){return this.privSource.detach(e)},/**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */t.prototype.turnOff=function(){return this.privSource.turnOff()},Object.defineProperty(t.prototype,"events",{/**
         * @member AudioConfigImpl.prototype.events
         * @function
         * @public
         * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
         */get:function(){return this.privSource.events},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){if(i.Contracts.throwIfNull(t,"value"),void 0!==this.privSource.setProperty)this.privSource.setProperty(e,t);else throw Error("This AudioConfig instance does not support setting properties.")},t.prototype.getProperty=function(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw Error("This AudioConfig instance does not support getting properties.")},Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return this.privSource.deviceInfo},enumerable:!1,configurable:!0}),t}(p);e.exports.AudioConfigImpl=l;var f=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioDestination} destination - An audio destination.
     */function t(t){var r=e.call(this)||this;return r.privDestination=t,r}return n(t,e),Object.defineProperty(t.prototype,"format",{set:function(e){this.privDestination.format=e},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privDestination.write(e)},t.prototype.close=function(){this.privDestination.close()},t.prototype.id=function(){return this.privDestination.id()},t.prototype.setProperty=function(){throw Error("This AudioConfig instance does not support setting properties.")},t.prototype.getProperty=function(){throw Error("This AudioConfig instance does not support getting properties.")},t}(p);e.exports.AudioOutputConfigImpl=f}),P.register("aDs2b",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&r(t,e,o);return n(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AudioFileWriter=void 0;var i=o(P("1DJXa")),s=P("eyacr"),a=/** @class */function(){function e(e){s.Contracts.throwIfNullOrUndefined(i.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=i.openSync(e,"w")}return Object.defineProperty(e.prototype,"format",{set:function(e){s.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;var t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=i.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))},enumerable:!1,configurable:!0}),e.prototype.write=function(e){s.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))},e.prototype.close=function(){var e=this;void 0!==this.privFd&&(this.privWriteStream.on("finish",function(){e.privAudioFormat.hasHeader&&(e.privAudioFormat.updateHeader(e.privWriteStream.bytesWritten),i.writeSync(e.privFd,new Int8Array(e.privAudioFormat.header),0,e.privAudioFormat.header.byteLength,0)),i.closeSync(e.privFd),e.privFd=void 0}),this.privWriteStream.end())},e.prototype.id=function(){return this.privId},e}();e.exports.AudioFileWriter=a}),P.register("lHjgt",function(e,t){var r,n=P("Q5vhj").Buffer,o=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},s=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PullAudioInputStreamImpl=e.exports.PullAudioInputStream=e.exports.PushAudioInputStreamImpl=e.exports.PushAudioInputStream=e.exports.AudioInputStream=void 0;var a=P("f7AdM"),c=P("aQGWi"),u=P("6No2z"),p=P("9pfmZ"),l=P("9k8LZ"),f=/** @class */function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function e(){}return(/**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * written to the push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */e.createPushStream=function(e){return h.create(e)},/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     * PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     * the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */e.createPullStream=function(e,t){return v.create(e,t);// throw new Error("Oops");
},e)}();e.exports.AudioInputStream=f;/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */var h=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),/**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     * push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */t.create=function(e){return new d(e)},t}(f);e.exports.PushAudioInputStream=h;/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */var d=/** @class */function(e){/**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */function t(t){var r=e.call(this)||this;return void 0===t?r.privFormat=l.AudioStreamFormatImpl.getDefaultInputFormat():r.privFormat=t,r.privEvents=new c.EventSource,r.privId=u.createNoDashGuid(),r.privStream=new c.ChunkedArrayBufferStream(r.privFormat.avgBytesPerSec/10),r}return o(t,e),Object.defineProperty(t.prototype,"format",{/**
         * Format information for the audio
         */get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),/**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */t.prototype.write=function(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},/**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){this.privStream.close()},t.prototype.id=function(){return this.privId},t.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},t.prototype.attach=function(e){return i(this,void 0,void 0,function(){var t,r=this;return s(this,function(n){switch(n.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4/*yield*/,this.turnOn()];case 1:return n.sent(),t=this.privStream,this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2/*return*/,{detach:function(){return i(r,void 0,void 0,function(){return s(this,function(t){return this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e)),[2/*return*/,this.turnOff()]})})},id:function(){return e},read:function(){return t.read()}}]}})})},t.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},t.prototype.turnOff=function(){},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:a.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:a.type.Stream})},enumerable:!1,configurable:!0}),t.prototype.onEvent=function(e){this.privEvents.onEvent(e),c.Events.instance.onEvent(e)},t.prototype.toBuffer=function(e){for(var t=n.alloc(e.byteLength),r=new Uint8Array(e),o=0;o<t.length;++o)t[o]=r[o];return t},t}(h);e.exports.PushAudioInputStreamImpl=d;/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */var v=/** @class */function(e){/**
     * Creates and initializes and instance.
     * @constructor
     */function t(){return e.call(this)||this}return o(t,e),/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */t.create=function(e,t){return new y(e,t)},t}(f);e.exports.PullAudioInputStream=v;/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */var y=/** @class */function(e){/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     */function t(t,r){var n=e.call(this)||this;return void 0===r?n.privFormat=p.AudioStreamFormat.getDefaultInputFormat():n.privFormat=r,n.privEvents=new c.EventSource,n.privId=u.createNoDashGuid(),n.privCallback=t,n.privIsClosed=!1,n.privBufferSize=n.privFormat.avgBytesPerSec/10,n}return o(t,e),Object.defineProperty(t.prototype,"format",{/**
         * Format information for the audio
         */get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),/**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){this.privIsClosed=!0,this.privCallback.close()},t.prototype.id=function(){return this.privId},t.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},t.prototype.attach=function(e){return i(this,void 0,void 0,function(){var t=this;return s(this,function(r){switch(r.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4/*yield*/,this.turnOn()];case 1:return r.sent(),this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2/*return*/,{detach:function(){return t.privCallback.close(),t.onEvent(new c.AudioStreamNodeDetachedEvent(t.privId,e)),t.turnOff()},id:function(){return e},read:function(){// Until we have the minimum number of bytes to send in a transmission, keep asking for more.
for(var e,r=0;r<t.privBufferSize;){// Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
// data back.
var n=new ArrayBuffer(t.privBufferSize-r),o=t.privCallback.read(n);// If there are no bytes to read, just break out and be done.
if(void 0===e?e=n:new Int8Array(e).set(new Int8Array(n),r),0===o)break;r+=o}return Promise.resolve({buffer:e.slice(0,r),isEnd:t.privIsClosed||0===r,timeReceived:Date.now()})}}]}})})},t.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},t.prototype.turnOff=function(){},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:a.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:a.type.Stream})},enumerable:!1,configurable:!0}),t.prototype.onEvent=function(e){this.privEvents.onEvent(e),c.Events.instance.onEvent(e)},t}(v);e.exports.PullAudioInputStreamImpl=y}),P.register("Q5vhj",function(e,t){m(e.exports,"Buffer",()=>r,e=>r=e),m(e.exports,"INSPECT_MAX_BYTES",()=>n,e=>n=e);var r,n,o=P("4FFyr"),i=P("dDTU4");let s="function"==typeof Symbol&&"function"// eslint-disable-line dot-notation
==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom")// eslint-disable-line dot-notation
:null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');// Return an augmented `Uint8Array` instance
let t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */function c(e,t,r){// Common case.
if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!c.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|v(e,t),n=a(r),o=n.write(e,t);return o!==r&&// cause everything after the first invalid character to be ignored. (e.g.
// 'abxxcd' will be treated as 'ab')
(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(F(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(F(e,SharedArrayBuffer)||e&&F(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);let o=function(e){var t;if(c.isBuffer(e)){let t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t// eslint-disable-line no-self-compare
?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function p(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return p(e),a(e<0?0:0|d(e))}function f(e){let t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),c.prototype),n)}function d(e){// Note: cannot use `length < K_MAX_LENGTH` here because that fails when
// length is NaN (which is otherwise coerced to zero.)
if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;// Use a for loop to avoid recursion
let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(o)return n?-1:L(e).length// assume utf8
;t=(""+t).toLowerCase(),o=!0}}function y(e,t,r){let n=!1;// Return early if start > this.length. Done here to prevent potential uint32
// coercion fail below.
if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||// Force coercion to uint32. This will also coerce falsey/NaN values to 0.
(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=V[e[n]];return o}(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}(this,t,r);case"base64":var i,s;return i=t,s=r,0===i&&s===this.length?o.fromByteArray(this):o.fromByteArray(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),o="";// If bytes.length is odd, the last 8 bits must be ignored (same as node.js)
for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function b(e,t,r,n,o){var i;// Empty buffer means no match
if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(i=r=+r// Coerce to Number.
)!=i&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return -1;r=e.length-1}else if(r<0){if(!o)return -1;r=0}// Finally, search either indexOf (if dir is true) or lastIndexOf
if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return(// Special case: looking for empty string/buffer always fails
0===t.length?-1:S(e,t,r,n,o));if("number"==typeof t)return(t&=255// Search for a byte value [0-255]
,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):S(e,[t],r,n,o);throw TypeError("val must be string, number or Buffer")}function S(e,t,r,n,o){let i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else -1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(e,i+n)!==u(t,n)){r=!1;break}if(r)return i}return -1}function C(e,t,r){r=Math.min(e.length,r);let n=[],o=t;for(;o<r;){let t=e[o],i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:(192&(r=e[o+1]))==128&&(c=(31&t)<<6|63&r)>127&&(i=c);break;case 3:r=e[o+1],n=e[o+2],(192&r)==128&&(192&n)==128&&(c=(15&t)<<12|(63&r)<<6|63&n)>2047&&(c<55296||c>57343)&&(i=c);break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&c<1114112&&(i=c)}}null===i?(// we did not generate a valid codePoint so insert a
// replacement char (U+FFFD) and advance only 1 byte
i=65533,s=1):i>65535&&(// encode to utf16 (surrogate pair dance)
i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e)// avoid extra slice()
;// Decode in chunks to avoid "call stack size exceeded".
let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */function R(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,o,i){if(!c.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function O(e,t,r,n,o){M(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function w(e,t,r,n,o){M(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function E(e,t,r,n,o,i){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,n,o){return t=+t,r>>>=0,o||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function T(e,t,r,n,o){return t=+t,r>>>=0,o||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}r=c,n=50,/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Print warning and recommend using `buffer` v4.x which has an Object
 *               implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * We report that the browser does not support typed arrays if the are not subclassable
 * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`
 * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support
 * for __proto__ and has a buggy typed array implementation.
 */c.TYPED_ARRAY_SUPPORT=function(){// Can typed array instances can be augmented?
try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192// not used by this implementation
,/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/c.from=function(e,t,r){return u(e,t,r)},// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:
// https://github.com/feross/buffer/pull/148
Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/c.alloc=function(e,t,r){return(p(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */c.allocUnsafe=function(e){return l(e)},/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype// so Buffer.isBuffer(Buffer.prototype) will be false
},c.compare=function(e,t){if(F(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let t=e[r];if(F(t,Uint8Array))o+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else if(c.isBuffer(t))t.copy(n,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=t.length}return n},c.byteLength=v,// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)
// to detect a Buffer instance. It's not possible to use `instanceof Buffer`
// reliably in a browserify context because there could be multiple different
// copies of the 'buffer' package in use. This method works even for Buffer
// instances that were created from another copy of the `buffer` package.
// See: https://github.com/feross/buffer/issues/154
c.prototype._isBuffer=!0,c.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?C(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="",t=n;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,o){if(F(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;let i=o-n,s=r-t,a=Math.min(i,s),u=this.slice(n,o),p=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==p[e]){i=u[e],s=p[e];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){var o,i,s,a,c,u,p,l;// Buffer#write(string)
if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let h=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let o;r=Number(r)||0;let i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;let s=t.length;for(n>s/2&&(n=s/2),o=0;o<n;++o){let n=parseInt(t.substr(2*o,2),16);if(n!=n)break;e[r+o]=n}return o}(this,e,t,r);case"utf8":case"utf-8":return o=t,i=r,B(L(e,this.length-o),this,o,i);case"ascii":case"latin1":case"binary":return s=t,a=r,B(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":// Warning: maxLength not taken into account in base64Write
return c=t,u=r,B(z(e),this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=t,l=r,B(function(e,t){let r,n;let o=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,this.length-p),this,p,l);default:if(h)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(n,c.prototype),n)},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=G(function(e){N(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&j(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],o=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(o)<<BigInt(32))}),c.prototype.readBigUInt64BE=G(function(e){N(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&j(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],o=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||R(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return(e>>>=0,t||R(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=G(function(e){N(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&j(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24// Overflow
);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),c.prototype.readBigInt64BE=G(function(e){N(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&j(e,this.length-8);let n=(t<<24)+// Overflow
65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;x(this,e,t,r,n,0)}let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;x(this,e,t,r,n,0)}let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=G(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=G(function(e,t=0){return w(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=G(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=G(function(e,t=0){return w(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return T(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return T(this,e,t,!1,r)},// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw TypeError("argument should be a Buffer");// Copy 0 bytes; we're done
if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;// Fatal error conditions
if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
c.prototype.fill=function(e,t,r,n){let o;// Handle string cases:
if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));// Invalid ranges are not set to a default, so can range check early.
if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{let i=c.isBuffer(e)?e:c.from(e,n),s=i.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%s]}return this};// CUSTOM ERRORS
// =============
// Simplified versions from Node, changed for Buffer-only usage
let A={};function _(e,t,r){A[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),// Add the error code to the name to include it in the stack trace.
this.name=`${this.name} [${e}]`,// Access the stack to generate the error message including the error code
// from the name.
this.stack// eslint-disable-line no-unused-expressions
,// Reset the name to the actual name.
delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function k(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function M(e,t,r,n,o,i){if(e>r||e<t){let n;let o="bigint"==typeof t?"n":"";throw n=i>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:`>= ${t}${o} and <= ${r}${o}`,new A.ERR_OUT_OF_RANGE("value",n,e)}N(o,"offset"),(void 0===n[o]||void 0===n[o+i])&&j(o,n.length-(i+1))}function N(e,t){if("number"!=typeof e)throw new A.ERR_INVALID_ARG_TYPE(t,"number",e)}function j(e,t,r){if(Math.floor(e)!==e)throw N(e,r),new A.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new A.ERR_BUFFER_OUT_OF_BOUNDS;throw new A.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}_("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),_("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?o=k(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=k(o)),o+="n"),n+=` It must be ${t}. Received ${o}`},RangeError);// HELPER FUNCTIONS
// ================
let D=/[^+/0-9A-Za-z-_]/g;function L(e,t){let r;t=t||1/0;let n=e.length,o=null,i=[];for(let s=0;s<n;++s){// is surrogate component
if((r=e.charCodeAt(s))>55295&&r<57344){// last char was a lead
if(!o){// no lead yet
if(r>56319||s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}// valid lead
o=r;continue}// 2 leads in a row
if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}// valid surrogate pair
r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);// encode utf8
if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return i}function z(e){return o.toByteArray(function(e){// Node converts strings with length < 2 to ''
if(// Node strips out invalid characters like \n and \t from the string, base64-js does not
(e=// Node takes equal signs as end of the Base64 encoding
(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";// Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length)&&!(o>=e.length);++o)t[o+r]=e[o];return o}// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass
// the `instanceof` check but they should be treated as of that type.
// See: https://github.com/feross/buffer/issues/166
function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}// Create lookup table for `toString('hex')`
// See: https://github.com/feross/buffer/issues/219
let V=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();// Return not function with Error if BigInt not supported
function G(e){return"undefined"==typeof BigInt?U:e}function U(){throw Error("BigInt not supported")}}),P.register("4FFyr",function(e,t){m(e.exports,"toByteArray",()=>r,e=>r=e),m(e.exports,"fromByteArray",()=>n,e=>n=e),r=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");// Trim off extra bytes after placeholder bytes are found
// See: https://github.com/beatgammit/base64-js/issues/42
var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),o=n[0],a=n[1],c=new s((o+a)*3/4-a),u=0,p=a>0?o-4:o;for(r=0;r<p;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},n=function(e){// go through the array every three bytes, we'll deal with trailing stuff later
for(var t,r=e.length,n=r%3// if we have 1 byte left, pad 2 bytes
,i=[],s=0,a=r-n;s<a;s+=16383// must be multiple of 3
)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)i.push(o[(n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?i.push(o[(t=e[r-1])>>2]+o[t<<4&63]+"=="):2===n&&i.push(o[(t=(e[r-2]<<8)+e[r-1])>>10]+o[t>>4&63]+o[t<<2&63]+"="),i.join("")};for(var r,n,o=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=a.length;c<u;++c)o[c]=a[c],i[a.charCodeAt(c)]=c;// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}),P.register("dDTU4",function(e,t){var r,n;m(e.exports,"read",()=>r,e=>r=e),m(e.exports,"write",()=>n,e=>n=e),r=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,p=-7,l=r?o-1:0,f=r?-1:1,h=e[t+l];for(l+=f,i=h&(1<<-p)-1,h>>=-p,p+=a;p>0;i=256*i+e[t+l],l+=f,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;p>0;s=256*s+e[t+l],l+=f,p-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:(h?-1:1)*(1/0);s+=Math.pow(2,n),i-=u}return(h?-1:1)*s*Math.pow(2,i-n)},n=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,f=23===o?5960464477539062e-23:0,h=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+l>=1?t+=f/c:t+=f*Math.pow(2,1-l),t*c>=2&&(s++,c/=2),s+l>=p?(a=0,s=p):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+h]=255&s,h+=d,s/=256,u-=8);e[r+h-d]|=128*v}}),P.register("9k8LZ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n,o,i=e.exports&&e.exports.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AudioStreamFormatImpl=e.exports.AudioStreamFormat=e.exports.AudioFormatTag=void 0,(r=o=e.exports.AudioFormatTag||(e.exports.AudioFormatTag={}))[r.PCM=1]="PCM",r[r.MuLaw=2]="MuLaw",r[r.Siren=3]="Siren",r[r.MP3=4]="MP3",r[r.SILKSkype=5]="SILKSkype",r[r.OGG_OPUS=6]="OGG_OPUS",r[r.WEBM_OPUS=7]="WEBM_OPUS",r[r.ALaw=8]="ALaw",r[r.FLAC=9]="FLAC",r[r.OPUS=10]="OPUS";/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */var s=/** @class */function(){function e(){}return(/**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */e.getDefaultInputFormat=function(){return a.getDefaultInputFormat()},/**
     * Creates an audio stream format object with the specified format characteristics.
     * @member AudioStreamFormat.getWaveFormat
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     * @returns {AudioStreamFormat} The audio stream format being created.
     */e.getWaveFormat=function(e,t,r,n){return new a(e,t,r,n)},/**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */e.getWaveFormatPCM=function(e,t,r){return new a(e,t,r)},e)}();e.exports.AudioStreamFormat=s;/**
 * @private
 * @class AudioStreamFormatImpl
 */var a=/** @class */function(e){/**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     */function t(t,r,n,i){void 0===t&&(t=16e3),void 0===r&&(r=16),void 0===n&&(n=1),void 0===i&&(i=o.PCM);var s=e.call(this)||this,a=!0;/* 1 for PCM; 6 for alaw; 7 for mulaw */switch(i){case o.PCM:s.formatTag=1;break;case o.ALaw:s.formatTag=6;break;case o.MuLaw:s.formatTag=7;break;default:a=!1}if(s.bitsPerSample=r,s.samplesPerSec=t,s.channels=n,s.avgBytesPerSec=s.samplesPerSec*s.channels*(s.bitsPerSample/8),s.blockAlign=s.channels*Math.max(s.bitsPerSample,8),a){s.privHeader=new ArrayBuffer(44);// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
var c=new DataView(s.privHeader);/* RIFF identifier */s.setString(c,0,"RIFF"),/* file length */c.setUint32(4,0,!0),/* RIFF type & Format */s.setString(c,8,"WAVEfmt "),/* format chunk length */c.setUint32(16,16,!0),/* audio format */c.setUint16(20,s.formatTag,!0),/* channel count */c.setUint16(22,s.channels,!0),/* sample rate */c.setUint32(24,s.samplesPerSec,!0),/* byte rate (sample rate * block align) */c.setUint32(28,s.avgBytesPerSec,!0),/* block align (channel count * bytes per sample) */c.setUint16(32,s.channels*(s.bitsPerSample/8),!0),/* bits per sample */c.setUint16(34,s.bitsPerSample,!0),/* data chunk identifier */s.setString(c,36,"data"),/* data chunk length */c.setUint32(40,0,!0)}return s}return i(t,e),/**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */t.getDefaultInputFormat=function(){return new t},/**
     * Creates an audio context appropriate to current browser
     * @member AudioStreamFormatImpl.getAudioContext
     * @function
     * @public
     * @returns {AudioContext} An audio context instance
     *//* eslint-disable */t.getAudioContext=function(e){// Workaround for Speech SDK bug in Safari.
var t=window.AudioContext// our preferred impl
||window.webkitAudioContext// fallback, mostly when on Safari
||!1;// could not find.
// https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw Error("Browser does not support Web Audio API (AudioContext is not available).")},/* eslint-enable *//**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){},Object.defineProperty(t.prototype,"header",{get:function(){return this.privHeader},enumerable:!1,configurable:!0}),t.prototype.setString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},t}(s);e.exports.AudioStreamFormatImpl=a}),P.register("cyBvg",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PushAudioOutputStreamImpl=e.exports.PushAudioOutputStream=e.exports.PullAudioOutputStreamImpl=e.exports.PullAudioOutputStream=e.exports.AudioOutputStream=void 0;var s=P("aQGWi"),a=P("eyacr"),c=P("8t1AB"),u=/** @class */function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function e(){}return(/**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member AudioOutputStream.createPullStream
     * @function
     * @public
     * @returns {PullAudioOutputStream} The audio output stream being created.
     */e.createPullStream=function(){return p.create()},e)}();e.exports.AudioOutputStream=u;/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @class PullAudioOutputStream
 */var p=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),/**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member PullAudioOutputStream.create
     * @function
     * @public
     * @returns {PullAudioOutputStream} The push audio output stream being created.
     */t.create=function(){return new l},t}(u);e.exports.PullAudioOutputStream=p;/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @private
 * @class PullAudioOutputStreamImpl
 */var l=/** @class */function(e){/**
     * Creates and initializes an instance with the given values.
     * @constructor
     */function t(){var t=e.call(this)||this;return t.privId=s.createNoDashGuid(),t.privStream=new s.Stream,t}return n(t,e),Object.defineProperty(t.prototype,"format",{/**
         * Format information for the audio
         */get:function(){return this.privFormat},/**
         * Sets the format information to the stream. For internal use only.
         * @param {AudioStreamFormat} format - the format to be set.
         */set:function(e){null==e&&(this.privFormat=c.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{/**
         * Checks if the stream is closed
         * @member PullAudioOutputStreamImpl.prototype.isClosed
         * @property
         * @public
         */get:function(){return this.privStream.isClosed},enumerable:!1,configurable:!0}),/**
     * Gets the id of the stream
     * @member PullAudioOutputStreamImpl.prototype.id
     * @property
     * @public
     */t.prototype.id=function(){return this.privId},/**
     * Reads audio data from the internal buffer.
     * @member PullAudioOutputStreamImpl.prototype.read
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - An ArrayBuffer to store the read data.
     * @returns {Promise<number>} - Audio buffer length has been read.
     */t.prototype.read=function(e){return o(this,void 0,void 0,function(){var t,r,n,o;return i(this,function(i){switch(i.label){case 0:if(t=new Int8Array(e),r=0,void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),[2/*return*/,Promise.resolve(e.byteLength)];t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}i.label=1;case 1:if(!(r<e.byteLength&&!this.privStream.isReadEnded))return[3/*break*/,3];return[4/*yield*/,this.privStream.read()];case 2:return void 0===(n=i.sent())||n.isEnd?this.privStream.readEnded():(o=void 0,n.buffer.byteLength>e.byteLength-r?(o=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):o=n.buffer,t.set(new Int8Array(o),r),r+=o.byteLength),[3/*break*/,1];case 3:return[2/*return*/,r]}})})},/**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PullAudioOutputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */t.prototype.write=function(e){a.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},/**
     * Closes the stream.
     * @member PullAudioOutputStreamImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){this.privStream.close()},t}(p);e.exports.PullAudioOutputStreamImpl=l;/*
 * Represents audio output stream used for custom audio output configurations.
 * @class PushAudioOutputStream
 */var f=/** @class */function(e){/**
     * Creates and initializes and instance.
     * @constructor
     */function t(){return e.call(this)||this}return n(t,e),/**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * write() and close() methods.
     * @member PushAudioOutputStream.create
     * @function
     * @public
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     * @returns {PushAudioOutputStream} The push audio output stream being created.
     */t.create=function(e){return new h(e)},t}(u);e.exports.PushAudioOutputStream=f;/**
 * Represents audio output stream used for custom audio output configurations.
 * @private
 * @class PushAudioOutputStreamImpl
 */var h=/** @class */function(e){/**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * read() and close() methods.
     * @constructor
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     */function t(t){var r=e.call(this)||this;return r.privId=s.createNoDashGuid(),r.privCallback=t,r}return n(t,e),Object.defineProperty(t.prototype,"format",{// eslint-disable-next-line @typescript-eslint/no-empty-function
set:function(e){},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privCallback.write&&this.privCallback.write(e)},t.prototype.close=function(){this.privCallback.close&&this.privCallback.close()},t.prototype.id=function(){return this.privId},t}(f);e.exports.PushAudioOutputStreamImpl=h}),P.register("8t1AB",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n,o=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AudioOutputFormatImpl=void 0;var i=P("kgSJT"),s=P("9k8LZ"),a=/** @class */function(e){/**
     * Creates an instance with the given values.
     * @constructor
     * @param formatTag
     * @param {number} channels - Number of channels.
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} avgBytesPerSec - Average bytes per second.
     * @param {number} blockAlign - Block alignment.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {string} audioFormatString - Audio format string
     * @param {string} requestAudioFormatString - Audio format string sent to service.
     * @param {boolean} hasHeader - If the format has header or not.
     */function t(t,r,n,o,i,s,a,c,u){var p=e.call(this,n,s,r,t)||this;return p.formatTag=t,p.avgBytesPerSec=o,p.blockAlign=i,p.priAudioFormatString=a,p.priRequestAudioFormatString=c,p.priHasHeader=u,p}return o(t,e),t.fromSpeechSynthesisOutputFormat=function(e){return void 0===e?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])},t.fromSpeechSynthesisOutputFormatString=function(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(s.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(s.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(s.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(s.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(s.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new t(s.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new t(s.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new t(s.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new t(s.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new t(s.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(s.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(s.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(s.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new t(s.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}},t.getDefaultOutputFormat=function(){return t.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")},Object.defineProperty(t.prototype,"hasHeader",{/**
         * Specifies if this audio output format has a header
         * @boolean AudioOutputFormatImpl.prototype.hasHeader
         * @function
         * @public
         */get:function(){return this.priHasHeader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{/**
         * Specifies the header of this format
         * @ArrayBuffer AudioOutputFormatImpl.prototype.header
         * @function
         * @public
         */get:function(){if(this.hasHeader)return this.privHeader},enumerable:!1,configurable:!0}),/**
     * Updates the header based on the audio length
     * @member AudioOutputFormatImpl.updateHeader
     * @function
     * @public
     * @param {number} audioLength - the audio length
     */t.prototype.updateHeader=function(e){if(this.priHasHeader){var t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}},Object.defineProperty(t.prototype,"requestAudioFormatString",{/**
         * Specifies the audio format string to be sent to the service
         * @string AudioOutputFormatImpl.prototype.requestAudioFormatString
         * @function
         * @public
         */get:function(){return this.priRequestAudioFormatString},enumerable:!1,configurable:!0}),t.SpeechSynthesisOutputFormatToString=((n={})[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]="raw-8khz-8bit-mono-mulaw",n[i.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]="riff-16khz-16kbps-mono-siren",n[i.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]="audio-16khz-16kbps-mono-siren",n[i.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]="audio-16khz-32kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]="audio-16khz-128kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]="audio-16khz-64kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]="audio-24khz-48kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]="audio-24khz-96kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]="audio-24khz-160kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]="raw-16khz-16bit-mono-truesilk",n[i.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]="riff-16khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]="riff-8khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]="riff-24khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]="riff-8khz-8bit-mono-mulaw",n[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]="raw-16khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]="raw-24khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]="raw-8khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]="ogg-16khz-16bit-mono-opus",n[i.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]="ogg-24khz-16bit-mono-opus",n[i.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]="raw-48khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]="riff-48khz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]="audio-48khz-96kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]="audio-48khz-192kbitrate-mono-mp3",n[i.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]="ogg-48khz-16bit-mono-opus",n[i.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]="webm-16khz-16bit-mono-opus",n[i.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]="webm-24khz-16bit-mono-opus",n[i.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]="webm-24khz-16bit-24kbps-mono-opus",n[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]="raw-24khz-16bit-mono-truesilk",n[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]="raw-8khz-8bit-mono-alaw",n[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]="riff-8khz-8bit-mono-alaw",n[i.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]="audio-16khz-16bit-32kbps-mono-opus",n[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]="audio-24khz-16bit-48kbps-mono-opus",n[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]="audio-24khz-16bit-24kbps-mono-opus",n[i.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]="raw-22050hz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]="riff-22050hz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]="raw-44100hz-16bit-mono-pcm",n[i.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]="riff-44100hz-16bit-mono-pcm",n),t}(s.AudioStreamFormatImpl);e.exports.AudioOutputFormatImpl=a}),P.register("kgSJT",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisOutputFormat=void 0,/**
     * raw-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw,
     */(r=e.exports.SpeechSynthesisOutputFormat||(e.exports.SpeechSynthesisOutputFormat={}))[r.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",/**
     * riff-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren
     */r[r.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",/**
     * audio-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren
     */r[r.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",/**
     * audio-16khz-32kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3
     */r[r.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",/**
     * audio-16khz-128kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3
     */r[r.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",/**
     * audio-16khz-64kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3
     */r[r.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",/**
     * audio-24khz-48kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3
     */r[r.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",/**
     * audio-24khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3
     */r[r.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",/**
     * audio-24khz-160kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3
     */r[r.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",/**
     * raw-16khz-16bit-mono-truesilk
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk
     */r[r.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",/**
     * riff-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm
     */r[r.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",/**
     * riff-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm
     */r[r.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",/**
     * riff-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm
     */r[r.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",/**
     * riff-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw
     */r[r.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",/**
     * raw-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm
     */r[r.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",/**
     * raw-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm
     */r[r.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",/**
     * raw-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm
     */r[r.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",/**
     * ogg-16khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus
     */r[r.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",/**
     * ogg-24khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus
     */r[r.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",/**
     * raw-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm
     */r[r.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",/**
     * riff-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm
     */r[r.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",/**
     * audio-48khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3
     */r[r.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",/**
     * audio-48khz-192kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3
     */r[r.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",/**
     * ogg-48khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus
     */r[r.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",/**
     * webm-16khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus
     */r[r.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",/**
     * webm-24khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus
     */r[r.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",/**
     * raw-24khz-16bit-mono-truesilk
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk
     */r[r.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",/**
     * raw-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw
     */r[r.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",/**
     * riff-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw
     */r[r.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",/**
     * webm-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec in a webm container, with bitrate of 24kbps, optimized for IoT scenario.
     * Added in version 1.19.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus
     */r[r.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",/**
     * audio-16khz-16bit-32kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 32kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus
     */r[r.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",/**
     * audio-24khz-16bit-48kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 48kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus
     */r[r.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",/**
     * audio-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 24kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus
     */r[r.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",/**
     * raw-22050hz-16bit-mono-pcm
     * Raw PCM audio at 22050Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm
     */r[r.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",/**
     * riff-22050hz-16bit-mono-pcm
     * PCM audio at 22050Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm
     */r[r.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",/**
     * raw-44100hz-16bit-mono-pcm
     * Raw PCM audio at 44100Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm
     */r[r.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",/**
     * riff-44100hz-16bit-mono-pcm
     * PCM audio at 44100Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm
     */r[r.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}),P.register("7aXWJ",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CancellationReason=void 0,/**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */(r=e.exports.CancellationReason||(e.exports.CancellationReason={}))[r.Error=0]="Error",/**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */r[r.EndOfStream=1]="EndOfStream"}),P.register("lGMy7",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PullAudioInputStreamCallback=void 0,e.exports.PullAudioInputStreamCallback=function(){}}),P.register("cRonD",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PushAudioOutputStreamCallback=void 0,e.exports.PushAudioOutputStreamCallback=function(){}}),P.register("k5MuU",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.KeywordRecognitionModel=void 0;var r=P("eyacr"),n=/** @class */function(){/**
     * Create and initializes a new instance.
     * @constructor
     */function e(){this.privDisposed=!1}return(/**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model
     * will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */e.fromFile=function(e){throw r.Contracts.throwIfFileDoesNotExist(e,"fileName"),Error("Not yet implemented.")},/**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */e.fromStream=function(e){throw r.Contracts.throwIfNull(e,"file"),Error("Not yet implemented.")},/**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */e.prototype.close=function(){this.privDisposed||(this.privDisposed=!0)},e)}();e.exports.KeywordRecognitionModel=n}),P.register("9r1Xb",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SessionEventArgs=void 0;/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */function e(e){this.privSessionId=e}return Object.defineProperty(e.prototype,"sessionId",{/**
         * Represents the session identifier.
         * @member SessionEventArgs.prototype.sessionId
         * @function
         * @public
         * @returns {string} Represents the session identifier.
         */get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();e.exports.SessionEventArgs=r}),P.register("eT5U3",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RecognitionEventArgs=void 0;/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r){var n=e.call(this,r)||this;return n.privOffset=t,n}return n(t,e),Object.defineProperty(t.prototype,"offset",{/**
         * Represents the message offset
         * @member RecognitionEventArgs.prototype.offset
         * @function
         * @public
         */get:function(){return this.privOffset},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SessionEventArgs);e.exports.RecognitionEventArgs=o}),P.register("7uWHb",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.OutputFormat=void 0,/**
     * @member OutputFormat.Simple
     */(r=e.exports.OutputFormat||(e.exports.OutputFormat={}))[r.Simple=0]="Simple",/**
     * @member OutputFormat.Detailed
     */r[r.Detailed=1]="Detailed"}),P.register("ed6fV",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentRecognitionEventArgs=void 0;/**
 * Intent recognition result event arguments.
 * @class
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */function t(t,r,n){var o=e.call(this,r,n)||this;return o.privResult=t,o}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Represents the intent recognition result.
         * @member IntentRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {IntentRecognitionResult} Represents the intent recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionEventArgs);e.exports.IntentRecognitionEventArgs=o}),P.register("f9kLv",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RecognitionResult=void 0;/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function e(e,t,r,n,o,i,s,a,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=o,this.privLanguage=i,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}return Object.defineProperty(e.prototype,"resultId",{/**
         * Specifies the result identifier.
         * @member RecognitionResult.prototype.resultId
         * @function
         * @public
         * @returns {string} Specifies the result identifier.
         */get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{/**
         * Specifies status of the result.
         * @member RecognitionResult.prototype.reason
         * @function
         * @public
         * @returns {ResultReason} Specifies status of the result.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{/**
         * Presents the recognized text in the result.
         * @member RecognitionResult.prototype.text
         * @function
         * @public
         * @returns {string} Presents the recognized text in the result.
         */get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{/**
         * Duration of recognized speech in 100 nano second increments.
         * @member RecognitionResult.prototype.duration
         * @function
         * @public
         * @returns {number} Duration of recognized speech in 100 nano second increments.
         */get:function(){return this.privDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{/**
         * Offset of recognized speech in 100 nano second increments.
         * @member RecognitionResult.prototype.offset
         * @function
         * @public
         * @returns {number} Offset of recognized speech in 100 nano second increments.
         */get:function(){return this.privOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{/**
         * Primary Language detected.
         * @member RecognitionResult.prototype.language
         * @function
         * @public
         * @returns {string} language detected.
         */get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{/**
         * Primary Language detection confidence (Unknown, Low, Medium, High).
         * @member RecognitionResult.prototype.languageDetectionConfidence
         * @function
         * @public
         * @returns {string} detection confidence strength.
         */get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{/**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member RecognitionResult.prototype.errorDetails
         * @function
         * @public
         * @returns {string} a brief description of an error.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{/**
         * A string containing Json serialized recognition result as it was received from the service.
         * @member RecognitionResult.prototype.json
         * @function
         * @private
         * @returns {string} Json serialized representation of the result.
         */get:function(){return this.privJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * The set of properties exposed in the result.
         * @member RecognitionResult.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The set of properties exposed in the result.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();e.exports.RecognitionResult=r}),P.register("fFzYC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechRecognitionResult=void 0;/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription, if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function t(t,r,n,o,i,s,a,c,u,p,l){var f=e.call(this,t,r,n,o,i,s,a,u,p,l)||this;return f.privSpeakerId=c,f}return n(t,e),Object.defineProperty(t.prototype,"speakerId",{/**
         * speaker id from conversation transcription/id scenarios
         * @member SpeechRecognitionResult.prototype.speakerId
         * @function
         * @public
         * @returns {string} id of speaker in given result
         */get:function(){return this.privSpeakerId},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionResult);e.exports.SpeechRecognitionResult=o}),P.register("1ASsK",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentRecognitionResult=void 0;/**
 * Intent recognition result.
 * @class
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param language - Primary Language detected, if provided.
     * @param languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */function t(t,r,n,o,i,s,a,c,u,p,l){var f=e.call(this,r,n,o,i,s,a,c,void 0,u,p,l)||this;return f.privIntentId=t,f}return n(t,e),Object.defineProperty(t.prototype,"intentId",{/**
         * A String that represents the intent identifier being recognized.
         * @member IntentRecognitionResult.prototype.intentId
         * @function
         * @public
         * @returns {string} A String that represents the intent identifier being recognized.
         */get:function(){return this.privIntentId},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SpeechRecognitionResult);e.exports.IntentRecognitionResult=o}),P.register("fTamu",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LanguageUnderstandingModelImpl=e.exports.LanguageUnderstandingModel=void 0;var o=P("eyacr"),i=/** @class */function(){/**
     * Creates and initializes a new instance
     * @constructor
     */function e(){}return(/**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */e.fromEndpoint=function(e){o.Contracts.throwIfNull(e,"uri"),o.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");var t=new s,r=e.host.indexOf(".");if(-1===r)throw Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);// Now the app ID.
var n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),// And finally the key.
t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw Error("Could not determine subscription key from endpoint");return t},/**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */e.fromAppId=function(e){o.Contracts.throwIfNullOrWhitespace(e,"appId");var t=new s;return t.appId=e,t},/**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     * Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     * Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     * of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */e.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),o.Contracts.throwIfNullOrWhitespace(t,"appId"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new s;return n.appId=t,n.region=r,n.subscriptionKey=e,n},e)}();e.exports.LanguageUnderstandingModel=i;/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */var s=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i);e.exports.LanguageUnderstandingModelImpl=s}),P.register("i9Vwg",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MeetingTranscriptionEventArgs=e.exports.ConversationTranscriptionEventArgs=e.exports.SpeechRecognitionEventArgs=void 0;var o=P("9pfmZ"),i=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r,n){var o=e.call(this,r,n)||this;return o.privResult=t,o}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Specifies the recognition result.
         * @member SpeechRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {SpeechRecognitionResult} the recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(o.RecognitionEventArgs);e.exports.SpeechRecognitionEventArgs=i;/**
 * Defines contents of conversation transcribed/transcribing event.
 * @class ConversationTranscriptionEventArgs
 */var s=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranscriptionResult} result - The conversation transcription result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r,n){var o=e.call(this,r,n)||this;return o.privResult=t,o}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Specifies the transcription result.
         * @member ConversationTranscription1EventArgs.prototype.result
         * @function
         * @public
         * @returns {ConversationTranscriptionResult} the recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(o.RecognitionEventArgs);e.exports.ConversationTranscriptionEventArgs=s;/**
 * Defines contents of meeting transcribed/transcribing event.
 * @class MeetingTranscriptionEventArgs
 */var a=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i);e.exports.MeetingTranscriptionEventArgs=a}),P.register("a3h8M",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechRecognitionCanceledEventArgs=void 0;var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("7cnPV").CancellationEventArgsBase);e.exports.SpeechRecognitionCanceledEventArgs=o}),P.register("7cnPV",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CancellationEventArgsBase=void 0;/**
 * Defines content of a CancellationEvent.
 * @class CancellationEventArgsBase
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r,n,o,i){var s=e.call(this,o,i)||this;return s.privReason=t,s.privErrorDetails=r,s.privErrorCode=n,s}return n(t,e),Object.defineProperty(t.prototype,"reason",{/**
         * The reason the recognition was canceled.
         * @member CancellationEventArgsBase.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{/**
         * The error code in case of an unsuccessful operation.
         * @return An error code that represents the error reason.
         */get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{/**
         * In case of an unsuccessful operation, provides details of the occurred error.
         * @member CancellationEventArgsBase.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionEventArgs);e.exports.CancellationEventArgsBase=o}),P.register("2UJ3f",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationRecognitionEventArgs=void 0;/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r,n){var o=e.call(this,r,n)||this;return o.privResult=t,o}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Specifies the recognition result.
         * @member TranslationRecognitionEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationRecognitionResult} the recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionEventArgs);e.exports.TranslationRecognitionEventArgs=o}),P.register("2abry",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationSynthesisEventArgs=void 0;/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */function t(t,r){var n=e.call(this,r)||this;return n.privResult=t,n}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Specifies the translation synthesis result.
         * @member TranslationSynthesisEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SessionEventArgs);e.exports.TranslationSynthesisEventArgs=o}),P.register("dCqCk",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationRecognitionResult=void 0;/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function t(t,r,n,o,i,s,a,c,u,p,l){var f=e.call(this,r,n,o,i,s,a,c,void 0,u,p,l)||this;return f.privTranslations=t,f}return n(t,e),t.fromSpeechRecognitionResult=function(e){return new t(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)},Object.defineProperty(t.prototype,"translations",{/**
         * Presents the translation results. Each item in the dictionary represents
         * a translation result in one of target languages, where the key is the name
         * of the target language, in BCP-47 format, and the value is the translation
         * text in the specified language.
         * @member TranslationRecognitionResult.prototype.translations
         * @function
         * @public
         * @returns {Translations} the current translation map that holds all translations requested.
         */get:function(){return this.privTranslations},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SpeechRecognitionResult);e.exports.TranslationRecognitionResult=o}),P.register("bCPKy",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationSynthesisResult=void 0;/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */function e(e,t){this.privReason=e,this.privAudio=t}return Object.defineProperty(e.prototype,"audio",{/**
         * Translated text in the target language.
         * @member TranslationSynthesisResult.prototype.audio
         * @function
         * @public
         * @returns {ArrayBuffer} Translated audio in the target language.
         */get:function(){return this.privAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{/**
         * The synthesis status.
         * @member TranslationSynthesisResult.prototype.reason
         * @function
         * @public
         * @returns {ResultReason} The synthesis status.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();e.exports.TranslationSynthesisResult=r}),P.register("fpgtH",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ResultReason=void 0,/**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */(r=e.exports.ResultReason||(e.exports.ResultReason={}))[r.NoMatch=0]="NoMatch",/**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */r[r.Canceled=1]="Canceled",/**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */r[r.RecognizingSpeech=2]="RecognizingSpeech",/**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */r[r.RecognizedSpeech=3]="RecognizedSpeech",/**
     * Indicates the speech result contains a finalized acceptance of a provided keyword.
     * Speech recognition will continue unless otherwise configured.
     * @member ResultReason.RecognizedKeyword
     */r[r.RecognizedKeyword=4]="RecognizedKeyword",/**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */r[r.RecognizingIntent=5]="RecognizingIntent",/**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */r[r.RecognizedIntent=6]="RecognizedIntent",/**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */r[r.TranslatingSpeech=7]="TranslatingSpeech",/**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */r[r.TranslatedSpeech=8]="TranslatedSpeech",/**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */r[r.SynthesizingAudio=9]="SynthesizingAudio",/**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */r[r.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",/**
     * Indicates the speech synthesis is now started
     * @member ResultReason.SynthesizingAudioStarted
     */r[r.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",/**
     * Indicates the voice profile is being enrolled and customers need to send more audio to create a voice profile.
     * @member ResultReason.EnrollingVoiceProfile
     */r[r.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",/**
     * Indicates the voice profile has been enrolled.
     * @member ResultReason.EnrolledVoiceProfile
     */r[r.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",/**
     * Indicates successful identification of some speakers.
     * @member ResultReason.RecognizedSpeakers
     */r[r.RecognizedSpeakers=14]="RecognizedSpeakers",/**
     * Indicates successfully verified one speaker.
     * @member ResultReason.RecognizedSpeaker
     */r[r.RecognizedSpeaker=15]="RecognizedSpeaker",/**
     * Indicates a voice profile has been reset successfully.
     * @member ResultReason.ResetVoiceProfile
     */r[r.ResetVoiceProfile=16]="ResetVoiceProfile",/**
     * Indicates a voice profile has been deleted successfully.
     * @member ResultReason.DeletedVoiceProfile
     */r[r.DeletedVoiceProfile=17]="DeletedVoiceProfile",/**
     * Indicates synthesis voices list has been successfully retrieved.
     * @member ResultReason.VoicesListRetrieved
     */r[r.VoicesListRetrieved=18]="VoicesListRetrieved",/**
     * Indicates the transcription result contains hypothesis text and its translation(s) for
     * other participants in the conversation.
     * @member ResultReason.TranslatingParticipantSpeech
     */r[r.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",/**
     * Indicates the transcription result contains final text and corresponding translation(s)
     * for other participants in the conversation. Speech Recognition and Translation are now
     * complete for this phrase.
     * @member ResultReason.TranslatedParticipantSpeech
     */r[r.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",/**
     * <summary>
     * Indicates the transcription result contains the instant message and corresponding
     * translation(s).
     * @member ResultReason.TranslatedInstantMessage
     */r[r.TranslatedInstantMessage=21]="TranslatedInstantMessage",/**
     * Indicates the transcription result contains the instant message for other participants
     * in the conversation and corresponding translation(s).
     * @member ResultReason.TranslatedParticipantInstantMessage
     */r[r.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}),P.register("5DN3u",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechConfigImpl=e.exports.SpeechConfig=void 0;var o=P("f7AdM"),i=P("eyacr"),s=P("9pfmZ"),a=/** @class */function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function e(){}return(/**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */e.fromSubscription=function(e,t){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"region");var r=new c;return r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),r.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),r},/**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     * SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     * and the effective language is "de-DE". Only the parameters that are not specified in the
     * endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */e.fromEndpoint=function(e,t){i.Contracts.throwIfNull(e,"endpoint");var r=new c;return r.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r},/**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */e.fromHost=function(e,t){i.Contracts.throwIfNull(e,"hostName");var r=new c;return r.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r},/**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     * to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     * the new token value will not apply to recognizers that have already been created. For recognizers
     * that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */e.fromAuthorizationToken=function(e,t){i.Contracts.throwIfNull(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");var r=new c;return r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r},/**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */// eslint-disable-next-line @typescript-eslint/no-empty-function
e.prototype.close=function(){},e)}();e.exports.SpeechConfig=a;/**
 * @public
 * @class SpeechConfigImpl
 */var c=/** @class */function(e){function t(){var t=e.call(this)||this;return t.privProperties=new s.PropertyCollection,t.speechRecognitionLanguage="en-US",t.outputFormat=s.OutputFormat.Simple,t}return n(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){return new URL(this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoDetectSourceLanguages",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return s.OutputFormat[this.privProperties.getProperty(o.OutputFormatPropertyName,void 0)]},set:function(e){this.privProperties.setProperty(o.OutputFormatPropertyName,s.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){i.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)},t.prototype.getProperty=function(e,t){return this.privProperties.getProperty(e,t)},t.prototype.setProxy=function(e,t,r,n){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],n)},t.prototype.setServiceProperty=function(e,t){var r=JSON.parse(this.privProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(r))},t.prototype.setProfanity=function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privProperties.setProperty(o.ForceDictationPropertyName,"true")},t.prototype.clone=function(){var e=new t;return e.privProperties=this.privProperties.clone(),e},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){return s.SpeechSynthesisOutputFormat[this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(a);e.exports.SpeechConfigImpl=c}),P.register("bphFi",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechTranslationConfigImpl=e.exports.SpeechTranslationConfig=void 0;var o=P("f7AdM"),i=P("eyacr"),s=P("9pfmZ"),a=/** @class */function(e){/**
     * Creates an instance of recognizer config.
     */function t(){return e.call(this)||this}return n(t,e),/**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */t.fromSubscription=function(e,t){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"region");var r=new c;return r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r},/**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by setting the property authorizationToken with a new
     * valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     * will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */t.fromAuthorizationToken=function(e,t){i.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");var r=new c;return r.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r},/**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */t.fromHost=function(e,t){i.Contracts.throwIfNull(e,"hostName");var r=new c;return r.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r},/**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     * set by any other APIs. For example, if language is defined in the uri as query parameter
     * "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     * setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */t.fromEndpoint=function(e,t){i.Contracts.throwIfNull(e,"endpoint"),i.Contracts.throwIfNull(t,"subscriptionKey");var r=new c;return r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r},t}(s.SpeechConfig);e.exports.SpeechTranslationConfig=a;/**
 * @private
 * @class SpeechTranslationConfigImpl
 */var c=/** @class */function(e){function t(){var t=e.call(this)||this;return t.privSpeechProperties=new s.PropertyCollection,t.outputFormat=s.OutputFormat.Simple,t}return n(t,e),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets/Sets the authorization token.
         * If this is set, subscription key is ignored.
         * User needs to make sure the provided authorization token is valid and not expired.
         * @member SpeechTranslationConfigImpl.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - The authorization token.
         */set:function(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the speech recognition language.
         * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @return {string} The speechRecognitionLanguage.
         */get:function(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])},/**
         * Sets the speech recognition language.
         * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @param {string} value - The authorization token.
         */set:function(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{/**
         * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
         * @function
         * @public
         */get:function(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{/**
         * Gets the output format
         * @member SpeechTranslationConfigImpl.prototype.outputFormat
         * @function
         * @public
         */get:function(){// eslint-disable-next-line
return s.OutputFormat[this.privSpeechProperties.getProperty(o.OutputFormatPropertyName,void 0)]},/**
         * Gets/Sets the output format
         * @member SpeechTranslationConfigImpl.prototype.outputFormat
         * @function
         * @public
         */set:function(e){this.privSpeechProperties.setProperty(o.OutputFormatPropertyName,s.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{/**
         * Gets the endpoint id.
         * @member SpeechTranslationConfigImpl.prototype.endpointId
         * @function
         * @public
         */get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)},/**
         * Gets/Sets the endpoint id.
         * @member SpeechTranslationConfigImpl.prototype.endpointId
         * @function
         * @public
         */set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),/**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */t.prototype.addTargetLanguage=function(e){i.Contracts.throwIfNullOrWhitespace(e,"value");var t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))},Object.defineProperty(t.prototype,"targetLanguages",{/**
         * Gets the (text) target language to translate into.
         * @member SpeechTranslationConfigImpl.prototype.targetLanguages
         * @function
         * @public
         * @param {string} value - The language such as de-DE
         */get:function(){return void 0!==this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{/**
         * Gets the voice name.
         * @member SpeechTranslationConfigImpl.prototype.voiceName
         * @function
         * @public
         */get:function(){return this.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice])},/**
         * Gets/Sets the voice of the translated language, enable voice synthesis output.
         * @member SpeechTranslationConfigImpl.prototype.voiceName
         * @function
         * @public
         * @param {string} value - The name of the voice.
         */set:function(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{/**
         * Provides the region.
         * @member SpeechTranslationConfigImpl.prototype.region
         * @function
         * @public
         * @returns {string} The region.
         */get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),t.prototype.setProxy=function(e,t,r,n){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],n)},/**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */t.prototype.getProperty=function(e,t){return this.privSpeechProperties.getProperty(e,t)},/**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string | PropertyId} name - The name of the property to set.
     * @param {string} value - The value of the property.
     */t.prototype.setProperty=function(e,t){this.privSpeechProperties.setProperty(e,t)},Object.defineProperty(t.prototype,"properties",{/**
         * Provides access to custom properties.
         * @member SpeechTranslationConfigImpl.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The properties.
         */get:function(){return this.privSpeechProperties},enumerable:!1,configurable:!0}),/**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){},t.prototype.setServiceProperty=function(e,t){var r=JSON.parse(this.privSpeechProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privSpeechProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(r))},t.prototype.setProfanity=function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privSpeechProperties.setProperty(o.ForceDictationPropertyName,"true")},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){// eslint-disable-next-line
return s.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(a);e.exports.SpeechTranslationConfigImpl=c}),P.register("c7EsH",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PropertyCollection=void 0;var r=P("9pfmZ"),n=/** @class */function(){function e(){this.privKeys=[],this.privValues=[]}return(/**
     * Returns the property value in type String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string | number | boolean} def - The default value which is returned if the parameter
     * is not available in the collection.
     * @returns {string} value of the parameter.
     */e.prototype.getProperty=function(e,t){var n;n="string"==typeof e?e:r.PropertyId[e];for(var o=0;o<this.privKeys.length;o++)if(this.privKeys[o]===n)return this.privValues[o];if(void 0!==t)return String(t)},/**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */e.prototype.setProperty=function(e,t){var n;n="string"==typeof e?e:r.PropertyId[e];for(var o=0;o<this.privKeys.length;o++)if(this.privKeys[o]===n){this.privValues[o]=t;return}this.privKeys.push(n),this.privValues.push(t)},/**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */e.prototype.clone=function(){for(var t=new e,r=0;r<this.privKeys.length;r++)t.privKeys.push(this.privKeys[r]),t.privValues.push(this.privValues[r]);return t},/**
     * Merges this set of properties into another, no overwrites.
     * @member PropertyCollection.prototype.mergeTo
     * @function
     * @public
     * @param {PropertyCollection}  destinationCollection - The collection to merge into.
     */e.prototype.mergeTo=function(e){var t=this;this.privKeys.forEach(function(r){if(void 0===e.getProperty(r,void 0)){var n=t.getProperty(r);e.setProperty(r,n)}})},Object.defineProperty(e.prototype,"keys",{/**
         * Get the keys in Property Collection.
         * @member PropertyCollection.prototype.keys
         * @function
         * @public
         * @returns {string []} Keys in the collection.
         */get:function(){return this.privKeys},enumerable:!1,configurable:!0}),e)}();e.exports.PropertyCollection=n}),P.register("2p9Jb",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PropertyId=void 0,/**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to
     * specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */(r=e.exports.PropertyId||(e.exports.PropertyId={}))[r.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",/**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */r[r.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",/**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */r[r.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",/**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]], [[SpeechRecognizer.authorizationToken]],
     * [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]], [[SpeakerRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */r[r.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",/**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */r[r.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",/**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */r[r.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",/**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */r[r.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",/**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */r[r.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",/**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */r[r.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",/**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */r[r.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",/**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */r[r.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",/**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */r[r.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",/**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */r[r.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",/**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */r[r.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",/**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */r[r.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",/**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */r[r.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",/**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */r[r.Speech_SessionId=16]="Speech_SessionId",/**
     * The spoken language to be synthesized (e.g. en-US)
     * @member PropertyId.SpeechServiceConnection_SynthLanguage
     */r[r.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",/**
     * The name of the TTS voice to be used for speech synthesis
     * @member PropertyId.SpeechServiceConnection_SynthVoice
     */r[r.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",/**
     * The string to specify TTS output audio format
     * @member PropertyId.SpeechServiceConnection_SynthOutputFormat
     */r[r.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",/**
     * The list of comma separated languages used as possible source languages
     * Added in version 1.13.0
     * @member PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages
     */r[r.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",/**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */r[r.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",/**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */r[r.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",/**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */r[r.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",/**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */r[r.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",/**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */r[r.CancellationDetails_Reason=25]="CancellationDetails_Reason",/**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */r[r.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",/**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */r[r.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",/**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */r[r.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",/**
     * The URL string built from speech configuration.
     * This property is intended to be read-only. The SDK is using it internally.
     * NOTE: Added in version 1.7.0.
     */r[r.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",/**
     * The initial silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */r[r.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",/**
     * The end silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */r[r.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",/**
     * A duration of detected silence, measured in milliseconds, after which speech-to-text will determine a spoken
     * phrase has ended and generate a final Recognized result. Configuring this timeout may be helpful in situations
     * where spoken input is significantly faster or slower than usual and default segmentation behavior consistently
     * yields results that are too long or too short. Segmentation timeout values that are inappropriately high or low
     * can negatively affect speech-to-text accuracy; this property should be carefully configured and the resulting
     * behavior should be thoroughly validated as intended.
     *
     * For more information about timeout configuration that includes discussion of default behaviors, please visit
     * https://aka.ms/csspeech/timeouts.
     *
     * Added in version 1.21.0.
     */r[r.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",/**
     * A boolean value specifying whether audio logging is enabled in the service or not.
     * Audio and content logs are stored either in Microsoft-owned storage, or in your own storage account linked
     * to your Cognitive Services subscription (Bring Your Own Storage (BYOS) enabled Speech resource).
     * The logs will be removed after 30 days.
     * Added in version 1.7.0
     */r[r.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",/**
     * The speech service connection language identifier mode.
     * Can be "AtStart" (the default), or "Continuous". See Language
     * Identification document https://aka.ms/speech/lid?pivots=programming-language-javascript
     * for more details.
     * Added in 1.25.0
     **/r[r.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",/**
     * A string value representing the desired endpoint version to target for Speech Recognition.
     * Added in version 1.21.0
     */r[r.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",/**
    /**
     * A string value the current speaker recognition scenario/mode (TextIndependentIdentification, etc.).
     * Added in version 1.23.0
     */r[r.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",/**
     * The requested Cognitive Services Speech Service response output profanity setting.
     * Allowed values are "masked", "removed", and "raw".
     * Added in version 1.7.0.
     */r[r.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",/**
     * A string value specifying which post processing option should be used by service.
     * Allowed values are "TrueText".
     * Added in version 1.7.0
     */r[r.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",/**
     * A boolean value specifying whether to include word-level timestamps in the response result.
     * Added in version 1.7.0
     */r[r.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",/**
     * The number of times a word has to be in partial results to be returned.
     * Added in version 1.7.0
     */r[r.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",/**
     * A string value specifying the output format option in the response result. Internal use only.
     * Added in version 1.7.0.
     */r[r.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",/**
     * A boolean value to request for stabilizing translation partial results by omitting words in the end.
     * Added in version 1.7.0.
     */r[r.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",/**
     * A boolean value specifying whether to request WordBoundary events.
     * @member PropertyId.SpeechServiceResponse_RequestWordBoundary
     * Added in version 1.21.0.
     */r[r.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",/**
     * A boolean value specifying whether to request punctuation boundary in WordBoundary Events. Default is true.
     * @member PropertyId.SpeechServiceResponse_RequestPunctuationBoundary
     * Added in version 1.21.0.
     */r[r.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",/**
     * A boolean value specifying whether to request sentence boundary in WordBoundary Events. Default is false.
     * @member PropertyId.SpeechServiceResponse_RequestSentenceBoundary
     * Added in version 1.21.0.
     */r[r.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",/**
     * Identifier used to connect to the backend service.
     * @member PropertyId.Conversation_ApplicationId
     */r[r.Conversation_ApplicationId=46]="Conversation_ApplicationId",/**
     * Type of dialog backend to connect to.
     * @member PropertyId.Conversation_DialogType
     */r[r.Conversation_DialogType=47]="Conversation_DialogType",/**
     * Silence timeout for listening
     * @member PropertyId.Conversation_Initial_Silence_Timeout
     */r[r.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",/**
     * From Id to add to speech recognition activities.
     * @member PropertyId.Conversation_From_Id
     */r[r.Conversation_From_Id=49]="Conversation_From_Id",/**
     * ConversationId for the session.
     * @member PropertyId.Conversation_Conversation_Id
     */r[r.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",/**
     * Comma separated list of custom voice deployment ids.
     * @member PropertyId.Conversation_Custom_Voice_Deployment_Ids
     */r[r.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",/**
     * Speech activity template, stamp properties from the template on the activity generated by the service for speech.
     * @member PropertyId.Conversation_Speech_Activity_Template
     * Added in version 1.10.0.
     */r[r.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",/**
     * Enables or disables the receipt of turn status messages as obtained on the turnStatusReceived event.
     * @member PropertyId.Conversation_Request_Bot_Status_Messages
     * Added in version 1.15.0.
     */r[r.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",/**
     * Specifies the connection ID to be provided in the Agent configuration message, e.g. a Direct Line token for
     * channel authentication.
     * Added in version 1.15.1.
     */r[r.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",/**
     * The Cognitive Services Speech Service host (url). Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromHost]].
     */r[r.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",/**
     * Set the host for service calls to the Conversation Translator REST management and websocket calls.
     */r[r.ConversationTranslator_Host=56]="ConversationTranslator_Host",/**
     * Optionally set the the host's display name.
     * Used when joining a conversation.
     */r[r.ConversationTranslator_Name=57]="ConversationTranslator_Name",/**
     * Optionally set a value for the X-CorrelationId request header.
     * Used for troubleshooting errors in the server logs. It should be a valid guid.
     */r[r.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",/**
     * Set the conversation token to be sent to the speech service. This enables the
     * service to service call from the speech service to the Conversation Translator service for relaying
     * recognitions. For internal use.
     */r[r.ConversationTranslator_Token=59]="ConversationTranslator_Token",/**
     * The reference text of the audio for pronunciation evaluation.
     * For this and the following pronunciation assessment parameters, see
     * https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-speech-to-text#pronunciation-assessment-parameters for details.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",/**
     * The point system for pronunciation score calibration (FivePoint or HundredMark).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",/**
     * The pronunciation evaluation granularity (Phoneme, Word, or FullText).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",/**
     * Defines if enable miscue calculation.
     * With this enabled, the pronounced words will be compared to the reference text,
     * and will be marked with omission/insertion based on the comparison. The default setting is False.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",/**
     * The json string of pronunciation assessment parameters
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",/**
     * Pronunciation assessment parameters.
     * This property is intended to be read-only. The SDK is using it internally.
     * Added in version 1.15.0
     */r[r.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",/**
     * Version of Speaker Recognition API to use.
     * Added in version 1.18.0
     */r[r.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version"}),P.register("c9eo5",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Recognizer=void 0;var o=P("f7AdM"),i=P("aQGWi"),s=P("eyacr"),a=P("9pfmZ"),c=/** @class */function(){/**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     */function e(e,t,r){this.audioConfig=void 0!==e?e:a.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}return(/**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */e.prototype.close=function(e,t){s.Contracts.throwIfDisposed(this.privDisposed),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{/**
         * @Internal
         * Internal data member to support fromRecognizer* pattern methods on other classes.
         * Do not use externally, object returned will change without warning or notice.
         */get:function(){return this.privReco},enumerable:!1,configurable:!0}),/**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privDisposed)return[2/*return*/];if(this.privDisposed=!0,!e||!this.privReco)return[3/*break*/,3];return[4/*yield*/,this.privReco.audioSource.turnOff()];case 1:return t.sent(),[4/*yield*/,this.privReco.dispose()];case 2:t.sent(),t.label=3;case 3:return[2/*return*/]}})})},Object.defineProperty(e,"telemetryEnabled",{/**
         * This method returns the current state of the telemetry setting.
         * @member Recognizer.prototype.telemetryEnabled
         * @function
         * @public
         * @returns true if the telemetry is enabled, false otherwise.
         */get:function(){return o.ServiceRecognizerBase.telemetryDataEnabled},enumerable:!1,configurable:!0}),/**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */e.enableTelemetry=function(e){o.ServiceRecognizerBase.telemetryDataEnabled=e},// Does the generic recognizer setup that is common across all recognizer types.
e.prototype.implCommonRecognizerSetup=function(){var t="undefined"!=typeof window?"Browser":"Node",r="unknown",n="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);var i=this.createRecognizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,r,n))));this.privReco=this.createServiceRecognizer(e.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)},e.prototype.recognizeOnceAsyncImpl=function(e){return r(this,void 0,void 0,function(){var t,r;return n(this,function(n){switch(n.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),t=new i.Deferred,[4/*yield*/,this.implRecognizerStop()];case 1:return n.sent(),[4/*yield*/,this.privReco.recognize(e,t.resolve,t.reject)];case 2:return n.sent(),[4/*yield*/,t.promise];case 3:return r=n.sent(),[4/*yield*/,this.implRecognizerStop()];case 4:return n.sent(),[2/*return*/,r]}})})},e.prototype.startContinuousRecognitionAsyncImpl=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),[4/*yield*/,this.implRecognizerStop()];case 1:return t.sent(),[4/*yield*/,this.privReco.recognize(e,void 0,void 0)];case 2:return t.sent(),[2/*return*/]}})})},e.prototype.stopContinuousRecognitionAsyncImpl=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),[4/*yield*/,this.implRecognizerStop()];case 1:return e.sent(),[2/*return*/]}})})},e.prototype.implRecognizerStop=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!this.privReco)return[3/*break*/,2];return[4/*yield*/,this.privReco.stopRecognizing()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},e.getAuthFromProperties=function(e){var t=e.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new o.CognitiveSubscriptionKeyAuthentication(t):new o.CognitiveTokenAuthentication(function(){return Promise.resolve(e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0))},function(){return Promise.resolve(e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0))})},e)}();e.exports.Recognizer=c}),P.register("1sFs4",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechRecognizer=void 0;var s=P("f7AdM"),a=P("aQGWi"),c=P("eyacr"),u=P("9pfmZ"),p=/** @class */function(e){/**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function t(t,r){var n=this;return c.Contracts.throwIfNull(t,"speechConfig"),c.Contracts.throwIfNullOrWhitespace(t.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage),u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),(n=e.call(this,r,t.properties,new s.SpeechConnectionFactory)||this).privDisposedRecognizer=!1,n}return n(t,e),/**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */t.FromConfig=function(e,r,n){return r.properties.mergeTo(e.properties),new t(e,n)},Object.defineProperty(t.prototype,"endpointId",{/**
         * Gets the endpoint id of a customized speech model that is used for speech recognition.
         * @member SpeechRecognizer.prototype.endpointId
         * @function
         * @public
         * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
         */get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member SpeechRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member SpeechRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){c.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the spoken language of recognition.
         * @member SpeechRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} The spoken language of recognition.
         */get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{/**
         * Gets the output format of recognition.
         * @member SpeechRecognizer.prototype.outputFormat
         * @function
         * @public
         * @returns {OutputFormat} The output format of recognition.
         */get:function(){return(c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.OutputFormatPropertyName,u.OutputFormat[u.OutputFormat.Simple])===u.OutputFormat[u.OutputFormat.Simple])?u.OutputFormat.Simple:u.OutputFormat.Detailed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this SpeechRecognizer.
         * @member SpeechRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),/**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition
     * like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */t.prototype.recognizeOnceAsync=function(e,t){a.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Interactive),e,t)},/**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},/**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},/**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     * specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startKeywordRecognitionAsync=function(e,t,r){c.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},/**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopKeywordRecognitionAsync=function(e){e&&e()},/**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){c.Contracts.throwIfDisposed(this.privDisposedRecognizer),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},/**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedRecognizer)return[2/*return*/];if(!t)return[3/*break*/,2];return this.privDisposedRecognizer=!0,[4/*yield*/,this.implRecognizerStop()];case 1:r.sent(),r.label=2;case 2:return[4/*yield*/,e.prototype.dispose.call(this,t)];case 3:return r.sent(),[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new s.SpeechServiceRecognizer(e,t,r,n,this)},t}(u.Recognizer);e.exports.SpeechRecognizer=p}),P.register("dGP87",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentRecognizer=void 0;var s=P("f7AdM"),a=P("aQGWi"),c=P("eyacr"),u=P("9pfmZ"),p=/** @class */function(e){/**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */function t(t,r){var n=this;return c.Contracts.throwIfNullOrUndefined(t,"speechConfig"),c.Contracts.throwIfNullOrUndefined(t,"speechConfig"),(n=e.call(this,r,t.properties,new s.IntentConnectionFactory)||this).privAddedIntents=[],n.privAddedLmIntents={},n.privDisposedIntentRecognizer=!1,n.privProperties=t.properties,c.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage),u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),n}return n(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the spoken language of recognition.
         * @member IntentRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} the spoken language of recognition.
         */get:function(){return c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member IntentRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
         * @member IntentRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - Authorization token.
         */set:function(e){this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this IntentRecognizer.
         * @member IntentRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their
         * values defined for this IntentRecognizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),/**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition like command or query.
     * For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */t.prototype.recognizeOnceAsync=function(e,t){if(c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}a.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Interactive),e,t)},/**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startContinuousRecognitionAsync=function(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}a.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},/**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},/**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startKeywordRecognitionAsync=function(e,t,r){c.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},/**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopKeywordRecognitionAsync=function(e,t){if(e)try{e()}catch(e){t&&t(e)}},/**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */t.prototype.addIntent=function(e,t){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.Contracts.throwIfNullOrWhitespace(t,"intentId"),c.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])},/**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     * to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     * is empty, all intent names defined in the model will be added.
     */t.prototype.addIntentWithLanguageModel=function(e,t,r){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.Contracts.throwIfNullOrWhitespace(e,"intentId"),c.Contracts.throwIfNull(t,"model"),c.Contracts.throwIfNullOrWhitespace(t.appId,"model.appId"),this.privAddedLmIntents[e]=new s.AddedLmIntent(t,r)},/**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */t.prototype.addAllIntents=function(e,t){c.Contracts.throwIfNull(e,"model"),c.Contracts.throwIfNullOrWhitespace(e.appId,"model.appId"),this.privUmbrellaIntent=new s.AddedLmIntent(e,t)},/**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new s.IntentServiceRecognizer(e,t,r,n,this)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedIntentRecognizer)return[2/*return*/];if(!t)return[3/*break*/,2];return this.privDisposedIntentRecognizer=!0,[4/*yield*/,e.prototype.dispose.call(this,t)];case 1:r.sent(),r.label=2;case 2:return[2/*return*/]}})})},t.prototype.buildSpeechContext=function(){var e,t,r,n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);// Build the reference grammer array.
for(var o=0,i=Object.keys(this.privAddedLmIntents);o<i.length;o++){var s=i[o],a=this.privAddedLmIntents[s];// validate all the same model, region, and key...
if(void 0===e)e=a.modelImpl.appId;else if(e!==a.modelImpl.appId)throw Error("Intents must all be from the same LUIS model");if(void 0===t)t=a.modelImpl.region;else if(t!==a.modelImpl.region)throw Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=a.modelImpl.subscriptionKey;else if(r!==a.modelImpl.subscriptionKey)throw Error("Intents must all use the same subscription key");var c="luis/"+e+"-PRODUCTION#"+s;n.push(c)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(u.PropertyId[u.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}},t}(u.Recognizer);e.exports.IntentRecognizer=p}),P.register("5WVdM",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfileType=void 0,/**
     * Text independent speaker identification
     * @member VoiceProfileType.TextIndependentIdentification
     */(r=e.exports.VoiceProfileType||(e.exports.VoiceProfileType={}))[r.TextIndependentIdentification=0]="TextIndependentIdentification",/**
     * Text dependent speaker verification
     * @member VoiceProfileType.TextDependentVerification
     */r[r.TextDependentVerification=1]="TextDependentVerification",/**
     * Text independent speaker verification
     * @member VoiceProfileType.TextIndependentVerification
     */r[r.TextIndependentVerification=2]="TextIndependentVerification"}),P.register("jSNw1",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationRecognizer=void 0;var s=P("f7AdM"),a=P("aQGWi"),c=P("1Tr7s"),u=P("eyacr"),p=P("9pfmZ"),l=/** @class */function(e){/**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     * @param {IConnectionFactory} connectionFactory - An optional connection factory to use to generate the endpoint URIs, headers to set, etc...
     */function t(t,r,n){var o=this;return u.Contracts.throwIfNull(t,"speechConfig"),(o=e.call(this,r,t.properties,n||new s.TranslationConnectionFactory)||this).privDisposedTranslationRecognizer=!1,void 0!==o.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&u.Contracts.throwIfNullOrWhitespace(o.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationVoice]),u.Contracts.throwIfNullOrWhitespace(o.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationToLanguages]),u.Contracts.throwIfNullOrWhitespace(o.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),o}return n(t,e),/**
     * TranslationRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */t.FromConfig=function(e,r,n){return r.properties.mergeTo(e.properties),new t(e,n)},Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the language name that was set when the recognizer was created.
         * @member TranslationRecognizer.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} Gets the language name that was set when the recognizer was created.
         */get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetLanguages",{/**
         * Gets target languages for translation that were set when the recognizer was created.
         * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
         * @member TranslationRecognizer.prototype.targetLanguages
         * @function
         * @public
         * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
         */get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{/**
         * Gets the name of output voice.
         * @member TranslationRecognizer.prototype.voiceName
         * @function
         * @public
         * @returns {string} the name of output voice.
         */get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this TranslationRecognizer.
         * @member TranslationRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member TranslationRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member TranslationRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} value - Authorization token.
         */set:function(e){this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),/**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitable only
     * for single shot recognition like command or query. For long-running recognition,
     * use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */t.prototype.recognizeOnceAsync=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),a.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Conversation),e,t)},/**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},/**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},/**
     * dynamically remove a language from list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.removeTargetLanguage
     * @function
     * @param lang - language to be removed
     * @public
     */t.prototype.removeTargetLanguage=function(e){if(u.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){var t=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),r=t.indexOf(e);r>-1&&(t.splice(r,1),this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}},/**
     * dynamically add a language to list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.addTargetLanguage
     * @function
     * @param lang - language to be added
     * @public
     */t.prototype.addTargetLanguage=function(e){u.Contracts.throwIfNullOrUndefined(e,"language to be added");var t=[];void 0!==this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")).includes(e)||(t.push(e),this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))):(this.properties.setProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)},/**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},/**
     * handles ConnectionEstablishedEvent for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onConnection
     * @function
     * @public
     */// eslint-disable-next-line @typescript-eslint/no-empty-function
t.prototype.onConnection=function(){},/**
     * handles disconnection events for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onDisconnection
     * @function
     * @public
     */// eslint-disable-next-line @typescript-eslint/no-empty-function
t.prototype.onDisconnection=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2/*return*/]})})},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedTranslationRecognizer)return[2/*return*/];if(this.privDisposedTranslationRecognizer=!0,!t)return[3/*break*/,3];return[4/*yield*/,this.implRecognizerStop()];case 1:return r.sent(),[4/*yield*/,e.prototype.dispose.call(this,t)];case 2:r.sent(),r.label=3;case 3:return[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new s.TranslationServiceRecognizer(e,t,r,n,this)},t.prototype.updateLanguages=function(e){var t=c.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))},t}(p.Recognizer);e.exports.TranslationRecognizer=l}),P.register("1Tr7s",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Connection=void 0;var r=P("f7AdM"),n=P("aQGWi"),o=P("40s5N"),i=P("eyacr"),s=P("9pfmZ"),a=/** @class */function(){function e(){}return(/**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */e.fromRecognizer=function(t){var r=t.internalData,n=new e;return n.privInternalData=r,n.setupEvents(),n},/**
     * Gets the Connection instance from the specified synthesizer.
     * @param synthesizer The synthesizer associated with the connection.
     * @return The Connection instance of the synthesizer.
     */e.fromSynthesizer=function(t){var r=t.internalData,n=new e;return n.privInternalData=r,n.setupEvents(),n},/**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     */e.prototype.openConnection=function(e,t){n.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)},/**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel with an error.
     */e.prototype.closeConnection=function(e,t){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw Error("Disconnecting a synthesizer's connection is currently not supported");n.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)},/**
     * Appends a parameter in a message to service.
     * Added in version 1.12.1.
     * @param path The path of the network message.
     * @param propertyName Name of the property
     * @param propertyValue Value of the property. This is a json string.
     */e.prototype.setMessageProperty=function(e,t,n){if(i.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,n)}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,n)}},/**
     * Sends a message to the speech service.
     * Added in version 1.13.0.
     * @param path The WebSocket path of the message
     * @param payload The payload of the message. This is a json string or a ArrayBuffer.
     * @param success A callback to indicate success.
     * @param error A callback to indicate an error.
     */e.prototype.sendMessageAsync=function(e,t,r,o){n.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),r,o)},/**
     * Dispose of associated resources.
     */e.prototype.close=function(){/* eslint-disable no-empty */},e.prototype.setupEvents=function(){var e=this;this.privEventListener=this.privInternalData.connectionEvents.attach(function(t){"ConnectionEstablishedEvent"===t.name?e.connected&&e.connected(new s.ConnectionEventArgs(t.connectionId)):"ConnectionClosedEvent"===t.name?e.disconnected&&e.disconnected(new s.ConnectionEventArgs(t.connectionId)):"ConnectionMessageSentEvent"===t.name?e.messageSent&&e.messageSent(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message))):"ConnectionMessageReceivedEvent"===t.name&&e.messageReceived&&e.messageReceived(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(function(t){e.receivedServiceMessage&&e.receivedServiceMessage(new s.ServiceEventArgs(t.jsonString,t.name))})},e)}();e.exports.Connection=a}),P.register("40s5N",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionMessageImpl=e.exports.ConnectionMessage=void 0;var r=P("eJOps"),n=P("aQGWi"),o=P("c7EsH"),i=P("2p9Jb");e.exports.ConnectionMessage=function(){};var s=/** @class */function(){function e(e){var t=this;this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(i.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(function(e){t.privProperties.setProperty(e,t.privConnectionMessage.headers[e])})}return Object.defineProperty(e.prototype,"path",{/**
         * The message path.
         */get:function(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(function(e){return"path"===e.toLowerCase()})]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTextMessage",{/**
         * Checks to see if the ConnectionMessage is a text message.
         * See also IsBinaryMessage().
         */get:function(){return this.privConnectionMessage.messageType===n.MessageType.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBinaryMessage",{/**
         * Checks to see if the ConnectionMessage is a binary message.
         * See also GetBinaryMessage().
         */get:function(){return this.privConnectionMessage.messageType===n.MessageType.Binary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextMessage",{/**
         * Gets the text message payload. Typically the text message content-type is
         * application/json. To determine other content-types use
         * Properties.GetProperty("Content-Type").
         */get:function(){return this.privConnectionMessage.textBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryMessage",{/**
         * Gets the binary message payload.
         */get:function(){return this.privConnectionMessage.binaryBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * A collection of properties and their values defined for this <see cref="ConnectionMessage"/>.
         * Message headers can be accessed via this collection (e.g. "Content-Type").
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),/**
     * Returns a string that represents the connection message.
     */e.prototype.toString=function(){return""},e}();e.exports.ConnectionMessageImpl=s}),P.register("856tT",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Translations=void 0;var r=P("9pfmZ"),n=/** @class */function(){function e(){// Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
this.privMap=new r.PropertyCollection}return Object.defineProperty(e.prototype,"languages",{/**
         * Get the languages in the object in a String array.
         * @member Translations.prototype.languages
         * @function
         * @public
         * @returns {string[]} languages in translations object.
         */get:function(){return this.privMap.keys},enumerable:!1,configurable:!0}),/**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translations.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */e.prototype.get=function(e,t){return this.privMap.getProperty(e,t)},/**
     * Sets the String value of the parameter specified by name.
     * @member Translations.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */e.prototype.set=function(e,t){this.privMap.setProperty(e,t)},e}();e.exports.Translations=n}),P.register("aCiCl",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NoMatchReason=void 0,/**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */(r=e.exports.NoMatchReason||(e.exports.NoMatchReason={}))[r.NotRecognized=0]="NotRecognized",/**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */r[r.InitialSilenceTimeout=1]="InitialSilenceTimeout",/**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */r[r.InitialBabbleTimeout=2]="InitialBabbleTimeout"}),P.register("fFDUY",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NoMatchDetails=void 0;var r=P("f7AdM"),n=P("9pfmZ"),o=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */function e(e){this.privReason=e}return(/**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     * result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */e.fromResult=function(t){var o=r.SimpleSpeechPhrase.fromJSON(t.json),i=n.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:i=n.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:i=n.NoMatchReason.InitialSilenceTimeout;break;default:i=n.NoMatchReason.NotRecognized}return new e(i)},Object.defineProperty(e.prototype,"reason",{/**
         * The reason the recognition was canceled.
         * @member NoMatchDetails.prototype.reason
         * @function
         * @public
         * @returns {NoMatchReason} Specifies the reason canceled.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),e)}();e.exports.NoMatchDetails=o}),P.register("WZjIA",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationRecognitionCanceledEventArgs=void 0;/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */function e(e,t,r,n,o){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=o,this.privSessionId=e,this.privErrorCode=n}return Object.defineProperty(e.prototype,"result",{/**
         * Specifies the recognition result.
         * @member TranslationRecognitionCanceledEventArgs.prototype.result
         * @function
         * @public
         * @returns {TranslationRecognitionResult} the recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{/**
         * Specifies the session identifier.
         * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
         * @function
         * @public
         * @returns {string} the session identifier.
         */get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{/**
         * The reason the recognition was canceled.
         * @member TranslationRecognitionCanceledEventArgs.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */get:function(){return this.privCancelReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{/**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{/**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();e.exports.TranslationRecognitionCanceledEventArgs=r}),P.register("kD1vA",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentRecognitionCanceledEventArgs=void 0;/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */function t(t,r,n,o,i,s){var a=e.call(this,o,i,s)||this;return a.privReason=t,a.privErrorDetails=r,a.privErrorCode=n,a}return n(t,e),Object.defineProperty(t.prototype,"reason",{/**
         * The reason the recognition was canceled.
         * @member IntentRecognitionCanceledEventArgs.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{/**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{/**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(P("9pfmZ").IntentRecognitionEventArgs);e.exports.IntentRecognitionCanceledEventArgs=o}),P.register("bSShX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CancellationDetailsBase=void 0;/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetailsBase
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */function e(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}return Object.defineProperty(e.prototype,"reason",{/**
         * The reason the recognition was canceled.
         * @member CancellationDetailsBase.prototype.reason
         * @function
         * @public
         * @returns {CancellationReason} Specifies the reason canceled.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{/**
         * In case of an unsuccessful recognition, provides details of the occurred error.
         * @member CancellationDetailsBase.prototype.errorDetails
         * @function
         * @public
         * @returns {string} A String that represents the error details.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ErrorCode",{/**
         * The error code in case of an unsuccessful recognition.
         * Added in version 1.1.0.
         * @return An error code that represents the error reason.
         */get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),e}();e.exports.CancellationDetailsBase=r}),P.register("7WNRd",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CancellationDetails=void 0;var o=P("f7AdM"),i=P("bSShX"),s=P("9pfmZ"),a=/** @class */function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return n(t,e),/**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult | SpeechSynthesisResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */t.fromResult=function(e){var r=s.CancellationReason.Error,n=s.CancellationErrorCode.NoError;if(e instanceof s.RecognitionResult&&e.json){var i=o.SimpleSpeechPhrase.fromJSON(e.json);r=o.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(n=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new t(r,e.errorDetails||o.EnumTranslation.implTranslateErrorDetails(n),n)},t}(i.CancellationDetailsBase);e.exports.CancellationDetails=a}),P.register("dXcZ8",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CancellationErrorCode=void 0,/**
     * Indicates that no error occurred during speech recognition.
     */(r=e.exports.CancellationErrorCode||(e.exports.CancellationErrorCode={}))[r.NoError=0]="NoError",/**
     * Indicates an authentication error.
     */r[r.AuthenticationFailure=1]="AuthenticationFailure",/**
     * Indicates that one or more recognition parameters are invalid.
     */r[r.BadRequestParameters=2]="BadRequestParameters",/**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */r[r.TooManyRequests=3]="TooManyRequests",/**
     * Indicates a connection error.
     */r[r.ConnectionFailure=4]="ConnectionFailure",/**
     * Indicates a time-out error when waiting for response from service.
     */r[r.ServiceTimeout=5]="ServiceTimeout",/**
     * Indicates that an error is returned by the service.
     */r[r.ServiceError=6]="ServiceError",/**
     * Indicates an unexpected runtime error.
     */r[r.RuntimeError=7]="RuntimeError",/**
     * Indicates an quota overrun on existing key.
     */r[r.Forbidden=8]="Forbidden"}),P.register("aYe4l",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionEventArgs=void 0;/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("9pfmZ").SessionEventArgs);e.exports.ConnectionEventArgs=o}),P.register("dWsx5",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ServiceEventArgs=void 0;/**
 * Defines payload for any Service message event
 * Added in version 1.9.0
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} json - json payload of the USP message.
     */function t(t,r,n){var o=e.call(this,n)||this;return o.privJsonResult=t,o.privEventName=r,o}return n(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventName",{get:function(){return this.privEventName},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SessionEventArgs);e.exports.ServiceEventArgs=o}),P.register("3Vfbi",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PhraseListGrammar=void 0;/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */var r=/** @class */function(){function e(e){this.privGrammerBuilder=e.dynamicGrammar}return(/**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */e.fromRecognizer=function(t){var r=t.internalData;return new e(r)},/**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */e.prototype.addPhrase=function(e){this.privGrammerBuilder.addPhrase(e)},/**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */e.prototype.addPhrases=function(e){this.privGrammerBuilder.addPhrase(e)},/**
     * Clears all phrases added to the current recognizer.
     */e.prototype.clear=function(){this.privGrammerBuilder.clearPhrases()},e)}();e.exports.PhraseListGrammar=r}),P.register("jLc9Z",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogServiceConfigImpl=e.exports.DialogServiceConfig=void 0;var o=P("eyacr"),i=P("9pfmZ"),s=/** @class */function(){/**
     * Creates an instance of DialogService config.
     * @constructor
     */function e(){}return Object.defineProperty(e.prototype,"applicationId",{/**
         * Sets the corresponding backend application identifier.
         * @member DialogServiceConfig.prototype.Conversation_ApplicationId
         * @function
         * @public
         * @param {string} value - The application identifier to set.
         */// eslint-disable-next-line @typescript-eslint/no-empty-function
set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DialogTypes",{get:function(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}},enumerable:!1,configurable:!0}),e}();e.exports.DialogServiceConfig=s;/**
 * Dialog Service configuration.
 * @class DialogServiceConfigImpl
 */var a=/** @class */function(e){/**
     * Creates an instance of dialogService config.
     */function t(){var t=e.call(this)||this;return t.privSpeechConfig=new i.SpeechConfigImpl,t}return n(t,e),Object.defineProperty(t.prototype,"properties",{/**
         * Provides access to custom properties.
         * @member DialogServiceConfigImpl.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The properties.
         */get:function(){return this.privSpeechConfig.properties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the speech recognition language.
         * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
         * @function
         * @public
         */get:function(){return this.privSpeechConfig.speechRecognitionLanguage},/**
         * Sets the speech recognition language.
         * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @param {string} value - The language to set.
         */set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this.privSpeechConfig.outputFormat},set:function(e){this.privSpeechConfig.outputFormat=e},enumerable:!1,configurable:!0}),/**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to set.
     * @param {string} value - The value.
     */t.prototype.setProperty=function(e,t){this.privSpeechConfig.setProperty(e,t)},/**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to get.
     * @param {string} def - The default value to return in case the property is not known.
     * @returns {string} The current value, or provided default, of the given property.
     */t.prototype.getProperty=function(e,t){return this.privSpeechConfig.getProperty(e)},/**
     * Sets the proxy configuration.
     * Only relevant in Node.js environments.
     * Added in version 1.4.0.
     * @param proxyHostName The host name of the proxy server, without the protocol scheme (http://)
     * @param proxyPort The port number of the proxy server.
     * @param proxyUserName The user name of the proxy server.
     * @param proxyPassword The password of the proxy server.
     */t.prototype.setProxy=function(e,t,r,n){this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPort,""+t),r&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName,r),n&&this.setProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword,n)},t.prototype.setServiceProperty=function(e,t,r){this.privSpeechConfig.setServiceProperty(e,t)},/**
     * Dispose of associated resources.
     * @member DialogServiceConfigImpl.prototype.close
     * @function
     * @public
     */t.prototype.close=function(){},t}(s);e.exports.DialogServiceConfigImpl=a}),P.register("6eWGz",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BotFrameworkConfig=void 0;var o=P("eyacr"),i=P("jLc9Z"),s=P("9pfmZ"),a=/** @class */function(e){/**
     * Creates an instance of BotFrameworkConfig.
     */function t(){return e.call(this)||this}return n(t,e),/**
     * Creates a bot framework configuration instance with the provided subscription information.
     * @member BotFrameworkConfig.fromSubscription
     * @function
     * @public
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */t.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"subscription"),o.Contracts.throwIfNullOrWhitespace(t,"region");var n=new i.DialogServiceConfigImpl;return n.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),n.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r&&n.setProperty(s.PropertyId.Conversation_ApplicationId,r),n},/**
     * Creates a bot framework configuration instance for the specified authorization token and region.
     * Note: The caller must ensure that an authorization token is valid. Before an authorization token expires, the
     * caller must refresh it by setting the authorizationToken property on the corresponding
     * DialogServiceConnector instance created with this config. The contents of configuration objects are copied
     * when connectors are created, so setting authorizationToken on a DialogServiceConnector will not update the
     * original configuration's authorization token. Create a new configuration instance or set the
     * SpeechServiceAuthorization_Token property to update an existing instance if it will be used to create
     * further DialogServiceConnectors.
     * @member BotFrameworkConfig.fromAuthorizationToken
     * @function
     * @public
     * @param authorizationToken The authorization token associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */t.fromAuthorizationToken=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(t,"region");var n=new i.DialogServiceConfigImpl;return n.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),n.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),r&&n.setProperty(s.PropertyId.Conversation_ApplicationId,r),n},/**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-default service host. The standard resource path will be
     * assumed. For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL) and then set the AuthorizationToken
     * property on the created BotFrameworkConfig instance.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromHost
     * @function
     * @public
     * @param {URL | string} host - If a URL is provided, the fully-qualified host with protocol (e.g.
     * wss://your.host.com:1234) will be used. If a string is provided, it will be embedded in
     * wss://{host}.convai.speech.azure.us.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */t.fromHost=function(e,t,r){o.Contracts.throwIfNullOrUndefined(e,"host");var n=e instanceof URL?e:new URL("wss://"+e+".convai.speech.azure.us");o.Contracts.throwIfNullOrUndefined(n,"resolvedHost");var a=new i.DialogServiceConfigImpl;return a.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(s.PropertyId.SpeechServiceConnection_Host,n.toString()),void 0!==t&&a.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),a},/**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created BotFrameworkConfig instance to
     * use the authorization token.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @returns {BotFrameworkConfig} - A new bot framework configuration instance using the provided endpoint.
     */t.fromEndpoint=function(e,t){o.Contracts.throwIfNull(e,"endpoint");var r=new i.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r},t}(i.DialogServiceConfigImpl);e.exports.BotFrameworkConfig=a}),P.register("80IbD",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CustomCommandsConfig=void 0;var o=P("eyacr"),i=P("jLc9Z"),s=P("9pfmZ"),a=/** @class */function(e){/**
     * Creates an instance of CustomCommandsConfig.
     */function t(){return e.call(this)||this}return n(t,e),/**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member CustomCommandsConfig.fromSubscription
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new bot framework config.
     */t.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"subscription"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new i.DialogServiceConfigImpl;return n.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(s.PropertyId.Conversation_ApplicationId,e),n.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n.setProperty(s.PropertyId.SpeechServiceConnection_Region,r),n},/**
     * Creates an instance of the bot framework config with the specified Speech Commands application id, authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member CustomCommandsConfig.fromAuthorizationToken
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param authorizationToken The authorization token associated with the application.
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new speech commands config.
     */t.fromAuthorizationToken=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new i.DialogServiceConfigImpl;return n.setProperty(s.PropertyId.Conversation_DialogType,i.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(s.PropertyId.Conversation_ApplicationId,e),n.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,t),n.setProperty(s.PropertyId.SpeechServiceConnection_Region,r),n},Object.defineProperty(t.prototype,"applicationId",{/**
         * Gets the corresponding backend application identifier.
         * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
         * @function
         * @public
         * @param {string} value - The application identifier to get.
         */get:function(){return this.getProperty(s.PropertyId.Conversation_ApplicationId)},/**
         * Sets the corresponding backend application identifier.
         * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
         * @function
         * @public
         * @param {string} value - The application identifier to set.
         */set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(s.PropertyId.Conversation_ApplicationId,e)},enumerable:!1,configurable:!0}),t}(i.DialogServiceConfigImpl);e.exports.CustomCommandsConfig=a}),P.register("dUVVq",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogServiceConnector=void 0;var s=P("9byFK"),a=P("f7AdM"),c=P("aQGWi"),u=P("eyacr"),p=P("9pfmZ"),l=P("2p9Jb"),f=/** @class */function(e){/**
     * Initializes an instance of the DialogServiceConnector.
     * @constructor
     * @param {DialogServiceConfig} dialogConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */function t(t,r){var n=this;u.Contracts.throwIfNull(t,"dialogConfig"),(n=e.call(this,r,t.properties,new s.DialogConnectionFactory)||this).isTurnComplete=!0,n.privIsDisposed=!1,n.privProperties=t.properties.clone();var o=n.buildAgentConfig();return n.privReco.agentConfig.set(o),n}return n(t,e),/**
     * Starts a connection to the service.
     * Users can optionally call connect() to manually set up a connection in advance, before starting interactions.
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     * @member DialogServiceConnector.prototype.connect
     * @function
     * @public
     */t.prototype.connect=function(e,t){c.marshalPromiseToCallbacks(this.privReco.connect(),e,t)},/**
     * Closes the connection the service.
     * Users can optionally call disconnect() to manually shutdown the connection of the associated DialogServiceConnector.
     *
     * If disconnect() is called during a recognition, recognition will fail and cancel with an error.
     */t.prototype.disconnect=function(e,t){c.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)},Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member DialogServiceConnector.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Sets the authorization token used to communicate with the service.
         * @member DialogServiceConnector.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this DialogServiceConnector.
         * @member DialogServiceConnector.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this DialogServiceConnector.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechActivityTemplate",{/** Gets the template for the activity generated by service from speech.
         * Properties from the template will be stamped on the generated activity.
         * It can be empty
         */get:function(){return this.properties.getProperty(l.PropertyId.Conversation_Speech_Activity_Template)},/** Sets the template for the activity generated by service from speech.
         * Properties from the template will be stamped on the generated activity.
         * It can be null or empty.
         * Note: it has to be a valid Json object.
         */set:function(e){this.properties.setProperty(l.PropertyId.Conversation_Speech_Activity_Template,e)},enumerable:!1,configurable:!0}),/**
     * Starts recognition and stops after the first utterance is recognized.
     * @member DialogServiceConnector.prototype.listenOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the reco has completed.
     * @param err - Callback invoked in case of an error.
     */t.prototype.listenOnceAsync=function(e,t){var r=this;if(this.isTurnComplete){u.Contracts.throwIfDisposed(this.privIsDisposed);var n=o(r,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:return[4/*yield*/,this.privReco.connect()];case 1:return r.sent(),[4/*yield*/,this.implRecognizerStop()];case 2:return r.sent(),this.isTurnComplete=!1,e=new c.Deferred,[4/*yield*/,this.privReco.recognize(a.RecognitionMode.Conversation,e.resolve,e.reject)];case 3:return r.sent(),[4/*yield*/,e.promise];case 4:return t=r.sent(),[4/*yield*/,this.implRecognizerStop()];case 5:return r.sent(),[2/*return*/,t]}})});n.catch(function(){// Destroy the recognizer.
// We've done all we can here.
// eslint-disable-next-line @typescript-eslint/no-empty-function
r.dispose(!0).catch(function(){})}),c.marshalPromiseToCallbacks(n.finally(function(){r.isTurnComplete=!0}),e,t)}},t.prototype.sendActivityAsync=function(e,t,r){c.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,r)},/**
     * closes all external resources held by an instance of this class.
     * @member DialogServiceConnector.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privIsDisposed),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privIsDisposed)return[2/*return*/];if(!t)return[3/*break*/,3];return this.privIsDisposed=!0,[4/*yield*/,this.implRecognizerStop()];case 1:return r.sent(),[4/*yield*/,e.prototype.dispose.call(this,t)];case 2:r.sent(),r.label=3;case 3:return[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new a.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new a.DialogServiceAdapter(e,t,r,n,this)},t.prototype.buildAgentConfig=function(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(l.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(l.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(l.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}},t}(p.Recognizer);e.exports.DialogServiceConnector=f}),P.register("9byFK",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogConnectionFactory=void 0;var o=P("8nLmq"),i=P("f7AdM"),s=P("9pfmZ"),a=P("lsi6M"),i=P("f7AdM"),c=P("eJOps"),u=P("fpunX"),p=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,r,n){var p=e.parameters.getProperty(s.PropertyId.Conversation_ApplicationId,""),l=e.parameters.getProperty(s.PropertyId.Conversation_DialogType),f=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),h=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),d=e.parameters.getProperty(s.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[c.HeaderNames.ConnectionId]=n,v[u.QueryParameterNames.Format]=e.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase(),v[u.QueryParameterNames.Language]=h,v[u.QueryParameterNames.RequestBotStatusMessages]=d,p&&(v[u.QueryParameterNames.BotId]=p,l===s.DialogServiceConfig.DialogTypes.CustomCommands&&(v[c.HeaderNames.CustomCommandsAppId]=p));var y=l===s.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",g=l===s.DialogServiceConfig.DialogTypes.CustomCommands?"v1":l===s.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",m={};null!=r.token&&""!==r.token&&(m[r.headerName]=r.token);// The URL used for connection is chosen in a priority order of specification:
//  1. If a custom endpoint is provided, that URL is used verbatim.
//  2. If a custom host is provided (e.g. "wss://my.custom.endpoint.com:1123"), a URL is constructed from it.
//  3. If no custom connection details are provided, a URL is constructed from default values.
var b=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"");if(!b){var S=a.ConnectionFactoryBase.getHostSuffix(f),P=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+f+"."+t.BaseUrl+S);b=""+(P.endsWith("/")?P:P+"/")+y+t.ApiKey+"/"+g}this.setCommonUrlParams(e,v,b);var C="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(b,v,m,new i.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),C,n)},t.ApiKey="api",t.BaseUrl="convai.speech",t}(a.ConnectionFactoryBase);e.exports.DialogConnectionFactory=p}),P.register("lsi6M",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionFactoryBase=void 0;var r=P("f7AdM"),n=P("9pfmZ"),o=P("fpunX"),i=/** @class */function(){function e(){}return e.getHostSuffix=function(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"},e.prototype.setCommonUrlParams=function(e,t,i){var s=this;new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach(function(r,n){s.setUrlParameter(n,r,e,t,i)});var a=JSON.parse(e.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(a).forEach(function(e){t[e]=a[e]})},e.prototype.setUrlParameter=function(e,t,r,n,o){var i=r.parameters.getProperty(e,void 0);i&&(!o||-1===o.search(t))&&(n[t]=i.toLocaleLowerCase())},e}();e.exports.ConnectionFactoryBase=i}),P.register("fpunX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.QueryParameterNames=void 0;var r=/** @class */function(){function e(){}return e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e.Postprocessing="postprocessing",e.CtsMeetingId="meetingId",e.CtsDeviceId="deviceId",e.CtsIsParticipant="isParticipant",e}();e.exports.QueryParameterNames=r}),P.register("kKIo3",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ActivityReceivedEventArgs=void 0;/**
 * Defines contents of received message/events.
 * @class ActivityReceivedEventArgs
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {any} activity - The activity..
     */function e(e,t){this.privActivity=e,this.privAudioStream=t}return Object.defineProperty(e.prototype,"activity",{/**
         * Gets the received activity
         * @member ActivityReceivedEventArgs.prototype.activity
         * @function
         * @public
         * @returns {any} the received activity.
         */get:function(){return this.privActivity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioStream",{get:function(){return this.privAudioStream},enumerable:!1,configurable:!0}),e}();e.exports.ActivityReceivedEventArgs=r}),P.register("8ruDz",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TurnStatusReceivedEventArgs=void 0;var r=P("0fo3P"),n=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} turnStatus - The JSON-encoded turn status message.
     */function e(e){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(e)}return Object.defineProperty(e.prototype,"interactionId",{/**
         * Gets the interaction identifier associated with this turn status event.
         * @member TurnStatusReceivedEventArgs.prototype.interactionId
         * @function
         * @public
         * @returns {any} the received interaction id.
         */get:function(){return this.privTurnStatus.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{/**
         * Gets the conversation identifier associated with this turn status event.
         * @member TurnStatusReceivedEventArgs.prototype.conversationId
         * @function
         * @public
         * @returns {any} the received conversation id.
         */get:function(){return this.privTurnStatus.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{/**
         * Gets the received turn status code.
         * @member TurnStatusReceivedEventArgs.prototype.statusCode
         * @function
         * @public
         * @returns {number} the received turn status.
         */get:function(){return this.privTurnStatus.statusCode;// eslint-disable-line @typescript-eslint/no-unsafe-return
},enumerable:!1,configurable:!0}),e}();e.exports.TurnStatusReceivedEventArgs=n}),P.register("0fo3P",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TurnStatusResponsePayload=void 0;var r=/** @class */function(){function e(e){this.privMessageStatusResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"interactionId",{get:function(){return this.privMessageStatusResponse.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privMessageStatusResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){// Payloads may contain a limited set of textual representations or a numeric status
// code. The textual values are here converted into numeric ones.
switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:// eslint-disable-next-line @typescript-eslint/no-unsafe-return
return this.privMessageStatusResponse.statusCode}},enumerable:!1,configurable:!0}),e}();e.exports.TurnStatusResponsePayload=r}),P.register("czjvI",function(e,t){var r;// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ServicePropertyChannel=void 0,/**
     * Uses URI query parameter to pass property settings to service.
     */(r=e.exports.ServicePropertyChannel||(e.exports.ServicePropertyChannel={}))[r.UriQueryParameter=0]="UriQueryParameter"}),P.register("5MXZf",function(e,t){var r;// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ProfanityOption=void 0,(r=e.exports.ProfanityOption||(e.exports.ProfanityOption={}))[r.Masked=0]="Masked",r[r.Removed=1]="Removed",r[r.Raw=2]="Raw"}),P.register("6AsKM",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BaseAudioPlayer=void 0;var o=P("k9bMn"),i=P("9pfmZ"),s=P("9k8LZ"),a=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {AudioStreamFormat} audioFormat audio stream format recognized by the player.
     */function e(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=i.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}return(/**
     * play Audio sample
     * @param newAudioData audio data to be played.
     */e.prototype.playAudioSample=function(e,t,r){try{this.ensureInitializedContext();var n=this.formatAudioData(e),o=new Float32Array(this.samples.length+n.length);o.set(this.samples,0),o.set(n,this.samples.length),this.samples=o,t&&t()}catch(e){r&&r(e)}},/**
     * stops audio and clears the buffers
     */e.prototype.stopAudio=function(e,t){null!==this.audioContext&&(this.samples=new Float32Array,// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(function(){e&&e()},function(e){t&&t(e)}),this.audioContext=null)},e.prototype.init=function(e){this.audioFormat=e,this.samples=new Float32Array},e.prototype.ensureInitializedContext=function(){var e=this;null===this.audioContext&&(this.createAudioContext(),this.autoUpdateBufferTimer=setInterval(function(){e.updateAudioBuffer()},200))},e.prototype.createAudioContext=function(){// new ((window as any).AudioContext || (window as any).webkitAudioContext)();
this.audioContext=s.AudioStreamFormatImpl.getAudioContext(),// TODO: Various examples shows this gain node, it does not seem to be needed unless we plan
// to control the volume, not likely
this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime},e.prototype.formatAudioData=function(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new o.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}},e.prototype.formatArrayBuffer=function(e,t){for(var r=new Float32Array(e.length),n=0;n<e.length;n++)r[n]=e[n]/t;return r},e.prototype.updateAudioBuffer=function(){if(0!==this.samples.length){// TODO: Should we do the conversion in the pushAudioSample instead?
for(var e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec),o=0;o<e;o++)for(var i=o,s=n.getChannelData(o),a=0;a<this.samples.length;a++,i+=e)s[a]=this.samples[i];this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),// Make sure we play the next sample after the current one.
this.startTime+=n.duration,// Clear the samples for the next pushed data.
this.samples=new Float32Array}},e.prototype.playAudio=function(e){return r(this,void 0,void 0,function(){var t,r;return n(this,function(n){switch(n.label){case 0:return null===this.audioContext&&this.createAudioContext(),t=this.audioContext.createBufferSource(),r=this.audioContext.destination,[4/*yield*/,this.audioContext.decodeAudioData(e,function(e){t.buffer=e,t.connect(r),t.start(0)})];case 1:return n.sent(),[2/*return*/]}})})},e)}();e.exports.BaseAudioPlayer=a}),P.register("br6GM",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConnectionMessageEventArgs=void 0;var r=/** @class */function(){function e(e){this.privConnectionMessage=e}return Object.defineProperty(e.prototype,"message",{/**
         * Gets the <see cref="ConnectionMessage"/> associated with this <see cref="ConnectionMessageEventArgs"/>.
         */get:function(){return this.privConnectionMessage},enumerable:!1,configurable:!0}),/**
     * Returns a string that represents the connection message event.
     */e.prototype.toString=function(){return"Message: "+this.privConnectionMessage.toString()},e}();e.exports.ConnectionMessageEventArgs=r}),P.register("eGmpr",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfile=void 0;/**
 * Defines Voice Profile class for Speaker Recognition
 * @class VoiceProfile
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} profileId - profileId of this Voice Profile.
     * @param {VoiceProfileType} profileType - profileType of this Voice Profile.
     */function e(e,t){this.privId=e,this.privProfileType=t}return Object.defineProperty(e.prototype,"profileId",{/**
         * profileId of this Voice Profile instance
         * @member VoiceProfile.prototype.profileId
         * @function
         * @public
         * @returns {string} profileId of this Voice Profile instance.
         */get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileType",{/**
         * profileType of this Voice Profile instance
         * @member VoiceProfile.prototype.profileType
         * @function
         * @public
         * @returns {VoiceProfileType} profile type of this Voice Profile instance.
         */get:function(){return this.privProfileType},enumerable:!1,configurable:!0}),e}();e.exports.VoiceProfile=r}),P.register("ek6H7",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfileEnrollmentCancellationDetails=e.exports.VoiceProfileEnrollmentResult=void 0;var o=P("f7AdM"),i=P("9pfmZ"),s=/** @class */function(){function e(e,t,r){this.privReason=e,this.privProperties=new i.PropertyCollection,this.privReason!==i.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=i.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.ServiceError]))}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsCount",{get:function(){return this.privDetails.enrollmentsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsLength",{get:function(){return this.privDetails.enrollmentsLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentResultDetails",{get:function(){return this.privDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e.FromIdentificationProfileList=function(t){for(var r=[],n=0,o=t.value;n<o.length;n++){var s=o[n],a="enrolling"===s.enrollmentStatus.toLowerCase()?i.ResultReason.EnrollingVoiceProfile:"enrolled"===s.enrollmentStatus.toLowerCase()?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,c=new e(a,null,null);c.privDetails=this.getIdentificationDetails(s),r.push(c)}return r},e.FromVerificationProfileList=function(t){for(var r=[],n=0,o=t.value;n<o.length;n++){var s=o[n],a="enrolling"===s.enrollmentStatus.toLowerCase()?i.ResultReason.EnrollingVoiceProfile:"enrolled"===s.enrollmentStatus.toLowerCase()?i.ResultReason.EnrolledVoiceProfile:i.ResultReason.Canceled,c=new e(a,null,null);c.privDetails=this.getVerificationDetails(s),r.push(c)}return r},e.getIdentificationDetails=function(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}},e.getVerificationDetails=function(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}},e}();e.exports.VoiceProfileEnrollmentResult=s;/**
 * @class VoiceProfileEnrollmentCancellationDetails
 */var a=/** @class */function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return n(t,e),/**
     * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.
     * @member VoiceProfileEnrollmentCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.
     * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.
     */t.fromResult=function(e){var r=i.CancellationReason.Error,n=i.CancellationErrorCode.NoError;return e.properties&&(n=i.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,i.CancellationErrorCode[i.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(i.CancellationDetailsBase);e.exports.VoiceProfileEnrollmentCancellationDetails=a}),P.register("eoFl5",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfileCancellationDetails=e.exports.VoiceProfileResult=void 0;var o=P("f7AdM"),i=P("eyacr"),s=P("9pfmZ"),a=/** @class */function(){function e(e,t){this.privReason=e,this.privProperties=new s.PropertyCollection,e===s.ResultReason.Canceled&&(i.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.ServiceError]))}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();e.exports.VoiceProfileResult=a;/**
 * @class VoiceProfileCancellationDetails
 */var c=/** @class */function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return n(t,e),/**
     * Creates an instance of VoiceProfileCancellationDetails object for the canceled VoiceProfileResult.
     * @member VoiceProfileCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileResult} result - The result that was canceled.
     * @returns {VoiceProfileCancellationDetails} The cancellation details object being created.
     */t.fromResult=function(e){var r=s.CancellationReason.Error,n=s.CancellationErrorCode.NoError;return e.properties&&(n=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(s.CancellationDetailsBase);e.exports.VoiceProfileCancellationDetails=c}),P.register("fuHtR",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfilePhraseResult=void 0;var o=P("eyacr"),i=/** @class */function(e){function t(t,r,n,i){var s=e.call(this,t,r)||this;return s.privPhrases=[],o.Contracts.throwIfNullOrUndefined(i,"phrase array"),s.privType=n,i&&i[0]&&(s.privPhrases=i),s}return n(t,e),Object.defineProperty(t.prototype,"phrases",{get:function(){return this.privPhrases},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.privType},enumerable:!1,configurable:!0}),t}(P("9pfmZ").VoiceProfileResult);e.exports.VoiceProfilePhraseResult=i}),P.register("3MFqC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfileClient=void 0;var s=P("f7AdM"),a=P("gFJqi"),c=P("eyacr"),u=P("9pfmZ"),p=/** @class */function(e){/**
     * VoiceProfileClient constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer (authentication key, region, &c)
     */function t(t){var r=this;return c.Contracts.throwIfNullOrUndefined(t,"speechConfig"),c.Contracts.throwIfNull(t,"speechConfig"),(r=e.call(this,a.AudioConfig.fromStreamInput(u.AudioInputStream.createPushStream()),t.properties,new s.VoiceProfileConnectionFactory)||this).privProperties=t.properties.clone(),r.privVoiceAdapter=r.privReco,r.privDisposedVoiceAdapter=!1,r}return n(t,e),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this VoiceProfileClient.
         * @member VoiceProfileClient.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this VoiceProfileClient.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member VoiceProfileClient.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member VoiceProfileClient.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){c.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),/**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.createProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Type of Voice Profile to be created
     * @param {string} lang Language string (locale) for Voice Profile
     * @return {Promise<VoiceProfile>} - Promise of a VoiceProfile.
     */t.prototype.createProfileAsync=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return[4/*yield*/,this.privVoiceAdapter.createProfile(e,t)];case 1:return r=n.sent(),[2/*return*/,new u.VoiceProfile(r[0],e)]}})})},/**
     * Get current information of a voice profile
     * @member VoiceProfileClient.prototype.retrieveEnrollmentResultAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to retrieve info for
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */t.prototype.retrieveEnrollmentResultAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2/*return*/,this.privVoiceAdapter.retrieveEnrollmentResult(e)]})})},/**
     * Get all voice profiles on account with given voice profile type
     * @member VoiceProfileClient.prototype.getAllProfilesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType profile type (identification/verification) for which to list profiles
     * @return {Promise<VoiceProfileEnrollmentResult[]>} - Promise of an array of VoiceProfileEnrollmentResults.
     */t.prototype.getAllProfilesAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2/*return*/,this.privVoiceAdapter.getAllProfiles(e)]})})},/**
     * Get valid authorization phrases for voice profile enrollment
     * @member VoiceProfileClient.prototype.getActivationPhrasesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Profile Type to get activation phrases for
     * @param {string} lang Language string (locale) for Voice Profile
     */t.prototype.getActivationPhrasesAsync=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(r){return[2/*return*/,this.privVoiceAdapter.getActivationPhrases(e,t)]})})},/**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.enrollProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to create enrollment for
     * @param {AudioConfig} audioConfig source info from which to create enrollment
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */t.prototype.enrollProfileAsync=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){return r=t,c.Contracts.throwIfNullOrUndefined(r,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=r,[2/*return*/,this.privVoiceAdapter.enrollProfile(e)]})})},/**
     * Delete a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.deleteProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be deleted
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */t.prototype.deleteProfileAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2/*return*/,this.privVoiceAdapter.deleteProfile(e)]})})},/**
     * Remove all enrollments for a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.resetProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be reset
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */t.prototype.resetProfileAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2/*return*/,this.privVoiceAdapter.resetProfile(e)]})})},/**
     * Clean up object and close underlying connection
     * @member VoiceProfileClient.prototype.close
     * @function
     * @async
     * @public
     */t.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.dispose(!0)];case 1:return e.sent(),[2/*return*/]}})})},t.prototype.createServiceRecognizer=function(e,t,r,n){return new s.VoiceServiceRecognizer(e,t,r,n,this)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedVoiceAdapter)return[2/*return*/];if(this.privDisposedVoiceAdapter=!0,!t)return[3/*break*/,2];return[4/*yield*/,e.prototype.dispose.call(this,t)];case 1:r.sent(),r.label=2;case 2:return[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.properties)},t.prototype.getResult=function(e,t){return new u.VoiceProfileResult(e.ok?t:u.ResultReason.Canceled,e.statusText)},t}(u.Recognizer);e.exports.VoiceProfileClient=p}),P.register("RKQJ9",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerRecognizer=void 0;var s=P("f7AdM"),a=P("eyacr"),c=P("9pfmZ"),u=/** @class */function(e){/**
     * Initializes an instance of the SpeakerRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */function t(t,r){var n=this;return a.Contracts.throwIfNullOrUndefined(t,"speechConfig"),a.Contracts.throwIfNullOrUndefined(t,"speechConfig"),(n=e.call(this,r,t.properties,new s.SpeakerRecognitionConnectionFactory)||this).privAudioConfigImpl=r,a.Contracts.throwIfNull(n.privAudioConfigImpl,"audioConfig"),n.privDisposedSpeakerRecognizer=!1,n.privProperties=t.properties,n}return n(t,e),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member SpeakerRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member SpeakerRecognizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this SpeakerRecognizer.
         * @member SpeakerRecognizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),/**
     * Get recognition result for model using given audio
     * @member SpeakerRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @async
     * @param {SpeakerIdentificationModel | SpeakerVerificationModel} model Model containing Voice Profiles to be identified
     * @param cb - Callback invoked once result is returned.
     * @param err - Callback invoked in case of an error.
     */t.prototype.recognizeOnceAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return a.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),[2/*return*/,this.recognizeSpeakerOnceAsyncImpl(e)]})})},/**
     * Included for compatibility
     * @member SpeakerRecognizer.prototype.close
     * @function
     * @public
     * @async
     */t.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return a.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),[4/*yield*/,this.dispose(!0)];case 1:return e.sent(),[2/*return*/]}})})},t.prototype.recognizeSpeakerOnceAsyncImpl=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return a.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),[4/*yield*/,this.implRecognizerStop()];case 1:return r.sent(),[4/*yield*/,this.privReco.recognizeSpeaker(e)];case 2:return t=r.sent(),[4/*yield*/,this.implRecognizerStop()];case 3:return r.sent(),[2/*return*/,t]}})})},t.prototype.implRecognizerStop=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(!this.privReco)return[3/*break*/,2];return[4/*yield*/,this.privReco.stopRecognizing()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new s.SpeakerServiceRecognizer(e,t,r,n,this)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedSpeakerRecognizer)return[2/*return*/];if(!t)return[3/*break*/,2];return this.privDisposedSpeakerRecognizer=!0,[4/*yield*/,e.prototype.dispose.call(this,t)];case 1:r.sent(),r.label=2;case 2:return[2/*return*/]}})})},t}(c.Recognizer);e.exports.SpeakerRecognizer=u}),P.register("2Zjwl",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerIdentificationModel=void 0;var r=P("eyacr"),n=P("9pfmZ"),o=/** @class */function(){function e(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],r.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw Error("Empty Voice Profiles array");for(var t=0;t<e.length;t++){var o=e[t];if(o.profileType!==n.VoiceProfileType.TextIndependentIdentification)throw Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}return e.fromProfiles=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfileIds",{get:function(){return this.privProfileIds.join(",")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileIds",{get:function(){return this.privProfileIds},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scenario",{get:function(){return"TextIndependentIdentification"},enumerable:!1,configurable:!0}),e}();e.exports.SpeakerIdentificationModel=o}),P.register("8Y1fC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerVerificationModel=void 0;var r=P("eyacr"),n=P("9pfmZ"),o=/** @class */function(){function e(e){if(r.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===n.VoiceProfileType.TextIndependentIdentification)throw Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}return e.fromProfile=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfile",{get:function(){return this.privVoiceProfile},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileIds",{get:function(){return[this.voiceProfile.profileId]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scenario",{get:function(){return this.voiceProfile.profileType===n.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"},enumerable:!1,configurable:!0}),e}();e.exports.SpeakerVerificationModel=o}),P.register("365MX",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AutoDetectSourceLanguageConfig=void 0;var r=P("f7AdM"),n=P("eyacr"),o=P("9pfmZ"),i=P("8r1t5"),s=/** @class */function(){function e(){this.privProperties=new o.PropertyCollection,this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=i.LanguageIdMode.AtStart}return(/**
     * @member AutoDetectSourceLanguageConfig.fromOpenRange
     * @function
     * @public
     * Only [[SpeechSynthesizer]] supports source language auto detection from open range,
     * for [[Recognizer]], please use AutoDetectSourceLanguageConfig with specific source languages.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with open range.
     */e.fromOpenRange=function(){var t=new e;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),t},/**
     * @member AutoDetectSourceLanguageConfig.fromLanguages
     * @function
     * @public
     * @param {string[]} languages Comma-separated string of languages (eg. "en-US,fr-FR") to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given languages.
     */e.fromLanguages=function(t){n.Contracts.throwIfArrayEmptyOrWhitespace(t,"languages");var r=new e;return r.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.join()),r},/**
     * @member AutoDetectSourceLanguageConfig.fromSourceLanguageConfigs
     * @function
     * @public
     * @param {SourceLanguageConfig[]} configs SourceLanguageConfigs to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given SourceLanguageConfigs.
     */e.fromSourceLanguageConfigs=function(t){if(t.length<1)throw Error("Expected non-empty SourceLanguageConfig array.");var r=new e,n=[];return t.forEach(function(e){if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){var t=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();r.properties.setProperty(t,e.endpointId)}}),r.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),r},Object.defineProperty(e.prototype,"properties",{/**
         * @member AutoDetectSourceLanguageConfig.prototype.properties
         * @function
         * @public
         * @return {PropertyCollection} Properties of the config.
         * @summary Gets an auto detected language config properties
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{/**
         * @member AutoDetectSourceLanguageConfig.prototype.mode
         * @function
         * @public
         * @param {LanguageIdMode} mode LID mode desired.
         * @summary Sets LID operation to desired mode
         */set:function(e){e===i.LanguageIdMode.Continuous?(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e},enumerable:!1,configurable:!0}),e)}();e.exports.AutoDetectSourceLanguageConfig=s}),P.register("8r1t5",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.LanguageIdMode=void 0,/**
     * Detect language at audio start
     * @member LanguageIdMode.AtStart
     */(r=e.exports.LanguageIdMode||(e.exports.LanguageIdMode={}))[r.AtStart=0]="AtStart",/**
     * Continuously detect language
     * @member LanguageIdMode.Continuous
     */r[r.Continuous=1]="Continuous"}),P.register("khHxj",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AutoDetectSourceLanguageResult=void 0;var r=P("eyacr"),n=/** @class */function(){function e(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),r.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}return(/**
     * Creates an instance of AutoDetectSourceLanguageResult object from a SpeechRecognitionResult instance.
     * @member AutoDetectSourceLanguageResult.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult} result - The recognition result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */e.fromResult=function(t){return new e(t.language,t.languageDetectionConfidence)},/**
     * Creates an instance of AutoDetectSourceLanguageResult object from a ConversationTranscriptionResult instance.
     * @member AutoDetectSourceLanguageResult.fromConversationTranscriptionResult
     * @function
     * @public
     * @param {ConversationTranscriptionResult} result - The transcription result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */e.fromConversationTranscriptionResult=function(t){return new e(t.language,t.languageDetectionConfidence)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),e)}();e.exports.AutoDetectSourceLanguageResult=n}),P.register("iep6H",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SourceLanguageConfig=void 0;var r=P("eyacr"),n=/** @class */function(){function e(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}return(/**
     * @member SourceLanguageConfig.fromLanguage
     * @function
     * @public
     * @param {string} language language (eg. "en-US") value of config.
     * @param {string?} endpointId endpointId of model bound to given language of config.
     * @return {SourceLanguageConfig} Instance of SourceLanguageConfig
     * @summary Creates an instance of the SourceLanguageConfig with the given language and optional endpointId.
     * Added in version 1.13.0.
     */e.fromLanguage=function(t,r){return new e(t,r)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endpointId",{get:function(){return this.privEndpointId},enumerable:!1,configurable:!0}),e)}();e.exports.SourceLanguageConfig=n}),P.register("6ik4C",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n,o,i=e.exports&&e.exports.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerRecognitionCancellationDetails=e.exports.SpeakerRecognitionResult=e.exports.SpeakerRecognitionResultType=void 0;var s=P("f7AdM"),a=P("9pfmZ");(r=o=e.exports.SpeakerRecognitionResultType||(e.exports.SpeakerRecognitionResultType={}))[r.Verify=0]="Verify",r[r.Identify=1]="Identify";/**
 * Output format
 * @class SpeakerRecognitionResult
 */var c=/** @class */function(){function e(e,t,r,n){void 0===t&&(t=a.ResultReason.RecognizedSpeaker),void 0===r&&(r=a.CancellationErrorCode.NoError),void 0===n&&(n=""),this.privProperties=new a.PropertyCollection;var i="TextIndependentIdentification"===e.scenario?o.Identify:o.Verify;this.privReason=t,this.privReason!==a.ResultReason.Canceled?i===o.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=a.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=a.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=n,this.privProperties.setProperty(s.CancellationErrorCodePropertyName,a.CancellationErrorCode[r])),this.privProperties.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}return Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileId",{get:function(){return this.privProfileId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.privScore},enumerable:!1,configurable:!0}),e}();e.exports.SpeakerRecognitionResult=c;/**
 * @class SpeakerRecognitionCancellationDetails
 */var u=/** @class */function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),/**
     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult
     * @member SpeakerRecognitionCancellationDetails.fromResult
     * @function
     * @public
     * @param {SpeakerRecognitionResult} result - The result that was canceled.
     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.
     */t.fromResult=function(e){var r=a.CancellationReason.Error,n=a.CancellationErrorCode.NoError;return e.properties&&(n=a.CancellationErrorCode[e.properties.getProperty(s.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(a.CancellationDetailsBase);e.exports.SpeakerRecognitionCancellationDetails=u}),P.register("a0QDp",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(e.exports,"__esModule",{value:!0});var r=P("h0Oes");Object.defineProperty(e.exports,"Conversation",{enumerable:!0,get:function(){return r.Conversation}}),Object.defineProperty(e.exports,"ConversationImpl",{enumerable:!0,get:function(){return r.ConversationImpl}});var n=P("gzXG1");Object.defineProperty(e.exports,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var o=P("eqRwF");Object.defineProperty(e.exports,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var i=P("aRbTc");Object.defineProperty(e.exports,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=P("6QDHy");Object.defineProperty(e.exports,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=P("dRNRY");Object.defineProperty(e.exports,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var c=P("9yXLW");Object.defineProperty(e.exports,"ConversationTranslationResult",{enumerable:!0,get:function(){return c.ConversationTranslationResult}});var u=P("337MC");Object.defineProperty(e.exports,"ConversationTranslator",{enumerable:!0,get:function(){return u.ConversationTranslator}});var p=P("jICEY");Object.defineProperty(e.exports,"ConversationTranscriber",{enumerable:!0,get:function(){return p.ConversationTranscriber}});var l=P("78vAQ");Object.defineProperty(e.exports,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(e.exports,"User",{enumerable:!0,get:function(){return l.User}});var f=P("cMxGi");Object.defineProperty(e.exports,"ParticipantChangedReason",{enumerable:!0,get:function(){return f.ParticipantChangedReason}});var h=P("5wh6I");Object.defineProperty(e.exports,"Meeting",{enumerable:!0,get:function(){return h.Meeting}}),Object.defineProperty(e.exports,"MeetingImpl",{enumerable:!0,get:function(){return h.MeetingImpl}});var d=P("dx80o");Object.defineProperty(e.exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return d.MeetingTranscriptionCanceledEventArgs}});var v=P("dKV6O");Object.defineProperty(e.exports,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var y=P("en9rq");Object.defineProperty(e.exports,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return y.ConversationTranscriptionResult}})}),P.register("h0Oes",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=e.exports&&e.exports.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationImpl=e.exports.Conversation=void 0;var a=P("f7AdM"),c=P("aQGWi"),u=P("eyacr"),p=P("9pfmZ"),l=/** @class */function(){function e(){}return(/**
     * Create a conversation
     * @param speechConfig
     * @param cb
     * @param err
     */e.createConversationAsync=function(e,t,r,n){var s;return(u.Contracts.throwIfNullOrUndefined(e,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),u.Contracts.throwIfNullOrUndefined(e.region,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(p.PropertyId[p.PropertyId.SpeechServiceAuthorization_Token])||u.Contracts.throwIfNullOrUndefined(e.subscriptionKey,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t)?(s=new f(e,t),// eslint-disable-next-line @typescript-eslint/no-empty-function
c.marshalPromiseToCallbacks(o(this,void 0,void 0,function(){return i(this,function(e){return[2/*return*/]})}),r,n)):(s=new f(e)).createConversationAsync(function(){t&&t()},function(e){r&&r(e)}),s},e)}();e.exports.Conversation=l;var f=/** @class */function(e){/**
     * Create a conversation impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */function t(t,r){var n=e.call(this)||this;if(n.privErrors=a.ConversationConnectionConfig.restErrors,/** websocket callbacks *//* eslint-disable @typescript-eslint/typedef */n.onConnected=function(e){var t;n.privIsConnected=!0;try{(null===(t=n.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&n.privConversationTranslator.sessionStarted(n.privConversationTranslator,e)}catch(e){//
}},n.onDisconnected=function(e){var t;try{(null===(t=n.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&n.privConversationTranslator.sessionStopped(n.privConversationTranslator,e)}catch(e){//
}finally{n.close(!1)}},n.onCanceled=function(e,t){var r;try{(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.canceled)&&n.privConversationTranslator.canceled(n.privConversationTranslator,t)}catch(e){//
}},n.onParticipantUpdateCommandReceived=function(e,t){try{var r=n.privParticipants.getParticipant(t.id);if(void 0!==r){switch(t.key){case a.ConversationTranslatorCommandTypes.changeNickname:r.displayName=t.value;break;case a.ConversationTranslatorCommandTypes.setUseTTS:r.isUsingTts=t.value;break;case a.ConversationTranslatorCommandTypes.setProfanityFiltering:r.profanity=t.value;break;case a.ConversationTranslatorCommandTypes.setMute:r.isMuted=t.value;break;case a.ConversationTranslatorCommandTypes.setTranslateToLanguages:r.translateToLanguages=t.value}n.privParticipants.addOrUpdateParticipant(r),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,[n.toParticipant(r)],t.sessionId))}}catch(e){//
}},n.onLockRoomCommandReceived=function(){// TODO
},n.onMuteAllCommandReceived=function(e,t){try{n.privParticipants.participants.forEach(function(e){return e.isMuted=!e.isHost&&t.isMuted}),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,n.toParticipants(!1),t.sessionId))}catch(e){//
}},n.onParticipantJoinCommandReceived=function(e,t){try{var r=n.privParticipants.addOrUpdateParticipant(t.participant);void 0!==r&&n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,[n.toParticipant(r)],t.sessionId))}catch(e){//
}},n.onParticipantLeaveCommandReceived=function(e,t){try{var r=n.privParticipants.getParticipant(t.participant.id);void 0!==r&&(// remove the participant from the internal participants list
n.privParticipants.deleteParticipant(t.participant.id),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.LeftConversation,[n.toParticipant(r)],t.sessionId)))}catch(e){//
}},n.onTranslationReceived=function(e,t){try{switch(t.command){case a.ConversationTranslatorMessageTypes.final:n.privConversationTranslator&&n.privConversationTranslator.transcribed(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case a.ConversationTranslatorMessageTypes.partial:n.privConversationTranslator&&n.privConversationTranslator.transcribing(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case a.ConversationTranslatorMessageTypes.instantMessage:n.privConversationTranslator&&n.privConversationTranslator.textMessageReceived(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(e){//
}},n.onParticipantsListReceived=function(e,t){var r;try{// if this is the host, update the nickname if needed
if(void 0!==t.sessionToken&&null!==t.sessionToken&&(n.privRoom.token=t.sessionToken),// save the participants
n.privParticipants.participants=s(t.participants),void 0!==n.privParticipants.me&&(n.privIsReady=!0),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,n.toParticipants(!0),t.sessionId)),n.me.isHost){var o=null===(r=n.privConversationTranslator)||void 0===r?void 0:r.properties.getProperty(p.PropertyId.ConversationTranslator_Name);void 0!==o&&o.length>0&&o!==n.me.displayName&&n.changeNicknameAsync(o)}}catch(e){//
}},n.onConversationExpiration=function(e,t){try{n.privConversationTranslator&&n.privConversationTranslator.conversationExpiration(n.privConversationTranslator,t)}catch(e){//
}},n.privIsConnected=!1,n.privIsDisposed=!1,n.privConversationId="",n.privProperties=new p.PropertyCollection,n.privManager=new a.ConversationManager,t.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],a.ConversationConnectionConfig.defaultLanguageCode),n.privLanguage=t.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),r)n.privConversationId=r;else{0===t.targetLanguages.length&&t.addTargetLanguage(n.privLanguage),t.getProperty(p.PropertyId[p.PropertyId.SpeechServiceResponse_ProfanityOption])||t.setProfanity(p.ProfanityOption.Masked);// check the nickname: it should pass this regex: ^\w+([\s-][\w\(\)]+)*$"
// TODO: specify the regex required. Nicknames must be unique or get the duplicate nickname error
// TODO: check what the max length is and if a truncation is required or if the service handles it without an error
var o=t.getProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name]);null==o&&(o="Host"),u.Contracts.throwIfNullOrTooLong(o,"nickname",50),u.Contracts.throwIfNullOrTooShort(o,"nickname",2),t.setProperty(p.PropertyId[p.PropertyId.ConversationTranslator_Name],o)}return(// save the speech config for future usage
n.privConfig=t,u.Contracts.throwIfNull(t,"speechConfig"),n.privProperties=t.properties.clone(),n.privIsConnected=!1,n.privParticipants=new a.InternalParticipants,n.privIsReady=!1,n.privTextMessageMaxLength=1e3,n)}return n(t,e),Object.defineProperty(t.prototype,"room",{// get the internal data about a conversation
get:function(){return this.privRoom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connection",{// get the wrapper for connecting to the websockets
get:function(){return this.privConversationRecognizer;// this.privConnection;
},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{// get the config
get:function(){return this.privConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{// get the conversation Id
get:function(){return this.privRoom?this.privRoom.roomId:this.privConversationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{// get the properties
get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{// get the speech language
get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMutedByHost",{get:function(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this.privIsConnected&&this.privIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.toParticipants(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"me",{get:function(){return this.toParticipant(this.privParticipants.me)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.toParticipant(this.privParticipants.host)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transcriberRecognizer",{get:function(){return this.privTranscriberRecognizer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationInfo",{get:function(){for(var e=this.conversationId,t=this.participants.map(function(e){return{id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}}),r={},n=0,o=a.ConversationConnectionConfig.transcriptionEventKeys;n<o.length;n++){var i=o[n],s=this.properties.getProperty(i,"");""!==s&&(r[i]=s)}return{id:e,participants:t,conversationProperties:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSend",{get:function(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSendAsHost",{get:function(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{// get / set the speech auth token
// eslint-disable-next-line @typescript-eslint/member-ordering
get:function(){return this.privToken},set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationTranslator",{set:function(e){this.privConversationTranslator=e},enumerable:!1,configurable:!0}),/**
     * Create a new conversation as Host
     * @param cb
     * @param err
     */t.prototype.createConversationAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,function(n){n||r.handleError(Error(r.privErrors.permissionDeniedConnect),t),r.privRoom=n,r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Starts a new conversation as host.
     * @param cb
     * @param err
     */t.prototype.startConversationAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),// check if there is conversation data available
u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),// connect to the conversation websocket
this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=a.ConversationRecognizerFactory.fromConfig(this,this.privConfig),// Because ConversationTranslator manually sets up and manages the connection, Conversation
// has to forward serviceRecognizer connection events that usually get passed automatically
this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Join a conversation as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */t.prototype.addParticipantAsync=function(e,t,r){u.Contracts.throwIfNullOrUndefined(e,"Participant"),c.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,r)},/**
     * Join a conversation as a participant.
     * @param conversation
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */t.prototype.joinConversationAsync=function(e,t,r,n,o){var i=this;try{// TODO
// if (!!this.privConversationRecognizer) {
//     throw new Error(this.privErrors.permissionDeniedStart);
// }
u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),u.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),u.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),// join the conversation
this.privManager.createOrJoin(this.privProperties,e,function(e){u.Contracts.throwIfNullOrUndefined(e,i.privErrors.permissionDeniedConnect),i.privRoom=e,i.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)},function(e){i.handleError(e,o)})}catch(e){this.handleError(e,o)}},/**
     * Deletes a conversation
     * @param cb
     * @param err
     */t.prototype.deleteConversationAsync=function(e,t){c.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)},t.prototype.deleteConversationImplAsync=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return u.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),u.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),[4/*yield*/,this.privManager.leave(this.privProperties,this.privRoom.token)];case 1:return e.sent(),this.dispose(),[2/*return*/]}})})},/**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */t.prototype.endConversationAsync=function(e,t){c.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)},t.prototype.endConversationImplAsync=function(){return this.close(!0)},/**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */t.prototype.lockConversationAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to mute the conversation
     * @param cb
     * @param err
     */t.prototype.muteAllParticipantsAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to mute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */t.prototype.muteParticipantAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);// check the user exists
var o=this.privParticipants.getParticipantIndex(e);-1===o&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */t.prototype.removeParticipantAsync=function(e,t,r){var n=this;try{if(u.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))c.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,r);else{u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);var o="";"string"==typeof e?o=e:e.hasOwnProperty("id")?o=e.id:e.hasOwnProperty("userId")&&(o=e.userId),u.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId"));// check the participant exists
var i=this.participants.findIndex(function(e){return e.id===o});-1===i&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(o),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}}catch(e){this.handleError(e,r)}},/**
     * Issues a request to unlock the conversation
     * @param cb
     * @param err
     */t.prototype.unlockConversationAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to unmute all participants in the conversation
     * @param cb
     * @param err
     */t.prototype.unmuteAllParticipantsAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to unmute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */t.prototype.unmuteParticipantAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);// check the user exists
var o=this.privParticipants.getParticipantIndex(e);-1===o&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */t.prototype.sendTextMessageAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */t.prototype.setTranslatedLanguagesAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */t.prototype.changeNicknameAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)},t.prototype.connectTranscriberRecognizer=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(!this.privTranscriberRecognizer)return[3/*break*/,2];return[4/*yield*/,this.privTranscriberRecognizer.close()];case 1:t.sent(),t.label=2;case 2:return[4/*yield*/,e.enforceAudioGating()];case 3:return t.sent(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this,[2/*return*/]}})})},t.prototype.getKeepAlive=function(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.keepAlive})},/* eslint-enable @typescript-eslint/typedef */t.prototype.addParticipantImplAsync=function(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}},t.prototype.removeParticipantImplAsync=function(e){this.privParticipants.deleteParticipant(e.id);var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")},t.prototype.close=function(e){var t;return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.privIsConnected=!1,[4/*yield*/,null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()];case 1:return r.sent(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose(),[3/*break*/,3];case 2:// ignore error
throw r.sent();case 3:return e&&this.dispose(),[2/*return*/]}})})},/** Helpers */t.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},t.prototype.handleError=function(e,t){t&&t(e instanceof Error?e.name+": "+e.message:e)},/** Participant Helpers */t.prototype.toParticipants=function(e){var t=this,r=this.privParticipants.participants.map(function(e){return t.toParticipant(e)});return e?r:r.filter(function(e){return!1===e.isHost})},t.prototype.toParticipant=function(e){return new p.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)},t.prototype.getMuteAllCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMuteCommand=function(e,t){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setMute,// eslint-disable-next-line object-shorthand
participantId:e,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:t})},t.prototype.getLockCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getEjectCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.ejectParticipant,// eslint-disable-next-line object-shorthand
participantId:e,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand})},t.prototype.getSetTranslateToLanguagesCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getChangeNicknameCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(e,"nickname"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMessageCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),u.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:a.ConversationTranslatorMessageTypes.instantMessage})},t}(l);e.exports.ConversationImpl=f}),P.register("gzXG1",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationCommon=void 0;var r=/** @class */function(){function e(e){this.privAudioConfig=e}return e.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},e.prototype.handleError=function(e,t){t&&t(e instanceof Error?e.name+": "+e.message:e)},e}();e.exports.ConversationCommon=r}),P.register("eqRwF",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationExpirationEventArgs=void 0;var o=/** @class */function(e){function t(t,r){var n=e.call(this,r)||this;return n.privExpirationTime=t,n}return n(t,e),Object.defineProperty(t.prototype,"expirationTime",{/** How much longer until the conversation expires (in minutes). */get:function(){return this.privExpirationTime},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SessionEventArgs);e.exports.ConversationExpirationEventArgs=o}),P.register("aRbTc",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationParticipantsChangedEventArgs=void 0;var o=/** @class */function(e){function t(t,r,n){var o=e.call(this,n)||this;return o.privReason=t,o.privParticipant=r,o}return n(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SessionEventArgs);e.exports.ConversationParticipantsChangedEventArgs=o}),P.register("6QDHy",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslationCanceledEventArgs=void 0;var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("7cnPV").CancellationEventArgsBase);e.exports.ConversationTranslationCanceledEventArgs=o}),P.register("dRNRY",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslationEventArgs=void 0;var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranslationResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function t(t,r,n){var o=e.call(this,r,n)||this;return o.privResult=t,o}return n(t,e),Object.defineProperty(t.prototype,"result",{/**
         * Specifies the recognition result.
         * @returns {ConversationTranslationResult} the recognition result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionEventArgs);e.exports.ConversationTranslationEventArgs=o}),P.register("9yXLW",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslationResult=void 0;var o=/** @class */function(e){function t(t,r,n,o,i,s,a,c,u,p,l){var f=e.call(this,r,o,i,s,a,c,void 0,void 0,u,p,l)||this;return f.privId=t,f.privOrigLang=n,f}return n(t,e),Object.defineProperty(t.prototype,"participantId",{/**
         * The unique identifier for the participant this result is for.
         */get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalLang",{/**
         * The original language this result was in.
         */get:function(){return this.privOrigLang},enumerable:!1,configurable:!0}),t}(P("dCqCk").TranslationRecognitionResult);e.exports.ConversationTranslationResult=o}),P.register("337MC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n,o,i=e.exports&&e.exports.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},a=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslator=e.exports.SpeechState=void 0;var c=P("f7AdM"),u=P("3pXlS"),p=P("aQGWi"),l=P("eyacr"),f=P("9pfmZ"),h=P("h0Oes"),d=P("a0QDp");(r=o=e.exports.SpeechState||(e.exports.SpeechState={}))[r.Inactive=0]="Inactive",r[r.Connecting=1]="Connecting",r[r.Connected=2]="Connected";// child class of TranslationRecognizer meant only for use with ConversationTranslator
var v=/** @class */function(e){function t(t,r,n,i){var c=e.call(this,t,r,new u.ConversationTranslatorConnectionFactory(i))||this;return c.privSpeechState=o.Inactive,n&&(c.privTranslator=n,c.sessionStarted=function(){c.privSpeechState=o.Connected},c.sessionStopped=function(){c.privSpeechState=o.Inactive},c.recognizing=function(e,t){c.privTranslator.recognizing&&c.privTranslator.recognizing(c.privTranslator,t)},// eslint-disable-next-line @typescript-eslint/no-misused-promises
c.recognized=function(e,t){return s(c,void 0,void 0,function(){var e;return a(this,function(r){switch(r.label){case 0:if(!(null===(e=t.result)||void 0===e?void 0:e.errorDetails))return[3/*break*/,2];return[4/*yield*/,this.cancelSpeech()];case 1:return r.sent(),// TODO: format the error message contained in 'errorDetails'
this.fireCancelEvent(t.result.errorDetails),[3/*break*/,3];case 2:this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t),r.label=3;case 3:return[2/*return*/]}})})},// eslint-disable-next-line @typescript-eslint/no-misused-promises
c.canceled=function(){return s(c,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:if(!(this.privSpeechState!==o.Inactive))return[3/*break*/,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4/*yield*/,this.cancelSpeech()];case 2:return e.sent(),[3/*break*/,4];case 3:return e.sent(),this.privSpeechState=o.Inactive,[3/*break*/,4];case 4:return[2/*return*/]}})})}),c}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this.privSpeechState},set:function(e){this.privSpeechState=e},enumerable:!1,configurable:!0}),t.prototype.onConnection=function(){this.privSpeechState=o.Connected},t.prototype.onDisconnection=function(){return s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.privSpeechState=o.Inactive,[4/*yield*/,this.cancelSpeech()];case 1:return e.sent(),[2/*return*/]}})})},/**
     * Fire a cancel event
     * @param error
     */t.prototype.fireCancelEvent=function(e){try{if(this.privTranslator.canceled){var t=new d.ConversationTranslationCanceledEventArgs(f.CancellationReason.Error,e,f.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(e){//
}},t.prototype.cancelSpeech=function(){var e;return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.stopContinuousRecognitionAsync(),[4/*yield*/,null===(e=this.privReco)||void 0===e?void 0:e.disconnect()];case 1:return t.sent(),this.privSpeechState=o.Inactive,[3/*break*/,3];case 2:return t.sent(),[3/*break*/,3];case 3:return[2/*return*/]}})})},t}(f.TranslationRecognizer),y=/** @class */function(e){function t(t){var r=e.call(this,t)||this;return r.privErrors=c.ConversationConnectionConfig.restErrors,r.privIsDisposed=!1,r.privIsSpeaking=!1,r.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",r.privPlaceholderRegion="westus",r.privProperties=new f.PropertyCollection,r}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSpeak",{get:function(){return!!this.privConversation.isConnected&&!!this.privCTRecognizer&&!this.privIsSpeaking&&this.privCTRecognizer.state!==o.Connected&&this.privCTRecognizer.state!==o.Connecting&&!this.privConversation.isMutedByHost},enumerable:!1,configurable:!0}),t.prototype.setServiceProperty=function(e,t){var r=JSON.parse(this.privProperties.getProperty(c.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(c.ServicePropertiesPropertyName,JSON.stringify(r))},t.prototype.joinConversationAsync=function(e,t,r,n,o){var i=this;try{if("string"==typeof e){l.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),l.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(Error(this.privErrors.permissionDeniedStart),o);var s=r;(null==s||""===s)&&(s=c.ConversationConnectionConfig.defaultLanguageCode),// create a placeholder config
this.privSpeechTranslationConfig=f.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(f.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(s),this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_RecoLanguage],s),this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.ConversationTranslator_Name],t);for(var a=[f.PropertyId.SpeechServiceConnection_Host,f.PropertyId.ConversationTranslator_Host,f.PropertyId.SpeechServiceConnection_Endpoint,f.PropertyId.SpeechServiceConnection_ProxyHostName,f.PropertyId.SpeechServiceConnection_ProxyPassword,f.PropertyId.SpeechServiceConnection_ProxyPort,f.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"],u=0;u<a.length;u++){var p=a[u],d=this.privProperties.getProperty(p);if(d){var v="string"==typeof p?p:f.PropertyId[p];this.privSpeechTranslationConfig.setProperty(v,d)}}for(var y=JSON.parse(this.privProperties.getProperty(c.ServicePropertiesPropertyName,"{}")),g=0,m=Object.keys(y);g<m.length;g++){var p=m[g];this.privSpeechTranslationConfig.setServiceProperty(p,y[p],f.ServicePropertyChannel.UriQueryParameter)}// join the conversation
this.privConversation=new h.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,s,function(e){e||i.handleError(Error(i.privErrors.permissionDeniedConnect),o),i.privSpeechTranslationConfig.authorizationToken=e,i.privConversation.room.isHost=!1,// connect to the ws
i.privConversation.startConversationAsync(function(){i.handleCallback(n,o)},function(e){i.handleError(e,o)})},function(e){i.handleError(e,o)})}else"object"==typeof e?(l.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),l.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),// save the nickname
this.privProperties.setProperty(f.PropertyId.ConversationTranslator_Name,t),// ref the conversation object
this.privConversation=e,// ref the conversation translator object
this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),l.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,n)):this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),n)}catch(e){this.handleError(e,"string"==typeof r?o:n)}},/**
     * Leave the conversation
     * @param cb
     * @param err
     */t.prototype.leaveConversationAsync=function(e,t){p.marshalPromiseToCallbacks(s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:// stop the speech websocket
return[4/*yield*/,this.cancelSpeech()];case 1:// stop the websocket
return(// stop the speech websocket
e.sent(),[4/*yield*/,this.privConversation.endConversationImplAsync()]);case 2:// https delete request
return(// stop the websocket
e.sent(),[4/*yield*/,this.privConversation.deleteConversationImplAsync()]);case 3:return(// https delete request
e.sent(),this.dispose(),[2/*return*/])}})}),e,t)},/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */t.prototype.sendTextMessageAsync=function(e,t,r){try{l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),l.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,r)}catch(e){this.handleError(e,r)}},/**
     * Start speaking
     * @param cb
     * @param err
     */t.prototype.startTranscribingAsync=function(e,t){p.marshalPromiseToCallbacks(s(this,void 0,void 0,function(){var e;return a(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,,6]),l.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),l.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0!==this.privCTRecognizer)return[3/*break*/,2];return[4/*yield*/,this.connectTranslatorRecognizer()];case 1:r.sent(),r.label=2;case 2:return l.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(Error(this.privErrors.permissionDeniedSend),t),[4/*yield*/,this.startContinuousRecognition()];case 3:return r.sent(),this.privIsSpeaking=!0,[3/*break*/,6];case 4:return e=r.sent(),this.privIsSpeaking=!1,[4/*yield*/,this.cancelSpeech()];case 5:throw r.sent(),e;case 6:return[2/*return*/]}})}),e,t)},/**
     * Stop speaking
     * @param cb
     * @param err
     */t.prototype.stopTranscribingAsync=function(e,t){p.marshalPromiseToCallbacks(s(this,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:if(t.trys.push([0,4,,6]),this.privIsSpeaking)return[3/*break*/,2];// stop speech
return[4/*yield*/,this.cancelSpeech()];case 1:return(// stop speech
t.sent(),[2/*return*/]);case 2:return(// stop the recognition but leave the websocket open
this.privIsSpeaking=!1,[4/*yield*/,new Promise(function(t,r){e.privCTRecognizer.stopContinuousRecognitionAsync(t,r)})]);case 3:case 5:return t.sent(),[3/*break*/,6];case 4:return t.sent(),[4/*yield*/,this.cancelSpeech()];case 6:return[2/*return*/]}})}),e,t)},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(e,t,r){p.marshalPromiseToCallbacks(s(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:if(this.isDisposed&&!this.privIsSpeaking)return[2/*return*/];return[4/*yield*/,this.cancelSpeech()];case 1:return e.sent(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0,[2/*return*/]}})}),t,r)},/**
     * Cancel the speech websocket
     */t.prototype.cancelSpeech=function(){var e;return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.privIsSpeaking=!1,[4/*yield*/,null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection()];case 1:return t.sent(),this.privCTRecognizer=void 0,[3/*break*/,3];case 2:return t.sent(),[3/*break*/,3];case 3:return[2/*return*/]}})})},/**
     * Connect to the speech translation recognizer.
     * Currently there is no language validation performed before sending the SpeechLanguage code to the service.
     * If it's an invalid language the raw error will be: 'Error during WebSocket handshake: Unexpected response code: 400'
     * e.g. pass in 'fr' instead of 'fr-FR', or a text-only language 'cy'
     */t.prototype.connectTranslatorRecognizer=function(){return s(this,void 0,void 0,function(){var e,t,r=this;return a(this,function(n){switch(n.label){case 0:return n.trys.push([0,1,,3]),void 0===this.privAudioConfig&&(this.privAudioConfig=f.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(f.PropertyId[f.PropertyId.SpeechServiceConnection_Key],""),e=function(){return r.privConversation},this.privCTRecognizer=new v(this.privSpeechTranslationConfig,this.privAudioConfig,this,e),[3/*break*/,3];case 1:return t=n.sent(),[4/*yield*/,this.cancelSpeech()];case 2:throw n.sent(),t;case 3:return[2/*return*/]}})})},/**
     * Handle the start speaking request
     */t.prototype.startContinuousRecognition=function(){var e=this;return new Promise(function(t,r){e.privCTRecognizer.startContinuousRecognitionAsync(t,r)})},t}(d.ConversationCommon);e.exports.ConversationTranslator=y}),P.register("3pXlS",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslatorConnectionFactory=void 0;var o=P("8nLmq"),i=P("heIw7"),s=P("eyacr"),a=P("9pfmZ"),c=P("eJOps"),u=P("fpunX"),p=P("lsi6M"),l=P("f7AdM"),f=/** @class */function(e){function t(t){var r=e.call(this)||this;return s.Contracts.throwIfNullOrUndefined(t,"convGetter"),r.privConvGetter=t,r}return n(t,e),t.prototype.create=function(e,r,n){var s="TRUE"===e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),f=this.privConvGetter().room,h=f.cognitiveSpeechRegion||e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region,""),d={hostSuffix:p.ConnectionFactoryBase.getHostSuffix(h),path:t.CTS_VIRT_MIC_PATH,region:encodeURIComponent(h)};d[u.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"")),d[u.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),d[u.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),d[u.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+u.QueryParameterNames.CtsIsParticipant;var v="",y={},g={};if(s){// connecting to the conversation transcription virtual microphone array endpoint
(v=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint))||(v="wss://"+e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),// because the region can change during a session, we support being passed a format string which we can then
// replace with the correct information.
v=i.StringUtils.formatString(v,d);var m=new URL(v);m.searchParams.forEach(function(e,t){y[t]=e});var b=new l.TranscriberConnectionFactory;b.setQueryParams(y,e,v),// Some query parameters are required for the CTS endpoint, let's explicity set them here
y[u.QueryParameterNames.CtsMeetingId]=d[u.QueryParameterNames.CtsMeetingId],y[u.QueryParameterNames.CtsDeviceId]=d[u.QueryParameterNames.CtsDeviceId],f.isHost||(y[u.QueryParameterNames.CtsIsParticipant]=""),u.QueryParameterNames.Format in y||(y[u.QueryParameterNames.Format]="simple"),m.searchParams.forEach(function(e,t){m.searchParams.set(t,y[t]),delete y[t]}),v=m.toString()}else{// connecting to regular translation endpoint
var b=new l.TranslationConnectionFactory;v=b.getEndpointUrl(e,!0),v=i.StringUtils.formatString(v,d),b.setQueryParams(y,e,v)}g[c.HeaderNames.ConnectionId]=n,g[o.RestConfigBase.configParams.token]=f.token,r.token&&(g[r.headerName]=r.token);var S="TRUE"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new o.WebsocketConnection(v,y,g,new l.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),S,n)},t.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",t}(p.ConnectionFactoryBase);e.exports.ConversationTranslatorConnectionFactory=f}),P.register("heIw7",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.StringUtils=void 0;/**
 * String helper functions
 */var r=/** @class */function(){function e(){}return(/**
     * Formats a string by replacing the named {keys} in the string with the values contained in the replacement dictionary.
     * @param format The format string that contains the parts to replace surrounded by {}. For example: "wss://{region}.cts.speech.microsoft.com".
     * If your string needs to contain a { or } you can use the {{ and }} escape sequences respectively.
     * @param replacements The dictionary of replacements. If a replacement is not found, it is replaced with an empty string
     * @returns The formatted string. If you pass in a null or undefined format string, an empty string will be returned
     */e.formatString=function(e,t){if(!e)return"";if(!t)return e;for(var r="",n="",o=function(e){r+=e},i=function(e){n+=e},s=o,a=0;a<e.length;a++){var c=e[a],u=a+1<e.length?e[a+1]:"";switch(c){case"{":"{"===u?(s("{"),a++):s=i;break;case"}":"}"===u?(s("}"),a++):(t.hasOwnProperty(n)&&(r+=t[n]),s=o,n="");break;default:s(c)}}return r},e)}();e.exports.StringUtils=r}),P.register("jICEY",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranscriber=void 0;var s=P("f7AdM"),a=P("aQGWi"),c=P("eyacr"),u=P("9pfmZ"),p=/** @class */function(e){/**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function t(t,r){var n=this;return c.Contracts.throwIfNull(t,"speechConfig"),c.Contracts.throwIfNullOrWhitespace(t.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage),u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),(n=e.call(this,r,t.properties,new s.ConversationTranscriberConnectionFactory)||this).privProperties.setProperty(u.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),n.privDisposedRecognizer=!1,n}return n(t,e),/**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */t.FromConfig=function(e,r,n){return r.properties.mergeTo(e.properties),new t(e,n)},Object.defineProperty(t.prototype,"endpointId",{/**
         * Gets the endpoint id of a customized speech model that is used for transcription.
         * @member ConversationTranscriber.prototype.endpointId
         * @function
         * @public
         * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
         */get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member ConversationTranscriber.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member ConversationTranscriber.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){c.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Gets the spoken language of transcription.
         * @member ConversationTranscriber.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} The spoken language of transcription.
         */get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{/**
         * Gets the output format of transcription.
         * @member ConversationTranscriber.prototype.outputFormat
         * @function
         * @public
         * @returns {OutputFormat} The output format of transcription.
         */get:function(){return(c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.OutputFormatPropertyName,u.OutputFormat[u.OutputFormat.Simple])===u.OutputFormat[u.OutputFormat.Simple])?u.OutputFormat.Simple:u.OutputFormat.Detailed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * The collection of properties and their values defined for this conversation transcriber.
         * @member ConversationTranscriber.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),/**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */t.prototype.startTranscribingAsync=function(e,t){a.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},/**
     * Stops conversation transcription.
     * @member ConversationTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has stopped.
     * @param err - Callback invoked in case of an error.
     */t.prototype.stopTranscribingAsync=function(e,t){a.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},/**
     * closes all external resources held by an instance of this class.
     * @member ConversationTranscriber.prototype.close
     * @function
     * @public
     */t.prototype.close=function(e,t){c.Contracts.throwIfDisposed(this.privDisposedRecognizer),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},/**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedRecognizer)return[2/*return*/];if(!t)return[3/*break*/,2];return this.privDisposedRecognizer=!0,[4/*yield*/,this.implRecognizerStop()];case 1:r.sent(),r.label=2;case 2:return[4/*yield*/,e.prototype.dispose.call(this,t)];case 3:return r.sent(),[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return n.isSpeakerDiarizationEnabled=!0,new s.ConversationTranscriptionServiceRecognizer(e,t,r,n,this)},t}(u.Recognizer);e.exports.ConversationTranscriber=p}),P.register("78vAQ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Participant=e.exports.User=void 0;var r=P("9pfmZ"),n=/** @class */function(){function e(e){this.privUserId=e}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.privUserId},enumerable:!1,configurable:!0}),e}();e.exports.User=n;var o=/** @class */function(){function e(e,t,n,o,i,s,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=n,this.privIsHost=o,this.privIsMuted=i,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new r.PropertyCollection}return Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privAvatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this.privDisplayName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preferredLanguage",{get:function(){return this.privPreferredLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this.privIsHost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingTts",{get:function(){return this.privIsUsingTts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voice",{get:function(){return this.privVoice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.From=function(t,r,n){return new e(t,"",t,!1,!1,!1,r,n)},e}();e.exports.Participant=o}),P.register("cMxGi",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ParticipantChangedReason=void 0,/** Participant has joined the conversation. */(r=e.exports.ParticipantChangedReason||(e.exports.ParticipantChangedReason={}))[r.JoinedConversation=0]="JoinedConversation",/** Participant has left the conversation. This could be voluntary, or involuntary
     * (e.g. they are experiencing networking issues).
     */r[r.LeftConversation=1]="LeftConversation",/** The participants' state has changed (e.g. they became muted, changed their nickname). */r[r.Updated=2]="Updated"}),P.register("5wh6I",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=e.exports&&e.exports.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MeetingImpl=e.exports.Meeting=void 0;var a=P("f7AdM"),c=P("aQGWi"),u=P("eyacr"),p=P("9pfmZ"),l=/** @class */function(){function e(){}return(/**
     * Create a meeting
     * @param speechConfig
     * @param cb
     * @param err
     */e.createMeetingAsync=function(e,t,r,n){var s;return u.Contracts.throwIfNullOrUndefined(e,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),u.Contracts.throwIfNullOrUndefined(e.region,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(p.PropertyId[p.PropertyId.SpeechServiceAuthorization_Token])||u.Contracts.throwIfNullOrUndefined(e.subscriptionKey,a.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t?(s=new f(e,t),// eslint-disable-next-line @typescript-eslint/no-empty-function
c.marshalPromiseToCallbacks(o(this,void 0,void 0,function(){return i(this,function(e){return[2/*return*/]})}),r,n)):(s=new f(e,""),// eslint-disable-next-line @typescript-eslint/no-empty-function
c.marshalPromiseToCallbacks(o(this,void 0,void 0,function(){return i(this,function(e){return[2/*return*/]})}),t,r)),s},e)}();e.exports.Meeting=l;var f=/** @class */function(e){/**
     * Create a Meeting impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */function t(t,r){var n=e.call(this)||this;return n.privErrors=a.ConversationConnectionConfig.restErrors,/** websocket callbacks *//* eslint-disable @typescript-eslint/typedef */n.onConnected=function(e){var t;n.privIsConnected=!0;try{(null===(t=n.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&n.privConversationTranslator.sessionStarted(n.privConversationTranslator,e)}catch(e){//
}},n.onDisconnected=function(e){var t;try{(null===(t=n.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&n.privConversationTranslator.sessionStopped(n.privConversationTranslator,e)}catch(e){//
}finally{n.close(!1)}},n.onCanceled=function(e,t){var r;try{(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.canceled)&&n.privConversationTranslator.canceled(n.privConversationTranslator,t)}catch(e){//
}},n.onParticipantUpdateCommandReceived=function(e,t){try{var r=n.privParticipants.getParticipant(t.id);if(void 0!==r){switch(t.key){case a.ConversationTranslatorCommandTypes.changeNickname:r.displayName=t.value;break;case a.ConversationTranslatorCommandTypes.setUseTTS:r.isUsingTts=t.value;break;case a.ConversationTranslatorCommandTypes.setProfanityFiltering:r.profanity=t.value;break;case a.ConversationTranslatorCommandTypes.setMute:r.isMuted=t.value;break;case a.ConversationTranslatorCommandTypes.setTranslateToLanguages:r.translateToLanguages=t.value}n.privParticipants.addOrUpdateParticipant(r),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,[n.toParticipant(r)],t.sessionId))}}catch(e){//
}},n.onLockRoomCommandReceived=function(){// TODO
},n.onMuteAllCommandReceived=function(e,t){try{n.privParticipants.participants.forEach(function(e){return e.isMuted=!e.isHost&&t.isMuted}),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.Updated,n.toParticipants(!1),t.sessionId))}catch(e){//
}},n.onParticipantJoinCommandReceived=function(e,t){try{var r=n.privParticipants.addOrUpdateParticipant(t.participant);void 0!==r&&n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,[n.toParticipant(r)],t.sessionId))}catch(e){//
}},n.onParticipantLeaveCommandReceived=function(e,t){try{var r=n.privParticipants.getParticipant(t.participant.id);void 0!==r&&(// remove the participant from the internal participants list
n.privParticipants.deleteParticipant(t.participant.id),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.LeftConversation,[n.toParticipant(r)],t.sessionId)))}catch(e){//
}},n.onTranslationReceived=function(e,t){try{switch(t.command){case a.ConversationTranslatorMessageTypes.final:n.privConversationTranslator&&n.privConversationTranslator.transcribed(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case a.ConversationTranslatorMessageTypes.partial:n.privConversationTranslator&&n.privConversationTranslator.transcribing(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case a.ConversationTranslatorMessageTypes.instantMessage:n.privConversationTranslator&&n.privConversationTranslator.textMessageReceived(n.privConversationTranslator,new p.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(e){//
}},n.onParticipantsListReceived=function(e,t){var r;try{// if this is the host, update the nickname if needed
if(void 0!==t.sessionToken&&null!==t.sessionToken&&(n.privRoom.token=t.sessionToken),// save the participants
n.privParticipants.participants=s(t.participants),void 0!==n.privParticipants.me&&(n.privIsReady=!0),n.privConversationTranslator&&n.privConversationTranslator.participantsChanged(n.privConversationTranslator,new p.ConversationParticipantsChangedEventArgs(p.ParticipantChangedReason.JoinedConversation,n.toParticipants(!0),t.sessionId)),n.me.isHost){var o=null===(r=n.privConversationTranslator)||void 0===r?void 0:r.properties.getProperty(p.PropertyId.ConversationTranslator_Name);void 0!==o&&o.length>0&&o!==n.me.displayName&&n.changeNicknameAsync(o)}}catch(e){//
}},n.onConversationExpiration=function(e,t){try{n.privConversationTranslator&&n.privConversationTranslator.conversationExpiration(n.privConversationTranslator,t)}catch(e){//
}},n.privIsConnected=!1,n.privIsDisposed=!1,n.privConversationId="",n.privProperties=new p.PropertyCollection,n.privManager=new a.ConversationManager,t.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage],a.ConversationConnectionConfig.defaultLanguageCode),n.privLanguage=t.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),n.privConversationId=r,// save the speech config for future usage
n.privConfig=t,u.Contracts.throwIfNull(t,"speechConfig"),n.privProperties=t.properties.clone(),n.privIsConnected=!1,n.privParticipants=new a.InternalParticipants,n.privIsReady=!1,n.privTextMessageMaxLength=1e3,n}return n(t,e),Object.defineProperty(t.prototype,"room",{// get the internal data about a conversation
get:function(){return this.privRoom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connection",{// get the wrapper for connecting to the websockets
get:function(){return this.privConversationRecognizer;// this.privConnection;
},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{// get the config
get:function(){return this.privConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meetingId",{// get the meeting Id
get:function(){return this.privRoom?this.privRoom.roomId:this.privConversationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{// get the properties
get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{// get the speech language
get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMutedByHost",{get:function(){var e,t;return(null===(e=this.privParticipants.me)||void 0===e||!e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this.privIsConnected&&this.privIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.toParticipants(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"me",{get:function(){return this.toParticipant(this.privParticipants.me)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.toParticipant(this.privParticipants.host)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transcriberRecognizer",{get:function(){return this.privTranscriberRecognizer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meetingInfo",{get:function(){for(var e=this.meetingId,t=this.participants.map(function(e){return{id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}}),r={},n=0,o=a.ConversationConnectionConfig.transcriptionEventKeys;n<o.length;n++){var i=o[n],s=this.properties.getProperty(i,"");""!==s&&(r[i]=s)}return{id:e,participants:t,meetingProperties:r}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSend",{get:function(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSendAsHost",{get:function(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{// get / set the speech auth token
// eslint-disable-next-line @typescript-eslint/member-ordering
get:function(){return this.privToken},set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e},enumerable:!1,configurable:!0}),/**
     * Create a new meeting as Host
     * @param cb
     * @param err
     */t.prototype.createMeetingAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,function(n){n||r.handleError(Error(r.privErrors.permissionDeniedConnect),t),r.privRoom=n,r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Starts a new meeting as host.
     * @param cb
     * @param err
     */t.prototype.startMeetingAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(Error(this.privErrors.permissionDeniedStart),t),// check if there is conversation data available
u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),// connect to the conversation websocket
this.privParticipants.meId=this.privRoom.participantId,// Because ConversationTranslator manually sets up and manages the connection, Conversation
// has to forward serviceRecognizer connection events that usually get passed automatically
this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Join a meeting as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */t.prototype.addParticipantAsync=function(e,t,r){u.Contracts.throwIfNullOrUndefined(e,"Participant"),c.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,r)},/**
     * Join a meeting as a participant.
     * @param meeting
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */t.prototype.joinMeetingAsync=function(e,t,r,n,o){var i=this;try{// TODO
// if (!!this.privConversationRecognizer) {
//     throw new Error(this.privErrors.permissionDeniedStart);
// }
u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),u.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),u.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),// join the conversation
this.privManager.createOrJoin(this.privProperties,e,function(e){u.Contracts.throwIfNullOrUndefined(e,i.privErrors.permissionDeniedConnect),i.privRoom=e,i.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)},function(e){i.handleError(e,o)})}catch(e){this.handleError(e,o)}},/**
     * Deletes a meeting
     * @param cb
     * @param err
     */t.prototype.deleteMeetingAsync=function(e,t){c.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)},t.prototype.deleteMeetingImplAsync=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return u.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),u.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),[4/*yield*/,this.privManager.leave(this.privProperties,this.privRoom.token)];case 1:return e.sent(),this.dispose(),[2/*return*/]}})})},/**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */t.prototype.endMeetingAsync=function(e,t){c.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)},t.prototype.endMeetingImplAsync=function(){return this.close(!0)},/**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */t.prototype.lockMeetingAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to mute the meeting
     * @param cb
     * @param err
     */t.prototype.muteAllParticipantsAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to mute a participant in the meeting
     * @param userId
     * @param cb
     * @param err
     */t.prototype.muteParticipantAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);// check the user exists
var o=this.privParticipants.getParticipantIndex(e);-1===o&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */t.prototype.removeParticipantAsync=function(e,t,r){var n=this;try{if(u.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))c.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,r);else{u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);var o="";"string"==typeof e?o=e:e.hasOwnProperty("id")?o=e.id:e.hasOwnProperty("userId")&&(o=e.userId),u.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId"));// check the participant exists
var i=this.participants.findIndex(function(e){return e.id===o});-1===i&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(o),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}}catch(e){this.handleError(e,r)}},/**
     * Issues a request to unlock the meeting
     * @param cb
     * @param err
     */t.prototype.unlockMeetingAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to unmute all participants in the meeting
     * @param cb
     * @param err
     */t.prototype.unmuteAllParticipantsAsync=function(e,t){var r=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},/**
     * Issues a request to unmute a participant in the meeting
     * @param userId
     * @param cb
     * @param err
     */t.prototype.unmuteParticipantAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r);// check the user exists
var o=this.privParticipants.getParticipantIndex(e);-1===o&&this.handleError(Error(this.privErrors.invalidParticipantRequest),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */t.prototype.sendTextMessageAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */t.prototype.setTranslatedLanguagesAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},/**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */t.prototype.changeNicknameAsync=function(e,t,r){var n=this;try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),u.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),u.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(Error(this.privErrors.permissionDeniedSend),r),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),function(){n.handleCallback(t,r)},function(e){n.handleError(e,r)})}catch(e){this.handleError(e,r)}},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)},t.prototype.connectTranscriberRecognizer=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(!this.privTranscriberRecognizer)return[3/*break*/,2];return[4/*yield*/,this.privTranscriberRecognizer.close()];case 1:t.sent(),t.label=2;case 2:return[4/*yield*/,e.enforceAudioGating()];case 3:return t.sent(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this,[2/*return*/]}})})},t.prototype.getKeepAlive=function(){return JSON.stringify({id:"0",nickname:this.me?this.me.displayName:"default_nickname",participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.keepAlive})},/* eslint-enable @typescript-eslint/typedef */t.prototype.addParticipantImplAsync=function(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){var t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}},t.prototype.removeParticipantImplAsync=function(e){this.privParticipants.deleteParticipant(e.id);var t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")},t.prototype.close=function(e){var t;return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.privIsConnected=!1,[4/*yield*/,null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()];case 1:return r.sent(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose(),[3/*break*/,3];case 2:// ignore error
throw r.sent();case 3:return e&&this.dispose(),[2/*return*/]}})})},/** Helpers */t.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},t.prototype.handleError=function(e,t){t&&t(e instanceof Error?e.name+": "+e.message:e)},/** Participant Helpers */t.prototype.toParticipants=function(e){var t=this,r=this.privParticipants.participants.map(function(e){return t.toParticipant(e)});return e?r:r.filter(function(e){return!1===e.isHost})},t.prototype.toParticipant=function(e){return new p.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)},t.prototype.getMuteAllCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMuteCommand=function(e,t){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),u.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setMute,// eslint-disable-next-line object-shorthand
participantId:e,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:t})},t.prototype.getLockCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getEjectCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),u.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.ejectParticipant,// eslint-disable-next-line object-shorthand
participantId:e,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand})},t.prototype.getSetTranslateToLanguagesCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getChangeNicknameCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),u.Contracts.throwIfNullOrWhitespace(e,"nickname"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:a.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:a.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMessageCommand=function(e){return u.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),u.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),u.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:a.ConversationTranslatorMessageTypes.instantMessage})},t}(l);e.exports.MeetingImpl=f}),P.register("dx80o",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MeetingTranscriptionCanceledEventArgs=void 0;var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("7cnPV").CancellationEventArgsBase);e.exports.MeetingTranscriptionCanceledEventArgs=o}),P.register("dKV6O",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MeetingTranscriber=void 0;var o=P("f7AdM"),i=P("aQGWi"),s=P("eyacr"),a=P("9pfmZ"),c=P("a0QDp"),u=/** @class */function(){/**
     * MeetingTranscriber constructor.
     * @constructor
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function e(e){this.privAudioConfig=e,this.privProperties=new a.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}return Object.defineProperty(e.prototype,"speechRecognitionLanguage",{/**
         * Gets the spoken language of recognition.
         * @member MeetingTranscriber.prototype.speechRecognitionLanguage
         * @function
         * @public
         * @returns {string} The spoken language of recognition.
         */get:function(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * The collection of properties and their values defined for this MeetingTranscriber.
         * @member MeetingTranscriber.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this MeetingTranscriber.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"internalData",{/**
         * @Internal
         * Internal data member to support fromRecognizer* pattern methods on other classes.
         * Do not use externally, object returned will change without warning or notice.
         */get:function(){return this.privRecognizer.internalData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connection",{/**
         * @Deprecated
         * @Obsolete
         * Please use the Connection.fromRecognizer pattern to obtain a connection object
         */get:function(){return a.Connection.fromRecognizer(this.privRecognizer)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member MeetingTranscriber.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member MeetingTranscriber.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),/**
     * @param {Meeting} meeting - meeting to be recognized
     */e.prototype.joinMeetingAsync=function(e,t,r){s.Contracts.throwIfNullOrUndefined(c.MeetingImpl,"Meeting"),// ref the meeting object
// create recognizer and subscribe to recognizer events
this.privRecognizer=new o.TranscriberRecognizer(e.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),i.marshalPromiseToCallbacks(e.connectTranscriberRecognizer(this.privRecognizer),t,r)},/**
     * Starts meeting transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member MeetingTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */e.prototype.startTranscribingAsync=function(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)},/**
     * Starts meeting transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member MeetingTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */e.prototype.stopTranscribingAsync=function(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)},/**
     * Leave the current meeting. After this is called, you will no longer receive any events.
     */e.prototype.leaveMeetingAsync=function(e,t){this.privRecognizer.disconnectCallbacks(),// eslint-disable-next-line
i.marshalPromiseToCallbacks(r(this,void 0,void 0,function(){return n(this,function(e){return[2/*return*/]})}),e,t)},/**
     * closes all external resources held by an instance of this class.
     * @member MeetingTranscriber.prototype.close
     * @function
     * @public
     */e.prototype.close=function(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)},/**
     * Disposes any resources held by the object.
     * @member MeetingTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privDisposedRecognizer)return[2/*return*/];if(!this.privRecognizer)return[3/*break*/,2];return[4/*yield*/,this.privRecognizer.close()];case 1:t.sent(),this.privRecognizer=void 0,t.label=2;case 2:return e&&(this.privDisposedRecognizer=!0),[2/*return*/]}})})},e}();e.exports.MeetingTranscriber=u}),P.register("en9rq",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranscriptionResult=void 0;/**
 * Defines result of conversation transcription.
 * @class ConversationTranscriptionResult
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function t(t,r,n,o,i,s,a,c,u,p,l){var f=e.call(this,t,r,n,o,i,s,a,u,p,l)||this;return f.privSpeakerId=c,f}return n(t,e),Object.defineProperty(t.prototype,"speakerId",{/**
         * speaker id
         * @member ConversationTranscriptionResult.prototype.speakerId
         * @function
         * @public
         * @returns {string} id of speaker in given result
         */get:function(){return this.privSpeakerId},enumerable:!1,configurable:!0}),t}(P("9pfmZ").RecognitionResult);e.exports.ConversationTranscriptionResult=o}),P.register("liGtQ",function(e,t){/* eslint-disable @typescript-eslint/no-empty-function */// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisRequest=e.exports.SpeechSynthesizer=void 0;var o=P("f7AdM"),i=P("aQGWi"),s=P("aDs2b"),a=P("8t1AB"),c=P("cyBvg"),u=P("eyacr"),p=P("9pfmZ"),l=/** @class */function(){/**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer.
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer.
     */function e(e,t){u.Contracts.throwIfNull(e,"speechConfig"),null!==t&&(void 0===t?this.audioConfig="undefined"==typeof window?void 0:p.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=t),this.privProperties=e.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new o.SpeechSynthesisConnectionFactory,this.synthesisRequestQueue=new i.Queue,this.implCommonSynthesizeSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{/**
         * Gets the authorization token used to communicate with the service.
         * @member SpeechSynthesizer.prototype.authorizationToken
         * @function
         * @public
         * @returns {string} Authorization token.
         */get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},/**
         * Gets/Sets the authorization token used to communicate with the service.
         * @member SpeechSynthesizer.prototype.authorizationToken
         * @function
         * @public
         * @param {string} token - Authorization token.
         */set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * The collection of properties and their values defined for this SpeechSynthesizer.
         * @member SpeechSynthesizer.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechSynthesizer.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguage",{/**
         * Indicates if auto detect source language is enabled
         * @member SpeechSynthesizer.prototype.properties
         * @function
         * @public
         * @returns {boolean} if auto detect source language is enabled
         */get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===o.AutoDetectSourceLanguagesOpenRangeOptionName},enumerable:!1,configurable:!0}),/**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this synthesizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the synthesizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer
     */e.FromConfig=function(t,r,n){return r.properties.mergeTo(t.properties),new e(t,n)},e.prototype.buildSsml=function(t){var r,n=((r={})["af-ZA"]="af-ZA-AdriNeural",r["am-ET"]="am-ET-AmehaNeural",r["ar-AE"]="ar-AE-FatimaNeural",r["ar-BH"]="ar-BH-AliNeural",r["ar-DZ"]="ar-DZ-AminaNeural",r["ar-EG"]="ar-EG-SalmaNeural",r["ar-IQ"]="ar-IQ-BasselNeural",r["ar-JO"]="ar-JO-SanaNeural",r["ar-KW"]="ar-KW-FahedNeural",r["ar-LY"]="ar-LY-ImanNeural",r["ar-MA"]="ar-MA-JamalNeural",r["ar-QA"]="ar-QA-AmalNeural",r["ar-SA"]="ar-SA-HamedNeural",r["ar-SY"]="ar-SY-AmanyNeural",r["ar-TN"]="ar-TN-HediNeural",r["ar-YE"]="ar-YE-MaryamNeural",r["bg-BG"]="bg-BG-BorislavNeural",r["bn-BD"]="bn-BD-NabanitaNeural",r["bn-IN"]="bn-IN-BashkarNeural",r["ca-ES"]="ca-ES-JoanaNeural",r["cs-CZ"]="cs-CZ-AntoninNeural",r["cy-GB"]="cy-GB-AledNeural",r["da-DK"]="da-DK-ChristelNeural",r["de-AT"]="de-AT-IngridNeural",r["de-CH"]="de-CH-JanNeural",r["de-DE"]="de-DE-KatjaNeural",r["el-GR"]="el-GR-AthinaNeural",r["en-AU"]="en-AU-NatashaNeural",r["en-CA"]="en-CA-ClaraNeural",r["en-GB"]="en-GB-LibbyNeural",r["en-HK"]="en-HK-SamNeural",r["en-IE"]="en-IE-ConnorNeural",r["en-IN"]="en-IN-NeerjaNeural",r["en-KE"]="en-KE-AsiliaNeural",r["en-NG"]="en-NG-AbeoNeural",r["en-NZ"]="en-NZ-MitchellNeural",r["en-PH"]="en-PH-JamesNeural",r["en-SG"]="en-SG-LunaNeural",r["en-TZ"]="en-TZ-ElimuNeural",r["en-US"]="en-US-JennyNeural",r["en-ZA"]="en-ZA-LeahNeural",r["es-AR"]="es-AR-ElenaNeural",r["es-BO"]="es-BO-MarceloNeural",r["es-CL"]="es-CL-CatalinaNeural",r["es-CO"]="es-CO-GonzaloNeural",r["es-CR"]="es-CR-JuanNeural",r["es-CU"]="es-CU-BelkysNeural",r["es-DO"]="es-DO-EmilioNeural",r["es-EC"]="es-EC-AndreaNeural",r["es-ES"]="es-ES-AlvaroNeural",r["es-GQ"]="es-GQ-JavierNeural",r["es-GT"]="es-GT-AndresNeural",r["es-HN"]="es-HN-CarlosNeural",r["es-MX"]="es-MX-DaliaNeural",r["es-NI"]="es-NI-FedericoNeural",r["es-PA"]="es-PA-MargaritaNeural",r["es-PE"]="es-PE-AlexNeural",r["es-PR"]="es-PR-KarinaNeural",r["es-PY"]="es-PY-MarioNeural",r["es-SV"]="es-SV-LorenaNeural",r["es-US"]="es-US-AlonsoNeural",r["es-UY"]="es-UY-MateoNeural",r["es-VE"]="es-VE-PaolaNeural",r["et-EE"]="et-EE-AnuNeural",r["fa-IR"]="fa-IR-DilaraNeural",r["fi-FI"]="fi-FI-SelmaNeural",r["fil-PH"]="fil-PH-AngeloNeural",r["fr-BE"]="fr-BE-CharlineNeural",r["fr-CA"]="fr-CA-SylvieNeural",r["fr-CH"]="fr-CH-ArianeNeural",r["fr-FR"]="fr-FR-DeniseNeural",r["ga-IE"]="ga-IE-ColmNeural",r["gl-ES"]="gl-ES-RoiNeural",r["gu-IN"]="gu-IN-DhwaniNeural",r["he-IL"]="he-IL-AvriNeural",r["hi-IN"]="hi-IN-MadhurNeural",r["hr-HR"]="hr-HR-GabrijelaNeural",r["hu-HU"]="hu-HU-NoemiNeural",r["id-ID"]="id-ID-ArdiNeural",r["is-IS"]="is-IS-GudrunNeural",r["it-IT"]="it-IT-IsabellaNeural",r["ja-JP"]="ja-JP-NanamiNeural",r["jv-ID"]="jv-ID-DimasNeural",r["kk-KZ"]="kk-KZ-AigulNeural",r["km-KH"]="km-KH-PisethNeural",r["kn-IN"]="kn-IN-GaganNeural",r["ko-KR"]="ko-KR-SunHiNeural",r["lo-LA"]="lo-LA-ChanthavongNeural",r["lt-LT"]="lt-LT-LeonasNeural",r["lv-LV"]="lv-LV-EveritaNeural",r["mk-MK"]="mk-MK-AleksandarNeural",r["ml-IN"]="ml-IN-MidhunNeural",r["mr-IN"]="mr-IN-AarohiNeural",r["ms-MY"]="ms-MY-OsmanNeural",r["mt-MT"]="mt-MT-GraceNeural",r["my-MM"]="my-MM-NilarNeural",r["nb-NO"]="nb-NO-PernilleNeural",r["nl-BE"]="nl-BE-ArnaudNeural",r["nl-NL"]="nl-NL-ColetteNeural",r["pl-PL"]="pl-PL-AgnieszkaNeural",r["ps-AF"]="ps-AF-GulNawazNeural",r["pt-BR"]="pt-BR-FranciscaNeural",r["pt-PT"]="pt-PT-DuarteNeural",r["ro-RO"]="ro-RO-AlinaNeural",r["ru-RU"]="ru-RU-SvetlanaNeural",r["si-LK"]="si-LK-SameeraNeural",r["sk-SK"]="sk-SK-LukasNeural",r["sl-SI"]="sl-SI-PetraNeural",r["so-SO"]="so-SO-MuuseNeural",r["sr-RS"]="sr-RS-NicholasNeural",r["su-ID"]="su-ID-JajangNeural",r["sv-SE"]="sv-SE-SofieNeural",r["sw-KE"]="sw-KE-RafikiNeural",r["sw-TZ"]="sw-TZ-DaudiNeural",r["ta-IN"]="ta-IN-PallaviNeural",r["ta-LK"]="ta-LK-KumarNeural",r["ta-SG"]="ta-SG-AnbuNeural",r["te-IN"]="te-IN-MohanNeural",r["th-TH"]="th-TH-PremwadeeNeural",r["tr-TR"]="tr-TR-AhmetNeural",r["uk-UA"]="uk-UA-OstapNeural",r["ur-IN"]="ur-IN-GulNeural",r["ur-PK"]="ur-PK-AsadNeural",r["uz-UZ"]="uz-UZ-MadinaNeural",r["vi-VN"]="vi-VN-HoaiMyNeural",r["zh-CN"]="zh-CN-XiaoxiaoNeural",r["zh-HK"]="zh-HK-HiuMaanNeural",r["zh-TW"]="zh-TW-HsiaoChenNeural",r["zu-ZA"]="zu-ZA-ThandoNeural",r),o=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthVoice,""),s=e.XMLEncode(t);return this.autoDetectSourceLanguage?o="en-US":i=i||n[o],i&&(s="<voice name='"+i+"'>"+s+"</voice>"),s="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='"+o+"'>"+s+"</speak>"},/**
     * Executes speech synthesis on plain text.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakTextAsync
     * @function
     * @public
     * @param text - Text to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */e.prototype.speakTextAsync=function(e,t,r,n){this.speakImpl(e,!1,t,r,n)},/**
     * Executes speech synthesis on SSML.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakSsmlAsync
     * @function
     * @public
     * @param ssml - SSML to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */e.prototype.speakSsmlAsync=function(e,t,r,n){this.speakImpl(e,!0,t,r,n)},/**
     * Get list of synthesis voices available.
     * The task returns the synthesis voice result.
     * @member SpeechSynthesizer.prototype.getVoicesAsync
     * @function
     * @async
     * @public
     * @param locale - Locale of voices in BCP-47 format; if left empty, get all available voices.
     * @return {Promise<SynthesisVoicesResult>} - Promise of a SynthesisVoicesResult.
     */e.prototype.getVoicesAsync=function(e){return void 0===e&&(e=""),r(this,void 0,void 0,function(){return n(this,function(t){return[2/*return*/,this.getVoices(e)]})})},/**
     * Dispose of associated resources.
     * @member SpeechSynthesizer.prototype.close
     * @function
     * @public
     */e.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposed),i.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{/**
         * @Internal
         * Do not use externally, object returned will change without warning or notice.
         */get:function(){return this.privAdapter},enumerable:!1,configurable:!0}),/**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member SpeechSynthesizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privDisposed)return[2/*return*/];if(!e||!this.privAdapter)return[3/*break*/,2];return[4/*yield*/,this.privAdapter.dispose()];case 1:t.sent(),t.label=2;case 2:return this.privDisposed=!0,[2/*return*/]}})})},//
// ################################################################################################################
// IMPLEMENTATION.
// Move to independent class
// ################################################################################################################
//
e.prototype.createSynthesizerConfig=function(e){return new o.SynthesizerConfig(e,this.privProperties)},// Creates the synthesis adapter
e.prototype.createSynthesisAdapter=function(e,t,r,n){return new o.SynthesisAdapterBase(e,t,n,this,this.audioConfig)},e.prototype.implCommonSynthesizeSetup=function(){var e=this,t="undefined"!=typeof window?"Browser":"Node",r="unknown",n="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);var i=this.createSynthesizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,r,n)))),s=this.privProperties.getProperty(p.PropertyId.SpeechServiceConnection_Key,void 0),c=s&&""!==s?new o.CognitiveSubscriptionKeyAuthentication(s):new o.CognitiveTokenAuthentication(function(){return Promise.resolve(e.privProperties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0))},function(){return Promise.resolve(e.privProperties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token,void 0))});this.privAdapter=this.createSynthesisAdapter(c,this.privConnectionFactory,this.audioConfig,i),this.privAdapter.audioOutputFormat=a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(p.SpeechSynthesisOutputFormat[this.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]),this.privRestAdapter=new o.SynthesisRestAdapter(i,c)},e.prototype.speakImpl=function(e,t,r,n,o){var a=this;try{u.Contracts.throwIfDisposed(this.privDisposed);var l=i.createNoDashGuid(),h=void 0;h=o instanceof p.PushAudioOutputStreamCallback?new c.PushAudioOutputStreamImpl(o):o instanceof p.PullAudioOutputStream?o:void 0!==o?new s.AudioFileWriter(o):void 0,this.synthesisRequestQueue.enqueue(new f(l,e,t,function(e){if(a.privSynthesizing=!1,r)try{r(e)}catch(e){n&&n(e)}r=void 0,/* eslint-disable no-empty */a.adapterSpeak().catch(function(){})},function(e){n&&n(e)},h)),/* eslint-disable no-empty-function */this.adapterSpeak().catch(function(){})}catch(e){n&&(e instanceof Error?n(e.name+": "+e.message):n(e)),// Destroy the synthesizer.
/* eslint-disable no-empty */this.dispose(!0).catch(function(){})}},e.prototype.getVoices=function(e){return r(this,void 0,void 0,function(){var t,r,o;return n(this,function(n){switch(n.label){case 0:return t=i.createNoDashGuid(),[4/*yield*/,this.privRestAdapter.getVoicesList(t)];case 1:if((r=n.sent()).ok&&Array.isArray(r.json))return o=r.json,e&&e.length>0&&(o=o.filter(function(t){return!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase()})),[2/*return*/,new p.SynthesisVoicesResult(t,o,void 0)];return[2/*return*/,new p.SynthesisVoicesResult(t,void 0,"Error: "+r.status+": "+r.statusText)]}})})},e.prototype.adapterSpeak=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:if(!(!this.privDisposed&&!this.privSynthesizing))return[3/*break*/,2];return this.privSynthesizing=!0,[4/*yield*/,this.synthesisRequestQueue.dequeue()];case 1:return e=t.sent(),[2/*return*/,this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)];case 2:return[2/*return*/]}})})},e.XMLEncode=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e}();e.exports.SpeechSynthesizer=l;var f=function(e,t,r,n,o,i){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=o,this.dataStream=i};e.exports.SynthesisRequest=f}),P.register("jm3Wr",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisResult=void 0;/**
 * Base class for synthesis results
 * @class SynthesisResult
 * Added in version 1.20.0
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function e(e,t,r,n){this.privResultId=e,this.privReason=t,this.privErrorDetails=r,this.privProperties=n}return Object.defineProperty(e.prototype,"resultId",{/**
         * Specifies the result identifier.
         * @member SynthesisResult.prototype.resultId
         * @function
         * @public
         * @returns {string} Specifies the result identifier.
         */get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{/**
         * Specifies status of the result.
         * @member SynthesisResult.prototype.reason
         * @function
         * @public
         * @returns {ResultReason} Specifies status of the result.
         */get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{/**
         * In case of an unsuccessful synthesis, provides details of the occurred error.
         * @member SynthesisResult.prototype.errorDetails
         * @function
         * @public
         * @returns {string} a brief description of an error.
         */get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * The set of properties exposed in the result.
         * @member SynthesisResult.prototype.properties
         * @function
         * @public
         * @returns {PropertyCollection} The set of properties exposed in the result.
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();e.exports.SynthesisResult=r}),P.register("1s4bA",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisResult=void 0;/**
 * Defines result of speech synthesis.
 * @class SpeechSynthesisResult
 * Added in version 1.11.0
 */var o=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {ArrayBuffer} audioData - The synthesized audio binary.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     * @param {number} audioDuration - The audio duration.
     */function t(t,r,n,o,i,s){var a=e.call(this,t,r,o,i)||this;return a.privAudioData=n,a.privAudioDuration=s,a}return n(t,e),Object.defineProperty(t.prototype,"audioData",{/**
         * The synthesized audio data
         * @member SpeechSynthesisResult.prototype.audioData
         * @function
         * @public
         * @returns {ArrayBuffer} The synthesized audio data.
         */get:function(){return this.privAudioData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioDuration",{/**
         * The time duration of synthesized audio, in ticks (100 nanoseconds).
         * @member SpeechSynthesisResult.prototype.audioDuration
         * @function
         * @public
         * @returns {number} The time duration of synthesized audio.
         */get:function(){return this.privAudioDuration},enumerable:!1,configurable:!0}),t}(P("9pfmZ").SynthesisResult);e.exports.SpeechSynthesisResult=o}),P.register("hQiLa",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisEventArgs=void 0;/**
 * Defines contents of speech synthesis events.
 * @class SpeechSynthesisEventArgs
 * Added in version 1.11.0
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechSynthesisResult} result - The speech synthesis result.
     */function e(e){this.privResult=e}return Object.defineProperty(e.prototype,"result",{/**
         * Specifies the synthesis result.
         * @member SpeechSynthesisEventArgs.prototype.result
         * @function
         * @public
         * @returns {SpeechSynthesisResult} the synthesis result.
         */get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();e.exports.SpeechSynthesisEventArgs=r}),P.register("37b2n",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisWordBoundaryEventArgs=void 0;/**
 * Defines contents of speech synthesis word boundary event.
 * @class SpeechSynthesisWordBoundaryEventArgs
 * Added in version 1.11.0
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} duration - The audio duration.
     * @param {string} text - The text.
     * @param {number} wordLength - The length of the word.
     * @param {number} textOffset - The text offset.
     * @param {SpeechSynthesisBoundaryType} boundaryType - The boundary type
     */function e(e,t,r,n,o,i){this.privAudioOffset=e,this.privDuration=t,this.privText=r,this.privWordLength=n,this.privTextOffset=o,this.privBoundaryType=i}return Object.defineProperty(e.prototype,"audioOffset",{/**
         * Specifies the audio offset.
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.audioOffset
         * @function
         * @public
         * @returns {number} the audio offset.
         */get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{/**
         * Specifies the duration, in ticks (100 nanoseconds).
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.duration
         * @function
         * @public
         * @returns {number} Duration in 100 nanosecond increments.
         */get:function(){return this.privDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{/**
         * Specifies the text of the word boundary event.
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.text
         * @function
         * @public
         * @returns {string} the text.
         */get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordLength",{/**
         * Specifies the word length
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.wordLength
         * @function
         * @public
         * @returns {number} the word length
         */get:function(){return this.privWordLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textOffset",{/**
         * Specifies the text offset.
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.textOffset
         * @function
         * @public
         * @returns {number} the text offset.
         */get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundaryType",{/**
         * Specifies the boundary type.
         * @member SpeechSynthesisWordBoundaryEventArgs.prototype.boundaryType
         * @function
         * @public
         * @returns {SpeechSynthesisBoundaryType} the boundary type.
         */get:function(){return this.privBoundaryType},enumerable:!1,configurable:!0}),e}();e.exports.SpeechSynthesisWordBoundaryEventArgs=r}),P.register("eV5S6",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisBookmarkEventArgs=void 0;/**
 * Defines contents of speech synthesis bookmark event.
 * @class SpeechSynthesisBookmarkEventArgs
 * Added in version 1.16.0
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {string} text - The bookmark text.
     */function e(e,t){this.privAudioOffset=e,this.privText=t}return Object.defineProperty(e.prototype,"audioOffset",{/**
         * Specifies the audio offset.
         * @member SpeechSynthesisBookmarkEventArgs.prototype.audioOffset
         * @function
         * @public
         * @returns {number} the audio offset.
         */get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{/**
         * Specifies the bookmark.
         * @member SpeechSynthesisBookmarkEventArgs.prototype.text
         * @function
         * @public
         * @returns {string} the bookmark text.
         */get:function(){return this.privText},enumerable:!1,configurable:!0}),e}();e.exports.SpeechSynthesisBookmarkEventArgs=r}),P.register("kSZp2",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisVisemeEventArgs=void 0;/**
 * Defines contents of speech synthesis viseme event.
 * @class SpeechSynthesisVisemeEventArgs
 * Added in version 1.16.0
 */var r=/** @class */function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} visemeId - The viseme ID.
     * @param {string} animation - The animation, could be in svg or other format.
     */function e(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}return Object.defineProperty(e.prototype,"audioOffset",{/**
         * Specifies the audio offset.
         * @member SpeechSynthesisVisemeEventArgs.prototype.audioOffset
         * @function
         * @public
         * @returns {number} the audio offset.
         */get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visemeId",{/**
         * Specifies the viseme ID.
         * @member SpeechSynthesisVisemeEventArgs.prototype.visemeId
         * @function
         * @public
         * @returns {number} the viseme ID.
         */get:function(){return this.privVisemeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{/**
         * Specifies the animation.
         * @member SpeechSynthesisVisemeEventArgs.prototype.animation
         * @function
         * @public
         * @returns {string} the animation, could be in svg or other format.
         */get:function(){return this.privAnimation},enumerable:!1,configurable:!0}),e}();e.exports.SpeechSynthesisVisemeEventArgs=r}),P.register("eGyA4",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisBoundaryType=void 0,/**
     * Indicates the boundary text is a word.
     * @member SpeechSynthesisBoundaryType.Word
     */(r=e.exports.SpeechSynthesisBoundaryType||(e.exports.SpeechSynthesisBoundaryType={})).Word="WordBoundary",/**
     * Indicates the boundary text is a punctuation.
     * @member SpeechSynthesisBoundaryType.Punctuation
     */r.Punctuation="PunctuationBoundary",/**
     * Indicates the boundary text is a sentence.
     * @member SpeechSynthesisBoundaryType.Sentence
     */r.Sentence="SentenceBoundary"}),P.register("iosz0",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisVoicesResult=void 0;var o=P("9pfmZ"),i=/** @class */function(e){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param requestId - result id for request.
     * @param json - json payload from endpoint.
     */function t(t,r,n){var i=this;if(Array.isArray(r)){(i=e.call(this,t,o.ResultReason.VoicesListRetrieved,void 0,new o.PropertyCollection)||this).privVoices=[];for(var s=0;s<r.length;s++){var a=r[s];i.privVoices.push(new o.VoiceInfo(a))}}else i=e.call(this,t,o.ResultReason.Canceled,n||"Error information unavailable",new o.PropertyCollection)||this;return i}return n(t,e),Object.defineProperty(t.prototype,"voices",{/**
         * The list of voices
         * @member SynthesisVoicesResult.prototype.voices
         * @function
         * @public
         * @returns {VoiceInfo[]} List of synthesized voices.
         */get:function(){return this.privVoices},enumerable:!1,configurable:!0}),t}(o.SynthesisResult);e.exports.SynthesisVoicesResult=i}),P.register("jmnMC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceInfo=e.exports.SynthesisVoiceType=e.exports.SynthesisVoiceGender=void 0,/** Gender unknown */(r=o=e.exports.SynthesisVoiceGender||(e.exports.SynthesisVoiceGender={}))[r.Unknown=0]="Unknown",/** Female voice */r[r.Female=1]="Female",/** Male voice */r[r.Male=2]="Male",(n=i=e.exports.SynthesisVoiceType||(e.exports.SynthesisVoiceType={}))[n.OnlineNeural=1]="OnlineNeural",n[n.OnlineStandard=2]="OnlineStandard",n[n.OfflineNeural=3]="OfflineNeural",n[n.OfflineStandard=4]="OfflineStandard";/**
 * Information about Speech Synthesis voice
 * Added in version 1.20.0.
 * @class VoiceInfo
 */var r,n,o,i,s=/** @class */function(){function e(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?i.OnlineStandard:i.OnlineNeural,this.privGender="Male"===e.Gender?o.Male:"Female"===e.Gender?o.Female:o.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(var t=0,r=e.StyleList;t<r.length;t++){var n=r[t];this.privStyleList.push(n)}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.privName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.privLocale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shortName",{get:function(){return this.privShortName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this.privDisplayName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.privLocalName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localeName",{get:function(){return this.privLocaleName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gender",{get:function(){return this.privGender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voiceType",{get:function(){return this.privVoiceType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styleList",{get:function(){return this.privStyleList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voicePath",{get:function(){return this.privVoicePath},enumerable:!1,configurable:!0}),e}();e.exports.VoiceInfo=s}),P.register("2rYjG",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},o=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerAudioDestination=void 0;var i=P("f7AdM"),s=P("aQGWi"),a=P("cyBvg"),c=P("9k8LZ"),u=((r={})[c.AudioFormatTag.PCM]="audio/wav",r[c.AudioFormatTag.MuLaw]="audio/x-wav",r[c.AudioFormatTag.MP3]="audio/mpeg",r[c.AudioFormatTag.OGG_OPUS]="audio/ogg",r[c.AudioFormatTag.WEBM_OPUS]="audio/webm; codecs=opus",r[c.AudioFormatTag.ALaw]="audio/x-wav",r[c.AudioFormatTag.FLAC]="audio/flac",r),p=/** @class */function(){function e(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||s.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}return e.prototype.id=function(){return this.privId},e.prototype.write=function(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(function(){t&&t()},function(e){r&&r(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)},e.prototype.close=function(e,t){var r=this;if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(function(){e&&e()},function(e){t&&t(e)});else if(void 0!==this.privAudioOutputStream&&"undefined"!=typeof window){if((this.privFormat.formatTag===c.AudioFormatTag.PCM||this.privFormat.formatTag===c.AudioFormatTag.MuLaw||this.privFormat.formatTag===c.AudioFormatTag.ALaw)&&!1===this.privFormat.hasHeader)// eslint-disable-next-line no-console
console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{var n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(function(){n=i.SynthesisAdapterBase.addHeader(n,r.privFormat);var o=new Blob([n],{type:u[r.privFormat.formatTag]});r.privAudio.src=window.URL.createObjectURL(o),r.notifyPlayback().then(function(){e&&e()},function(e){t&&t(e)})},function(e){t&&t(e)})}}else this.onAudioEnd&&this.onAudioEnd(this)},Object.defineProperty(e.prototype,"format",{set:function(e){var t=this;// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
if("undefined"!=typeof AudioContext||"undefined"!=typeof window&&void 0!==window.webkitAudioContext){this.privFormat=e;var r=u[this.privFormat.formatTag];void 0===r?console.warn("Unknown mimeType for format "+c.AudioFormatTag[this.privFormat.formatTag]+"; playback is not supported."):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=function(){t.privMediaSourceOpened=!0,t.privMediaSource.duration=1800,t.privSourceBuffer=t.privMediaSource.addSourceBuffer(r),t.privSourceBuffer.onupdate=function(){t.updateSourceBuffer().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})},t.privSourceBuffer.onupdateend=function(){t.handleSourceBufferUpdateEnd().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})},t.privSourceBuffer.onupdatestart=function(){t.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})):(// eslint-disable-next-line no-console
console.warn("Format "+c.AudioFormatTag[this.privFormat.formatTag]+" could not be played by MSE, streaming playback is not enabled."),this.privAudioOutputStream=new a.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1},set:function(e){this.privAudio&&(this.privAudio.volume=e)},enumerable:!1,configurable:!0}),e.prototype.mute=function(){this.privAudio&&(this.privAudio.muted=!0)},e.prototype.unmute=function(){this.privAudio&&(this.privAudio.muted=!1)},Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsClosed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return void 0!==this.privAudio?this.privAudio.currentTime:-1},enumerable:!1,configurable:!0}),e.prototype.pause=function(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)},e.prototype.resume=function(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(function(){e&&e()},function(e){t&&t(e)}),this.privIsPaused=!1)},Object.defineProperty(e.prototype,"internalAudio",{get:function(){return this.privAudio},enumerable:!1,configurable:!0}),e.prototype.updateSourceBuffer=function(){return n(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(!(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()))return[3/*break*/,2];this.privAppendingToBuffer=!0,e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),// eslint-disable-next-line no-console
console.log("buffer filled, pausing addition of binaries until space is made"),[2/*return*/]}return[4/*yield*/,this.notifyPlayback()];case 1:return t.sent(),[3/*break*/,4];case 2:if(!this.canEndStream())return[3/*break*/,4];return[4/*yield*/,this.handleSourceBufferUpdateEnd()];case 3:t.sent(),t.label=4;case 4:return[2/*return*/]}})})},e.prototype.handleSourceBufferUpdateEnd=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:if(!(this.canEndStream()&&this.sourceBufferAvailable()))return[3/*break*/,2];return this.privMediaSource.endOfStream(),[4/*yield*/,this.notifyPlayback()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},e.prototype.notifyPlayback=function(){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:if(!(!this.privPlaybackStarted&&void 0!==this.privAudio)||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=function(){e.onAudioEnd&&e.onAudioEnd(e)},this.privIsPaused))return[3/*break*/,2];return[4/*yield*/,this.privAudio.play()];case 1:t.sent(),t.label=2;case 2:return[2/*return*/]}})})},e.prototype.canEndStream=function(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState},e.prototype.sourceBufferAvailable=function(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating},e}();e.exports.SpeakerAudioDestination=p}),P.register("9QHhe",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranscriptionCanceledEventArgs=void 0;/**
 * Defines content of a RecognitionErrorEvent.
 * @class ConversationTranscriptionCanceledEventArgs
 */var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("7cnPV").CancellationEventArgsBase);e.exports.ConversationTranscriptionCanceledEventArgs=o}),P.register("itCA2",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MeetingTranscriptionCanceledEventArgs=void 0;/**
 * Defines content of a MeetingTranscriptionCanceledEvent.
 * @class MeetingTranscriptionCanceledEventArgs
 */var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(P("7cnPV").CancellationEventArgsBase);e.exports.MeetingTranscriptionCanceledEventArgs=o}),P.register("dFlS7",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PronunciationAssessmentGradingSystem=void 0,/**
     * Five point calibration
     * @member PronunciationAssessmentGradingSystem.FivePoint
     */(r=e.exports.PronunciationAssessmentGradingSystem||(e.exports.PronunciationAssessmentGradingSystem={}))[r.FivePoint=1]="FivePoint",/**
     * Hundred mark
     * @member PronunciationAssessmentGradingSystem.HundredMark
     */r[r.HundredMark=2]="HundredMark"}),P.register("iWFqn",function(e,t){var r;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PronunciationAssessmentGranularity=void 0,/**
     * Shows the score on the full text, word and phoneme level
     * @member PronunciationAssessmentGranularity.Phoneme
     */(r=e.exports.PronunciationAssessmentGranularity||(e.exports.PronunciationAssessmentGranularity={}))[r.Phoneme=1]="Phoneme",/**
     * Shows the score on the full text and word level
     * @member PronunciationAssessmentGranularity.Word
     */r[r.Word=2]="Word",/**
     * Shows the score on the full text level only
     * @member PronunciationAssessmentGranularity.FullText
     */r[r.FullText=3]="FullText"}),P.register("aFT8k",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PronunciationAssessmentConfig=void 0;var r=P("eyacr"),n=P("9pfmZ"),o=/** @class */function(){/**
     * PronunciationAssessmentConfig constructor.
     * @constructor
     * @param {string} referenceText
     * @param gradingSystem
     * @param granularity
     * @param enableMiscue
     */function e(e,t,o,i){void 0===t&&(t=n.PronunciationAssessmentGradingSystem.FivePoint),void 0===o&&(o=n.PronunciationAssessmentGranularity.Phoneme),void 0===i&&(i=!1),r.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_GradingSystem,n.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Granularity,n.PronunciationAssessmentGranularity[o]),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,String(i))}return(/**
     * @member PronunciationAssessmentConfig.fromJSON
     * @function
     * @public
     * @param {string} json The json string containing the pronunciation assessment parameters.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentConfig from json.
     * This method is designed to support the pronunciation assessment parameters still in preview.
     * Under normal circumstances, use the constructor instead.
     */e.fromJSON=function(t){r.Contracts.throwIfNullOrUndefined(t,"json");var o=new e("");return o.privProperties=new n.PropertyCollection,o.properties.setProperty(n.PropertyId.PronunciationAssessment_Json,t),o},e.prototype.toJSON=function(){return this.updateJson(),this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Params)},e.prototype.applyTo=function(e){this.updateJson();var t=e.internalData;t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(n.PropertyId.PronunciationAssessment_Params),t.isSpeakerDiarizationEnabled)},Object.defineProperty(e.prototype,"referenceText",{/**
         * Gets the reference text.
         * @member PronunciationAssessmentConfig.prototype.referenceText
         * @function
         * @public
         * @returns {string} Reference text.
         */get:function(){return this.properties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText)},/**
         * Gets/Sets the reference text.
         * @member PronunciationAssessmentConfig.prototype.referenceText
         * @function
         * @public
         * @param {string} referenceText - Reference text.
         */set:function(e){r.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(n.PropertyId.PronunciationAssessment_ReferenceText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"phonemeAlphabet",{/**
         * Sets the phoneme alphabet.
         * The valid values are "SAPI" (default) and "IPA".
         * Added in version 1.20.0
         * @member PronunciationAssessmentConfig.prototype.phonemeAlphabet
         * @function
         * @public
         * @param {string} phonemeAlphabet - Phoneme alphabet.
         */set:function(e){r.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableMiscue",{/**
         * Gets the boolean enableMiscue property.
         * Added in version 1.26.0
         * @member PronunciationAssessmentConfig.prototype.enableMiscue
         * @function
         * @public
         * @return {boolean} enableMiscue - enable miscue.
         */get:function(){return"true"===this.properties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()},/**
         * Sets the boolean enableMiscue property.
         * Added in version 1.26.0
         * @member PronunciationAssessmentConfig.prototype.enableMiscue
         * @function
         * @public
         * @param {boolean} enableMiscue - enable miscue.
         */set:function(e){this.properties.setProperty(n.PropertyId.PronunciationAssessment_EnableMiscue,e?"true":"false")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nbestPhonemeCount",{/**
         * Sets the nbest phoneme count
         * Added in version 1.20.0
         * @member PronunciationAssessmentConfig.prototype.nbestPhonemeCount
         * @function
         * @public
         * @param {number} nbestPhonemeCount - NBest phoneme count.
         */set:function(e){this.privNBestPhonemeCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{/**
         * @member PronunciationAssessmentConfig.prototype.properties
         * @function
         * @public
         * @return {PropertyCollection} Properties of the config.
         * @summary Gets a pronunciation assessment config properties
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.updateJson=function(){var e=JSON.parse(this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Json,"{}")),t=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_ReferenceText);t&&(e.referenceText=t);var r=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_GradingSystem);r&&(e.gradingSystem=r);var o=this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_Granularity);o&&(e.granularity=o),this.privPhonemeAlphabet&&(e.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(e.nbestPhonemeCount=this.privNBestPhonemeCount),// always set dimension to Comprehensive
e.dimension="Comprehensive",this.privProperties.getProperty(n.PropertyId.PronunciationAssessment_EnableMiscue)&&(e.enableMiscue=this.enableMiscue),this.privProperties.setProperty(n.PropertyId.PronunciationAssessment_Params,JSON.stringify(e))},e)}();e.exports.PronunciationAssessmentConfig=o}),P.register("gcyL0",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PronunciationAssessmentResult=void 0;var r=P("eyacr"),n=P("9pfmZ"),o=/** @class */function(){function e(e){var t=JSON.parse(e);r.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}return(/**
     * @member PronunciationAssessmentResult.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result The recognition result.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentResult from recognition result.
     */e.fromResult=function(t){r.Contracts.throwIfNullOrUndefined(t,"result");var o=t.properties.getProperty(n.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(o,"json"),new e(o)},Object.defineProperty(e.prototype,"detailResult",{/**
         * Gets the detail result of pronunciation assessment.
         * @member PronunciationAssessmentConfig.prototype.detailResult
         * @function
         * @public
         * @returns {DetailResult} detail result.
         */get:function(){return this.privPronJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accuracyScore",{/**
         * The score indicating the pronunciation accuracy of the given speech, which indicates
         * how closely the phonemes match a native speaker's pronunciation.
         * @member PronunciationAssessmentResult.prototype.accuracyScore
         * @function
         * @public
         * @returns {number} Accuracy score.
         */get:function(){return this.detailResult.PronunciationAssessment.AccuracyScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pronunciationScore",{/**
         * The overall score indicating the pronunciation quality of the given speech.
         * This is calculated from AccuracyScore, FluencyScore and CompletenessScore with weight.
         * @member PronunciationAssessmentResult.prototype.pronunciationScore
         * @function
         * @public
         * @returns {number} Pronunciation score.
         */get:function(){return this.detailResult.PronunciationAssessment.PronScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completenessScore",{/**
         * The score indicating the completeness of the given speech by calculating the ratio of pronounced words towards entire input.
         * @member PronunciationAssessmentResult.prototype.completenessScore
         * @function
         * @public
         * @returns {number} Completeness score.
         */get:function(){return this.detailResult.PronunciationAssessment.CompletenessScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fluencyScore",{/**
         * The score indicating the fluency of the given speech.
         * @member PronunciationAssessmentResult.prototype.fluencyScore
         * @function
         * @public
         * @returns {number} Fluency score.
         */get:function(){return this.detailResult.PronunciationAssessment.FluencyScore},enumerable:!1,configurable:!0}),e)}();e.exports.PronunciationAssessmentResult=o}),P.register("erpit",function(e,t){//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Diagnostics=void 0;var r=P("8nLmq"),n=P("aQGWi"),o=/** @class */function(){function e(){}return e.SetLoggingLevel=function(e){this.privListener=new r.ConsoleLoggingListener(e),n.Events.instance.attachConsoleListener(this.privListener)},e.StartConsoleOutput=function(){this.privListener&&(this.privListener.enableConsoleOutput=!0)},e.StopConsoleOutput=function(){this.privListener&&(this.privListener.enableConsoleOutput=!1)},e.SetLogOutputPath=function(e){if("undefined"==typeof window)this.privListener&&(this.privListener.logPath=e);else throw Error("File system logging not available in browser.")},e.privListener=void 0,e}();e.exports.Diagnostics=o}),P.register("b9sNN",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceProfileConnectionFactory=e.exports.SpeakerRecognitionConnectionFactory=void 0;var o=P("8nLmq"),i=P("9pfmZ"),s=P("lsi6M"),a=P("f7AdM"),c=P("eJOps"),u=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,t,r,n){var u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint);if(!u){var p=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region),l=s.ConnectionFactoryBase.getHostSuffix(p),f=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".spr-frontend.speech"+l),h=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");u=f+"/speaker/ws/"+this.scenarioToPath(h)+"/"+r}var d={format:"simple",language:e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,d,u);var v={};void 0!==t.token&&""!==t.token&&(v[t.headerName]=t.token),v[c.HeaderNames.ConnectionId]=n,v[c.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,u);var y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(u,d,v,new a.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),y,n)},t.prototype.scenarioToPath=function(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}},t}(s.ConnectionFactoryBase),p=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(t,r,n){return e.prototype.create.call(this,t,r,"recognition",n)},t}(u);e.exports.SpeakerRecognitionConnectionFactory=p;var l=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(t,r,n){return e.prototype.create.call(this,t,r,"profile",n)},t}(u);e.exports.VoiceProfileConnectionFactory=l}),P.register("dpFUI",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */var r,n,o,i=e.exports&&e.exports.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RecognitionEndedEvent=e.exports.RecognitionCompletionStatus=e.exports.RecognitionStartedEvent=e.exports.ConnectingToServiceEvent=e.exports.ListeningStartedEvent=e.exports.RecognitionTriggeredEvent=e.exports.SpeechRecognitionEvent=void 0;var s=P("aQGWi"),a=/** @class */function(e){function t(t,r,n,o){void 0===o&&(o=s.EventType.Info);var i=e.call(this,t,o)||this;return i.privRequestId=r,i.privSessionId=n,i}return i(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),t}(s.PlatformEvent);e.exports.SpeechRecognitionEvent=a;var c=/** @class */function(e){function t(t,r,n,o){var i=e.call(this,"RecognitionTriggeredEvent",t,r)||this;return i.privAudioSourceId=n,i.privAudioNodeId=o,i}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(a);e.exports.RecognitionTriggeredEvent=c;var u=/** @class */function(e){function t(t,r,n,o){var i=e.call(this,"ListeningStartedEvent",t,r)||this;return i.privAudioSourceId=n,i.privAudioNodeId=o,i}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(a);e.exports.ListeningStartedEvent=u;var p=/** @class */function(e){function t(t,r,n){var o=e.call(this,"ConnectingToServiceEvent",t,n)||this;return o.privAuthFetchEventid=r,o}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventid",{get:function(){return this.privAuthFetchEventid},enumerable:!1,configurable:!0}),t}(a);e.exports.ConnectingToServiceEvent=p;var l=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,"RecognitionStartedEvent",t,i)||this;return s.privAudioSourceId=r,s.privAudioNodeId=n,s.privAuthFetchEventId=o,s}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(a);e.exports.RecognitionStartedEvent=l,(r=o=e.exports.RecognitionCompletionStatus||(e.exports.RecognitionCompletionStatus={}))[r.Success=0]="Success",r[r.AudioSourceError=1]="AudioSourceError",r[r.AudioSourceTimeout=2]="AudioSourceTimeout",r[r.AuthTokenFetchError=3]="AuthTokenFetchError",r[r.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",r[r.UnAuthorized=5]="UnAuthorized",r[r.ConnectTimeout=6]="ConnectTimeout",r[r.ConnectError=7]="ConnectError",r[r.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",r[r.UnknownError=9]="UnknownError";var f=/** @class */function(e){function t(t,r,n,i,a,c,u,p){var l=e.call(this,"RecognitionEndedEvent",t,a,u===o.Success?s.EventType.Info:s.EventType.Error)||this;return l.privAudioSourceId=r,l.privAudioNodeId=n,l.privAuthFetchEventId=i,l.privStatus=u,l.privError=p,l.privServiceTag=c,l}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceTag",{get:function(){return this.privServiceTag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.privStatus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(a);e.exports.RecognitionEndedEvent=f}),P.register("e8WsR",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ServiceRecognizerBase=void 0;var o=P("8nLmq"),i=P("aQGWi"),s=P("9pfmZ"),a=P("f7AdM"),c=P("hyC1Q"),u=/** @class */function(){function e(e,t,r,n,o){var c=this;if(// A promise for a configured connection.
// Do not consume directly, call fetchConnection instead.
this.privConnectionConfigurationPromise=void 0,// A promise for a connection, but one that has not had the speech context sent yet.
// Do not consume directly, call fetchConnection instead.
this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new i.ArgumentNullError("authentication");if(!t)throw new i.ArgumentNullError("connectionFactory");if(!r)throw new i.ArgumentNullError("audioSource");if(!n)throw new i.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=n.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=r,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=o,this.privRequestSession=new a.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new i.EventSource,this.privServiceEvents=new i.EventSource,this.privDynamicGrammar=new a.DynamicGrammarBuilder,this.privSpeechContext=new a.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new a.AgentConfig,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=i.Timeout.setTimeout),this.connectionEvents.attach(function(e){"ConnectionClosedEvent"===e.name&&(1003===e.statusCode||1007===e.statusCode||1002===e.statusCode||4e3===e.statusCode||c.privRequestSession.numConnectionAttempts>c.privRecognizerConfig.maxRetryCount)&&c.cancelRecognitionLocal(s.CancellationReason.Error,1007===e.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,e.reason+" websocket error code: "+e.statusCode)}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=i.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}return e.prototype.setSpeechSegmentationTimeoutJson=function(){var e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==e){var t=this.recognitionMode===a.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===a.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",r=parseInt(e,10),n=this.privSpeechContext.getSection("phraseDetection");n.mode=t,n[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:r}},this.privSpeechContext.setSection("phraseDetection",n)}},e.prototype.setLanguageIdJson=function(){if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){var e=this.privSpeechContext.getSection("phraseDetection"),t=this.privRecognizerConfig.autoDetectSourceLanguages.split(","),r=void 0;r="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:t,mode:r,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});var n=this.privRecognizerConfig.sourceLanguageModels;void 0!==n&&(e.customModels=n,e.onInterim={action:"None"},e.onSuccess={action:"None"}),this.privSpeechContext.setSection("phraseDetection",e)}},e.prototype.setOutputDetailLevelJson=function(){this.privEnableSpeakerId&&("true"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())},Object.defineProperty(e.prototype,"isSpeakerDiarizationEnabled",{get:function(){return this.privEnableSpeakerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioSource",{get:function(){return this.privAudioSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speechContext",{get:function(){return this.privSpeechContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicGrammar",{get:function(){return this.privDynamicGrammar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationTranslatorToken",{set:function(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voiceProfileType",{set:function(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authentication",{set:function(e){this.privAuthentication=this.authentication},enumerable:!1,configurable:!0}),e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privIsDisposed=!0,!(void 0!==this.privConnectionConfigurationPromise))return[3/*break*/,5];t.label=1;case 1:return t.trys.push([1,4,,5]),[4/*yield*/,this.privConnectionConfigurationPromise];case 2:return[4/*yield*/,t.sent().dispose(e)];case 3:return t.sent(),[3/*break*/,5];case 4:// The connection is in a bad state. But we're trying to kill it, so...
return t.sent(),[2/*return*/];case 5:return[2/*return*/]}})})},Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognizerConfig.recognitionMode},enumerable:!1,configurable:!0}),e.prototype.recognize=function(e,t,i){return r(this,void 0,void 0,function(){var c,u,p,l,f,h,d,v,y=this;return n(this,function(g){switch(g.label){case 0:if(!(void 0!==this.recognizeOverride))return[3/*break*/,2];return[4/*yield*/,this.recognizeOverride(e,t,i)];case 1:return g.sent(),[2/*return*/];case 2:// Clear the existing configuration promise to force a re-transmission of config and context.
this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.privSuccessCallback=t,this.privErrorCallback=i,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events),c=this.connectImpl(),g.label=3;case 3:return g.trys.push([3,8,,10]),[4/*yield*/,this.audioSource.attach(this.privRequestSession.audioNodeId)];case 4:return p=g.sent(),[4/*yield*/,this.audioSource.format];case 5:return l=g.sent(),[4/*yield*/,this.audioSource.deviceInfo];case 6:return f=g.sent(),this.privIsLiveAudio=f.type&&f.type===a.type.Microphones,u=new o.ReplayableAudioNode(p,l.avgBytesPerSec),[4/*yield*/,this.privRequestSession.onAudioSourceAttachCompleted(u,!1)];case 7:return g.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:f},[3/*break*/,10];case 8:return h=g.sent(),[4/*yield*/,this.privRequestSession.onStopRecognizing()];case 9:throw g.sent(),h;case 10:return g.trys.push([10,12,,14]),[4/*yield*/,c];case 11:return g.sent(),[3/*break*/,14];case 12:return d=g.sent(),[4/*yield*/,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,d)];case 13:return g.sent(),[2/*return*/];case 14:return v=new s.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(u).catch(function(e){return r(y,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2/*return*/]}})})}),[2/*return*/]}})})},e.prototype.stopRecognizing=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!this.privRequestSession.isRecognizing)return[3/*break*/,8];e.label=1;case 1:return e.trys.push([1,,6,8]),[4/*yield*/,this.audioSource.turnOff()];case 2:return e.sent(),[4/*yield*/,this.sendFinalAudio()];case 3:return e.sent(),[4/*yield*/,this.privRequestSession.onStopRecognizing()];case 4:return e.sent(),[4/*yield*/,this.privRequestSession.turnCompletionPromise];case 5:return e.sent(),[3/*break*/,8];case 6:return[4/*yield*/,this.privRequestSession.dispose()];case 7:return e.sent(),[7/*endfinally*/];case 8:return[2/*return*/]}})})},e.prototype.connect=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.connectImpl()];case 1:return e.sent(),[2/*return*/,Promise.resolve()]}})})},e.prototype.connectAsync=function(e,t){this.connectImpl().then(function(){try{e&&e()}catch(e){t&&t(e)}},function(e){try{t&&t(e);/* eslint-disable no-empty */}catch(e){}})},e.prototype.disconnect=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting")];case 1:if(e.sent(),!(void 0!==this.disconnectOverride))return[3/*break*/,3];return[4/*yield*/,this.disconnectOverride()];case 2:e.sent(),e.label=3;case 3:if(!(void 0!==this.privConnectionPromise))return[3/*break*/,8];e.label=4;case 4:return e.trys.push([4,7,,8]),[4/*yield*/,this.privConnectionPromise];case 5:return[4/*yield*/,e.sent().dispose()];case 6:case 7:return e.sent(),[3/*break*/,8];case 8:return this.privConnectionPromise=void 0,[2/*return*/]}})})},// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.sendMessage=function(e){},e.prototype.sendNetworkMessage=function(e,t){return r(this,void 0,void 0,function(){var r,o;return n(this,function(n){switch(n.label){case 0:return r="string"==typeof t?i.MessageType.Text:i.MessageType.Binary,o="string"==typeof t?"application/json":"",[4/*yield*/,this.fetchConnection()];case 1:return[2/*return*/,n.sent().send(new c.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,o,t))]}})})},Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),e.prototype.sendTelemetryData=function(){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:if(t=this.privRequestSession.getTelemetry(),!0!==e.telemetryDataEnabled||this.privIsDisposed||null===t)return[2/*return*/];if(e.telemetryData)try{e.telemetryData(t);/* eslint-disable no-empty */}catch(e){}return[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,r.sent().send(new c.SpeechConnectionMessage(i.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",t))];case 2:return r.sent(),[2/*return*/]}})})},// Cancels recognition.
e.prototype.cancelRecognitionLocal=function(e,t,o){return r(this,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:if(!this.privRequestSession.isRecognizing)return[3/*break*/,2];return[4/*yield*/,this.privRequestSession.onStopRecognizing()];case 1:r.sent(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,o),r.label=2;case 2:return[2/*return*/]}})})},e.prototype.receiveMessage=function(){return r(this,void 0,void 0,function(){var e,t,r,o,u,p,l,f,h;return n(this,function(n){switch(n.label){case 0:if(n.trys.push([0,18,,19]),this.privIsDisposed)return[2/*return*/];return[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,(e=n.sent()).read()];case 2:if(t=n.sent(),void 0!==this.receiveMessageOverride)return[2/*return*/,this.receiveMessageOverride()];// indicates we are draining the queue and it came with no message;
if(!t){if(!this.privRequestSession.isRecognizing)return[2/*return*/];return[2/*return*/,this.receiveMessage()]}if(this.privServiceHasSentMessage=!0,(r=c.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privRequestSession.requestId.toLowerCase())return[3/*break*/,17];switch(r.path.toLowerCase()){case"turn.start":return[3/*break*/,3];case"speech.startdetected":return[3/*break*/,4];case"speech.enddetected":return[3/*break*/,5];case"turn.end":return[3/*break*/,6]}return[3/*break*/,15];case 3:return this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse(),[3/*break*/,17];case 4:return o=a.SpeechDetected.fromJSON(r.textBody),u=new s.RecognitionEventArgs(o.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,u),[3/*break*/,17];case 5:return p=void 0,p=r.textBody.length>0?r.textBody:"{ Offset: 0 }",l=a.SpeechDetected.fromJSON(p),f=new s.RecognitionEventArgs(l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f),[3/*break*/,17];case 6:return[4/*yield*/,this.sendTelemetryData()];case 7:if(n.sent(),!(this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream))return[3/*break*/,9];return this.privMustReportEndOfStream=!1,[4/*yield*/,this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0)];case 8:n.sent(),n.label=9;case 9:return h=new s.SessionEventArgs(this.privRequestSession.sessionId),[4/*yield*/,this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition)];case 10:if(n.sent(),!(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing))return[3/*break*/,11];return this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,h),[2/*return*/];case 11:return[4/*yield*/,this.fetchConnection()];case 12:return e=n.sent(),[4/*yield*/,this.sendPrePayloadJSON(e)];case 13:n.sent(),n.label=14;case 14:return[3/*break*/,17];case 15:return[4/*yield*/,this.processTypeSpecificMessages(r)];case 16:!n.sent()&&this.privServiceEvents&&this.serviceEvents.onEvent(new i.ServiceEvent(r.path.toLowerCase(),r.textBody)),n.label=17;case 17:return[2/*return*/,this.receiveMessage()];case 18:return n.sent(),[2/*return*/,null];case 19:return[2/*return*/]}})})},e.prototype.updateSpeakerDiarizationAudioOffset=function(){var e=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(e)},e.prototype.sendSpeechContext=function(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();var r=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),r)return e.send(new c.SpeechConnectionMessage(i.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",r))},e.prototype.noOp=function(){},// Encapsulated for derived service recognizers that need to send additional JSON
e.prototype.sendPrePayloadJSON=function(e,t){return void 0===t&&(t=!0),r(this,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:if(void 0!==this.sendPrePayloadJSONOverride)return[2/*return*/,this.sendPrePayloadJSONOverride(e)];return[4/*yield*/,this.sendSpeechContext(e,t)];case 1:return r.sent(),[4/*yield*/,this.sendWaveHeader(e)];case 2:return r.sent(),[2/*return*/]}})})},e.prototype.sendWaveHeader=function(e){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return[4/*yield*/,this.audioSource.format];case 1:// this.writeBufferToConsole(format.header);
return t=r.sent(),[2/*return*/,e.send(new c.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))]}})})},// Establishes a websocket connection to the end point.
e.prototype.connectImpl=function(){var e=this;return void 0!==this.privConnectionPromise?this.privConnectionPromise.then(function(t){return t.state()===i.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionPromise=void 0,e.privServiceHasSentMessage=!1,e.connectImpl()):e.privConnectionPromise},function(){return e.privConnectionId=null,e.privConnectionPromise=void 0,e.privServiceHasSentMessage=!1,e.connectImpl()}):(this.privConnectionPromise=this.retryableConnect(),// Attach an empty handler to allow the promise to run in the background while
// other startup events happen. It'll eventually be awaited on.
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privConnectionPromise.catch(function(){}),void 0!==this.postConnectImplOverride)?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise},e.prototype.sendSpeechServiceConfig=function(t,r,n){if(r.onSpeechContext(),!0!==e.telemetryDataEnabled&&(n=JSON.stringify({context:{system:JSON.parse(n).context.system}})),"true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){var o=JSON.parse(n);o.context.DisableReferenceChannel="True",o.context.MicSpec="1_0_0",n=JSON.stringify(o)}if(n)return t.send(new c.SpeechConnectionMessage(i.MessageType.Text,"speech.config",r.requestId,"application/json",n))},e.prototype.fetchConnection=function(){return r(this,void 0,void 0,function(){var e=this;return n(this,function(t){switch(t.label){case 0:if(void 0!==this.privConnectionConfigurationPromise)return[2/*return*/,this.privConnectionConfigurationPromise.then(function(t){return t.state()===i.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=void 0,e.privServiceHasSentMessage=!1,e.fetchConnection()):e.privConnectionConfigurationPromise},function(){return e.privConnectionId=null,e.privConnectionConfigurationPromise=void 0,e.privServiceHasSentMessage=!1,e.fetchConnection()})];return this.privConnectionConfigurationPromise=this.configureConnection(),[4/*yield*/,this.privConnectionConfigurationPromise];case 1:return[2/*return*/,t.sent()]}})})},e.prototype.sendAudio=function(e){return r(this,void 0,void 0,function(){var t,o,s,a,u,p,l=this;return n(this,function(f){switch(f.label){case 0:return[4/*yield*/,this.audioSource.format];case 1:return t=f.sent(),this.privAverageBytesPerMs=t.avgBytesPerSec/1e3,o=Date.now(),s=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),a=t.avgBytesPerSec/1e3*parseInt(s,10),u=this.privRequestSession.recogNumber,[2/*return*/,(p=function(){return r(l,void 0,void 0,function(){var r,s,l,f,h=this;return n(this,function(n){switch(n.label){case 0:if(!(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===u))return[3/*break*/,5];return[4/*yield*/,this.fetchConnection()];case 1:return r=n.sent(),[4/*yield*/,e.read()];case 2:// we have a new audio chunk to upload.
if(s=n.sent(),this.privRequestSession.isSpeechEnded)return[2/*return*/];if(l=void 0,f=void 0,!s||s.isEnd?(l=null,f=0):(l=s.buffer,this.privRequestSession.onAudioSent(l.byteLength),f=a>=this.privRequestSession.bytesSent?0:Math.max(0,o-Date.now())),!(0!==f))return[3/*break*/,4];return[4/*yield*/,this.delay(f)];case 3:n.sent(),n.label=4;case 4:// Are we still alive?
if(null!==l&&(o=Date.now()+1e3*l.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===u){if(r.send(new c.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch(function(){// eslint-disable-next-line @typescript-eslint/no-empty-function
h.privRequestSession.onServiceTurnEndResponse(h.privRecognizerConfig.isContinuousRecognition).catch(function(){})}),!(null==s?void 0:s.isEnd))// Regardless of success or failure, schedule the next upload.
// If the underlying connection was broken, the next cycle will
// get a new connection and re-transmit missing audio automatically.
return[2/*return*/,p()];this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}n.label=5;case 5:return[2/*return*/]}})})})()]}})})},e.prototype.retryableConnect=function(){return r(this,void 0,void 0,function(){var e,t,r,o,a,c,u,p=this;return n(this,function(n){switch(n.label){case 0:e=!1,this.privAuthFetchEventId=i.createNoDashGuid(),t=this.privRequestSession.sessionId,this.privConnectionId=void 0!==t?t:i.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId),r=0,o="",n.label=1;case 1:if(!(this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount))return[3/*break*/,8];return[4/*yield*/,e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId)];case 2:return a=n.sent(),[4/*yield*/,this.privRequestSession.onAuthCompleted(!1)];case 3:return n.sent(),c=this.privConnectionFactory.create(this.privRecognizerConfig,a,this.privConnectionId),// Attach the telemetry handlers.
this.privRequestSession.listenForServiceTelemetry(c.events),// Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
// it'll stop sending events.
c.events.attach(function(e){p.connectionEvents.onEvent(e)}),[4/*yield*/,c.open()];case 4:if(200!==(u=n.sent()).statusCode)return[3/*break*/,6];return[4/*yield*/,this.privRequestSession.onConnectionEstablishCompleted(u.statusCode)];case 5:return n.sent(),[2/*return*/,Promise.resolve(c)];case 6:1006===u.statusCode&&(e=!0),n.label=7;case 7:return r=u.statusCode,o=u.reason,this.privRequestSession.onRetryConnection(),[3/*break*/,1];case 8:return[4/*yield*/,this.privRequestSession.onConnectionEstablishCompleted(r,o)];case 9:return n.sent(),[2/*return*/,Promise.reject("Unable to contact server. StatusCode: "+r+", "+this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+o)]}})})},e.prototype.delay=function(e){var t=this;return new Promise(function(r){return t.privSetTimeout(r,e)})},e.prototype.writeBufferToConsole=function(e){var t="Buffer Size: ";if(null===e)t+="null";else{var r=new Uint8Array(e);t+=e.byteLength+"\r\n";for(var n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" ",(n+1)%16==0&&(// eslint-disable-next-line no-console
console.info(t),t="")}// eslint-disable-next-line no-console
console.info(t)},e.prototype.sendFinalAudio=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,e.sent().send(new c.SpeechConnectionMessage(i.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))];case 2:return e.sent(),[2/*return*/]}})})},// Takes an established websocket connection to the endpoint and sends speech configuration information.
e.prototype.configureConnection=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.connectImpl()];case 1:if(e=t.sent(),void 0!==this.configConnectionOverride)return[2/*return*/,this.configConnectionOverride(e)];return[4/*yield*/,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[4/*yield*/,this.sendPrePayloadJSON(e,!1)];case 3:return t.sent(),[2/*return*/,e]}})})},e.telemetryDataEnabled=!0,e}();e.exports.ServiceRecognizerBase=u}),P.register("hyC1Q",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechConnectionMessage=void 0;var o=P("aQGWi"),i=P("eJOps"),s=/** @class */function(e){function t(t,r,n,s,a,c,u,p){var l=this;if(!r)throw new o.ArgumentNullError("path");if(!n)throw new o.ArgumentNullError("requestId");var f={};if(f[i.HeaderNames.Path]=r,f[i.HeaderNames.RequestId]=n,f[i.HeaderNames.RequestTimestamp]=new Date().toISOString(),s&&(f[i.HeaderNames.ContentType]=s),c&&(f[i.HeaderNames.RequestStreamId]=c),u)for(var h in u)h&&(f[h]=u[h]);return(l=p?e.call(this,t,a,f,p)||this:e.call(this,t,a,f)||this).privPath=r,l.privRequestId=n,l.privContentType=s,l.privStreamId=c,l.privAdditionalHeaders=u,l}return n(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return this.privPath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this.privContentType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"streamId",{get:function(){return this.privStreamId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalHeaders",{get:function(){return this.privAdditionalHeaders},enumerable:!1,configurable:!0}),t.fromConnectionMessage=function(e){var r=null,n=null,o=null,s=null,a={};if(e.headers)for(var c in e.headers)c&&(c.toLowerCase()===i.HeaderNames.Path.toLowerCase()?r=e.headers[c]:c.toLowerCase()===i.HeaderNames.RequestId.toLowerCase()?n=e.headers[c]:c.toLowerCase()===i.HeaderNames.ContentType.toLowerCase()?o=e.headers[c]:c.toLowerCase()===i.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[c]:a[c]=e.headers[c]);return new t(e.messageType,r,n,o,e.body,s,a,e.id)},t}(o.ConnectionMessage);e.exports.SpeechConnectionMessage=s}),P.register("4nFox",function(e,t){var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationServiceRecognizer=void 0;var s=P("9pfmZ"),a=P("f7AdM"),c=/** @class */function(e){function t(t,r,n,s,a){var c=e.call(this,t,r,n,s,a)||this;return c.handleSpeechPhraseMessage=function(e){return o(c,void 0,void 0,function(){return i(this,function(t){return[2/*return*/,this.handleSpeechPhrase(e)]})})},c.handleSpeechHypothesisMessage=function(e){return c.handleSpeechHypothesis(e)},c}return n(t,e),t.prototype.processTypeSpecificMessages=function(e){},t.prototype.handleRecognizedCallback=function(e,t,r){},t.prototype.handleRecognizingCallback=function(e,t,r){},t.prototype.processSpeechMessages=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:switch(t=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3/*break*/,1];case"speech.phrase":return[3/*break*/,2]}return[3/*break*/,5];case 1:return this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0,[3/*break*/,6];case 2:if(!this.handleSpeechPhraseMessage)return[3/*break*/,4];return[4/*yield*/,this.handleSpeechPhraseMessage(e.textBody)];case 3:r.sent(),r.label=4;case 4:return t=!0,[3/*break*/,6];case 5:return[3/*break*/,6];case 6:return[2/*return*/,t]}})})},t.prototype.cancelRecognition=function(e,t,r,n,o){},t.prototype.handleSpeechPhrase=function(e){return o(this,void 0,void 0,function(){var t,r,n,o,c,u,p,l,f,h,d;return i(this,function(i){switch(i.label){case 0:if(t=a.SimpleSpeechPhrase.fromJSON(e),r=a.EnumTranslation.implTranslateRecognitionResult(t.RecognitionStatus),(o=new s.PropertyCollection).setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e),u=c=t.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+t.Offset+t.Duration),s.ResultReason.Canceled!==r)return[3/*break*/,2];return p=a.EnumTranslation.implTranslateCancelResult(t.RecognitionStatus),l=a.EnumTranslation.implTranslateCancelErrorCode(t.RecognitionStatus),[4/*yield*/,this.cancelRecognitionLocal(p,l,a.EnumTranslation.implTranslateErrorDetails(l))];case 1:return i.sent(),[3/*break*/,3];case 2:this.privRequestSession.isSpeechEnded&&r===s.ResultReason.NoMatch&&t.RecognitionStatus!==a.RecognitionStatus.InitialSilenceTimeout||(this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName)===s.OutputFormat[s.OutputFormat.Simple]?n=new s.SpeechRecognitionResult(this.privRequestSession.requestId,r,t.DisplayText,t.Duration,c,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,o):(h=(f=a.DetailedSpeechPhrase.fromJSON(e)).Offset+this.privRequestSession.currentTurnAudioOffset,d=f.getJsonWithCorrectedOffsets(h),u=(n=new s.SpeechRecognitionResult(this.privRequestSession.requestId,r,f.Text,f.Duration,h,f.Language,f.LanguageDetectionConfidence,f.SpeakerId,void 0,d,o)).offset),this.handleRecognizedCallback(n,u,this.privRequestSession.sessionId)),i.label=3;case 3:return[2/*return*/]}})})},t.prototype.handleSpeechHypothesis=function(e){var t=a.SpeechHypothesis.fromJSON(e),r=t.Offset+this.privRequestSession.currentTurnAudioOffset,n=new s.PropertyCollection;n.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e);var o=new s.SpeechRecognitionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,t.Text,t.Duration,r,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,n);this.privRequestSession.onHypothesis(r),this.handleRecognizingCallback(o,t.Duration,this.privRequestSession.sessionId)},t}(a.ServiceRecognizerBase);e.exports.ConversationServiceRecognizer=c}),P.register("6mSDu",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.type=e.exports.connectivity=e.exports.Device=e.exports.OS=e.exports.System=e.exports.Context=e.exports.SpeechServiceConfig=e.exports.RecognizerConfig=e.exports.SpeechResultFormat=e.exports.RecognitionMode=void 0;var r,n,o,i,s,a=P("9pfmZ");(r=s=e.exports.RecognitionMode||(e.exports.RecognitionMode={}))[r.Interactive=0]="Interactive",r[r.Conversation=1]="Conversation",r[r.Dictation=2]="Dictation",(n=e.exports.SpeechResultFormat||(e.exports.SpeechResultFormat={}))[n.Simple=0]="Simple",n[n.Detailed=1]="Detailed";var c=/** @class */function(){function e(e,t){this.privSpeechServiceConfig=e||new u(new p(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(a.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognitionMode},set:function(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===s.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=s[e]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionActivityTimeout",{get:function(){return this.privRecognitionActivityTimeout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isContinuousRecognition",{get:function(){return this.privRecognitionMode!==s.Interactive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageIdMode",{get:function(){return this.privLanguageIdMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguages",{get:function(){return this.parameters.getProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionEndpointVersion",{get:function(){return this.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sourceLanguageModels",{get:function(){var e=[],t=!1;if(void 0!==this.autoDetectSourceLanguages)for(var r=0,n=this.autoDetectSourceLanguages.split(",");r<n.length;r++){var o=n[r],i=o+a.PropertyId.SpeechServiceConnection_EndpointId.toString(),s=this.parameters.getProperty(i,void 0);void 0!==s?(e.push({language:o,endpoint:s}),t=!0):e.push({language:o,endpoint:""})}return t?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRetryCount",{get:function(){return this.privMaxRetryCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpeakerDiarizationEnabled",{get:function(){return this.privEnableSpeakerId},set:function(e){this.privEnableSpeakerId=e},enumerable:!1,configurable:!0}),e}();e.exports.RecognizerConfig=c;// The config is serialized and sent as the Speech.Config
var u=/** @class */function(){function e(e){this.context=e}return e.prototype.serialize=function(){return JSON.stringify(this,function(e,t){if(t&&"object"==typeof t){var r={};for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return r}return t})},Object.defineProperty(e.prototype,"Context",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Recognition",{get:function(){return this.recognition},set:function(e){this.recognition=e.toLowerCase()},enumerable:!1,configurable:!0}),e}();e.exports.SpeechServiceConfig=u;var p=function(e){this.system=new l,this.os=e};e.exports.Context=p;var l=function(){this.name="SpeechSDK",this.version="1.31.0",this.build="JavaScript",this.lang="JavaScript"};e.exports.System=l,e.exports.OS=function(e,t,r){this.platform=e,this.name=t,this.version=r},e.exports.Device=function(e,t,r){this.manufacturer=e,this.model=t,this.version=r},(o=e.exports.connectivity||(e.exports.connectivity={})).Bluetooth="Bluetooth",o.Wired="Wired",o.WiFi="WiFi",o.Cellular="Cellular",o.InBuilt="InBuilt",o.Unknown="Unknown",(i=e.exports.type||(e.exports.type={})).Phone="Phone",i.Speaker="Speaker",i.Car="Car",i.Headset="Headset",i.Thermostat="Thermostat",i.Microphones="Microphones",i.Deskphone="Deskphone",i.RemoteControl="RemoteControl",i.Unknown="Unknown",i.File="File",i.Stream="Stream"}),P.register("1kF6N",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("bmNoP",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WebsocketMessageFormatter=void 0;var r=P("aQGWi"),n=/** @class */function(){function e(){}return e.prototype.toConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var n=e.textContent,o={},i=null;if(n){var s=n.split("\r\n\r\n");s&&s.length>0&&(o=this.parseHeaders(s[0]),s.length>1&&(i=s[1]))}t.resolve(new r.ConnectionMessage(e.messageType,i,o,e.id))}else if(e.messageType===r.MessageType.Binary){var a=e.binaryContent,o={},i=null;if(!a||a.byteLength<2)throw Error("Invalid binary message format. Header length missing.");var c=new DataView(a),u=c.getInt16(0);if(a.byteLength<u+2)throw Error("Invalid binary message format. Header content missing.");for(var p="",l=0;l<u;l++)p+=String.fromCharCode(c.getInt8(l+2));o=this.parseHeaders(p),a.byteLength>u+2&&(i=a.slice(2+u)),t.resolve(new r.ConnectionMessage(e.messageType,i,o,e.id))}}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},e.prototype.fromConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var n=""+this.makeHeaders(e)+"\r\n"+(e.textBody?e.textBody:"");t.resolve(new r.RawWebsocketMessage(r.MessageType.Text,n,e.id))}else if(e.messageType===r.MessageType.Binary){var o=this.makeHeaders(e),i=e.binaryBody,s=this.stringToArrayBuffer(o),a=new Int8Array(s),c=a.byteLength,u=new Int8Array(2+c+(i?i.byteLength:0));if(u[0]=c>>8&255,u[1]=255&c,u.set(a,2),i){var p=new Int8Array(i);u.set(p,2+c)}var n=u.buffer;t.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,n,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise},e.prototype.makeHeaders=function(e){var t="";if(e.headers)for(var r in e.headers)r&&(t+=r+": "+e.headers[r]+"\r\n");return t},e.prototype.parseHeaders=function(e){var t={};if(e){var r=e.match(/[^\r\n]+/g);if(t)for(var n=0;n<r.length;n++){var o=r[n];if(o){var i=o.indexOf(":"),s=i>0?o.substr(0,i).trim().toLowerCase():o,a=i>0&&o.length>i+1?o.substr(i+1).trim():"";t[s]=a}}}return t},e.prototype.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new DataView(t),n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t},e}();e.exports.WebsocketMessageFormatter=n}),P.register("lQgwD",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechConnectionFactory=void 0;var o=P("8nLmq"),i=P("f7AdM"),s=P("9pfmZ"),a=P("lsi6M"),i=P("f7AdM"),c=P("eJOps"),u=P("fpunX"),p=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",t.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",t.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",t.universalUri="/speech/universal/v",t}return n(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),l=a.ConnectionFactoryBase.getHostSuffix(p),f=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".stt.speech"+l),h={},d=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(d?n&&-1!==n.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(h[u.QueryParameterNames.CustomSpeechDeploymentId]=d):v&&(!n||-1===n.search(u.QueryParameterNames.Language))&&(h[u.QueryParameterNames.Language]=v),n&&-1!==n.search(u.QueryParameterNames.Format)||(h[u.QueryParameterNames.Format]=e.parameters.getProperty(i.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(h[u.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,h,n),!n)switch(e.recognitionMode){case i.RecognitionMode.Conversation:n="true"===e.parameters.getProperty(i.ForceDictationPropertyName,"false")?f+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?""+f+this.universalUri+e.recognitionEndpointVersion:f+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:n=f+this.dictationRelativeUri;break;default:n=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?""+f+this.universalUri+e.recognitionEndpointVersion:f+this.interactiveRelativeUri;// default is interactive
}var y={};void 0!==t.token&&""!==t.token&&(y[t.headerName]=t.token),y[c.HeaderNames.ConnectionId]=r;var g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),m=new o.WebsocketConnection(n,h,y,new i.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),g,r),b=m.uri;return e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,b),m},t}(a.ConnectionFactoryBase);e.exports.SpeechConnectionFactory=p}),P.register("dXIRS",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranscriberConnectionFactory=void 0;var o=P("8nLmq"),i=P("9pfmZ"),s=P("f7AdM"),a=P("lsi6M"),s=P("f7AdM"),c=P("eJOps"),u=P("fpunX"),p=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.universalUri="/speech/universal/v2",t}return n(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),l=a.ConnectionFactoryBase.getHostSuffix(p),f=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".stt.speech"+l),h={},d=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);d?n&&-1!==n.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(h[u.QueryParameterNames.CustomSpeechDeploymentId]=d):v&&(!n||-1===n.search(u.QueryParameterNames.Language))&&(h[u.QueryParameterNames.Language]=v),void 0!==e.autoDetectSourceLanguages&&(h[u.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,h,n),n||(n=""+f+this.universalUri);var y={};void 0!==t.token&&""!==t.token&&(y[t.headerName]=t.token),y[c.HeaderNames.ConnectionId]=r;var g="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),m=new o.WebsocketConnection(n,h,y,new s.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),g,r),b=m.uri;return e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,b),m},t.prototype.setV2UrlParams=function(e,t,r){var n=this;new Map([[i.PropertyId.Speech_SegmentationSilenceTimeoutMs,u.QueryParameterNames.SegmentationSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_EnableAudioLogging,u.QueryParameterNames.EnableAudioLogging],[i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,u.QueryParameterNames.EndSilenceTimeoutMs],[i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,u.QueryParameterNames.InitialSilenceTimeoutMs],[i.PropertyId.SpeechServiceResponse_PostProcessingOption,u.QueryParameterNames.Postprocessing],[i.PropertyId.SpeechServiceResponse_ProfanityOption,u.QueryParameterNames.Profanity],[i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,u.QueryParameterNames.StableIntermediateThreshold]]).forEach(function(o,i){n.setUrlParameter(i,o,e,t,r)});var o=JSON.parse(e.parameters.getProperty(s.ServicePropertiesPropertyName,"{}"));Object.keys(o).forEach(function(e){t[e]=o[e]})},t}(a.ConnectionFactoryBase);e.exports.ConversationTranscriberConnectionFactory=p}),P.register("8Ianm",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranscriberConnectionFactory=void 0;var o=P("8nLmq"),i=P("9pfmZ"),s=P("lsi6M"),a=P("f7AdM"),c=P("eJOps"),u=P("fpunX"),p=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multiaudioRelativeUri="/speech/recognition/multiaudio",t}return n(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0),u=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,"centralus"),p=s.ConnectionFactoryBase.getHostSuffix(u),l="wss://transcribe."+u+".cts.speech"+p+this.multiaudioRelativeUri,f=e.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,l),h={};this.setQueryParams(h,e,n),n||(n=f);var d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[c.HeaderNames.ConnectionId]=r,e.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,n);var v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(n,h,d,new a.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),v,r)},t.prototype.setQueryParams=function(e,t,r){var n=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);!n||u.QueryParameterNames.CustomSpeechDeploymentId in e||(e[u.QueryParameterNames.CustomSpeechDeploymentId]=n),!o||u.QueryParameterNames.Language in e||(e[u.QueryParameterNames.Language]=o);var s="true"===t.parameters.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),c=t.parameters.getProperty(a.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])!==i.OutputFormat[i.OutputFormat.Simple];(s||c)&&(e[u.QueryParameterNames.Format]=i.OutputFormat[i.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,r)},t}(s.ConnectionFactoryBase);e.exports.TranscriberConnectionFactory=p}),P.register("dhQLy",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationConnectionFactory=void 0;var o=P("8nLmq"),i=P("heIw7"),s=P("9pfmZ"),a=P("lsi6M"),c=P("f7AdM"),u=P("eJOps"),p=P("fpunX"),l=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,t,r){var n=this.getEndpointUrl(e),i={};void 0!==e.autoDetectSourceLanguages&&(i[p.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(i,e,n);var a={};void 0!==t.token&&""!==t.token&&(a[t.headerName]=t.token),a[u.HeaderNames.ConnectionId]=r,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,n);var l="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(n,i,a,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),l,r)},t.prototype.getEndpointUrl=function(e,t){var r=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),n=a.ConnectionFactoryBase.getHostSuffix(r),o=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!o){if(void 0!==e.autoDetectSourceLanguages){var c=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+n);o=c+"/speech/universal/v2"}else{var c=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+n);o=c+"/speech/translation/cognitiveservices/v1"}}return!0===t?o:i.StringUtils.formatString(o,{region:r})},t.prototype.setQueryParams=function(e,t,r){e.from=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),this.setCommonUrlParams(t,e,r),this.setUrlParameter(s.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,p.QueryParameterNames.StableTranslation,t,e,r);var n=t.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==n&&(e.voice=n,e.features="texttospeech")},t}(a.ConnectionFactoryBase);e.exports.TranslationConnectionFactory=l}),P.register("gipJG",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechSynthesisConnectionFactory=void 0;var r=P("8nLmq"),n=P("9pfmZ"),o=P("lsi6M"),i=P("f7AdM"),s=P("eJOps"),a=P("fpunX"),c=/** @class */function(){function e(){this.synthesisUri="/cognitiveservices/websocket/v1"}return e.prototype.create=function(e,t,c){var u=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),l=o.ConnectionFactoryBase.getHostSuffix(p),f=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),h=void 0===f?"tts":"voice",d=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+p+"."+h+".speech"+l);u||(u=d+this.synthesisUri);var v={};void 0!==t.token&&""!==t.token&&(v[t.headerName]=t.token),v[s.HeaderNames.ConnectionId]=c,void 0!==f&&(v[a.QueryParameterNames.CustomVoiceDeploymentId]=f),e.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,u);var y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(u,{},v,new i.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(e.parameters),y,c)},e}();e.exports.SpeechSynthesisConnectionFactory=c}),P.register("aUPev",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EnumTranslation=void 0;var r=P("9pfmZ"),n=P("f7AdM"),o=/** @class */function(){function e(){}return e.implTranslateRecognitionResult=function(e){var t=r.ResultReason.Canceled;switch(e){case n.RecognitionStatus.Success:t=r.ResultReason.RecognizedSpeech;break;case n.RecognitionStatus.NoMatch:case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:case n.RecognitionStatus.EndOfDictation:t=r.ResultReason.NoMatch;break;case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:t=r.ResultReason.Canceled}return t},e.implTranslateCancelResult=function(e){var t=r.CancellationReason.EndOfStream;switch(e){case n.RecognitionStatus.Success:case n.RecognitionStatus.EndOfDictation:case n.RecognitionStatus.NoMatch:t=r.CancellationReason.EndOfStream;break;case n.RecognitionStatus.InitialSilenceTimeout:case n.RecognitionStatus.BabbleTimeout:case n.RecognitionStatus.Error:case n.RecognitionStatus.BadRequest:case n.RecognitionStatus.Forbidden:default:t=r.CancellationReason.Error}return t},e.implTranslateCancelErrorCode=function(e){var t=r.CancellationErrorCode.NoError;switch(e){case n.RecognitionStatus.Error:t=r.CancellationErrorCode.ServiceError;break;case n.RecognitionStatus.TooManyRequests:t=r.CancellationErrorCode.TooManyRequests;break;case n.RecognitionStatus.BadRequest:t=r.CancellationErrorCode.BadRequestParameters;break;case n.RecognitionStatus.Forbidden:t=r.CancellationErrorCode.Forbidden;break;default:t=r.CancellationErrorCode.NoError}return t},e.implTranslateErrorDetails=function(e){var t="The speech service encountered an internal error and could not continue.";switch(e){case r.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t},e}();e.exports.EnumTranslation=o}),P.register("kKVVF",function(e,t){var r,n;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RecognitionStatus=e.exports.SynthesisStatus=void 0,/**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */(r=e.exports.SynthesisStatus||(e.exports.SynthesisStatus={}))[r.Success=0]="Success",/**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */r[r.SynthesisEnd=1]="SynthesisEnd",/**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */r[r.Error=2]="Error",(n=e.exports.RecognitionStatus||(e.exports.RecognitionStatus={}))[n.Success=0]="Success",n[n.NoMatch=1]="NoMatch",n[n.InitialSilenceTimeout=2]="InitialSilenceTimeout",n[n.BabbleTimeout=3]="BabbleTimeout",n[n.Error=4]="Error",n[n.EndOfDictation=5]="EndOfDictation",n[n.TooManyRequests=6]="TooManyRequests",n[n.BadRequest=7]="BadRequest",n[n.Forbidden=8]="Forbidden"}),P.register("45xOT",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationSynthesisEnd=void 0;var r=P("f7AdM"),n=/** @class */function(){function e(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.Status])}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"SynthesisStatus",{get:function(){return this.privSynthesisEnd.SynthesisStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FailureReason",{get:function(){return this.privSynthesisEnd.FailureReason},enumerable:!1,configurable:!0}),e}();e.exports.TranslationSynthesisEnd=n}),P.register("5EFRZ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationHypothesis=void 0;var r=P("kwDiF"),n=/** @class */function(){function e(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationHypothesis.Translation},enumerable:!1,configurable:!0}),e}();e.exports.TranslationHypothesis=n}),P.register("aGFIK",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationPhrase=void 0;var r=P("eyacr"),n=P("f7AdM"),o=P("kwDiF"),i=/** @class */function(){function e(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=n.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}return e.fromJSON=function(t){return new e(JSON.parse(t))},e.fromTranslationResponse=function(t){r.Contracts.throwIfNullOrUndefined(t,"translationResponse");var n=t.SpeechPhrase;return t.SpeechPhrase=void 0,n.Translation=t,n.Text=n.DisplayText,new e(n)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privTranslationPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationPhrase.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Confidence",{get:function(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationPhrase.Translation},enumerable:!1,configurable:!0}),e}();e.exports.TranslationPhrase=i}),P.register("8UIs1",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranslationServiceRecognizer=void 0;var s=P("aQGWi"),a=P("9pfmZ"),c=P("f7AdM"),u=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privTranslationRecognizer=i,s.connectionEvents.attach(function(e){"ConnectionEstablishedEvent"===e.name?s.privTranslationRecognizer.onConnection():"ConnectionClosedEvent"===e.name&&s.privTranslationRecognizer.onDisconnection()}),s}return n(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,r,n,u,p,l,f,h,d,v=this;return i(this,function(y){switch(y.label){case 0:return t=new a.PropertyCollection,[4/*yield*/,this.processSpeechMessages(e)];case 1:if(r=y.sent())return[2/*return*/,!0];switch(n=function(n){return o(v,void 0,void 0,function(){var o,s,u,p,l;return i(this,function(i){switch(i.label){case 0:if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+n.Offset+n.Duration),n.RecognitionStatus!==c.RecognitionStatus.Success)return[3/*break*/,1];if(o=this.fireEventForResult(n,t),this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,o);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}// report result to promise.
if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}return[3/*break*/,5];case 1:if(s=c.EnumTranslation.implTranslateRecognitionResult(n.RecognitionStatus),o=new a.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,s,n.Text,n.Duration,this.privRequestSession.currentTurnAudioOffset+n.Offset,n.Language,n.Confidence,void 0,e.textBody,t),s!==a.ResultReason.Canceled)return[3/*break*/,3];return u=c.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus),p=c.EnumTranslation.implTranslateCancelErrorCode(n.RecognitionStatus),[4/*yield*/,this.cancelRecognitionLocal(u,p,c.EnumTranslation.implTranslateErrorDetails(p))];case 2:return i.sent(),[3/*break*/,4];case 3:if(!(this.privRequestSession.isSpeechEnded&&s===a.ResultReason.NoMatch&&n.RecognitionStatus!==c.RecognitionStatus.InitialSilenceTimeout)&&(l=new a.TranslationRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId),this.privTranslationRecognizer.recognized))try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,l);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}// report result to promise.
if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i.label=4;case 4:r=!0,i.label=5;case 5:return[2/*return*/]}})})},e.messageType===s.MessageType.Text&&t.setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":return[3/*break*/,2];case"translation.response":return[3/*break*/,3];case"translation.phrase":return[3/*break*/,6];case"translation.synthesis":return[3/*break*/,8];case"audio.end":case"translation.synthesis.end":return[3/*break*/,9]}return[3/*break*/,10];case 2:if(u=this.fireEventForResult(c.TranslationHypothesis.fromJSON(e.textBody),t),this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+u.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,u);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}return r=!0,[3/*break*/,11];case 3:if(!(p=JSON.parse(e.textBody)).SpeechPhrase)return[3/*break*/,5];return[4/*yield*/,n(c.TranslationPhrase.fromTranslationResponse(p))];case 4:y.sent(),y.label=5;case 5:case 10:return[3/*break*/,11];case 6:return[4/*yield*/,n(c.TranslationPhrase.fromJSON(e.textBody))];case 7:return y.sent(),[3/*break*/,11];case 8:return this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0,[3/*break*/,11];case 9:switch((l=c.TranslationSynthesisEnd.fromJSON(e.textBody)).SynthesisStatus){case c.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){f=new a.TranslationSynthesisResult(a.ResultReason.Canceled,void 0),h=new a.TranslationSynthesisEventArgs(f,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}}if(this.privTranslationRecognizer.canceled){d=new a.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,a.CancellationReason.Error,l.FailureReason,a.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}}break;case c.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}return r=!0,[3/*break*/,11];case 11:return[2/*return*/,r]}})})},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){var i=new a.PropertyCollection;if(i.setProperty(c.CancellationErrorCodePropertyName,a.CancellationErrorCode[n]),this.privTranslationRecognizer.canceled){var s=new a.TranslationRecognitionCanceledEventArgs(e,r,o,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,s);/* eslint-disable no-empty */}catch(e){}}if(this.privSuccessCallback){var u=new a.TranslationRecognitionResult(void 0,t,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,i);try{this.privSuccessCallback(u),/* eslint-disable no-empty */this.privSuccessCallback=void 0}catch(e){}}},t.prototype.handleRecognizingCallback=function(e,t,r){try{var n=new a.TranslationRecognitionEventArgs(a.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,r);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}},t.prototype.handleRecognizedCallback=function(e,t,r){try{var n=new a.TranslationRecognitionEventArgs(a.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,r);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,n)}catch(e){// Not going to let errors in the event handler
// trip things up.
}},t.prototype.fireEventForResult=function(e,t){if(void 0!==e.Translation.Translations){r=new a.Translations;for(var r,n,o,i,u=0,p=e.Translation.Translations;u<p.length;u++){var l=p[u];r.set(l.Language,l.Text||l.DisplayText)}}e instanceof c.TranslationPhrase?(n=e.Translation&&e.Translation.TranslationStatus===s.TranslationStatus.Success?a.ResultReason.TranslatedSpeech:a.ResultReason.RecognizedSpeech,o=e.Language,i=e.Confidence):n=a.ResultReason.TranslatingSpeech;var f=e.Offset+this.privRequestSession.currentTurnAudioOffset,h=new a.TranslationRecognitionResult(r,this.privRequestSession.requestId,n,e.Text,e.Duration,f,o,i,e.Translation.FailureReason,JSON.stringify(e),t);return new a.TranslationRecognitionEventArgs(h,f,this.privRequestSession.sessionId)},t.prototype.sendSynthesisAudio=function(e,t){var r=void 0===e?a.ResultReason.SynthesizingAudioCompleted:a.ResultReason.SynthesizingAudio,n=new a.TranslationSynthesisResult(r,e),o=new a.TranslationSynthesisEventArgs(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,o);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}},t}(c.ConversationServiceRecognizer);e.exports.TranslationServiceRecognizer=u}),P.register("fVMYt",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechDetected=void 0;var r=/** @class */function(){function e(e){this.privSpeechStartDetected=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechStartDetected.Offset},enumerable:!1,configurable:!0}),e}();e.exports.SpeechDetected=r}),P.register("g7bOa",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechHypothesis=void 0;var r=/** @class */function(){function e(e){this.privSpeechHypothesis=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSpeechHypothesis.SpeakerId},enumerable:!1,configurable:!0}),e}();e.exports.SpeechHypothesis=r}),P.register("KpUNJ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechKeyword=void 0;var r=/** @class */function(){function e(e){this.privSpeechKeyword=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Status",{get:function(){return this.privSpeechKeyword.Status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechKeyword.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechKeyword.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechKeyword.Duration},enumerable:!1,configurable:!0}),e}();e.exports.SpeechKeyword=r}),P.register("foEJC",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechServiceRecognizer=void 0;var s=P("9pfmZ"),a=P("f7AdM"),c=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privSpeechRecognizer=i,s}return n(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,r,n,o,c,u,p,l,f,h,d,v,y,g;return i(this,function(i){switch(i.label){case 0:switch((r=new s.PropertyCollection).setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),n=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3/*break*/,1];case"speech.phrase":return[3/*break*/,2]}return[3/*break*/,6];case 1:if(c=(o=a.SpeechHypothesis.fromJSON(e.textBody)).Offset+this.privRequestSession.currentTurnAudioOffset,t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,o.Text,o.Duration,c,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(c),u=new s.SpeechRecognitionEventArgs(t,o.Duration,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}return n=!0,[3/*break*/,7];case 2:if(p=a.SimpleSpeechPhrase.fromJSON(e.textBody),l=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),s.ResultReason.Canceled!==l)return[3/*break*/,4];return f=a.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),h=a.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),[4/*yield*/,this.cancelRecognitionLocal(f,h,a.EnumTranslation.implTranslateErrorDetails(h))];case 3:return i.sent(),[3/*break*/,5];case 4:if(!(this.privRequestSession.isSpeechEnded&&l===s.ResultReason.NoMatch&&p.RecognitionStatus!==a.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName)===s.OutputFormat[s.OutputFormat.Simple]?t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,l,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,e.textBody,r):(v=(d=a.DetailedSpeechPhrase.fromJSON(e.textBody)).Offset+this.privRequestSession.currentTurnAudioOffset,y=d.getJsonWithCorrectedOffsets(v),t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,l,d.RecognitionStatus===a.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,v,d.Language,d.LanguageDetectionConfidence,void 0,void 0,y,r)),g=new s.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognized))try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,g);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i.label=5;case 5:return n=!0,[3/*break*/,7];case 6:return[3/*break*/,7];case 7:return[2/*return*/,n]}})})},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){var i=new s.PropertyCollection;if(i.setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){var c=new s.SpeechRecognitionCanceledEventArgs(r,o,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,c);/* eslint-disable no-empty */}catch(e){}}if(this.privSuccessCallback){var u=new s.SpeechRecognitionResult(t,s.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,i);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0;/* eslint-disable no-empty */}catch(e){}}},t}(a.ServiceRecognizerBase);e.exports.SpeechServiceRecognizer=c}),P.register("jd3sg",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranscriptionServiceRecognizer=void 0;var s=P("9pfmZ"),a=P("f7AdM"),c=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privConversationTranscriber=i,s.setSpeakerDiarizationJson(),s}return n(t,e),t.prototype.setSpeakerDiarizationJson=function(){if(this.privEnableSpeakerId){var e=this.privSpeechContext.getSection("phraseDetection"),t={};t.mode="Anonymous",t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,r,n,o,c,u,p,l,f,h,d,v,y,g;return i(this,function(i){switch(i.label){case 0:switch((r=new s.PropertyCollection).setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),n=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3/*break*/,1];case"speech.phrase":return[3/*break*/,2]}return[3/*break*/,6];case 1:if(c=(o=a.SpeechHypothesis.fromJSON(e.textBody)).Offset+this.privRequestSession.currentTurnAudioOffset,t=new s.ConversationTranscriptionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,o.Text,o.Duration,c,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(c),u=new s.ConversationTranscriptionEventArgs(t,o.Duration,this.privRequestSession.sessionId),this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,u);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}return n=!0,[3/*break*/,7];case 2:if(p=a.SimpleSpeechPhrase.fromJSON(e.textBody),l=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),s.ResultReason.Canceled!==l)return[3/*break*/,4];return f=a.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),h=a.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),[4/*yield*/,this.cancelRecognitionLocal(f,h,a.EnumTranslation.implTranslateErrorDetails(h))];case 3:return i.sent(),[3/*break*/,5];case 4:if(!(this.privRequestSession.isSpeechEnded&&l===s.ResultReason.NoMatch&&p.RecognitionStatus!==a.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName)===s.OutputFormat[s.OutputFormat.Simple]?t=new s.ConversationTranscriptionResult(this.privRequestSession.requestId,l,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,e.textBody,r):(v=(d=a.DetailedSpeechPhrase.fromJSON(e.textBody)).Offset+this.privRequestSession.currentTurnAudioOffset,y=d.getJsonWithCorrectedOffsets(v),t=new s.ConversationTranscriptionResult(this.privRequestSession.requestId,l,d.RecognitionStatus===a.RecognitionStatus.Success?d.NBest[0].Display:void 0,d.Duration,v,d.Language,d.LanguageDetectionConfidence,p.SpeakerId,void 0,y,r)),g=new s.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privConversationTranscriber.transcribed))try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,g);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}i.label=5;case 5:return n=!0,[3/*break*/,7];case 6:return[3/*break*/,7];case 7:return[2/*return*/,n]}})})},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){if(new s.PropertyCollection().setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[n]),this.privConversationTranscriber.canceled){var i=new s.ConversationTranscriptionCanceledEventArgs(r,o,n,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,i);/* eslint-disable no-empty */}catch(e){}}},t}(a.ServiceRecognizerBase);e.exports.ConversationTranscriptionServiceRecognizer=c}),P.register("6zidg",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranscriptionServiceRecognizer=void 0;var s=P("aQGWi"),a=P("9pfmZ"),c=P("f7AdM"),u=P("hyC1Q"),p=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privTranscriberRecognizer=i,s.sendPrePayloadJSONOverride=function(e){return s.sendTranscriptionStartJSON(e)},"true"===s.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&s.privSpeechContext.setWordLevelTimings(),s}return n(t,e),t.prototype.sendSpeechEventAsync=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:if(!this.privRequestSession.isRecognizing)return[3/*break*/,3];return[4/*yield*/,this.fetchConnection()];case 1:return r=n.sent(),[4/*yield*/,this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))];case 2:n.sent(),n.label=3;case 3:return[2/*return*/]}})})},t.prototype.sendMeetingSpeechEventAsync=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:if(!this.privRequestSession.isRecognizing)return[3/*break*/,3];return[4/*yield*/,this.fetchConnection()];case 1:return r=n.sent(),[4/*yield*/,this.sendSpeechEvent(r,this.createMeetingSpeechEventPayload(e,t))];case 2:n.sent(),n.label=3;case 3:return[2/*return*/]}})})},t.prototype.processTypeSpecificMessages=function(e){return this.processSpeechMessages(e)},t.prototype.handleRecognizedCallback=function(e,t,r){try{var n=new a.SpeechRecognitionEventArgs(e,t,r);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,n),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}},t.prototype.handleRecognizingCallback=function(e,t,r){try{var n=new a.SpeechRecognitionEventArgs(e,t,r);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,n);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){var i=new a.PropertyCollection;if(i.setProperty(c.CancellationErrorCodePropertyName,a.CancellationErrorCode[n]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){var s=new a.MeetingTranscriptionCanceledEventArgs(r,o,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,s);/* eslint-disable no-empty */}catch(e){}}}else if(this.privTranscriberRecognizer.canceled){var s=new a.ConversationTranscriptionCanceledEventArgs(r,o,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,s);/* eslint-disable no-empty */}catch(e){}}if(this.privSuccessCallback){var u=new a.SpeechRecognitionResult(t,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,i);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0;/* eslint-disable no-empty */}catch(e){}}},// Encapsulated for derived service recognizers that need to send additional JSON
t.prototype.sendTranscriptionStartJSON=function(e){return o(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return[4/*yield*/,this.sendSpeechContext(e,!0)];case 1:if(n.sent(),!this.privTranscriberRecognizer.IsMeetingRecognizer())return[3/*break*/,3];return t=this.privTranscriberRecognizer.getMeetingInfo(),r=this.createMeetingSpeechEventPayload(t,"start"),[4/*yield*/,this.sendSpeechEvent(e,r)];case 2:return n.sent(),[3/*break*/,5];case 3:return t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start"),[4/*yield*/,this.sendSpeechEvent(e,r)];case 4:n.sent(),n.label=5;case 5:return[4/*yield*/,this.sendWaveHeader(e)];case 6:return n.sent(),[2/*return*/]}})})},t.prototype.sendSpeechEvent=function(e,t){var r=JSON.stringify(t);if(r)return e.send(new u.SpeechConnectionMessage(s.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))},t.prototype.createSpeechEventPayload=function(e,t){var r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r},t.prototype.createMeetingSpeechEventPayload=function(e,t){var r={id:"meeting",name:t,meeting:e.meetingProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r},t}(c.ConversationServiceRecognizer);e.exports.TranscriptionServiceRecognizer=p}),P.register("bviRa",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DetailedSpeechPhrase=void 0;var r=P("f7AdM"),n=/** @class */function(){function e(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},e.prototype.getJsonWithCorrectedOffsets=function(e){if(this.privDetailedSpeechPhrase.NBest){for(var t=void 0,r=0,n=this.privDetailedSpeechPhrase.NBest;r<n.length;r++){var o=n[r];if(o.Words&&o.Words[0]){t=o.Words[0].Offset;break}}if(t&&t<e)for(var i=e-t,s=0,a=this.privDetailedSpeechPhrase.NBest;s<a.length;s++){var c=a[s];if(c.Words)for(var u=0,p=c.Words;u<p.length;u++){var l=p[u];l.Offset+=i}if(c.DisplayWords)for(var f=0,h=c.DisplayWords;f<h.length;f++){var l=h[f];l.Offset+=i}}}return JSON.stringify(this.privDetailedSpeechPhrase)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privDetailedSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NBest",{get:function(){return this.privDetailedSpeechPhrase.NBest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privDetailedSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privDetailedSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privDetailedSpeechPhrase.SpeakerId},enumerable:!1,configurable:!0}),e}();e.exports.DetailedSpeechPhrase=n}),P.register("hQxFe",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SimpleSpeechPhrase=void 0;var r=P("f7AdM"),n=/** @class */function(){function e(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privSimpleSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DisplayText",{get:function(){return this.privSimpleSpeechPhrase.DisplayText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSimpleSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSimpleSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSimpleSpeechPhrase.SpeakerId},enumerable:!1,configurable:!0}),e}();e.exports.SimpleSpeechPhrase=n}),P.register("afxEW",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AddedLmIntent=void 0,e.exports.AddedLmIntent=/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */function(e,t){this.modelImpl=e,this.intentName=t}}),P.register("fuBRi",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentServiceRecognizer=void 0;var o=P("aQGWi"),i=P("9pfmZ"),s=P("f7AdM"),a=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privIntentRecognizer=i,s.privIntentDataSent=!1,s}return n(t,e),t.prototype.setIntents=function(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0},t.prototype.processTypeSpecificMessages=function(e){var t,r,n=this,a=!1,c=new i.PropertyCollection;switch(e.messageType===o.MessageType.Text&&c.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":var u=s.SpeechHypothesis.fromJSON(e.textBody);if(t=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,i.ResultReason.RecognizingIntent,u.Text,u.Duration,u.Offset+this.privRequestSession.currentTurnAudioOffset,u.Language,u.LanguageDetectionConfidence,void 0,e.textBody,c),this.privRequestSession.onHypothesis(t.offset),r=new i.IntentRecognitionEventArgs(t,u.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}a=!0;break;case"speech.phrase":var p=s.SimpleSpeechPhrase.fromJSON(e.textBody);t=new i.IntentRecognitionResult(void 0,this.privRequestSession.requestId,s.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,e.textBody,c),r=new i.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),!1===this.privIntentDataSent||i.ResultReason.NoMatch===r.result.reason?(// Advance the buffers.
this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),function(){if(n.privIntentRecognizer.recognized)try{n.privIntentRecognizer.recognized(n.privIntentRecognizer,r);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}// report result to promise.
if(n.privSuccessCallback){try{n.privSuccessCallback(t)}catch(e){n.privErrorCallback&&n.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
n.privSuccessCallback=void 0,n.privErrorCallback=void 0}}()):// and then return
this.privPendingIntentArgs=r,a=!0;break;case"response":if(// Response from LUIS
r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===r){if(""===e.textBody)// audio sent to the service.
return;// Odd... Not sure this can happen
r=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult,0,this.privRequestSession.sessionId)}var l=s.IntentResponse.fromJSON(e.textBody);// If LUIS didn't return anything, send the existing event, else
// modify it to show the match.
// See if the intent found is in the list of intents asked for.
if(null!==l&&l.topScoringIntent&&l.topScoringIntent.intent){var f=this.privAddedLmIntents[l.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(f=this.privUmbrellaIntent),f){var h=void 0===f||void 0===f.intentName?l.topScoringIntent.intent:f.intentName,d=r.result.reason;void 0!==h&&(d=i.ResultReason.RecognizedIntent);// make sure, properties is set.
var v=void 0!==r.result.properties?r.result.properties:new i.PropertyCollection;v.setProperty(i.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new i.IntentRecognitionEventArgs(new i.IntentRecognitionResult(h,r.result.resultId,d,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,v),r.offset,r.sessionId)}}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}// report result to promise.
if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}a=!0}var y=new o.Deferred;return y.resolve(a),y.promise},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){var a=new i.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[n]),this.privIntentRecognizer.canceled){var c=new i.IntentRecognitionCanceledEventArgs(r,o,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,c);/* eslint-disable no-empty */}catch(e){}}if(this.privSuccessCallback){var u=new i.IntentRecognitionResult(void 0,t,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,o,void 0,a);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0;/* eslint-disable no-empty */}catch(e){}}},t}(s.ServiceRecognizerBase);e.exports.IntentServiceRecognizer=a}),P.register("98T6H",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.IntentResponse=void 0;var r=/** @class */function(){function e(e){""===e?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"query",{get:function(){return this.privIntentResponse.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topScoringIntent",{get:function(){return this.privIntentResponse.topScoringIntent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.privIntentResponse.entities},enumerable:!1,configurable:!0}),e}();e.exports.IntentResponse=r}),P.register("hRQw8",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("aZTMF",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RequestSession=void 0;var o=P("aQGWi"),i=P("dpFUI"),s=P("bJ6R2"),a=/** @class */function(){function e(e){this.privIsDisposed=!1,this.privDetachables=[],this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=o.createNoDashGuid(),this.privAudioNodeId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,// We're not in a turn, so resolve.
this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpeechEnded",{get:function(){return this.privIsSpeechEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRecognizing",{get:function(){return this.privIsRecognizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTurnAudioOffset",{get:function(){return this.privTurnStartAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recogNumber",{get:function(){return this.privRecogNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numConnectionAttempts",{get:function(){return this.privConnectionAttempts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesSent",{// The number of bytes sent for the current connection.
// Counter is reset to 0 each time a connection is established.
get:function(){return this.privBytesSent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionBytesSent",{// The number of bytes sent for the current recognition.
// Counter is reset to 0 each time recognition is started.
get:function(){return this.privRecognitionBytesSent},enumerable:!1,configurable:!0}),e.prototype.listenForServiceTelemetry=function(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))},e.prototype.startNewRecognition=function(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new i.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))},e.prototype.onAudioSourceAttachCompleted=function(e,t){return r(this,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:if(this.privAudioNode=e,this.privIsAudioNodeDetached=!1,!t)return[3/*break*/,2];return[4/*yield*/,this.onComplete()];case 1:return r.sent(),[3/*break*/,3];case 2:this.onEvent(new i.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId)),r.label=3;case 3:return[2/*return*/]}})})},e.prototype.onPreConnectionStart=function(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new i.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))},e.prototype.onAuthCompleted=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(!e)return[3/*break*/,2];return[4/*yield*/,this.onComplete()];case 1:t.sent(),t.label=2;case 2:return[2/*return*/]}})})},// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.onConnectionEstablishCompleted=function(e,t){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(200!==e)return[3/*break*/,1];return this.onEvent(new i.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0,[2/*return*/];case 1:if(403!==e)return[3/*break*/,3];return[4/*yield*/,this.onComplete()];case 2:t.sent(),t.label=3;case 3:return[2/*return*/]}})})},e.prototype.onServiceTurnEndResponse=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privTurnDeferral.resolve(),!(!e||this.isSpeechEnded))return[3/*break*/,2];return[4/*yield*/,this.onComplete()];case 1:return t.sent(),this.privInTurn=!1,[3/*break*/,3];case 2:// Start a new request set.
this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay(),t.label=3;case 3:return[2/*return*/]}})})},e.prototype.onSpeechContext=function(){this.privRequestId=o.createNoDashGuid()},e.prototype.onServiceTurnStartResponse=function(){this.privTurnDeferral&&this.privInTurn&&(// What? How are we starting a turn with another not done?
this.privTurnDeferral.reject("Another turn started before current completed."),// Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privTurnDeferral.promise.then().catch(function(){})),this.privInTurn=!0,this.privTurnDeferral=new o.Deferred},e.prototype.onHypothesis=function(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))},e.prototype.onPhraseRecognized=function(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)},e.prototype.onServiceRecognized=function(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0},e.prototype.onAudioSent=function(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e},e.prototype.onRetryConnection=function(){this.privConnectionAttempts++},e.prototype.dispose=function(){return r(this,void 0,void 0,function(){var e,t;return n(this,function(r){switch(r.label){case 0:if(this.privIsDisposed)return[3/*break*/,5];// we should have completed by now. If we did not its an unknown error.
this.privIsDisposed=!0,e=0,t=this.privDetachables,r.label=1;case 1:if(!(e<t.length))return[3/*break*/,4];return[4/*yield*/,t[e].detach()];case 2:r.sent(),r.label=3;case 3:return e++,[3/*break*/,1];case 4:this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1,r.label=5;case 5:return[2/*return*/]}})})},e.prototype.getTelemetry=function(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null},e.prototype.onStopRecognizing=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.onComplete()];case 1:return e.sent(),[2/*return*/]}})})},// Should be called with the audioNode for this session has indicated that it is out of speech.
e.prototype.onSpeechEnded=function(){this.privIsSpeechEnded=!0},e.prototype.onEvent=function(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),o.Events.instance.onEvent(e)},e.prototype.onComplete=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!this.privIsRecognizing)return[3/*break*/,2];return this.privIsRecognizing=!1,[4/*yield*/,this.detachAudioNode()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},e.prototype.detachAudioNode=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,!this.privAudioNode))return[3/*break*/,2];return[4/*yield*/,this.privAudioNode.detach()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},e}();e.exports.RequestSession=a}),P.register("bJ6R2",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ServiceTelemetryListener=void 0;var r=P("aQGWi"),n=P("dpFUI"),o=/** @class */function(){function e(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}return e.prototype.phraseReceived=function(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)},e.prototype.hypothesisReceived=function(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)},e.prototype.onEvent=function(e){!this.privIsDisposed&&(e instanceof n.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof r.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof r.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof r.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime}),e instanceof r.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime}),e instanceof r.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&!this.privMicMetric&&(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime}),e instanceof n.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof r.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof r.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),e instanceof r.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&!this.privConnectionEstablishMetric&&(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime}),e instanceof r.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=[]),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime))},e.prototype.getTelemetry=function(){var e=[];this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});var t=JSON.stringify({Metrics:e,ReceivedMessages:this.privReceivedMessages});return(// We dont want to send the same telemetry again. So clean those out.
this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],t)},Object.defineProperty(e.prototype,"hasTelemetry",{// Determines if there are any telemetry events to send to the service.
get:function(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.privIsDisposed=!0},e.prototype.getConnectionError=function(e){/*
        -- Websocket status codes --
        NormalClosure = 1000,
        EndpointUnavailable = 1001,
        ProtocolError = 1002,
        InvalidMessageType = 1003,
        Empty = 1005,
        InvalidPayloadData = 1007,
        PolicyViolation = 1008,
        MessageTooBig = 1009,
        MandatoryExtension = 1010,
        InternalServerError = 1011
        */switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},e}();e.exports.ServiceTelemetryListener=o}),P.register("4IY4X",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeechContext=void 0;/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */var r=/** @class */function(){function e(e){this.privContext={},this.privDynamicGrammar=e}return(/**
     * Gets a section of the speech.context object.
     * @param sectionName Name of the section to get.
     * @return string or Context JSON serializable object that represents the value.
     */e.prototype.getSection=function(e){return this.privContext[e]||{}},/**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */e.prototype.setSection=function(e,t){this.privContext[e]=t},/**
     * @Internal
     * This is only used by pronunciation assessment config.
     * Do not use externally, object returned will change without warning or notice.
     */e.prototype.setPronunciationAssessmentParams=function(e,t){void 0===t&&(t=!1),void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),t&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR")},e.prototype.setDetailedOutputFormat=function(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"},e.prototype.setWordLevelTimings=function(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")},e.prototype.setSpeakerDiarizationAudioOffsetMs=function(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e},e.prototype.toJSON=function(){var e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)},e)}();e.exports.SpeechContext=r}),P.register("lxqu7",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DynamicGrammarBuilder=void 0;/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */var r=/** @class */function(){function e(){}return(// Adds one more reference phrases to the dynamic grammar to send.
// All added phrases are generic phrases.
e.prototype.addPhrase=function(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)},// Clears all phrases stored in the current object.
e.prototype.clearPhrases=function(){this.privPhrases=void 0},// Adds one or more reference grammars to the current grammar.
e.prototype.addReferenceGrammar=function(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)},// clears all grammars stored on the recognizer.
e.prototype.clearGrammars=function(){this.privGrammars=void 0},// Generates an object that represents the dynamic grammar used by the Speech Service.
// This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
// of a DynamicGrammarBuilder
e.prototype.generateGrammarObject=function(){if(void 0!==this.privGrammars||void 0!==this.privPhrases){var e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){var t=[];this.privPhrases.forEach(function(e){t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}},e)}();e.exports.DynamicGrammarBuilder=r}),P.register("cbLPJ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0})}),P.register("j739h",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogServiceAdapter=void 0;var s=P("8nLmq"),a=P("haGs1"),c=P("aQGWi"),u=P("8t1AB"),p=P("9pfmZ"),l=P("13Yp9"),f=P("f7AdM"),h=P("hyz2q"),d=P("hyC1Q"),v=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privEvents=new c.EventSource,s.privDialogServiceConnector=i,s.receiveMessageOverride=function(){return s.receiveDialogMessageOverride()},s.privTurnStateManager=new l.DialogServiceTurnStateManager,s.recognizeOverride=function(e,t,r){return s.listenOnce(e,t,r)},s.postConnectImplOverride=function(e){return s.dialogConnectImpl(e)},s.configConnectionOverride=function(e){return s.configConnection(e)},s.disconnectOverride=function(){return s.privDisconnect()},s.privDialogAudioSource=n,s.agentConfigSent=!1,s.privLastResult=null,s.connectionEvents.attach(function(e){"ConnectionClosedEvent"===e.name&&(s.terminateMessageLoop=!0)}),s}return n(t,e),t.prototype.sendMessage=function(e){return o(this,void 0,void 0,function(){var t,r,n;return i(this,function(o){switch(o.label){case 0:return t=c.createGuid(),r=c.createNoDashGuid(),n=JSON.stringify({context:{interactionId:t},// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
messagePayload:JSON.parse(e),version:.5}),[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,o.sent().send(new d.SpeechConnectionMessage(c.MessageType.Text,"agent",r,"application/json",n))];case 2:return o.sent(),[2/*return*/]}})})},t.prototype.privDisconnect=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,p.CancellationReason.Error,p.CancellationErrorCode.NoError,"Disconnecting")];case 1:return e.sent(),this.terminateMessageLoop=!0,this.agentConfigSent=!1,[2/*return*/]}})})},t.prototype.processTypeSpecificMessages=function(e){var t,r,n=new p.PropertyCollection;switch(e.messageType===c.MessageType.Text&&n.setProperty(p.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":var o=f.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),o.RecognitionStatus!==f.RecognitionStatus.TooManyRequests&&o.RecognitionStatus!==f.RecognitionStatus.Error){var i=this.fireEventForResult(o,n);if(this.privLastResult=i.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,i);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}}r=!0;break;case"speech.hypothesis":var s=f.SpeechHypothesis.fromJSON(e.textBody),a=s.Offset+this.privRequestSession.currentTurnAudioOffset;t=new p.SpeechRecognitionResult(this.privRequestSession.requestId,p.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(a);var u=new p.SpeechRecognitionEventArgs(t,s.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}r=!0;break;case"speech.keyword":var l=f.SpeechKeyword.fromJSON(e.textBody);t=new p.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===l.Status?p.ResultReason.RecognizedKeyword:p.ResultReason.NoMatch,l.Text,l.Duration,l.Offset,void 0,void 0,void 0,void 0,e.textBody,n),"Accepted"!==l.Status&&(this.privLastResult=t);var h=new p.SpeechRecognitionEventArgs(t,t.duration,t.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,h);/* eslint-disable no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}r=!0;break;case"audio":var d=e.requestId.toUpperCase(),v=this.privTurnStateManager.GetTurn(d);try{e.binaryBody?v.audioStream.write(e.binaryBody):v.endAudioStream()}catch(e){// Not going to let errors in the event handler
// trip things up.
}r=!0;break;case"response":this.handleResponseMessage(e),r=!0}var y=new c.Deferred;return y.resolve(r),y.promise},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,s){return o(this,void 0,void 0,function(){var t,o,a;return i(this,function(i){switch(i.label){case 0:if(this.terminateMessageLoop=!0,!this.privRequestSession.isRecognizing)return[3/*break*/,2];return[4/*yield*/,this.privRequestSession.onStopRecognizing()];case 1:i.sent(),i.label=2;case 2:if(this.privDialogServiceConnector.canceled){(t=new p.PropertyCollection).setProperty(f.CancellationErrorCodePropertyName,p.CancellationErrorCode[n]),o=new p.SpeechRecognitionCanceledEventArgs(r,s,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o);/* eslint-disable no-empty */}catch(e){}if(this.privSuccessCallback){a=new p.SpeechRecognitionResult(void 0,p.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,t);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0;/* eslint-disable no-empty */}catch(e){}}}return[2/*return*/]}})})},t.prototype.listenOnce=function(e,t,r){return o(this,void 0,void 0,function(){var n,a,c,u,l,f,h,d,v=this;return i(this,function(y){switch(y.label){case 0:return this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(p.PropertyId.Speech_SessionId,this.privRequestSession.sessionId),n=this.connectImpl(),a=this.sendPreAudioMessages(),[4/*yield*/,this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId)];case 1:return c=y.sent(),[4/*yield*/,this.privDialogAudioSource.format];case 2:return u=y.sent(),[4/*yield*/,this.privDialogAudioSource.deviceInfo];case 3:return l=y.sent(),f=new s.ReplayableAudioNode(c,u.avgBytesPerSec),[4/*yield*/,this.privRequestSession.onAudioSourceAttachCompleted(f,!1)];case 4:y.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l},y.label=5;case 5:return y.trys.push([5,8,,10]),[4/*yield*/,n];case 6:return y.sent(),[4/*yield*/,a];case 7:return y.sent(),[3/*break*/,10];case 8:return h=y.sent(),[4/*yield*/,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,p.CancellationReason.Error,p.CancellationErrorCode.ConnectionFailure,h)];case 9:return y.sent(),[2/*return*/,Promise.resolve()];case 10:return d=new p.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),// /* eslint-disable no-empty */
this.sendAudio(f).then(function(){},function(e){return o(v,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,p.CancellationReason.Error,p.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2/*return*/]}})})}),[2/*return*/]}})})},// Establishes a websocket connection to the end point.
t.prototype.dialogConnectImpl=function(e){return this.privConnectionLoop=this.startMessageLoop(),e},t.prototype.receiveDialogMessageOverride=function(){var e=this,t=new c.Deferred,r=function(){return o(e,void 0,void 0,function(){var e,n,o,s,a,u,l,h,v,y,g,m;return i(this,function(i){switch(i.label){case 0:if(i.trys.push([0,14,,15]),e=this.isDisposed(),n=!this.isDisposed()&&this.terminateMessageLoop,e||n)return(// We're done.
t.resolve(void 0),[2/*return*/]);return[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,i.sent().read()];case 2:if(!(o=i.sent()))return[2/*return*/,r()];switch((s=d.SpeechConnectionMessage.fromConnectionMessage(o)).path.toLowerCase()){case"turn.start":return[3/*break*/,3];case"speech.startdetected":return[3/*break*/,4];case"speech.enddetected":return[3/*break*/,5];case"turn.end":return[3/*break*/,6]}return[3/*break*/,10];case 3:return(a=s.requestId.toUpperCase())!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(a):this.privRequestSession.onServiceTurnStartResponse(),[3/*break*/,13];case 4:return u=f.SpeechDetected.fromJSON(s.textBody),l=new p.RecognitionEventArgs(u.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,l),[3/*break*/,13];case 5:return h=void 0,h=s.textBody.length>0?s.textBody:"{ Offset: 0 }",v=f.SpeechDetected.fromJSON(h),this.privRequestSession.onServiceRecognized(v.Offset+this.privRequestSession.currentTurnAudioOffset),y=new p.RecognitionEventArgs(v.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,y),[3/*break*/,13];case 6:if(!((g=s.requestId.toUpperCase())!==this.privRequestSession.requestId.toUpperCase()))return[3/*break*/,7];return this.privTurnStateManager.CompleteTurn(g),[3/*break*/,9];case 7:return m=new p.SessionEventArgs(this.privRequestSession.sessionId),[4/*yield*/,this.privRequestSession.onServiceTurnEndResponse(!1)];case 8:// report result to promise.
if(i.sent(),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=void 0,this.privErrorCallback=void 0}i.label=9;case 9:return[3/*break*/,13];case 10:return i.trys.push([10,12,,13]),[4/*yield*/,this.processTypeSpecificMessages(s)];case 11:return!i.sent()&&this.serviceEvents&&this.serviceEvents.onEvent(new c.ServiceEvent(s.path.toLowerCase(),s.textBody)),[3/*break*/,13];case 12:return i.sent(),[3/*break*/,13];case 13:return[2/*return*/,r()];case 14:return i.sent(),this.terminateMessageLoop=!0,t.resolve(),[3/*break*/,15];case 15:return[2/*return*/]}})})};return r().catch(function(e){c.Events.instance.onEvent(new c.BackgroundEvent(e))}),t.promise},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:this.terminateMessageLoop=!1,t.label=1;case 1:return t.trys.push([1,3,,5]),[4/*yield*/,this.receiveDialogMessageOverride()];case 2:case 4:return t.sent(),[3/*break*/,5];case 3:return e=t.sent(),[4/*yield*/,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,p.CancellationReason.Error,p.CancellationErrorCode.RuntimeError,e)];case 5:return[2/*return*/,Promise.resolve()]}})})},// Takes an established websocket connection to the endpoint and sends speech configuration information.
t.prototype.configConnection=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(this.terminateMessageLoop)return this.terminateMessageLoop=!1,[2/*return*/,Promise.reject("Connection to service terminated.")];return[4/*yield*/,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 1:return t.sent(),[4/*yield*/,this.sendAgentConfig(e)];case 2:return t.sent(),[2/*return*/,e]}})})},t.prototype.sendPreAudioMessages=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return e=t.sent(),this.addKeywordContextData(),[4/*yield*/,this.sendSpeechContext(e,!0)];case 2:return t.sent(),[4/*yield*/,this.sendAgentContext(e)];case 3:return t.sent(),[4/*yield*/,this.sendWaveHeader(e)];case 4:return t.sent(),[2/*return*/]}})})},t.prototype.sendAgentConfig=function(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(p.PropertyId.Conversation_DialogType)===p.DialogServiceConfig.DialogTypes.CustomCommands){var t=this.agentConfig.get();t.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(t)}this.onEvent(new a.SendingAgentContextMessageEvent(this.agentConfig));var r=this.agentConfig.toJsonString();return(// guard against sending this multiple times on one connection
this.agentConfigSent=!0,e.send(new d.SpeechConnectionMessage(c.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",r)))}},t.prototype.sendAgentContext=function(e){var t=JSON.stringify({channelData:"",context:{interactionId:c.createGuid()},messagePayload:this.privDialogServiceConnector.properties.getProperty(p.PropertyId.Conversation_Speech_Activity_Template),version:.5});return e.send(new d.SpeechConnectionMessage(c.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",t))},t.prototype.fireEventForResult=function(e,t){var r=f.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,o=new p.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new p.SpeechRecognitionEventArgs(o,n,this.privRequestSession.sessionId)},t.prototype.handleResponseMessage=function(e){// "response" messages can contain either "message" (activity) or "MessageStatus" data. Fire the appropriate
// event according to the message type that's specified.
var t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":var r=e.requestId.toUpperCase(),n=h.ActivityPayloadResponse.fromJSON(e.textBody),o=this.privTurnStateManager.GetTurn(r);// update the conversation Id
if(n.conversationId){var i=this.agentConfig.get();i.botInfo.conversationId=n.conversationId,this.agentConfig.set(i)}var s=o.processActivityPayload(n,u.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(p.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new p.ActivityReceivedEventArgs(n.messagePayload,s);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,a);/* eslint-disable-next-line no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new p.TurnStatusReceivedEventArgs(e.textBody));/* eslint-disable-next-line no-empty */}catch(e){// Not going to let errors in the event handler
// trip things up.
}break;default:c.Events.instance.onEvent(new c.BackgroundEvent("Unexpected response of type "+t.messageType+". Ignoring."))}},t.prototype.onEvent=function(e){this.privEvents.onEvent(e),c.Events.instance.onEvent(e)},t.prototype.addKeywordContextData=function(){var e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0!==e){for(var t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),o=void 0===t?[]:t.split(";"),i=void 0===r?[]:r.split(";"),s=[],a=0;a<n.length;a++){var c={};c.text=n[a],a<o.length&&(c.offset=Number(o[a])),a<i.length&&(c.duration=Number(i[a])),s.push(c)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}},t}(f.ServiceRecognizerBase);e.exports.DialogServiceAdapter=v}),P.register("13Yp9",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogServiceTurnStateManager=void 0;var r=P("k9bMn"),n=P("91efN"),o=/** @class */function(){function e(){this.privTurnMap=new Map}return e.prototype.StartTurn=function(e){if(this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+e);var t=new n.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)},e.prototype.GetTurn=function(e){return this.privTurnMap.get(e)},e.prototype.CompleteTurn=function(e){if(!this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);var t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t},e}();e.exports.DialogServiceTurnStateManager=o}),P.register("91efN",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DialogServiceTurnState=void 0;var r=P("8t1AB"),n=P("cyBvg"),o=P("hyz2q"),i=/** @class */function(){function e(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}return Object.defineProperty(e.prototype,"audioStream",{get:function(){return(// Called when is needed to stream.
this.resetTurnEndTimeout(),this.privAudioStream)},enumerable:!1,configurable:!0}),e.prototype.processActivityPayload=function(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=n.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream},e.prototype.endAudioStream=function(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()},e.prototype.complete=function(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()},e.prototype.resetTurnEndTimeout=function(){var e=this;void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(function(){e.privTurnManager.CompleteTurn(e.privRequestId)},2e3)},e}();e.exports.DialogServiceTurnState=i}),P.register("hyz2q",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MessageDataStreamType=e.exports.ActivityPayloadResponse=void 0;var r,n=/** @class */function(){function e(e){this.privActivityResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privActivityResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageDataStreamType",{get:function(){return this.privActivityResponse.messageDataStreamType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messagePayload",{get:function(){return this.privActivityResponse.messagePayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.privActivityResponse.version},enumerable:!1,configurable:!0}),e}();e.exports.ActivityPayloadResponse=n,(r=e.exports.MessageDataStreamType||(e.exports.MessageDataStreamType={}))[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}),P.register("dlibP",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AgentConfig=void 0;/**
 * Represents the JSON used in the agent.config message sent to the speech service.
 */var r=/** @class */function(){function e(){}return e.prototype.toJsonString=function(){return JSON.stringify(this.iPrivConfig)},e.prototype.get=function(){return this.iPrivConfig},/**
     * Setter for the agent.config object.
     * @param value a JSON serializable object.
     */e.prototype.set=function(e){this.iPrivConfig=e},e}();e.exports.AgentConfig=r}),P.register("b4Kqc",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0});var r=P("84s6X");Object.defineProperty(e.exports,"ConversationManager",{enumerable:!0,get:function(){return r.ConversationManager}});var n=P("61zoP");Object.defineProperty(e.exports,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var o=P("bBez8");Object.defineProperty(e.exports,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var i=P("2gmkb");Object.defineProperty(e.exports,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=P("8WFe3");Object.defineProperty(e.exports,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e.exports,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e.exports,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e.exports,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e.exports,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e.exports,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=P("kLAFm");Object.defineProperty(e.exports,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e.exports,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e.exports,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}),P.register("84s6X",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationManager=void 0;var r=P("8nLmq"),n=P("eyacr"),o=P("9pfmZ"),i=P("61zoP"),s=/** @class */function(){function e(){//
this.privRequestParams=i.ConversationConnectionConfig.configParams,this.privErrors=i.ConversationConnectionConfig.restErrors,this.privHost=i.ConversationConnectionConfig.host,this.privApiVersion=i.ConversationConnectionConfig.apiVersion,this.privRestPath=i.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}return(/**
     * Make a POST request to the Conversation Manager service endpoint to create or join a conversation.
     * @param args
     * @param conversationCode
     * @param callback
     * @param errorCallback
     */e.prototype.createOrJoin=function(e,t,s,a){var c=this;try{n.Contracts.throwIfNullOrUndefined(e,"args");var u=e.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,i.ConversationConnectionConfig.defaultLanguageCode),p=e.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),l=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),f=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),h=e.getProperty(o.PropertyId.SpeechServiceConnection_Key),d=e.getProperty(o.PropertyId.SpeechServiceConnection_Region),v=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);n.Contracts.throwIfNullOrWhitespace(u,"languageCode"),n.Contracts.throwIfNullOrWhitespace(p,"nickname"),n.Contracts.throwIfNullOrWhitespace(l,"endpointHost");var y={};y[this.privRequestParams.apiVersion]=this.privApiVersion,y[this.privRequestParams.languageCode]=u,y[this.privRequestParams.nickname]=p;var g={};f&&(g[this.privRequestParams.correlationId]=f),g[this.privRequestParams.clientAppId]=i.ConversationConnectionConfig.clientAppId,void 0!==t?y[this.privRequestParams.roomId]=t:(n.Contracts.throwIfNullOrUndefined(d,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=d,h?g[this.privRequestParams.subscriptionKey]=h:v?g[this.privRequestParams.authorization]="Bearer "+v:n.Contracts.throwIfNullOrUndefined(h,this.privErrors.authInvalidSubscriptionKey));var m={};m.headers=g,this.privRestAdapter.options=m;var b="https://"+l+this.privRestPath;// TODO: support a proxy and certificate validation
this.privRestAdapter.request(r.RestRequestType.Post,b,y,null).then(function(e){var t=r.RestMessageAdapter.extractHeaderValue(c.privRequestParams.requestId,e.headers);if(!e.ok){if(a){// get the error
var n=c.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString()),o=void 0;try{o=JSON.parse(e.data),n+=" ["+o.error.code+": "+o.error.message+"]"}catch(t){n+=" ["+e.data+"]"}t&&(n+=" "+t),a(n)}return}var i=JSON.parse(e.data);if(i&&(i.requestId=t),s){try{s(i)}catch(e){a&&a(e)}s=void 0}// eslint-disable-next-line @typescript-eslint/no-empty-function
}).catch(function(){})}catch(e){a&&(e instanceof Error?a(e.name+": "+e.message):a(e))}},/**
     * Make a DELETE request to the Conversation Manager service endpoint to leave the conversation.
     * @param args
     * @param sessionToken
     * @param callback
     */e.prototype.leave=function(e,t){var i=this;return new Promise(function(s,a){try{n.Contracts.throwIfNullOrUndefined(e,i.privErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrWhitespace(t,i.privErrors.invalidArgs.replace("{arg}","token"));var c=e.getProperty(o.PropertyId.ConversationTranslator_Host,i.privHost),u=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),p={};p[i.privRequestParams.apiVersion]=i.privApiVersion,p[i.privRequestParams.sessionToken]=t;var l={};u&&(l[i.privRequestParams.correlationId]=u);var f={};f.headers=l,i.privRestAdapter.options=f;var h="https://"+c+i.privRestPath;// TODO: support a proxy and certificate validation
i.privRestAdapter.request(r.RestRequestType.Delete,h,p,null).then(function(e){e.ok,s();// eslint-disable-next-line @typescript-eslint/no-empty-function
}).catch(function(){})}catch(e){a(e instanceof Error?e.name+": "+e.message:e)}})},e)}();e.exports.ConversationManager=s}),P.register("61zoP",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationConnectionConfig=void 0;var o=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),Object.defineProperty(t,"host",{get:function(){return t.privHost},enumerable:!1,configurable:!0}),Object.defineProperty(t,"apiVersion",{get:function(){return t.privApiVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t,"clientAppId",{get:function(){return t.privClientAppId},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultLanguageCode",{get:function(){return t.privDefaultLanguageCode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"restPath",{get:function(){return t.privRestPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"webSocketPath",{get:function(){return t.privWebSocketPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"transcriptionEventKeys",{get:function(){return t.privTranscriptionEventKeys},enumerable:!1,configurable:!0}),t.privHost="dev.microsofttranslator.com",t.privRestPath="/capito/room",t.privApiVersion="2.0",t.privDefaultLanguageCode="en-US",t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",t.privWebSocketPath="/capito/translate",t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],t}(P("kTF5z").RestConfigBase);e.exports.ConversationConnectionConfig=o}),P.register("kTF5z",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RestConfigBase=void 0;var r=/** @class */function(){function e(){}return Object.defineProperty(e,"requestOptions",{get:function(){return e.privDefaultRequestOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"configParams",{get:function(){return e.privDefaultParams},enumerable:!1,configurable:!0}),Object.defineProperty(e,"restErrors",{get:function(){return e.privRestErrors},enumerable:!1,configurable:!0}),e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},e}();e.exports.RestConfigBase=r}),P.register("bBez8",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslatorRecognizer=e.exports.ConversationRecognizerFactory=void 0;var s=P("f7AdM"),a=P("aQGWi"),c=P("eyacr"),u=P("9pfmZ"),p=P("lPHMZ"),l=P("8OuHQ"),f=/** @class */function(){function e(){}return e.fromConfig=function(e,t,r){return new h(e,t,r)},e}();e.exports.ConversationRecognizerFactory=f;/**
 * Sends messages to the Conversation Translator websocket and listens for incoming events containing websocket messages.
 * Based off the recognizers in the SDK folder.
 */var h=/** @class */function(e){function t(t,r,n){var o=this;return c.Contracts.throwIfNull(r,"speechConfig"),c.Contracts.throwIfNull(t,"conversationImpl"),(o=e.call(this,n,r.properties,new p.ConversationConnectionFactory)||this).privConversation=t,o.privIsDisposed=!1,o.privProperties=r.properties.clone(),o.privConnection=u.Connection.fromRecognizer(o),o.privSetTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?a.Timeout.setTimeout:setTimeout,o.privClearTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?a.Timeout.clearTimeout:clearTimeout,o}return n(t,e),Object.defineProperty(t.prototype,"connected",{set:function(e){this.privConnection.connected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{set:function(e){this.privConnection.disconnected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{/**
         * Return the speech language used by the recognizer
         */get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{/**
         * Return the properties for the recognizer
         */get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.isDisposed=function(){return this.privIsDisposed},/**
     * Connect to the recognizer
     * @param token
     */t.prototype.connect=function(e,t,r){try{c.Contracts.throwIfDisposed(this.privIsDisposed),c.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,r)}catch(e){r&&r(e instanceof Error?e.name+": "+e.message:e)}},/**
     * Disconnect from the recognizer
     */t.prototype.disconnect=function(e,t){try{c.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(function(){e&&e()},function(e){t&&t(e)})}catch(e){t&&(e instanceof Error?t(e.name+": "+e.message):t(e)),// Destroy the recognizer.
this.dispose(!0).catch(function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))})}},/**
     * Send the mute all participants command to the websocket
     * @param conversationId
     * @param participantId
     * @param isMuted
     */t.prototype.sendRequest=function(e,t,r){try{c.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,r)}catch(e){r&&r(e instanceof Error?e.name+": "+e.message:e),// Destroy the recognizer.
this.dispose(!0).catch(function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))})}},/**
     * Close and dispose the recognizer
     */t.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(this.privIsDisposed)return[3/*break*/,2];return this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,[4/*yield*/,this.dispose(!0)];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},/**
     * Dispose the recognizer
     * @param disposing
     */t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privIsDisposed)return[2/*return*/];if(!t)return[3/*break*/,2];return void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),[4/*yield*/,e.prototype.dispose.call(this,t)];case 1:r.sent(),r.label=2;case 2:return[2/*return*/]}})})},/**
     * Create the config for the recognizer
     * @param speechConfig
     */t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},/**
     * Create the service recognizer.
     * The audio source is redundnant here but is required by the implementation.
     * @param authentication
     * @param connectionFactory
     * @param audioConfig
     * @param recognizerConfig
     */t.prototype.createServiceRecognizer=function(e,t,r,n){return new l.ConversationServiceAdapter(e,t,r,n,this)},t.prototype.sendMessage=function(e,t,r){var n;void 0!==(n=this.privReco.sendMessageAsync(e))?n.then(function(){try{t&&t()}catch(e){r&&r("'Unhandled error on promise callback: "+e+"'")}},function(e){try{r&&r(e);// eslint-disable-next-line no-empty
}catch(e){}}):r&&r("Null promise"),this.resetConversationTimeout()},t.prototype.resetConversationTimeout=function(){var e=this;void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(function(){e.sendRequest(e.privConversation.getKeepAlive())},6e4)},t}(u.Recognizer);e.exports.ConversationTranslatorRecognizer=h}),P.register("lPHMZ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationConnectionFactory=void 0;var o=P("8nLmq"),i=P("aQGWi"),s=P("eyacr"),a=P("9pfmZ"),c=P("lsi6M"),u=P("61zoP"),p=P("c1gLe"),l=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(a.PropertyId.ConversationTranslator_Host,u.ConversationConnectionConfig.host),c=e.parameters.getProperty(a.PropertyId.ConversationTranslator_CorrelationId,i.createGuid()),l="wss://"+n+u.ConversationConnectionConfig.webSocketPath,f=e.parameters.getProperty(a.PropertyId.ConversationTranslator_Token,void 0);s.Contracts.throwIfNullOrUndefined(f,"token");var h={};h[u.ConversationConnectionConfig.configParams.apiVersion]=u.ConversationConnectionConfig.apiVersion,h[u.ConversationConnectionConfig.configParams.token]=f,h[u.ConversationConnectionConfig.configParams.correlationId]=c;var d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(l,h,{},new p.ConversationWebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),d,r)},t}(c.ConnectionFactoryBase);e.exports.ConversationConnectionFactory=l}),P.register("c1gLe",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationWebsocketMessageFormatter=void 0;var r=P("aQGWi"),n=P("9CwiY"),o=/** @class */function(){function e(){}return(/**
     * Format incoming messages: text (speech partial/final, IM) or binary (tts)
     */e.prototype.toConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var o=new n.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(o)}else e.messageType===r.MessageType.Binary&&t.resolve(new n.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},/**
     * Format outgoing messages: text (commands or IM)
     */e.prototype.fromConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var n=""+(e.textBody?e.textBody:"");t.resolve(new r.RawWebsocketMessage(r.MessageType.Text,n,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise},e)}();e.exports.ConversationWebsocketMessageFormatter=o}),P.register("9CwiY",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationConnectionMessage=void 0;var o=/** @class */function(e){function t(t,r,n,o){var i=e.call(this,t,r,n,o)||this,s=JSON.parse(i.textBody);return void 0!==s.type&&(i.privConversationMessageType=s.type),i}return n(t,e),Object.defineProperty(t.prototype,"conversationMessageType",{get:function(){return this.privConversationMessageType},enumerable:!1,configurable:!0}),t}(P("aQGWi").ConnectionMessage);e.exports.ConversationConnectionMessage=o}),P.register("8OuHQ",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationServiceAdapter=void 0;var s=P("aQGWi"),a=P("9pfmZ"),c=P("f7AdM"),u=P("9CwiY"),p=P("ftN3Z"),l=P("8WFe3"),f=P("kLAFm"),h=P("jUMR4"),d=/** @class */function(e){function t(t,r,n,o,i){var a=e.call(this,t,r,n,o,i)||this;return a.privConnectionConfigPromise=void 0,a.privLastPartialUtteranceId="",a.privConversationServiceConnector=i,a.privConversationAuthentication=t,a.receiveMessageOverride=function(){return a.receiveConversationMessageOverride()},a.recognizeOverride=function(){return a.noOp()},a.postConnectImplOverride=function(e){return a.conversationConnectImpl(e)},a.configConnectionOverride=function(){return a.configConnection()},a.disconnectOverride=function(){return a.privDisconnect()},a.privConversationRequestSession=new p.ConversationRequestSession(s.createNoDashGuid()),a.privConversationConnectionFactory=r,a.privConversationIsDisposed=!1,a}return n(t,e),t.prototype.isDisposed=function(){return e.prototype.isDisposed.call(this)||this.privConversationIsDisposed},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privConversationIsDisposed=!0,!(void 0!==this.privConnectionConfigPromise))return[3/*break*/,3];return[4/*yield*/,this.privConnectionConfigPromise];case 1:return[4/*yield*/,r.sent().dispose(t)];case 2:r.sent(),r.label=3;case 3:return[4/*yield*/,e.prototype.dispose.call(this,t)];case 4:return r.sent(),[2/*return*/]}})})},t.prototype.sendMessage=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return[2/*return*/,t.sent().send(new u.ConversationConnectionMessage(s.MessageType.Text,e))]}})})},t.prototype.sendMessageAsync=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,t.sent().send(new u.ConversationConnectionMessage(s.MessageType.Text,e))];case 2:return t.sent(),[2/*return*/]}})})},t.prototype.privDisconnect=function(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()},// eslint-disable-next-line @typescript-eslint/require-await
t.prototype.processTypeSpecificMessages=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2/*return*/,!0]})})},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){this.terminateMessageLoop=!0;var i=new a.ConversationTranslationCanceledEventArgs(r,o,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,i)}catch(e){// continue on error
}},/**
     * Establishes a websocket connection to the end point.
     */t.prototype.conversationConnectImpl=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.privConnectionLoop=this.startMessageLoop(),[2/*return*/,e]})})},/**
     * Process incoming websocket messages
     */t.prototype.receiveConversationMessageOverride=function(){return o(this,void 0,void 0,function(){var e,t,r,n,o,u,p,d,v,y,g,m,b,S,P,C,R;return i(this,function(i){switch(i.label){case 0:if(this.isDisposed()||this.terminateMessageLoop)return[2/*return*/,Promise.resolve()];e=new s.Deferred,i.label=1;case 1:return i.trys.push([1,4,,5]),[4/*yield*/,this.fetchConnection()];case 2:return[4/*yield*/,i.sent().read()];case 3:if(t=i.sent(),this.isDisposed()||this.terminateMessageLoop)return(// We're done.
e.resolve(),[2/*return*/,Promise.resolve()]);if(!t)return[2/*return*/,this.receiveConversationMessageOverride()];r=this.privConversationRequestSession.sessionId,n=t.conversationMessageType.toLowerCase(),o=!1;try{switch(n){case"info":case"participant_command":case"command":switch((u=h.CommandResponsePayload.fromJSON(t.textBody)).command.toLowerCase()){/**
                                         * 'ParticpantList' is the first message sent to the user after the websocket connection has opened.
                                         * The consuming client must wait for this message to arrive
                                         * before starting to send their own data.
                                         */case"participantlist":d=(p=h.ParticipantsListPayloadResponse.fromJSON(t.textBody)).participants.map(function(e){return{avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}}),this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new l.ParticipantsListEventArgs(p.roomid,p.token,p.translateTo,p.profanityFilter,p.roomProfanityFilter,p.roomLocked,p.muteAll,d,r));break;/**
                                         * 'SetTranslateToLanguages' represents the list of languages being used in the Conversation by all users(?).
                                         * This is sent at the start of the Conversation
                                         */case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(u.participantId,f.ConversationTranslatorCommandTypes.setTranslateToLanguages,u.value,r));break;/**
                                         * 'SetProfanityFiltering' lets the client set the level of profanity filtering.
                                         * If sent by the participant the setting will effect only their own profanity level.
                                         * If sent by the host, the setting will effect all participants including the host.
                                         * Note: the profanity filters differ from Speech Service (?): 'marked', 'raw', 'removed', 'tagged'
                                         */case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(u.participantId,f.ConversationTranslatorCommandTypes.setProfanityFiltering,u.value,r));break;/**
                                         * 'SetMute' is sent if the participant has been muted by the host.
                                         * Check the 'participantId' to determine if the current user has been muted.
                                         */case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(u.participantId,f.ConversationTranslatorCommandTypes.setMute,u.value,r));break;/**
                                         * 'SetMuteAll' is sent if the Conversation has been muted by the host.
                                         */case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new l.MuteAllEventArgs(u.value,r));break;/**
                                         * 'RoomExpirationWarning' is sent towards the end of the Conversation session to give a timeout warning.
                                         */case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new a.ConversationExpirationEventArgs(u.value,this.privConversationRequestSession.sessionId));break;/**
                                         * 'SetUseTts' is sent as a confirmation if the user requests TTS to be turned on or off.
                                         */case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(u.participantId,f.ConversationTranslatorCommandTypes.setUseTTS,u.value,r));break;/**
                                         * 'SetLockState' is set if the host has locked or unlocked the Conversation.
                                         */case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new l.LockRoomEventArgs(u.value,r));break;/**
                                         * 'ChangeNickname' is received if a user changes their display name.
                                         * Any cached particpiants list should be updated to reflect the display name.
                                         */case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(u.participantId,f.ConversationTranslatorCommandTypes.changeNickname,u.value,r));break;/**
                                         * 'JoinSession' is sent when a user joins the Conversation.
                                         */case"joinsession":y={avatar:(v=h.ParticipantPayloadResponse.fromJSON(t.textBody)).avatar,displayName:v.nickname,id:v.participantId,isHost:v.ishost,isMuted:v.ismuted,isUsingTts:v.usetts,preferredLanguage:v.locale},this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(y,r));break;/**
                                         * 'LeaveSession' is sent when a user leaves the Conversation'.
                                         */case"leavesession":g={id:u.participantId},this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(g,r));break;/**
                                         * 'DisconnectSession' is sent when a user is disconnected from the session (e.g. network problem).
                                         * Check the 'ParticipantId' to check whether the message is for the current user.
                                         */case"disconnectsession":u.participantId;break;case"token":m=new c.CognitiveTokenAuthentication(function(){var e=u.token;return Promise.resolve(e)},function(){var e=u.token;return Promise.resolve(e)}),this.authentication=m}break;/**
                                 * 'partial' (or 'hypothesis') represents a unfinalized speech message.
                                 */case"partial":/**
                                 * 'final' (or 'phrase') represents a finalized speech message.
                                 */case"final":b=h.SpeechResponsePayload.fromJSON(t.textBody),S="final"===n?a.ResultReason.TranslatedParticipantSpeech:a.ResultReason.TranslatingParticipantSpeech,P=new a.ConversationTranslationResult(b.participantId,this.getTranslations(b.translations),b.language,b.id,S,b.recognition,void 0,void 0,t.textBody,void 0),b.isFinal?(void 0!==P.text&&P.text.length>0?o=!0:b.id===this.privLastPartialUtteranceId&&// so sending the empty final is important
(o=!0),o&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.final,P,r))):void 0!==P.text&&(this.privLastPartialUtteranceId=b.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.partial,P,r)));break;/**
                                 * "translated_message" is a text message or instant message (IM).
                                 */case"translated_message":C=h.TextResponsePayload.fromJSON(t.textBody),R=new a.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,t.textBody,void 0),this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.instantMessage,R,r))}}catch(e){// continue
}return[2/*return*/,this.receiveConversationMessageOverride()];case 4:return i.sent(),this.terminateMessageLoop=!0,[3/*break*/,5];case 5:return[2/*return*/,e.promise]}})})},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:if(this.isDisposed())return[2/*return*/,Promise.resolve()];this.terminateMessageLoop=!1,e=this.receiveConversationMessageOverride(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4/*yield*/,e];case 2:return[2/*return*/,r.sent()];case 3:return t=r.sent(),this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,t),[2/*return*/,null];case 4:return[2/*return*/]}})})},// Takes an established websocket connection to the endpoint
t.prototype.configConnection=function(){var e=this;return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(function(t){return t.state()===s.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigPromise=void 0,e.configConnection()):e.privConnectionConfigPromise},function(){return e.privConnectionId=null,e.privConnectionConfigPromise=void 0,e.configConnection()}):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(function(e){return e}),this.privConnectionConfigPromise)},t.prototype.getTranslations=function(e){var t;if(void 0!==e){t=new a.Translations;for(var r=0;r<e.length;r++){var n=e[r];t.set(n.lang,n.translation)}}return t},t}(c.ServiceRecognizerBase);e.exports.ConversationServiceAdapter=d}),P.register("ftN3Z",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationRequestSession=void 0;var o=P("aQGWi"),i=/** @class */function(){function e(e){this.privIsDisposed=!1,this.privDetachables=[],this.privSessionId=e,this.privRequestId=o.createNoDashGuid(),this.privRequestCompletionDeferral=new o.Deferred}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.privRequestCompletionDeferral.promise},enumerable:!1,configurable:!0}),e.prototype.onPreConnectionStart=function(e,t){this.privSessionId=t},e.prototype.onAuthCompleted=function(e){e&&this.onComplete()},e.prototype.onConnectionEstablishCompleted=function(e){200!==e&&403===e&&this.onComplete()},e.prototype.onServiceTurnEndResponse=function(e){e?this.privRequestId=o.createNoDashGuid():this.onComplete()},e.prototype.dispose=function(){return r(this,void 0,void 0,function(){var e,t;return n(this,function(r){switch(r.label){case 0:if(this.privIsDisposed)return[3/*break*/,4];// we should have completed by now. If we did not its an unknown error.
this.privIsDisposed=!0,e=0,t=this.privDetachables,r.label=1;case 1:if(!(e<t.length))return[3/*break*/,4];return[4/*yield*/,t[e].detach()];case 2:r.sent(),r.label=3;case 3:return e++,[3/*break*/,1];case 4:return[2/*return*/]}})})},e.prototype.onComplete=function(){//
},e}();e.exports.ConversationRequestSession=i}),P.register("8WFe3",function(e,t){var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationReceivedTranslationEventArgs=e.exports.ParticipantsListEventArgs=e.exports.ParticipantAttributeEventArgs=e.exports.ParticipantEventArgs=e.exports.LockRoomEventArgs=e.exports.MuteAllEventArgs=void 0;var o=P("9pfmZ"),i=/** @class */function(e){function t(t,r){var n=e.call(this,r)||this;return n.privIsMuted=t,n}return n(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);e.exports.MuteAllEventArgs=i;var s=/** @class */function(e){function t(t,r){var n=e.call(this,r)||this;return n.privIsLocked=t,n}return n(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsLocked},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);e.exports.LockRoomEventArgs=s;var a=/** @class */function(e){function t(t,r){var n=e.call(this,r)||this;return n.privParticipant=t,n}return n(t,e),Object.defineProperty(t.prototype,"participant",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);e.exports.ParticipantEventArgs=a;var c=/** @class */function(e){function t(t,r,n,o){var i=e.call(this,o)||this;return i.privKey=r,i.privValue=n,i.privParticipantId=t,i}return n(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.privValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.privKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.privParticipantId},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);e.exports.ParticipantAttributeEventArgs=c;var u=/** @class */function(e){function t(t,r,n,o,i,s,a,c,u){var p=e.call(this,u)||this;return p.privRoomId=t,p.privSessionToken=r,p.privTranslateTo=n,p.privProfanityFilter=o,p.privRoomProfanityFilter=i,p.privIsRoomLocked=s,p.privIsRoomLocked=a,p.privParticipants=c,p}return n(t,e),Object.defineProperty(t.prototype,"sessionToken",{get:function(){return this.privSessionToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{get:function(){return this.privRoomId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translateTo",{get:function(){return this.privTranslateTo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"profanityFilter",{get:function(){return this.privProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomProfanityFilter",{get:function(){return this.privRoomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoomLocked",{get:function(){return this.privIsRoomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMuteAll",{get:function(){return this.privIsMuteAll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipants},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);e.exports.ParticipantsListEventArgs=u;var p=/** @class */function(){function e(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}return Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommand},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();e.exports.ConversationReceivedTranslationEventArgs=p}),P.register("kLAFm",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ConversationTranslatorCommandTypes=e.exports.ConversationTranslatorMessageTypes=e.exports.InternalParticipants=void 0;/** Users participating in the conversation */var r=/** @class */function(){function e(e,t){void 0===e&&(e=[]),this.participants=e,this.meId=t}return(/**
     * Add or update a participant
     * @param value
     */e.prototype.addOrUpdateParticipant=function(e){if(void 0!==e){var t=this.getParticipantIndex(e.id);// ensure it was added ok
return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}},/**
     * Find the participant's position in the participants list.
     * @param id
     */e.prototype.getParticipantIndex=function(e){return this.participants.findIndex(function(t){return t.id===e})},/**
     * Find the participant by id.
     * @param id
     */e.prototype.getParticipant=function(e){return this.participants.find(function(t){return t.id===e})},/**
     * Remove a participant from the participants list.
     */e.prototype.deleteParticipant=function(e){this.participants=this.participants.filter(function(t){return t.id!==e})},Object.defineProperty(e.prototype,"host",{/**
         * Helper to return the conversation host.
         */get:function(){return this.participants.find(function(e){return!0===e.isHost})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"me",{/**
         * Helper to return the current user.
         */get:function(){return this.getParticipant(this.meId)},enumerable:!1,configurable:!0}),e)}();e.exports.InternalParticipants=r,/**
 * List of command message types
 */e.exports.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},/**
 * List of command types
 */e.exports.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}}),P.register("jUMR4",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=P("8swMF");Object.defineProperty(e.exports,"CommandResponsePayload",{enumerable:!0,get:function(){return r.CommandResponsePayload}});var n=P("cWkb6");Object.defineProperty(e.exports,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e.exports,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var o=P("lHJ5h");Object.defineProperty(e.exports,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(e.exports,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})}),P.register("8swMF",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CommandResponsePayload=void 0;var r=/** @class */function(){function e(e){this.privCommandResponse=JSON.parse(e)}return Object.defineProperty(e.prototype,"type",{get:function(){return this.privCommandResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommandResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privCommandResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privCommandResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privCommandResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privCommandResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.privCommandResponse.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privCommandResponse.token},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t)},e}();e.exports.CommandResponsePayload=r}),P.register("cWkb6",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ParticipantPayloadResponse=e.exports.ParticipantsListPayloadResponse=void 0;var r=/** @class */function(){function e(e){this.privParticipantsPayloadResponse=JSON.parse(e)}return Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privParticipantsPayloadResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privParticipantsPayloadResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privParticipantsPayloadResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participants",{get:function(){return this.privParticipantsPayloadResponse.participants},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privParticipantsPayloadResponse.token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translateTo",{get:function(){return this.privParticipantsPayloadResponse.translateTo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profanityFilter",{get:function(){return this.privParticipantsPayloadResponse.profanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomProfanityFilter",{get:function(){return this.privParticipantsPayloadResponse.roomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomLocked",{get:function(){return this.privParticipantsPayloadResponse.roomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muteAll",{get:function(){return this.privParticipantsPayloadResponse.muteAll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privParticipantsPayloadResponse.type},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t)},e}();e.exports.ParticipantsListPayloadResponse=r;var n=/** @class */function(){function e(e){this.privParticipantPayloadResponse=JSON.parse(e)}return Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privParticipantPayloadResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.privParticipantPayloadResponse.locale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usetts",{get:function(){return this.privParticipantPayloadResponse.usetts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ismuted",{get:function(){return this.privParticipantPayloadResponse.ismuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ishost",{get:function(){return this.privParticipantPayloadResponse.ishost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privParticipantPayloadResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privParticipantPayloadResponse.avatar},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t)},e}();e.exports.ParticipantPayloadResponse=n}),P.register("lHJ5h",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TextResponsePayload=e.exports.SpeechResponsePayload=void 0;var r=/** @class */function(){function e(e){this.privSpeechResponse=JSON.parse(e)}return Object.defineProperty(e.prototype,"recognition",{get:function(){return this.privSpeechResponse.recognition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privSpeechResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privSpeechResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privSpeechResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privSpeechResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privSpeechResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privSpeechResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privSpeechResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privSpeechResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return"final"===this.privSpeechResponse.type},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t)},e}();e.exports.SpeechResponsePayload=r;var n=/** @class */function(){function e(e){this.privTextResponse=JSON.parse(e)}return Object.defineProperty(e.prototype,"originalText",{get:function(){return this.privTextResponse.originalText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privTextResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privTextResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privTextResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privTextResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privTextResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privTextResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privTextResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privTextResponse.type},enumerable:!1,configurable:!0}),e.fromJSON=function(t){return new e(t)},e}();e.exports.TextResponsePayload=n}),P.register("2gmkb",function(e,t){var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TranscriberRecognizer=void 0;var s=P("aQGWi"),a=P("eyacr"),c=P("9pfmZ"),u=P("f7AdM"),p=/** @class */function(e){/**
     * TranscriberRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - Non-audio configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An audio configuration associated with the recognizer
     */function t(t,r){var n=this;return a.Contracts.throwIfNull(t,"speechTranslationConfig"),a.Contracts.throwIfNull(r,"audioConfigImpl"),a.Contracts.throwIfNullOrWhitespace(t.speechRecognitionLanguage,c.PropertyId[c.PropertyId.SpeechServiceConnection_RecoLanguage]),(n=e.call(this,r,t.properties,new u.TranscriberConnectionFactory)||this).privDisposedRecognizer=!1,n.isMeetingRecognizer=!1,n}return n(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return a.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversation",{set:function(e){a.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e},enumerable:!1,configurable:!0}),t.prototype.getConversationInfo=function(){return a.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo},Object.defineProperty(t.prototype,"meeting",{set:function(e){a.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e},enumerable:!1,configurable:!0}),t.prototype.getMeetingInfo=function(){return a.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo},t.prototype.IsMeetingRecognizer=function(){return this.isMeetingRecognizer},t.prototype.startContinuousRecognitionAsync=function(e,t){s.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(u.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){s.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(this.privDisposedRecognizer)return[3/*break*/,2];return[4/*yield*/,this.dispose(!0)];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},// Push async join/leave conversation message via serviceRecognizer
t.prototype.pushConversationEvent=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=this.privReco,a.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),[4/*yield*/,r.sendSpeechEventAsync(e,t)];case 1:return n.sent(),[2/*return*/]}})})},// Push async join/leave meeting message via serviceRecognizer
t.prototype.pushMeetingEvent=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=this.privReco,a.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),[4/*yield*/,r.sendMeetingSpeechEventAsync(e,t)];case 1:return n.sent(),[2/*return*/]}})})},t.prototype.enforceAudioGating=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.audioConfig.format];case 1:if(1===(e=t.sent().channels)){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==e)throw Error("Unsupported audio configuration: Detected "+e+"-channel audio");return[2/*return*/]}})})},t.prototype.connectMeetingCallbacks=function(e){this.isMeetingRecognizer=!0,this.canceled=function(t,r){e.canceled&&e.canceled(e,r)},this.recognizing=function(t,r){e.transcribing&&e.transcribing(e,r)},this.recognized=function(t,r){e.transcribed&&e.transcribed(e,r)},this.sessionStarted=function(t,r){e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=function(t,r){e.sessionStopped&&e.sessionStopped(e,r)}},t.prototype.disconnectCallbacks=function(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0},/**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:if(this.privDisposedRecognizer)return[2/*return*/];if(!t)return[3/*break*/,2];return this.privDisposedRecognizer=!0,[4/*yield*/,this.implRecognizerStop()];case 1:r.sent(),r.label=2;case 2:return[4/*yield*/,e.prototype.dispose.call(this,t)];case 3:return r.sent(),[2/*return*/]}})})},t.prototype.createRecognizerConfig=function(e){return new u.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,r,n){return new u.TranscriptionServiceRecognizer(e,t,r,n,this)},t}(c.Recognizer);e.exports.TranscriberRecognizer=p}),P.register("8Aewq",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisAudioMetadata=e.exports.MetadataType=void 0,(r=e.exports.MetadataType||(e.exports.MetadataType={})).WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd";var r,n=/** @class */function(){function e(e){this.privSynthesisAudioMetadata=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Metadata",{get:function(){return this.privSynthesisAudioMetadata.Metadata},enumerable:!1,configurable:!0}),e}();e.exports.SynthesisAudioMetadata=n}),P.register("7sRyH",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisTurn=void 0;var o=P("aQGWi"),i=P("cyBvg"),s=P("8Aewq"),a=P("fYNMc"),c=P("5nGwH"),u=/** @class */function(){function e(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,// We're not in a turn, so resolve.
this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.privStreamId},set:function(e){this.privStreamId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{get:function(){return this.privAudioOutputFormat},set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesisEnded",{get:function(){return this.privIsSynthesisEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesizing",{get:function(){return this.privIsSynthesizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTextOffset",{get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSentenceOffset",{get:function(){return this.privSentenceOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesReceived",{// The number of bytes received for current turn
get:function(){return this.privBytesReceived},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioDuration",{get:function(){return this.privAudioDuration},enumerable:!1,configurable:!0}),e.prototype.getAllReceivedAudio=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(this.privReceivedAudio)return[2/*return*/,Promise.resolve(this.privReceivedAudio)];if(!this.privIsSynthesisEnded)return[2/*return*/,null];return[4/*yield*/,this.readAllAudioFromStream()];case 1:return e.sent(),[2/*return*/,Promise.resolve(this.privReceivedAudio)]}})})},e.prototype.getAllReceivedAudioWithHeader=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:if(this.privReceivedAudioWithHeader)return[2/*return*/,this.privReceivedAudioWithHeader];if(!this.privIsSynthesisEnded)return[2/*return*/,null];if(!this.audioOutputFormat.hasHeader)return[3/*break*/,2];return[4/*yield*/,this.getAllReceivedAudio()];case 1:return e=t.sent(),this.privReceivedAudioWithHeader=a.SynthesisAdapterBase.addHeader(e,this.audioOutputFormat),[2/*return*/,this.privReceivedAudioWithHeader];case 2:return[2/*return*/,this.getAllReceivedAudio()]}})})},e.prototype.startNewSynthesis=function(e,t,r,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=r,this.privAudioOutputStream=new i.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",void 0!==n&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new c.SynthesisTriggeredEvent(this.requestId,void 0,void 0===n?void 0:n.id()))},e.prototype.onPreConnectionStart=function(e){this.privAuthFetchEventId=e,this.onEvent(new c.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))},e.prototype.onAuthCompleted=function(e){e&&this.onComplete()},e.prototype.onConnectionEstablishCompleted=function(e){if(200===e){this.onEvent(new c.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}403===e&&this.onComplete()},e.prototype.onServiceResponseMessage=function(e){var t=JSON.parse(e);this.streamId=t.audio.streamId},e.prototype.onServiceTurnEndResponse=function(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()},e.prototype.onServiceTurnStartResponse=function(){this.privTurnDeferral&&this.privInTurn&&(// What? How are we starting a turn with another not done?
this.privTurnDeferral.reject("Another turn started before current completed."),// Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privTurnDeferral.promise.then().catch(function(){})),this.privInTurn=!0,this.privTurnDeferral=new o.Deferred},e.prototype.onAudioChunkReceived=function(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))},e.prototype.onTextBoundaryEvent=function(e){this.updateTextOffset(e.Data.text.Text,e.Type)},e.prototype.onVisemeMetadataReceived=function(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)},e.prototype.onSessionEnd=function(e){this.privAudioDuration=e.Data.Offset},e.prototype.dispose=function(){this.privIsDisposed||(this.privIsDisposed=!0)},e.prototype.onStopSynthesizing=function(){this.onComplete()},/**
     * Gets the viseme animation string (merged from animation chunk), and clears the internal
     * partial animation.
     */e.prototype.getAndClearVisemeAnimation=function(){var e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e},e.prototype.onEvent=function(e){o.Events.instance.onEvent(e)},/**
     * Check if the text is an XML(SSML) tag
     * @param text
     * @private
     */e.isXmlTag=function(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]},e.prototype.updateTextOffset=function(t,r){r===s.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(t,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+t.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!e.isXmlTag(t)&&this.updateTextOffset(t,r))):(this.privSentenceOffset=this.privRawText.indexOf(t,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+t.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!e.isXmlTag(t)&&this.updateTextOffset(t,r)))},e.prototype.onComplete=function(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))},e.prototype.readAllAudioFromStream=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(!this.privIsSynthesisEnded)return[3/*break*/,4];this.privReceivedAudio=new ArrayBuffer(this.bytesReceived),e.label=1;case 1:return e.trys.push([1,3,,4]),[4/*yield*/,this.privAudioOutputStream.read(this.privReceivedAudio)];case 2:return e.sent(),[3/*break*/,4];case 3:return e.sent(),this.privReceivedAudio=new ArrayBuffer(0),[3/*break*/,4];case 4:return[2/*return*/]}})})},/**
     * Check if current idx is in XML(SSML) tag
     * @param idx
     * @private
     */e.prototype.withinXmlTag=function(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)},e}();e.exports.SynthesisTurn=u}),P.register("fYNMc",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisAdapterBase=void 0;var o=P("aQGWi"),i=P("9pfmZ"),s=P("f7AdM"),a=P("hyC1Q"),c=/** @class */function(){function e(e,t,r,n,a){var c=this;if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,// A promise for a configured connection.
// Do not consume directly, call fetchConnection instead.
this.privConnectionConfigurationPromise=void 0,!e)throw new o.ArgumentNullError("authentication");if(!t)throw new o.ArgumentNullError("connectionFactory");if(!r)throw new o.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSpeechSynthesizer=n,this.privSessionAudioDestination=a,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new o.EventSource,this.privServiceEvents=new o.EventSource,this.privSynthesisContext=new s.SynthesisContext(this.privSpeechSynthesizer),this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach(function(e){"ConnectionClosedEvent"===e.name&&1e3!==e.statusCode&&c.cancelSynthesisLocal(i.CancellationReason.Error,1007===e.statusCode?i.CancellationErrorCode.BadRequestParameters:i.CancellationErrorCode.ConnectionFailure,e.reason+" websocket error code: "+e.statusCode)})}return Object.defineProperty(e.prototype,"synthesisContext",{get:function(){return this.privSynthesisContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{set:function(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)},enumerable:!1,configurable:!0}),e.addHeader=function(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);var r=new Uint8Array(e.byteLength+t.header.byteLength);return r.set(new Uint8Array(t.header),0),r.set(new Uint8Array(e),t.header.byteLength),r.buffer},e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),!(void 0!==this.privConnectionConfigurationPromise))return[3/*break*/,3];return[4/*yield*/,this.privConnectionConfigurationPromise];case 1:return[4/*yield*/,t.sent().dispose(e)];case 2:t.sent(),t.label=3;case 3:return[2/*return*/]}})})},e.prototype.connect=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4/*yield*/,this.connectImpl()];case 1:return e.sent(),[2/*return*/]}})})},e.prototype.sendNetworkMessage=function(e,t){return r(this,void 0,void 0,function(){var r,i;return n(this,function(n){switch(n.label){case 0:return r="string"==typeof t?o.MessageType.Text:o.MessageType.Binary,i="string"==typeof t?"application/json":"",[4/*yield*/,this.fetchConnection()];case 1:return[2/*return*/,n.sent().send(new a.SpeechConnectionMessage(r,e,this.privSynthesisTurn.requestId,i,t))]}})})},e.prototype.Speak=function(e,t,o,s,a,c){return r(this,void 0,void 0,function(){var r,u,p,l;return n(this,function(n){switch(n.label){case 0:if(r=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return[2/*return*/,this.speakOverride(r,o,s,a)];this.privSuccessCallback=s,this.privErrorCallback=a,this.privSynthesisTurn.startNewSynthesis(o,e,t,c),n.label=1;case 1:return n.trys.push([1,6,,7]),[4/*yield*/,this.connectImpl()];case 2:return n.sent(),[4/*yield*/,this.fetchConnection()];case 3:return u=n.sent(),[4/*yield*/,this.sendSynthesisContext(u)];case 4:return n.sent(),[4/*yield*/,this.sendSsmlMessage(u,r,o)];case 5:return n.sent(),p=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(o,i.ResultReason.SynthesizingAudioStarted)),this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,p),this.receiveMessage(),[3/*break*/,7];case 6:return l=n.sent(),this.cancelSynthesisLocal(i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,l),[2/*return*/,Promise.reject(l)];case 7:return[2/*return*/]}})})},// Cancels synthesis.
e.prototype.cancelSynthesis=function(e,t,r,n){var o=new i.PropertyCollection;o.setProperty(s.CancellationErrorCodePropertyName,i.CancellationErrorCode[r]);var a=new i.SpeechSynthesisResult(e,i.ResultReason.Canceled,void 0,n,o);if(this.privSpeechSynthesizer.SynthesisCanceled){var c=new i.SpeechSynthesisEventArgs(a);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,c);/* eslint-disable no-empty */}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(a);/* eslint-disable no-empty */}catch(e){}},// Cancels synthesis.
e.prototype.cancelSynthesisLocal=function(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))},// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.processTypeSpecificMessages=function(e){return!0},e.prototype.receiveMessage=function(){return r(this,void 0,void 0,function(){var t,r,c,u,p,l,f,h,d,v,y,g,m;return n(this,function(n){switch(n.label){case 0:return n.trys.push([0,14,,15]),[4/*yield*/,this.fetchConnection()];case 1:return[4/*yield*/,n.sent().read()];case 2:if(t=n.sent(),void 0!==this.receiveMessageOverride)return[2/*return*/,this.receiveMessageOverride()];if(this.privIsDisposed)return[2/*return*/];// indicates we are draining the queue and it came with no message;
if(!t){if(!this.privSynthesisTurn.isSynthesizing)return[2/*return*/];return[2/*return*/,this.receiveMessage()]}if((r=a.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privSynthesisTurn.requestId.toLowerCase())return[3/*break*/,13];switch(r.path.toLowerCase()){case"turn.start":return[3/*break*/,3];case"response":return[3/*break*/,4];case"audio":return[3/*break*/,5];case"audio.metadata":return[3/*break*/,6];case"turn.end":return[3/*break*/,7]}return[3/*break*/,12];case 3:return this.privSynthesisTurn.onServiceTurnStartResponse(),[3/*break*/,13];case 4:return this.privSynthesisTurn.onServiceResponseMessage(r.textBody),[3/*break*/,13];case 5:if(this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.privSpeechSynthesizer.synthesizing)try{c=e.addHeader(r.binaryBody,this.privSynthesisTurn.audioOutputFormat),u=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(this.privSynthesisTurn.requestId,i.ResultReason.SynthesizingAudio,c)),this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,u)}catch(e){// Not going to let errors in the event handler
// trip things up.
}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(r.binaryBody)}return[3/*break*/,13];case 6:for(p=0,l=s.SynthesisAudioMetadata.fromJSON(r.textBody).Metadata;p<l.length;p++)switch((f=l[p]).Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:if(this.privSynthesisTurn.onTextBoundaryEvent(f),h=new i.SpeechSynthesisWordBoundaryEventArgs(f.Data.Offset,f.Data.Duration,f.Data.text.Text,f.Data.text.Length,f.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,f.Data.text.BoundaryType),this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,h)}catch(e){// Not going to let errors in the event handler
// trip things up.
}break;case s.MetadataType.Bookmark:if(d=new i.SpeechSynthesisBookmarkEventArgs(f.Data.Offset,f.Data.Bookmark),this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,d)}catch(e){// Not going to let errors in the event handler
// trip things up.
}break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(f),f.Data.IsLastAnimation&&(v=new i.SpeechSynthesisVisemeEventArgs(f.Data.Offset,f.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation()),this.privSpeechSynthesizer.visemeReceived))try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,v)}catch(e){// Not going to let errors in the event handler
// trip things up.
}break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(f)}return[3/*break*/,13];case 7:this.privSynthesisTurn.onServiceTurnEndResponse(),y=void 0,n.label=8;case 8:return n.trys.push([8,10,,11]),[4/*yield*/,this.privSynthesisTurn.getAllReceivedAudioWithHeader()];case 9:return g=n.sent(),y=new i.SpeechSynthesisResult(this.privSynthesisTurn.requestId,i.ResultReason.SynthesizingAudioCompleted,g,void 0,void 0,this.privSynthesisTurn.audioDuration),this.privSuccessCallback&&this.privSuccessCallback(y),[3/*break*/,11];case 10:return m=n.sent(),this.privErrorCallback&&this.privErrorCallback(m),[3/*break*/,11];case 11:if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new i.SpeechSynthesisEventArgs(y))}catch(e){// Not going to let errors in the event handler
// trip things up.
}return[3/*break*/,13];case 12:!this.processTypeSpecificMessages(r)&&this.privServiceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(r.path.toLowerCase(),r.textBody)),n.label=13;case 13:return[2/*return*/,this.receiveMessage()];case 14:return n.sent(),[3/*break*/,15];case 15:return[2/*return*/]}})})},e.prototype.sendSynthesisContext=function(e){var t=this.synthesisContext.toJSON();if(t)return e.send(new a.SpeechConnectionMessage(o.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))},e.prototype.connectImpl=function(e){var t=this;if(void 0===e&&(e=!1),null!=this.privConnectionPromise)return this.privConnectionPromise.then(function(e){return e.state()===o.ConnectionState.Disconnected?(t.privConnectionId=null,t.privConnectionPromise=null,t.connectImpl()):t.privConnectionPromise},function(){return t.privConnectionId=null,t.privConnectionPromise=null,t.connectImpl()});this.privAuthFetchEventId=o.createNoDashGuid(),this.privConnectionId=o.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);var s=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=s.then(function(o){return r(t,void 0,void 0,function(){var t,r,s=this;return n(this,function(n){switch(n.label){case 0:return this.privSynthesisTurn.onAuthCompleted(!1),// Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
// it'll stop sending events.
(t=this.privConnectionFactory.create(this.privSynthesizerConfig,o,this.privConnectionId)).events.attach(function(e){s.connectionEvents.onEvent(e)}),[4/*yield*/,t.open()];case 1:if(200===(r=n.sent()).statusCode)return this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),[2/*return*/,Promise.resolve(t)];if(403===r.statusCode&&!e)return[2/*return*/,this.connectImpl(!0)];return this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),[2/*return*/,Promise.reject("Unable to contact server. StatusCode: "+r.statusCode+", "+this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+r.reason)]}})})},function(e){throw t.privSynthesisTurn.onAuthCompleted(!0),Error(e)}),// Attach an empty handler to allow the promise to run in the background while
// other startup events happen. It'll eventually be awaited on.
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privConnectionPromise.catch(function(){}),this.privConnectionPromise},e.prototype.sendSpeechServiceConfig=function(e,t){if(t)return e.send(new a.SpeechConnectionMessage(o.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))},e.prototype.sendSsmlMessage=function(e,t,r){return e.send(new a.SpeechConnectionMessage(o.MessageType.Text,"ssml",r,"application/ssml+xml",t))},e.prototype.fetchConnection=function(){return r(this,void 0,void 0,function(){var e=this;return n(this,function(t){switch(t.label){case 0:if(void 0!==this.privConnectionConfigurationPromise)return[2/*return*/,this.privConnectionConfigurationPromise.then(function(t){return t.state()===o.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=void 0,e.fetchConnection()):e.privConnectionConfigurationPromise},function(){return e.privConnectionId=null,e.privConnectionConfigurationPromise=void 0,e.fetchConnection()})];return this.privConnectionConfigurationPromise=this.configureConnection(),[4/*yield*/,this.privConnectionConfigurationPromise];case 1:return[2/*return*/,t.sent()]}})})},// Takes an established websocket connection to the endpoint and sends speech configuration information.
e.prototype.configureConnection=function(){return r(this,void 0,void 0,function(){var e;return n(this,function(t){switch(t.label){case 0:return[4/*yield*/,this.connectImpl()];case 1:if(e=t.sent(),void 0!==this.configConnectionOverride)return[2/*return*/,this.configConnectionOverride(e)];return[4/*yield*/,this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[2/*return*/,e]}})})},e.telemetryDataEnabled=!0,e}();e.exports.SynthesisAdapterBase=c}),P.register("5nGwH",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisStartedEvent=e.exports.ConnectingToSynthesisServiceEvent=e.exports.SynthesisTriggeredEvent=e.exports.SpeechSynthesisEvent=void 0;var o=P("aQGWi"),i=/** @class */function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privRequestId=r,i}return n(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);e.exports.SpeechSynthesisEvent=i;var s=/** @class */function(e){function t(t,r,n){var o=e.call(this,"SynthesisTriggeredEvent",t)||this;return o.privSessionAudioDestinationId=r,o.privTurnAudioDestinationId=n,o}return n(t,e),Object.defineProperty(t.prototype,"audioSessionDestinationId",{get:function(){return this.privSessionAudioDestinationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTurnDestinationId",{get:function(){return this.privTurnAudioDestinationId},enumerable:!1,configurable:!0}),t}(i);e.exports.SynthesisTriggeredEvent=s;var a=/** @class */function(e){function t(t,r){var n=e.call(this,"ConnectingToSynthesisServiceEvent",t)||this;return n.privAuthFetchEventId=r,n}return n(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(i);e.exports.ConnectingToSynthesisServiceEvent=a;var c=/** @class */function(e){function t(t,r){var n=e.call(this,"SynthesisStartedEvent",t)||this;return n.privAuthFetchEventId=r,n}return n(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(i);e.exports.SynthesisStartedEvent=c}),P.register("a0sqs",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisRestAdapter=void 0;var r=P("8nLmq"),n=P("9pfmZ"),o=P("lsi6M"),i=P("eJOps"),s=/** @class */function(){function e(e,t){var i=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!i){var s=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,"westus"),a=o.ConnectionFactoryBase.getHostSuffix(s);i=e.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"https://"+s+".tts.speech"+a)}this.privUri=i+"/cognitiveservices/voices/list";var c=r.RestConfigBase.requestOptions;this.privRestAdapter=new r.RestMessageAdapter(c),this.privAuthentication=t}return(/**
     * Sends list voices request to endpoint.
     * @function
     * @public
     * @param connectionId - guid for connectionId
     * @returns {Promise<IRestResponse>} rest response to status request
     */e.prototype.getVoicesList=function(e){var t=this;return this.privRestAdapter.setHeaders(i.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then(function(e){return t.privRestAdapter.setHeaders(e.headerName,e.token),t.privRestAdapter.request(r.RestRequestType.Get,t.privUri)})},e)}();e.exports.SynthesisRestAdapter=s}),P.register("crODb",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesizerConfig=e.exports.SynthesisServiceType=void 0;var r,n,o=P("f7AdM");(r=n=e.exports.SynthesisServiceType||(e.exports.SynthesisServiceType={}))[r.Standard=0]="Standard",r[r.Custom=1]="Custom";var i=/** @class */function(){function e(e,t){this.privSynthesisServiceType=n.Standard,this.privSpeechServiceConfig=e||new o.SpeechServiceConfig(new o.Context(null)),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"synthesisServiceType",{get:function(){return this.privSynthesisServiceType},set:function(e){this.privSynthesisServiceType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),e}();e.exports.SynthesizerConfig=i}),P.register("p7FK8",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SynthesisContext=void 0;var r=P("9pfmZ"),n=/** @class */function(){function e(e){this.privContext={},this.privSpeechSynthesizer=e}return(/**
     * Adds a section to the synthesis.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */e.prototype.setSection=function(e,t){this.privContext[e]=t},Object.defineProperty(e.prototype,"audioOutputFormat",{/**
         * Sets the audio output format for synthesis context generation.
         * @param format {AudioOutputFormatImpl} the output format
         */set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)},e.prototype.buildSynthesisContext=function(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,punctuationBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!this.privSpeechSynthesizer.wordBoundary),sentenceBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:this.privSpeechSynthesizer.properties.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!this.privSpeechSynthesizer.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}},e)}();e.exports.SynthesisContext=n}),P.register("8kTWd",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerRecognitionConfig=void 0;var r=P("f7AdM"),n=/** @class */function(){function e(e,t){this.privContext=e||new r.Context(null),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Context",{get:function(){return this.privContext},enumerable:!1,configurable:!0}),e}();e.exports.SpeakerRecognitionConfig=n}),P.register("jNHgx",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SpeakerServiceRecognizer=void 0;var s=P("8nLmq"),a=P("aQGWi"),c=P("9pfmZ"),u=P("f7AdM"),p=P("hyC1Q"),l=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privSpeakerRecognizer=i,s.privSpeakerAudioSource=n,s.recognizeSpeaker=function(e){return s.recognizeSpeakerOnce(e)},s.sendPrePayloadJSONOverride=function(){return s.noOp()},s}return n(t,e),t.prototype.processTypeSpecificMessages=function(e){var t=!1,r=new c.PropertyCollection;if(e.messageType===a.MessageType.Text&&r.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){var n=JSON.parse(e.textBody),o=void 0;o="success"!==n.status.statusCode.toLowerCase()?new c.SpeakerRecognitionResult(n,c.ResultReason.Canceled,c.CancellationErrorCode.ServiceError,n.status.reason):new c.SpeakerRecognitionResult(n,c.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(o),t=!0}var i=new a.Deferred;return i.resolve(t),i.promise},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){if(new c.PropertyCollection().setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]),this.privResultDeferral){var i=new c.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:o,reason:o}},c.ResultReason.Canceled,n,o);try{this.privResultDeferral.resolve(i)}catch(e){this.privResultDeferral.reject(e)}}},t.prototype.recognizeSpeakerOnce=function(e){return o(this,void 0,void 0,function(){var t,r,n,o,u,p,l,f,h=this;return i(this,function(i){switch(i.label){case 0:return this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new a.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(c.PropertyId.Speech_SessionId,this.privRequestSession.sessionId),t=this.connectImpl(),r=this.sendPreAudioMessages(this.extractSpeakerContext(e)),[4/*yield*/,this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId)];case 1:return n=i.sent(),[4/*yield*/,this.privSpeakerAudioSource.format];case 2:return o=i.sent(),[4/*yield*/,this.privSpeakerAudioSource.deviceInfo];case 3:return u=i.sent(),p=new s.ReplayableAudioNode(n,o.avgBytesPerSec),[4/*yield*/,this.privRequestSession.onAudioSourceAttachCompleted(p,!1)];case 4:i.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:u},i.label=5;case 5:return i.trys.push([5,8,,9]),[4/*yield*/,t];case 6:return i.sent(),[4/*yield*/,r];case 7:return i.sent(),[3/*break*/,9];case 8:return l=i.sent(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.ConnectionFailure,l),[3/*break*/,9];case 9:return f=new c.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),// /* eslint-disable no-empty */
this.sendAudio(p).then(function(){},function(e){h.cancelRecognition(h.privRequestSession.sessionId,h.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,e)}),[2/*return*/,this.privResultDeferral.promise]}})})},t.prototype.sendPreAudioMessages=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return t=r.sent(),[4/*yield*/,this.sendSpeakerRecognition(t,e)];case 2:return r.sent(),[2/*return*/]}})})},t.prototype.sendSpeakerRecognition=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){return r=JSON.stringify(t),[2/*return*/,e.send(new p.SpeechConnectionMessage(a.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",r))]})})},t.prototype.extractSpeakerContext=function(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}},t}(u.ServiceRecognizerBase);e.exports.SpeakerServiceRecognizer=l}),P.register("4adYo",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VoiceServiceRecognizer=void 0;var s=P("8nLmq"),a=P("aQGWi"),c=P("9pfmZ"),u=P("f7AdM"),p=P("hyC1Q"),l=/** @class */function(e){function t(t,r,n,o,i){var s=e.call(this,t,r,n,o,i)||this;return s.privDeferralMap=new a.DeferralMap,s.privSpeakerAudioSource=n,s.sendPrePayloadJSONOverride=function(){return s.noOp()},s}return n(t,e),Object.defineProperty(t.prototype,"SpeakerAudioSource",{set:function(e){this.privSpeakerAudioSource=e},enumerable:!1,configurable:!0}),t.prototype.processTypeSpecificMessages=function(e){var t=!1,r=new c.PropertyCollection;switch(e.messageType===a.MessageType.Text&&r.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){// Profile management response for create, fetch, delete, reset
case"speaker.profiles":var n=JSON.parse(e.textBody);switch(n.operation.toLowerCase()){case"create":this.handleCreateResponse(n,e.requestId);break;case"delete":case"reset":this.handleResultResponse(n,e.requestId);break;case"fetch":var o=JSON.parse(e.textBody);this.handleFetchResponse(o,e.requestId)}t=!0;break;// Activation and authorization phrase response
case"speaker.phrases":var i=JSON.parse(e.textBody);this.handlePhrasesResponse(i,e.requestId),t=!0;break;// Enrollment response
case"speaker.profile.enrollment":var s=JSON.parse(e.textBody),u=new c.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(s.enrollment?s.enrollment.enrollmentStatus:s.status.statusCode),s.enrollment?JSON.stringify(s.enrollment):void 0,s.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,u),this.privRequestSession.onSpeechEnded(),t=!0}var p=new a.Deferred;return p.resolve(t),p.promise},// Cancels recognition.
t.prototype.cancelRecognition=function(e,t,r,n,o){// const enrollmentResponse: EnrollmentResponse = JSON.parse(connectionMessage.textBody) as EnrollmentResponse;
new c.PropertyCollection().setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]);var i=new c.VoiceProfileEnrollmentResult(c.ResultReason.Canceled,o,o);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,i)},t.prototype.createProfile=function(e,t){return o(this,void 0,void 0,function(){var r,n;return i(this,function(o){switch(o.label){case 0:// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
this.voiceProfileType=e.toString(),r=this.connectImpl(),o.label=1;case 1:return o.trys.push([1,4,,5]),n=new a.Deferred,[4/*yield*/,r];case 2:return o.sent(),[4/*yield*/,this.sendCreateProfile(n,e,t)];case 3:return o.sent(),this.receiveMessage(),[2/*return*/,n.promise];case 4:throw o.sent();case 5:return[2/*return*/]}})})},t.prototype.resetProfile=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.voiceProfileType=e.profileType.toString(),[2/*return*/,this.sendCommonRequest("reset",e.profileType,e)]})})},t.prototype.deleteProfile=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.voiceProfileType=e.profileType.toString(),[2/*return*/,this.sendCommonRequest("delete",e.profileType,e)]})})},t.prototype.retrieveEnrollmentResult=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,[2/*return*/,this.sendCommonRequest("fetch",e.profileType,e)]})})},t.prototype.getAllProfiles=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return this.voiceProfileType=e.toString(),[2/*return*/,this.sendCommonRequest("fetch",e)]})})},t.prototype.getActivationPhrases=function(e,t){return o(this,void 0,void 0,function(){var r,n;return i(this,function(o){switch(o.label){case 0:this.voiceProfileType=e.toString(),r=this.connectImpl(),o.label=1;case 1:return o.trys.push([1,4,,5]),n=new a.Deferred,[4/*yield*/,r];case 2:return o.sent(),[4/*yield*/,this.sendPhrasesRequest(n,e,t)];case 3:return o.sent(),this.receiveMessage(),[2/*return*/,n.promise];case 4:throw o.sent();case 5:return[2/*return*/]}})})},t.prototype.enrollProfile=function(e){return o(this,void 0,void 0,function(){var t,r,n,o,u,p,l,f,h,d=this;return i(this,function(i){switch(i.label){case 0:return this.voiceProfileType=e.profileType.toString(),t=new a.Deferred,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(c.PropertyId.Speech_SessionId,this.privRequestSession.sessionId),r=this.connectImpl(),n=this.sendPreAudioMessages(e,t),[4/*yield*/,this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId)];case 1:return o=i.sent(),[4/*yield*/,this.privSpeakerAudioSource.format];case 2:return u=i.sent(),[4/*yield*/,this.privSpeakerAudioSource.deviceInfo];case 3:return p=i.sent(),l=new s.ReplayableAudioNode(o,u.avgBytesPerSec),[4/*yield*/,this.privRequestSession.onAudioSourceAttachCompleted(l,!1)];case 4:i.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p},i.label=5;case 5:return i.trys.push([5,8,,9]),[4/*yield*/,r];case 6:return i.sent(),[4/*yield*/,n];case 7:return i.sent(),[3/*break*/,9];case 8:return f=i.sent(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.ConnectionFailure,f),[3/*break*/,9];case 9:return h=new c.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h),this.receiveMessage(),// /* eslint-disable no-empty */
this.sendAudio(l).then(function(){},function(e){d.cancelRecognition(d.privRequestSession.sessionId,d.privRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,e)}),[2/*return*/,t.promise]}})})},t.prototype.sendPreAudioMessages=function(e,t){return o(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return r=n.sent(),this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),[4/*yield*/,this.sendBaseRequest(r,"enroll",this.scenarioFrom(e.profileType),e)];case 2:return n.sent(),[2/*return*/]}})})},t.prototype.sendPhrasesRequest=function(e,t,r){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return n=i.sent(),this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e),o={locale:r,scenario:this.scenarioFrom(t)},[2/*return*/,n.send(new p.SpeechConnectionMessage(a.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))]}})})},t.prototype.sendCreateProfile=function(e,t,r){return o(this,void 0,void 0,function(){var n,o;return i(this,function(i){switch(i.label){case 0:return[4/*yield*/,this.fetchConnection()];case 1:return n=i.sent(),this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e),o={locale:r,number:"1",scenario:t===c.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===c.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"},[2/*return*/,n.send(new p.SpeechConnectionMessage(a.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))]}})})},t.prototype.sendCommonRequest=function(e,t,r){return void 0===r&&(r=void 0),o(this,void 0,void 0,function(){var n,o,s;return i(this,function(i){switch(i.label){case 0:n=this.connectImpl(),i.label=1;case 1:return i.trys.push([1,5,,6]),o=new a.Deferred,this.privRequestSession.onSpeechContext(),[4/*yield*/,n];case 2:return i.sent(),[4/*yield*/,this.fetchConnection()];case 3:return s=i.sent(),this.privDeferralMap.add(this.privRequestSession.requestId,o),[4/*yield*/,this.sendBaseRequest(s,e,this.scenarioFrom(t),r)];case 4:return i.sent(),this.receiveMessage(),[2/*return*/,o.promise];case 5:throw i.sent();case 6:return[2/*return*/]}})})},t.prototype.sendBaseRequest=function(e,t,r,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){return o={scenario:r},n?o.profileIds=[n.profileId]:o.maxPageSize=-1,[2/*return*/,e.send(new p.SpeechConnectionMessage(a.MessageType.Text,"speaker.profile."+t,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(o)))]})})},t.prototype.extractSpeakerContext=function(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}},t.prototype.handlePhrasesResponse=function(e,t){if(this.privDeferralMap.getId(t)){if("success"!==e.status.statusCode.toLowerCase()){var r=c.ResultReason.Canceled,n=new c.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,n)}else if(e.phrases&&e.phrases.length>0){var r=c.ResultReason.EnrollingVoiceProfile,n=new c.VoiceProfilePhraseResult(r,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,n)}else throw Error("Voice Profile get activation phrases failed, no phrases received")}else throw Error("Voice Profile get activation phrases request for requestID "+t+" not found")},t.prototype.handleCreateResponse=function(e,t){if(e.profiles&&e.profiles.length>0){if(this.privDeferralMap.getId(t)){var r=e.profiles.map(function(e){return e.profileId});this.privDeferralMap.complete(t,r)}else throw Error("Voice Profile create request for requestID "+t+" not found")}else throw Error("Voice Profile create failed, no profile id received")},t.prototype.handleResultResponse=function(e,t){if(this.privDeferralMap.getId(t)){var r="delete"===e.operation.toLowerCase()?c.ResultReason.DeletedVoiceProfile:c.ResultReason.ResetVoiceProfile,n="success"===e.status.statusCode.toLowerCase()?r:c.ResultReason.Canceled,o=new c.VoiceProfileResult(n,"statusCode: "+e.status.statusCode+", errorDetails: "+e.status.reason);this.privDeferralMap.complete(t,o)}else throw Error("Voice Profile create request for requestID "+t+" not found")},t.prototype.handleFetchResponse=function(e,t){if(this.privDeferralMap.getId(t)&&e.profiles[0]){if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;var r=e.profiles[0],n=new c.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollmentStatus),JSON.stringify(r),e.status.reason);this.privDeferralMap.complete(t,n)}else if(e.profiles.length>0){for(var o=e.profiles,i=[],s=0;s<o.length;s++){var a=o[s];i.push(new c.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(a.enrollmentStatus),JSON.stringify(a),e.status.reason))}this.privDeferralMap.complete(t,i)}}else throw Error("Voice Profile fetch request for requestID "+t+" not found")},t.prototype.enrollmentReasonFrom=function(e){switch(e.toLowerCase()){case"enrolled":return c.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return c.ResultReason.Canceled;default:return c.ResultReason.EnrollingVoiceProfile}},t.prototype.scenarioFrom=function(e){return e===c.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===c.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"},t}(u.ServiceRecognizerBase);e.exports.VoiceServiceRecognizer=l}),P.register("8D6Lp",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FileAudioSource=void 0;var o=P("f7AdM"),i=P("aQGWi"),s=P("9k8LZ"),a=/** @class */function(){function e(e,t,r){this.privStreams={},this.privHeaderEnd=44,this.privId=r||i.createNoDashGuid(),this.privEvents=new i.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",// Read the header.
this.privAudioFormatPromise=this.readHeader()}return Object.defineProperty(e.prototype,"format",{get:function(){return this.privAudioFormatPromise},enumerable:!1,configurable:!0}),e.prototype.turnOn=function(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){var e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new i.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new i.AudioSourceInitializingEvent(this.privId)),this.onEvent(new i.AudioSourceReadyEvent(this.privId))},e.prototype.id=function(){return this.privId},e.prototype.attach=function(e){return r(this,void 0,void 0,function(){var t,o=this;return n(this,function(s){switch(s.label){case 0:return this.onEvent(new i.AudioStreamNodeAttachingEvent(this.privId,e)),[4/*yield*/,this.upload(e)];case 1:return t=s.sent(),this.onEvent(new i.AudioStreamNodeAttachedEvent(this.privId,e)),[2/*return*/,Promise.resolve({detach:function(){return r(o,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:return t.readEnded(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)),[4/*yield*/,this.turnOff()];case 1:return r.sent(),[2/*return*/]}})})},id:function(){return e},read:function(){return t.read()}})]}})})},e.prototype.detach=function(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new i.AudioStreamNodeDetachedEvent(this.privId,e)))},e.prototype.turnOff=function(){for(var e in this.privStreams)if(e){var t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new i.AudioSourceOffEvent(this.privId)),Promise.resolve()},Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceInfo",{get:function(){return this.privAudioFormatPromise.then(function(e){return Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:o.type.File})})},enumerable:!1,configurable:!0}),e.prototype.readHeader=function(){var e=this,t=this.privSource.slice(0,4296),r=new i.Deferred,n=function(t){var n=new DataView(t),o=function(e){return String.fromCharCode(n.getUint8(e),n.getUint8(e+1),n.getUint8(e+2),n.getUint8(e+3))};// RIFF 4 bytes.
if("RIFF"!==o(0)){r.reject("Invalid WAV header in file, RIFF was not found");return}// length, 4 bytes
// RIFF Type & fmt 8 bytes
if("WAVE"!==o(8)||"fmt "!==o(12)){r.reject("Invalid WAV header in file, WAVEfmt was not found");return}for(var i=n.getInt32(16,!0),a=n.getUint16(22,!0),c=n.getUint32(24,!0),u=n.getUint16(34,!0),p=36+Math.max(i-16,0);"data"!==o(p);p+=2)if(p>4288){r.reject("Invalid WAV header in file, data block was not found");return}e.privHeaderEnd=p+8,r.resolve(s.AudioStreamFormat.getWaveFormatPCM(c,u,a))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&t instanceof Blob){var o=new FileReader;o.onload=function(e){n(e.target.result)},o.readAsArrayBuffer(t)}else n(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));return r.promise},e.prototype.upload=function(e){return r(this,void 0,void 0,function(){var t,r,o,s,a,c,u,p,l=this;return n(this,function(n){switch(n.label){case 0:t=function(t){var r="Error occurred while processing '"+l.privFilename+"'. "+t;throw l.onEvent(new i.AudioStreamNodeErrorEvent(l.privId,e,r)),Error(r)},n.label=1;case 1:return n.trys.push([1,4,,5]),[4/*yield*/,this.turnOn()];case 2:return n.sent(),[4/*yield*/,this.privAudioFormatPromise];case 3:return r=n.sent(),o=new i.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e),this.privStreams[e]=o,s=this.privSource.slice(this.privHeaderEnd),a=function(e){o.isClosed||(o.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),o.close());// output stream was closed (somebody called TurnOff). We're done here.
},"undefined"!=typeof window&&"undefined"!=typeof Blob&&s instanceof Blob?((c=new FileReader).onerror=function(e){return t(e.toString())},c.onload=function(e){a(e.target.result)},c.readAsArrayBuffer(s)):a((u=s).buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)),[2/*return*/,o];case 4:return p=n.sent(),t(p),[3/*break*/,5];case 5:return[2/*return*/]}})})},e.prototype.onEvent=function(e){this.privEvents.onEvent(e),i.Events.instance.onEvent(e)},e}();e.exports.FileAudioSource=a}),P.register("2RKAy",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PcmRecorder=void 0;var r=P("aQGWi"),n=/** @class */function(){function e(e){this.privStopInputOnRelease=e}return e.prototype.record=function(e,t,n){var o=this,i=new r.RiffPcmEncoder(e.sampleRate,16e3),s=e.createMediaStreamSource(t),a=function(){// eslint-disable-next-line @typescript-eslint/explicit-function-return-type
var r=function(){var t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){// Webkit (<= version 31) requires a valid bufferSize.
t=2048;for(var r=e.sampleRate;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}}();r.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){var r=i.encode(t);r&&n.writeStreamChunk({buffer:r,isEnd:!1,timeReceived:Date.now()})}},s.connect(r),r.connect(e.destination),o.privMediaResources={scriptProcessorNode:r,source:s,stream:t}};// https://webaudio.github.io/web-audio-api/#audioworklet
// Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
if(e.audioWorklet){if(!this.privSpeechProcessorScript){var c=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(c)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(function(){var r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=function(e){var t=e.data;if(n&&!n.isClosed){var r=i.encode(t);r&&n.writeStreamChunk({buffer:r,isEnd:!1,timeReceived:Date.now()})}},s.connect(r),r.connect(e.destination),o.privMediaResources={scriptProcessorNode:r,source:s,stream:t}}).catch(function(){a()})}else try{a()}catch(e){throw Error("Unable to start audio worklet node for PCMRecorder: "+e)}},e.prototype.releaseMediaResources=function(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(function(e){return e.stop()}),this.privMediaResources.source=null))},e.prototype.setWorkletUrl=function(e){this.privSpeechProcessorScript=e},e}();e.exports.PcmRecorder=n}),P.register("de26M",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},n=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WebsocketConnection=void 0;var o=P("aQGWi"),i=P("2Nlr9"),s=/** @class */function(){function e(e,t,r,n,s,a,c){if(void 0===a&&(a=!1),this.privIsDisposed=!1,!e)throw new o.ArgumentNullError("uri");if(!n)throw new o.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;var u="",p=0;if(t){for(var l in t)if(l){u+=(0===p&&-1===e.indexOf("?")?"?":"&")+encodeURIComponent(l);var f=t[l];f&&(u+="="+(f=encodeURIComponent(f))),p++}}if(r){for(var h in r)if(h){u+=0===p&&-1===e.indexOf("?")?"?":"&";var f=encodeURIComponent(r[h]);u+=h+"="+f,p++}}this.privUri=e+u,this.privId=c||o.createNoDashGuid(),this.privConnectionMessageAdapter=new i.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,r,a)}return e.prototype.dispose=function(){return r(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:if(this.privIsDisposed=!0,!this.privConnectionMessageAdapter)return[3/*break*/,2];return[4/*yield*/,this.privConnectionMessageAdapter.close()];case 1:e.sent(),e.label=2;case 2:return[2/*return*/]}})})},e.prototype.isDisposed=function(){return this.privIsDisposed},Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uri",{get:function(){return this.privUri},enumerable:!1,configurable:!0}),e.prototype.state=function(){return this.privConnectionMessageAdapter.state},e.prototype.open=function(){return this.privConnectionMessageAdapter.open()},e.prototype.send=function(e){return this.privConnectionMessageAdapter.send(e)},e.prototype.read=function(){return this.privConnectionMessageAdapter.read()},Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionMessageAdapter.events},enumerable:!1,configurable:!0}),e}();e.exports.WebsocketConnection=s}),P.register("2Nlr9",function(e,t){var r=P("Q5vhj").Buffer,n=e.exports&&e.exports.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},a=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},c=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WebsocketMessageAdapter=void 0;var p=s(P("1DJXa")),l=s(P("1DJXa")),f=u(P("1DJXa")),h=u(P("1DJXa")),d=u(P("1DJXa")),v=P("eJOps"),y=P("aQGWi"),g=/** @class */function(){function e(e,t,r,n,o,i){if(!e)throw new y.ArgumentNullError("uri");if(!r)throw new y.ArgumentNullError("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new y.EventSource,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=y.ConnectionState.None,this.privUri=e,this.privHeaders=o,this.privEnableCompression=i,// Add the connection ID to the headers
this.privHeaders[v.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privConnectionState},enumerable:!1,configurable:!0}),e.prototype.open=function(){var t=this;if(this.privConnectionState===y.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in "+this.privConnectionState+" state");if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new y.Deferred,this.privCertificateValidatedDeferral=new y.Deferred,this.privConnectionState=y.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||e.forceNpmWebSocket){var r={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};// The ocsp library will handle validation for us and fail the connection if needed.
this.privCertificateValidatedDeferral.resolve(),r.agent=this.getAgent();var n=new URL(this.privUri).protocol;(null==n?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(null==n?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:"),// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
r.agent.protocol=n,this.privWebsocketClient=new d.default(this.privUri,r)}else // Browser handles cert checks.
this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new y.Queue,this.privDisconnectDeferral=new y.Deferred,this.privSendMessageQueue=new y.Queue,this.processSendQueue().catch(function(e){y.Events.instance.onEvent(new y.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new y.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new y.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=function(){t.privCertificateValidatedDeferral.promise.then(function(){t.privConnectionState=y.ConnectionState.Connected,t.onEvent(new y.ConnectionEstablishedEvent(t.privConnectionId)),t.privConnectionEstablishDeferral.resolve(new y.ConnectionOpenResponse(200,""))},function(e){t.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=function(e){t.onEvent(new y.ConnectionErrorEvent(t.privConnectionId,e.message,e.type)),t.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=function(e){t.privConnectionState===y.ConnectionState.Connecting?(t.privConnectionState=y.ConnectionState.Disconnected,// this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
t.privConnectionEstablishDeferral.resolve(new y.ConnectionOpenResponse(e.code,e.reason+" "+t.privLastErrorReceived))):(t.privConnectionState=y.ConnectionState.Disconnected,t.privWebsocketClient=null,t.onEvent(new y.ConnectionClosedEvent(t.privConnectionId,e.code,e.reason))),t.onClose(e.code,e.reason).catch(function(e){y.Events.instance.onEvent(new y.BackgroundEvent(e))})},this.privWebsocketClient.onmessage=function(e){var r=new Date().toISOString();if(t.privConnectionState===y.ConnectionState.Connected){var n=new y.Deferred;if(// let id = ++this.idCounter;
t.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){var o=new y.RawWebsocketMessage(y.MessageType.Binary,e.data);t.privMessageFormatter.toConnectionMessage(o).then(function(e){t.onEvent(new y.ConnectionMessageReceivedEvent(t.privConnectionId,r,e)),n.resolve(e)},function(e){// TODO: Events for these ?
n.reject("Invalid binary message format. Error: "+e)})}else{var o=new y.RawWebsocketMessage(y.MessageType.Text,e.data);t.privMessageFormatter.toConnectionMessage(o).then(function(e){t.onEvent(new y.ConnectionMessageReceivedEvent(t.privConnectionId,r,e)),n.resolve(e)},function(e){// TODO: Events for these ?
n.reject("Invalid text message format. Error: "+e)})}}},this.privConnectionEstablishDeferral.promise},e.prototype.send=function(e){if(this.privConnectionState!==y.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in "+y.ConnectionState[this.privConnectionState]+" state");var t=new y.Deferred,r=new y.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(function(n){r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})},function(e){r.reject("Error formatting the message. "+e)}),t.promise},e.prototype.read=function(){return this.privConnectionState!==y.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in "+this.privConnectionState+" state"):this.privReceivingMessageQueue.dequeue()},e.prototype.close=function(e){return this.privWebsocketClient?(this.privConnectionState!==y.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()},Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),e.prototype.sendRawMessage=function(e){try{// indicates we are draining the queue and it came with no message;
if(!e)return Promise.resolve();// add a check for the ws readystate in order to stop the red console error 'WebSocket is already in CLOSING or CLOSED state' appearing
if(this.onEvent(new y.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),!this.isWebsocketOpen)return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+Error().stack);return this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}},e.prototype.onClose=function(e,t){return a(this,void 0,void 0,function(){var r;return c(this,function(n){switch(n.label){case 0:return r="Connection closed. "+e+": "+t,this.privConnectionState=y.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),[4/*yield*/,this.privReceivingMessageQueue.drainAndDispose(function(){// TODO: Events for these ?
// Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
},r)];case 1:return n.sent(),[4/*yield*/,this.privSendMessageQueue.drainAndDispose(function(e){e.sendStatusDeferral.reject(r)},r)];case 2:return n.sent(),[2/*return*/]}})})},e.prototype.processSendQueue=function(){return a(this,void 0,void 0,function(){var e,t;return c(this,function(r){switch(r.label){case 0:return[4/*yield*/,this.privSendMessageQueue.dequeue()];case 1:// indicates we are draining the queue and it came with no message;
if(!(e=r.sent()))return[2/*return*/];r.label=2;case 2:return r.trys.push([2,4,,5]),[4/*yield*/,this.sendRawMessage(e)];case 3:return r.sent(),e.sendStatusDeferral.resolve(),[3/*break*/,5];case 4:return t=r.sent(),e.sendStatusDeferral.reject(t),[3/*break*/,5];case 5:return[3/*break*/,0];case 6:return[2/*return*/]}})})},e.prototype.onEvent=function(e){this.privConnectionEvents.onEvent(e),y.Events.instance.onEvent(e)},// eslint-disable-next-line @typescript-eslint/no-unused-vars
e.prototype.getAgent=function(){// eslint-disable-next-line @typescript-eslint/unbound-method
var e=new f.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e},e.GetProxyAgent=function(e){var t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new r(e.UserName+":"+(void 0===e.Password?"":e.Password)).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new h.default(t)},e.prototype.createConnection=function(t,r){var o;if(r=n(n({},r),{requestOCSP:!0,servername:r.host}),this.proxyInfo){var i=e.GetProxyAgent(this.proxyInfo);o=new Promise(function(e,n){i.callback(t,r,function(t,r){t?n(t):e(r)})})}else o=r.secureEndpoint?Promise.resolve(l.connect(r)):Promise.resolve(p.connect(r));return o},Object.defineProperty(e.prototype,"isWebsocketOpen",{get:function(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN},enumerable:!1,configurable:!0}),e.forceNpmWebSocket=!1,e}();e.exports.WebsocketMessageAdapter=g}),P.register("9oPjI",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ReplayableAudioNode=void 0;var r=/** @class */function(){function e(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}return e.prototype.id=function(){return this.privAudioNode.id()},// Reads and returns the next chunk of audio buffer.
// If replay of existing buffers are needed, read() will first seek and replay
// existing content, and upoin completion it will read new content from the underlying
// audio node, saving that content into the replayable buffers.
e.prototype.read=function(){var e=this;// if there is a replay request to honor.
if(this.privReplay&&0!==this.privBuffers.length){var t=Math.round((this.privReplayOffset-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7);0!=t%2&&t++;for(var r=0;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){var o=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=o.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:o,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(function(t){return t&&t.buffer&&(e.privBuffers.push(new n(t,e.privBufferSerial++,e.privBufferedBytes)),e.privBufferedBytes+=t.buffer.byteLength),t})},e.prototype.detach=function(){return this.privBuffers=void 0,this.privAudioNode.detach()},e.prototype.replay=function(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)},// Shrinks the existing audio buffers to start at the new offset, or at the
// beginning of the buffer closest to the requested offset.
// A replay request will start from the last shrink point.
e.prototype.shrinkBuffers=function(e){if(void 0!==this.privBuffers&&0!==this.privBuffers.length){this.privLastShrinkOffset=e;for(var t=Math.round((e-this.privBufferStartOffset)*this.privBytesPerSecond*1e-7),r=0;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-t/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}},// Finds the time a buffer of audio was first seen by offset.
e.prototype.findTimeAtOffset=function(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(var t=0,r=this.privBuffers;t<r.length;t++){var n=r[t],o=n.byteOffset/this.privBytesPerSecond*1e7,i=o+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=o&&e<=i)return n.chunk.timeReceived}return 0},e}();e.exports.ReplayableAudioNode=r;// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
var n=function(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}),P.register("dQE5q",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ProxyInfo=void 0;var r=P("9pfmZ"),n=/** @class */function(){function e(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}return e.fromParameters=function(t){return new e(t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))},e.fromRecognizerConfig=function(e){return this.fromParameters(e.parameters)},Object.defineProperty(e.prototype,"HostName",{get:function(){return this.privProxyHostName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Port",{get:function(){return this.privProxyPort},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserName",{get:function(){return this.privProxyUserName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Password",{get:function(){return this.privProxyPassword},enumerable:!1,configurable:!0}),e}();e.exports.ProxyInfo=n}),P.register("9nHn9",function(e,t){// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var r,n,o=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})},i=e.exports&&e.exports.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},s=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RestMessageAdapter=e.exports.RestRequestType=void 0;var a=s(P("JIqS1")),c=P("aQGWi");(r=n=e.exports.RestRequestType||(e.exports.RestRequestType={})).Get="GET",r.Post="POST",r.Delete="DELETE",r.File="file";// accept rest operations via request method and return abstracted objects from server response
var u=/** @class */function(){function e(e){if(!e)throw new c.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}return e.extractHeaderValue=function(e,t){var r="";try{var n=t.trim().split(/[\r\n]+/),o={};n.forEach(function(e){var t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");o[r]=n}),r=o[e.toLowerCase()]}catch(e){// ignore the error
}return r},Object.defineProperty(e.prototype,"options",{set:function(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache},enumerable:!1,configurable:!0}),e.prototype.setHeaders=function(e,t){this.privHeaders[e]=t},e.prototype.request=function(e,t,r,s){var u=this;void 0===r&&(r={}),void 0===s&&(s=null);var p=new c.Deferred,l=e===n.File?"POST":e,f=function(e,t){return void 0===t&&(t={}),{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:e.statusText?e.statusText:e.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===n.Post&&s&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),function(s){a.default(t,l,u.privHeaders,200,201,202,204,400,401,402,403,404)(""===u.queryParams(r)?"":"?"+u.queryParams(r),s).then(function(t){return o(u,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:if(!(e===n.Delete||204===t.statusCode))return[3/*break*/,1];return(// No JSON from Delete and reset (204) operations
p.resolve(f(t)),[3/*break*/,4]);case 1:return o.trys.push([1,3,,4]),[4/*yield*/,t.json()];case 2:return r=o.sent(),p.resolve(f(t,r)),[3/*break*/,4];case 3:return o.sent(),p.resolve(f(t)),[3/*break*/,4];case 4:return[2/*return*/]}})})}).catch(function(e){p.reject(e)})}(s),p.promise},e.prototype.queryParams=function(e){return void 0===e&&(e={}),Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},e}();e.exports.RestMessageAdapter=u}),P.register("JIqS1",function(e,t){var r=P("438C2");class n extends Error{constructor(e,...t){let r;for(let[o,i]of(super(...t),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),// match Node.js headers object
this.headers={},e.headers.entries()))this.headers[o.toLowerCase()]=i}}e.exports=r((e,t,r,o,i)=>async(s,a,c={})=>{s=i+(s||"");let u=new URL(s);if(o||(o={}),u.username&&(o.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw Error(`Unknown protocol, ${u.protocol}`);if(a){if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"==typeof a);else if("object"==typeof a)a=JSON.stringify(a),o["Content-Type"]="application/json";else throw Error("Unknown body type.")}c=new Headers({...o||{},...c});let p=await fetch(u,{method:t,headers:c,body:a});if(p.statusCode=p.status,!e.has(p.status))throw new n(p);return"json"===r?p.json():"buffer"===r?p.arrayBuffer():"string"===r?p.text():p})}),P.register("438C2",function(e,t){let r=new Set(["json","buffer","string"]);e.exports=e=>(...t)=>{let n,o,i;let s=new Set,a="";return t.forEach(e=>{if("string"==typeof e){if(e.toUpperCase()===e){if(n){let t=`Can't set method to ${e}, already set to ${n}.`;throw Error(t)}n=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else if(r.has(e))o=e;else throw Error(`Unknown encoding, ${e}`)}else if("number"==typeof e)s.add(e);else if("object"==typeof e){if(Array.isArray(e)||e instanceof Set)e.forEach(e=>s.add(e));else{if(i)throw Error("Cannot set headers twice.");i=e}}else throw Error(`Unknown type: ${typeof e}`)}),n||(n="GET"),0===s.size&&s.add(200),e(s,n,o,i,a)}}),P.register("5xfiI",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){var e,t=[];return{push:function(r){if(e){var n=e.resolve;e=null,n(r)}else t.push(r)},shift:function(){return t.length?Promise.resolve(t.shift()):(e||(e=(0,n.default)())).promise}}};var n=r(P("dUp1o"))}),P.register("hK8p4",function(e,t){var r=P("WuZRa");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=r(P("9Elbq")),o=r(P("foXoB")),i=/*#__PURE__*/function(){function e(){(0,n.default)(this,e),this._phrases=[]}return(0,o.default)(e,[{key:"addFromString",value:function(){throw Error("JSGF is not supported")}},{key:"phrases",get:function(){return this._phrases},set:function(e){if(Array.isArray(e))this._phrases=e;else if("string"==typeof e)this._phrases=[e];else throw Error("The provided value is not an array or of type 'string'")}}]),e}();e.exports.default=i});let C=e=>{if("undefined"==typeof window)return;let t=function(){let e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==y?y:void 0;if(e.__xstate__)return e.__xstate__}();t&&t.register(e)},R=((e={}).After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e);R.After,R.DoneState;let x=R.ErrorExecution,O=R.ErrorPlatform;R.ErrorCustom;let w="xstate.init",E=new WeakMap;function I(e,t,r){let n=E.get(e);return n?t in n||(n[t]=r()):(n={[t]:r()},E.set(e,n)),n[t]}function T(e,t,r,{sendId:n}){let o="function"==typeof n?n(r):n;return[t,o]}function A(e,t){e.self.cancel(t)}class _{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}// TODO: rethink this design
prepend(e){if(!this._current){this.enqueue(e);return}// we know that something is already queued up
// so the mailbox is already flushing or it's inactive
// therefore the only thing that we need to do is to reassign `this._current`
this._current={value:e,next:this._current}}enqueue(e){let t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){// atm the given _process is responsible for implementing proper try/catch handling
// we assume here that this won't throw in a way that can affect this mailbox
let e=this._current;this._process(e.value),e===this._current&&(this._current=this._current.next)}this._last=null}}let k="function"==typeof Symbol&&Symbol.observable||"@@observable";function M(e){try{if(F(e))return e;return e.toString().split(".")}catch(t){throw Error(`'${e}' is not a valid state path.`)}}function N(e){if("object"==typeof e&&"value"in e&&"context"in e&&"event"in e)return e.value;if(F(e))return j(e);if("string"!=typeof e)return e;let t=M(e);return j(t)}function j(e){if(1===e.length)return e[0];let t={},r=t;for(let t=0;t<e.length-1;t++)if(t===e.length-2)r[e[t]]=e[t+1];else{let n=r;r={},n[e[t]]=r}return t}function D(e,t){let r={},n=Object.keys(e);for(let o=0;o<n.length;o++){let i=n[o];r[i]=t(e[i],i,e,o)}return r}function L(e){return[].concat(...e)}function z(e){return void 0===e?[]:F(e)?e:[e]}function B(e,t,r,n){return"function"==typeof e?e({context:t,event:r,self:n}):e}function F(e){return Array.isArray(e)}function V(e){return(F(e)?e:[e]).map(e=>void 0===e||"string"==typeof e?{target:e}:e)}function G(e){if(void 0!==e&&""!==e)return z(e)}function U(e){return e?"transition"in e?{src:e,input:void 0}:e:void 0}let q="$$xstate.resolve",K="$$xstate.reject";function W(e){return{config:e,transition:(e,t)=>{if("active"!==e.status)return e;switch(t.type){case q:return{...e,status:"done",data:t.data,input:void 0};case K:return{...e,status:"error",data:t.data,// TODO: if we keep this as `data` we should reflect this in the type
input:void 0};case H:return{...e,status:"canceled",input:void 0};default:return e}},start:(t,{self:r,system:n})=>{// TODO: determine how to allow customizing this so that promises
// can be restarted if necessary
if("active"!==t.status)return;let o=Promise.resolve(e({input:t.input,system:n,self:r}));o.then(e=>{"active"===r._state.status&&r.send({type:q,data:e})},e=>{"active"===r._state.status&&r.send({type:K,data:e})})},getInitialState:(e,t)=>({status:"active",data:void 0,input:t}),getSnapshot:e=>e.data,getStatus:e=>e,getPersistedState:e=>e,restoreState:e=>e}}let H="xstate.stop";/**
 * This function makes sure that unhandled errors are thrown in a separate macrotask.
 * It allows those errors to be detected by global error handlers and reported to bug tracking services
 * without interrupting our own stack of execution.
 *
 * @param err error to be thrown
 */function J(e){setTimeout(()=>{throw e})}r=void 0,t=e=>void 0,e=>e;let Q=((n={})[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n),$={deferEvents:!0,clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class Z{/**
   * The current internal state of the actor.
   *//**
   * The clock that is responsible for setting and clearing timeouts, such as delayed events and transitions.
   *//**
   * The unique identifier for this actor relative to its parent.
   *//**
   * Whether the service is started.
   */// Actor Ref
// TODO: add typings for system
/**
   * The globally unique process ID for this invocation.
   *//**
   * Creates a new actor instance for the given logic with the provided options, if any.
   *
   * @param logic The logic to create an actor from
   * @param options Actor options
   */constructor(e,t){this.logic=e,this._state=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new _(this._process.bind(this)),this.delayedEventsMap={},this.observers=new Set,this.logger=void 0,this.status=Q.NotStarted,this._parent=void 0,this.ref=void 0,this._actorContext=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let r={...$,...t},{clock:n,logger:o,parent:i,id:s,systemId:a}=r;this.system=i?.system??function(){let e=0,t=new Map,r=new Map,n=new WeakMap;return{_bookId:()=>`x:${e++}`,_register:(e,r)=>(t.set(e,r),e),_unregister:e=>{t.delete(e.sessionId);let o=n.get(e);void 0!==o&&(r.delete(o),n.delete(e))},get:e=>r.get(e),_set:(e,t)=>{let o=r.get(e);if(o&&o!==t)throw Error(`Actor with system ID '${e}' already exists.`);r.set(e,t),n.set(t,e)}}}(),a&&(this._systemId=a,this.system._set(a,this)),this.sessionId=this.system._bookId(),this.id=s??this.sessionId,this.logger=o,this.clock=n,this._parent=i,this.options=r,this.src=r.src,this.ref=this,this._actorContext={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:e=>{this._deferred.push(e)},system:this.system,stopChild:e=>{if(e._parent!==this)throw Error(`Cannot stop child actor ${e.id} of ${this.id} because it is not a child`);e._stop()}},// Ensure that the send method is bound to this Actor instance
// if destructured
this.send=this.send.bind(this),this._initState()}_initState(){this._state=this.options.state?this.logic.restoreState?this.logic.restoreState(this.options.state,this._actorContext):this.options.state:this.logic.getInitialState(this._actorContext,this.options?.input)}// array of functions to defer
update(e){let t;// Update state
this._state=e;let r=this.getSnapshot();for(;t=this._deferred.shift();)t();for(let e of this.observers)try{e.next?.(r)}catch(e){J(e)}let n=this.logic.getStatus?.(e);switch(n?.status){case"done":this._stopProcedure(),this._complete(),this._doneEvent=/**
 * Returns an event that represents that an invoked service has terminated.
 *
 * An invoked service is terminated when it has reached a top-level final state node,
 * but not when it is canceled.
 *
 * @param invokeId The invoked service ID
 * @param output The data to pass into the event
 */function(e,t){let r=`${R.DoneInvoke}.${e}`,n={type:r,output:t};return n.toString=()=>r,n}(this.id,n.data),this._parent?.send(this._doneEvent);break;case"error":this._stopProcedure(),this._error(n.data),this._parent?.send(eU(this.id,n.data))}}subscribe(e,t,r){let n=function(e,t,r){let n="object"==typeof e,o=n?e:void 0;return{next:(n?e.next:e)?.bind(o),error:(n?e.error:t)?.bind(o),complete:(n?e.complete:r)?.bind(o)}}(e,t,r);if(this.status!==Q.Stopped)this.observers.add(n);else try{n.complete?.()}catch(e){J(e)}return{unsubscribe:()=>{this.observers.delete(n)}}}/**
   * Starts the Actor from the initial state
   */start(){if(this.status===Q.Running)return this;this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this.status=Q.Running;let e=this.logic.getStatus?.(this._state);switch(e?.status){case"done":// a state machine can be "done" upon intialization (it could reach a final state using initial microsteps)
// we still need to complete observers, flush deferreds etc
this.update(this._state);// fallthrough
case"error":// TODO: rethink cleanup of observers, mailbox, etc
return this}if(this.logic.start)try{this.logic.start(this._state,this._actorContext)}catch(e){return this._stopProcedure(),this._error(e),this._parent?.send(eU(this.id,e)),this}return(// TODO: this notifies all subscribers but usually this is redundant
// there is no real change happening here
// we need to rethink if this needs to be refactored
this.update(this._state),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this)}_process(e){// TODO: reexamine what happens when an action (or a guard or smth) throws
let t,r;try{t=this.logic.transition(this._state,e,this._actorContext)}catch(e){// we wrap it in a box so we can rethrow it later even if falsy value gets caught here
r={err:e}}if(r){let{err:e}=r;this._stopProcedure(),this._error(e),this._parent?.send(eU(this.id,e));return}this.update(t),e.type===H&&(this._stopProcedure(),this._complete())}_stop(){return this.status===Q.Stopped||((this.mailbox.clear(),this.status===Q.NotStarted)?this.status=Q.Stopped:this.mailbox.enqueue({type:H})),this}/**
   * Stops the Actor and unsubscribe all listeners.
   */stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let e of this.observers)try{e.complete?.()}catch(e){J(e)}this.observers.clear()}_error(e){if(!this.observers.size){this._parent||J(e);return}let t=!1;for(let r of this.observers){let n=r.error;t||=!n;try{n?.(e)}catch(e){J(e)}}this.observers.clear(),t&&J(e)}_stopProcedure(){if(this.status!==Q.Running)return this;// Cancel all delayed events
for(let e of Object.keys(this.delayedEventsMap))this.clock.clearTimeout(this.delayedEventsMap[e]);return(// TODO: mailbox.reset
this.mailbox.clear(),// TODO: after `stop` we must prepare ourselves for receiving events again
// events sent *after* stop signal must be queued
// it seems like this should be the common behavior for all of our consumers
// so perhaps this should be unified somehow for all of them
this.mailbox=new _(this._process.bind(this)),this.status=Q.Stopped,this.system._unregister(this),this)}/**
   * Sends an event to the running Actor to trigger a transition.
   *
   * @param event The event to send
   */send(e){if("string"==typeof e)throw Error(`Only event objects may be sent to actors; use .send({ type: "${e}" }) instead`);if(this.status!==Q.Stopped){if(this.status!==Q.Running&&!this.options.deferEvents)throw Error(`Event "${e.type}" was sent to uninitialized actor "${this.id}". Make sure .start() is called for this actor, or set { deferEvents: true } in the actor options.
Event: ${JSON.stringify(e)}`);this.mailbox.enqueue(e)}}// TODO: make private (and figure out a way to do this within the machine)
delaySend({event:e,id:t,delay:r,to:n}){let o=this.clock.setTimeout(()=>{n?n.send(e):this.send(e)},r);t&&(this.delayedEventsMap[t]=o)}// TODO: make private (and figure out a way to do this within the machine)
cancel(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]}attachDevTools(){let{devTools:e}=this.options;e&&("function"==typeof e?e:C)(this)}toJSON(){return{id:this.id}}getPersistedState(){return this.logic.getPersistedState?.(this._state)}[k](){return this}getSnapshot(){return this.logic.getSnapshot?this.logic.getSnapshot(this._state):this._state}}/**
 * Creates a new `ActorRef` instance for the given machine with the provided options, if any.
 *
 * @param machine The machine to create an actor from
 * @param options `ActorRef` options
 */function Y(e,t){let r=new Z(e,t);return r}/**
 * @deprecated Use `Actor` instead.
 */function X(e,t,r,{id:n,systemId:o,src:i,input:s}){let a;let c=U(t.machine.implementations.actors[i]);if(c){// TODO: inline `input: undefined` should win over the referenced one
let u=s||c.input;a=Y(c.src,{id:n,src:i,parent:e?.self,systemId:o,input:"function"==typeof u?u({context:t.context,event:r.event,self:e?.self}):u})}return[eN(t,{children:{...t.children,[n]:a}}),{id:n,actorRef:a}]}function ee(e,{id:t,actorRef:r}){r&&e.defer(()=>{if(r.status!==Q.Stopped)try{r.start?.()}catch(r){e.self.send(eU(t,r));return}})}function et(e,t,r,n){let{machine:o}=n,i=o?.implementations?.guards?.[e.type]??e.predicate;if(!i)throw Error(`Guard '${e.type}' is not implemented.'.`);return i({context:t,event:r,state:n,guard:e,evaluate:et})}let er=e=>"atomic"===e.type||"final"===e.type;function en(e){return Object.values(e.states).filter(e=>"history"!==e.type)}function eo(e,t){let r=[],n=e.parent;for(;n&&n!==t;)r.push(n),n=n.parent;return r}function ei(e){let t=new Set(e),r=new Set(e),n=es(r);// add descendants
for(let e of t)if("compound"!==e.type||n.get(e)&&n.get(e).length){if("parallel"===e.type){for(let t of en(e))if("history"!==t.type&&!r.has(t))for(let e of ed(t))r.add(e)}}else ed(e).forEach(e=>r.add(e));// add all ancestors
for(let e of r){let t=e.parent;for(;t;)r.add(t),t=t.parent}return r}function es(e){let t=new Map;for(let r of e)t.has(r)||t.set(r,[]),r.parent&&(t.has(r.parent)||t.set(r.parent,[]),t.get(r.parent).push(r));return t}function ea(e,t){let r=ei(t);return function e(t,r){let n=r.get(t);if(!n)return{};// todo: fix?
if("compound"===t.type){let e=n[0];if(!e)return{};if(er(e))return e.key}let o={};for(let t of n)o[t.key]=e(t,r);return o}(e,es(r))}function ec(e,t=e[0].machine.root){return"compound"===t.type?en(t).some(t=>"final"===t.type&&e.includes(t)):"parallel"===t.type&&en(t).every(t=>ec(e,t))}let eu=e=>"#"===e[0];function ep(e,t,r){let n=G(r.target),o=r.reenter??!1,{guards:i}=e.machine.implementations,s=el(e,n),a={...r,actions:z(r.actions),guard:r.guard?function e(t,r){// TODO: check for cycles and consider a refactor to more lazily evaluated guards
// TODO: resolve this more recursively: https://github.com/statelyai/xstate/pull/4064#discussion_r1229915724
if("string"==typeof t){let e=r?.(t);return"function"==typeof e?{type:t,predicate:e,params:{type:t}}:e||{type:t,params:{type:t}}}if("function"==typeof t)return{type:t.name,predicate:t,params:{type:t.name,name:t.name}};let n=r?.(t.type);return"function"==typeof n?{type:t.type,params:t.params||t,children:t.children?.map(t=>e(t,r)),predicate:r?.(t.type)||t.predicate}:n||{type:t.type,params:t.params||t,children:t.children?.map(t=>e(t,r)),predicate:t.predicate}}(r.guard,e=>i[e]):void 0,target:s,source:e,reenter:o,eventType:t,toJSON:()=>({...a,source:`#${e.id}`,target:s?s.map(e=>`#${e.id}`):void 0})};return a}function el(e,t){if(void 0!==t)return t.map(t=>{if("string"!=typeof t)return t;if(eu(t))return e.machine.getStateNodeById(t);let r="."===t[0];// If internal target is defined on machine,
// do not include machine key on target
if(r&&!e.parent)return ey(e,t.slice(1));let n=r?e.key+t:t;if(e.parent)try{let t=ey(e.parent,n);return t}catch(t){throw Error(`Invalid transition definition for state node '${e.id}':
${t.message}`)}else throw Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function ef(e){let t=G(e.target);return t?t.map(t=>"string"==typeof t?ey(e.parent,t):t):e.parent.initial.target}function eh(e){return"history"===e.type}function ed(e){let t=new Set;return!function r(n){if(!t.has(n)){if(t.add(n),"compound"===n.type)for(let o of n.initial.target){for(let r of eo(o,e))t.add(r);r(o)}else if("parallel"===n.type)for(let e of en(n))r(e)}}(e),[...t]}/**
 * Returns the child state node from its relative `stateKey`, or throws.
 */function ev(e,t){if(eu(t))return e.machine.getStateNodeById(t);if(!e.states)throw Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);let r=e.states[t];if(!r)throw Error(`Child state '${t}' does not exist on '${e.id}'`);return r}/**
 * Returns the relative state node from the given `statePath`, or throws.
 *
 * @param statePath The string or string array relative path to the state node.
 */function ey(e,t){if("string"==typeof t&&eu(t))try{return e.machine.getStateNodeById(t)}catch(e){// try individual paths
// throw e;
}let r=M(t).slice(),n=e;for(;r.length;){let e=r.shift();if(!e.length)break;n=ev(n,e)}return n}/**
 * Returns the state nodes represented by the current state value.
 *
 * @param state The state value or State instance
 */function eg(e,t){let r=t instanceof eM?t.value:N(t);if("string"==typeof r)return[e,e.states[r]];let n=Object.keys(r),o=n.map(t=>ev(e,t)).filter(Boolean);return[e.machine.root,e].concat(o,n.reduce((t,n)=>{let o=ev(e,n);if(!o)return t;let i=eg(o,r[n]);return t.concat(i)},[]))}function em(e,t){let r=e;for(;r.parent&&r.parent!==t;)r=r.parent;return r.parent===t}function eb(e){let t=[],r=e.parent;for(;r;)t.unshift(r),r=r.parent;return t}function eS(e,t,r){let n=new Set;for(let o of e){let e=!1,i=new Set;for(let s of n)if(function(e,t){let r=new Set(e),n=new Set(t);for(let e of r)if(n.has(e))return!0;for(let e of n)if(r.has(e))return!0;return!1}(eR([o],t,r),eR([s],t,r))){if(em(o.source,s.source))i.add(s);else{e=!0;break}}if(!e){for(let e of i)n.delete(e);n.add(o)}}return Array.from(n)}function eP(e,t){if(!e.target)return[];let r=new Set;for(let n of e.target)if(eh(n)){if(t[n.id])for(let e of t[n.id])r.add(e);else for(let e of eP({target:ef(n)},t))r.add(e)}else r.add(n);return[...r]}function eC(e,t){let r=eP(e,t);if(!r)return null;if(!e.reenter&&"parallel"!==e.source.type&&r.every(t=>em(t,e.source)))return e.source;let n=function(e){let[t]=e,r=eb(t);for(let t of e){let e=eb(t);r=r.filter(t=>e.includes(t))}return r[r.length-1]}(r.concat(e.source));return n}function eR(e,t,r){let n=new Set;for(let o of e)if(o.target?.length){let e=eC(o,r);for(let r of t)em(r,e)&&n.add(r)}return[...n]}/**
 * https://www.w3.org/TR/scxml/#microstepProcedure
 *
 * @private
 * @param transitions
 * @param currentState
 * @param mutConfiguration
 */function ex(e,t,r,n,o){let i=new Set(t.configuration);if(!e.length)return t;let s=function(e,t,r,n,o,i){let s=[],a={...t.historyValue},c=eS(e,r,a),u=[...t._internalQueue];i||function(e,t,r,n){let o=eR(e,t,r);// From SCXML algorithm: https://www.w3.org/TR/scxml/#exitStates
for(let e of(o.sort((e,t)=>t.order-e.order),o))for(let n of function(e){return Object.keys(e.states).map(t=>e.states[t]).filter(e=>"history"===e.type)}(e)){let o;o="deep"===n.history?t=>er(t)&&em(t,e):t=>t.parent===e,r[n.id]=Array.from(t).filter(o)}for(let e of o)n.push(...e.exit,...e.invoke.map(e=>eL(e.id))),t.delete(e)}(c,r,a,s),// Execute transition content
s.push(...c.flatMap(e=>e.actions)),// Enter states
function(e,t,r,n,o,i,s,a,c){let u=new Set,p=new Set;for(let l of(eO(t,s,p,u),a&&p.add(i.machine.root),[...u].sort((e,t)=>e.order-t.order))){for(let e of(r.add(l),l.invoke))n.push(function({id:e,systemId:t,src:r,input:n}){function o(e){}return o.type="xstate.invoke",o.id=e,o.systemId=t,o.src=r,o.input=n,o.resolve=X,o.execute=ee,o}(e));if(// Add entry actions
n.push(...l.entry),p.has(l))for(let e of p){let t=e.initial.actions;n.push(...t)}if("final"===l.type){let t=l.parent;if(!t.parent)continue;if(o.push(eG(t.id,l.output?B(l.output,i.context,e,c.self):void 0)),t.parent){let e=t.parent;"parallel"===e.type&&en(e).every(e=>ec([...r],e))&&o.push(eG(e.id))}}}}(n,c,r,s,u,t,a,i,o);let p=[...r],l=ec(p);if(l){let e=p.sort((e,t)=>t.order-e.order).flatMap(e=>e.exit);s.push(...e)}try{let e=eI(s,n,t,o),r=l?function(e,t,r,n){let o=e[0].machine,i=e.find(e=>"final"===e.type&&e.parent===o.root);return i&&i.output?B(i.output,t,r,n):void 0}(p,e.context,n,o.self):void 0;return u.push(...e._internalQueue),eN(t,{configuration:p,historyValue:a,_internalQueue:u,context:e.context,done:l,output:r,children:e.children})}catch(e){// TODO: Refactor this once proper error handling is implemented.
// See https://github.com/statelyai/rfcs/pull/4
throw e}}(e,t,i,n,r,o);return eN(s,{value:{}// TODO: make optional
})}function eO(e,t,r,n){for(let o of e){for(let e of o.target||[])ew(e,t,r,n);let e=eC(o,t),i=eP(o,t);for(let o of i)eE(o,e,n,t,r)}}function ew(e,t,r,n){if(eh(e)){if(t[e.id]){let o=t[e.id];for(let e of o)ew(e,t,r,n);for(let i of o)for(let o of(eE(i,e.parent,n,t,r),r))r.add(o)}else{let o=ef(e);for(let e of o)ew(e,t,r,n);for(let i of o)for(let o of(eE(i,e,n,t,r),r))r.add(o)}}else if(n.add(e),"compound"===e.type){r.add(e);let o=e.initial.target;for(let e of o)ew(e,t,r,n);for(let i of o)eE(i,e,n,t,r)}else if("parallel"===e.type)for(let o of en(e).filter(e=>!eh(e)))[...n].some(e=>em(e,o))||ew(o,t,r,n)}function eE(e,t,r,n,o){let i=eo(e,t);for(let e of i)if(r.add(e),"parallel"===e.type)for(let t of en(e).filter(e=>!eh(e)))[...r].some(e=>em(e,t))||ew(t,n,o,r)}function eI(e,t,r,n){let{machine:o}=r,i=eN(r,{_internalQueue:[]});for(let r of e){let e="function"==typeof r,s=e?r:// it's fine to cast this here to get a common type and lack of errors in the rest of the code
// our logic below makes sure that we call those 2 "variants" correctly
o.implementations.actions["string"==typeof r?r:r.type];if(!s)continue;let a={context:i.context,event:t,self:n?.self,system:n?.system,action:e?void 0:"string"==typeof r?{type:r}:r};if(!("resolve"in s)){n?.self.status===Q.Running?s(a):n?.defer(()=>s(a));continue}let[c,u,p]=s.resolve(n,i,a,s// this holds all params
);i=c,"execute"in s&&(n?.self.status===Q.Running?s.execute(n,u):n?.defer(s.execute.bind(null,n,u))),p&&(i=eI(p,t,i,n))}return i}function eT(e,t,r){let n=e,o=[];// Handle stop event
if(t.type===H)return n=eA(t,n,r),o.push(n),{state:n,microstates:o};let i=t;// Assume the state is at rest (no raised events)
// Determine the next state based on the next microstep
if(i.type!==w){let t=e_(i,n);n=ex(t,e,r,i,!1),o.push(n)}for(;!n.done;){let e=function(e,t){let r=new Set,n=e.configuration.filter(er);for(let o of n)e:for(let n of[o].concat(eo(o,null)))if(n.always){for(let o of n.always)if(void 0===o.guard||et(o.guard,e.context,t,e)){r.add(o);break e}}return eS(Array.from(r),new Set(e.configuration),e.historyValue)}(n,i);if(e.length)n=ex(e,n,r,i,!1),o.push(n);else if(n._internalQueue.length){i=n._internalQueue[0];let e=e_(i,n);(n=ex(e,n,r,i,!1))._internalQueue.shift(),o.push(n)}else break}return n.done&&eA(i,n,r),{state:n,microstates:o}}function eA(e,t,r){let n=[];for(let e of t.configuration.sort((e,t)=>t.order-e.order))n.push(...e.exit);for(let e of Object.values(t.children))n.push(eL(e));return eI(n,e,t,r)}function e_(e,t){return t.machine.getTransitionData(t,e)}/**
 * Resolves a partial state value with its full representation in the state node's machine.
 *
 * @param stateValue The partial state value to resolve.
 */function ek(e,t){let r=ei(eg(e,t));return ea(e,[...r])}class eM{/**
   * Indicates whether the state is a final state.
   *//**
   * The output data of the top-level finite state.
   *//**
   * The enabled state nodes representative of the state value.
   *//**
   * An object mapping actor names to spawned/invoked actors.
   *//**
   * Creates a new State instance for the given `stateValue` and `context`.
   * @param stateValue
   * @param context
   */static from(e,t={},r){if(e instanceof eM)return e.context!==t?new eM({value:e.value,context:t,meta:{},configuration:[],// TODO: fix,
children:{}},r):e;let n=ei(eg(r.root,e));return new eM({value:e,context:t,meta:void 0,configuration:Array.from(n),children:{}},r)}/**
   * Creates a new `State` instance that represents the current state of a running machine.
   *
   * @param config
   */constructor(e,t){this.machine=t,this.tags=void 0,this.value=void 0,this.done=void 0,this.output=void 0,this.error=void 0,this.context=void 0,this.historyValue={},this._internalQueue=void 0,this.configuration=void 0,this.children=void 0,this.context=e.context,this._internalQueue=e._internalQueue??[],this.historyValue=e.historyValue||{},this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration??Array.from(ei(eg(t.root,e.value))),this.children=e.children,this.value=ea(t.root,this.configuration),this.tags=new Set(L(this.configuration.map(e=>e.tags))),this.done=e.done??!1,this.output=e.output,this.error=e.error}/**
   * Returns an array of all the string leaf state node paths.
   * @param stateValue
   * @param delimiter The character(s) that separate each subpath in the string state node path.
   */toStrings(e=this.value){if("string"==typeof e)return[e];let t=Object.keys(e);return t.concat(...t.map(t=>this.toStrings(e[t]).map(e=>t+"."+e)))}toJSON(){let{configuration:e,tags:t,machine:r,...n}=this;return{...n,tags:Array.from(t),meta:this.meta}}/**
   * Whether the current state value is a subset of the given parent state value.
   * @param parentStateValue
   */matches(e){return function e(t,r){let n=N(t),o=N(r);return"string"==typeof o?"string"==typeof n&&o===n:"string"==typeof n?n in o:Object.keys(n).every(t=>t in o&&e(n[t],o[t]))}(e,this.value)}/**
   * Whether the current state configuration has a state node with the specified `tag`.
   * @param tag
   */hasTag(e){return this.tags.has(e)}/**
   * Determines whether sending the `event` will cause a non-forbidden transition
   * to be selected, even if the transitions have no actions nor
   * change the state value.
   *
   * @param event The event to test
   * @returns Whether the event will cause a transition
   */can(e){let t=this.machine.getTransitionData(this,e);return!!t?.length&&// Check that at least one transition is not forbidden
t.some(e=>void 0!==e.target||e.actions.length)}/**
   * The next events that will cause a transition from the current state.
   */get nextEvents(){return I(this,"nextEvents",()=>[...new Set(L([...this.configuration.map(e=>e.ownEvents)]))])}get meta(){return this.configuration.reduce((e,t)=>(void 0!==t.meta&&(e[t.id]=t.meta),e),{})}}function eN(e,t={}){return new eM({...e,...t},e.machine)}function ej(e,t,r,{actorRef:n}){let o="function"==typeof n?n(r):n,i="string"==typeof o?t.children[o]:o,s=t.children;return i&&(s={...s},delete s[i.id]),[eN(t,{children:s}),i]}function eD(e,t){if(t){if(t.status!==Q.Running){e.stopChild(t);return}// TODO: recheck why this one has to be deferred
e.defer(()=>{e.stopChild(t)})}}/**
 * Stops an actor.
 *
 * @param actorRef The actor to stop.
 */function eL(e){function t(e){}return t.type="xstate.stop",t.actorRef=e,t.resolve=ej,t.execute=eD,t}function ez(e,t,r,{assignment:n}){if(!t.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let o={},i={context:t.context,event:r.event,action:r.action,spawn:function(e,{machine:t,context:r},n,o){let i=(i,s={})=>{let{systemId:a}=s;if("string"!=typeof i)return Y(i,{id:s.id,parent:e.self,input:s.input,systemId:a});{let c=U(t.implementations.actors[i]);if(!c)throw Error(`Actor logic '${i}' not implemented in machine '${t.id}'`);let u="input"in s?s.input:c.input,p=Y(c.src,{id:s.id,parent:e.self,input:"function"==typeof u?u({context:r,event:n,self:e.self}):u,systemId:a});return o[p.id]=p,p}};return(t,r)=>{let n=i(t,r);// TODO: fix types
return o[n.id]=n,e.defer(()=>{if(n.status!==Q.Stopped)try{n.start?.()}catch(t){e.self.send(eU(n.id,t));return}}),n}}(e,t,r.event,o),self:e?.self,system:e?.system},s={};if("function"==typeof n)s=n(i);else for(let e of Object.keys(n)){let t=n[e];s[e]="function"==typeof t?t(i):t}let a=Object.assign({},t.context,s);return[eN(t,{context:a,children:Object.keys(o).length?{...t.children,...o}:t.children})]}/**
 * Updates the current context of the machine.
 *
 * @param assignment An object that represents the partial context to update.
 */function eB(e){function t(e){}return t.type="xstate.assign",t.assignment=e,t.resolve=ez,t}function eF(e,t,r,{event:n,id:o,delay:i}){let s;let a=t.machine.implementations.delays;if("string"==typeof n)throw Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);let c="function"==typeof n?n(r):n;if("string"==typeof i){let e=a&&a[i];s="function"==typeof e?e(r):e}else s="function"==typeof i?i(r):i;return["number"!=typeof s?eN(t,{_internalQueue:t._internalQueue.concat(c)}):t,{event:c,id:o,delay:s}]}function eV(e,t){if("number"==typeof t.delay){e.self.delaySend(t);return}}/**
 * Returns an event that represents that a final state node
 * has been reached in the parent state node.
 *
 * @param id The final state node's parent state node `id`
 * @param output The data to pass into the event
 */function eG(e,t){let r=`${R.DoneState}.${e}`,n={type:r,output:t};return n.toString=()=>r,n}function eU(e,t){let r=`${R.ErrorPlatform}.${e}`,n={type:r,data:t};return n.toString=()=>r,n}let eq={},eK=e=>"string"==typeof e?{type:e}:"function"==typeof e?"resolve"in e?{type:e.type}:{type:e.name}:e;class eW{/**
   * The relative key of the state node, which represents its location in the overall state value.
   *//**
   * The unique ID of the state node.
   *//**
   * The type of this state node:
   *
   *  - `'atomic'` - no child state nodes
   *  - `'compound'` - nested child state nodes (XOR)
   *  - `'parallel'` - orthogonal nested child state nodes (AND)
   *  - `'history'` - history state node
   *  - `'final'` - final state node
   *//**
   * The string path from the root machine node to this node.
   *//**
   * The child state nodes.
   *//**
   * The type of history on this state node. Can be:
   *
   *  - `'shallow'` - recalls only top-level historical state value
   *  - `'deep'` - recalls historical state value at all levels
   *//**
   * The action(s) to be executed upon entering the state node.
   *//**
   * The action(s) to be executed upon exiting the state node.
   *//**
   * The parent state node.
   *//**
   * The root machine node.
   *//**
   * The meta data associated with this state node, which will be returned in State instances.
   *//**
   * The output data sent with the "done.state._id_" event if this is a final state node.
   *//**
   * The order this state node appears. Corresponds to the implicit document order.
   */constructor(/**
   * The raw config used to create the machine.
   */e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join("."),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?D(this.config.states,(e,t)=>{let r=new eW(e,{_parent:this,_key:t,_machine:this.machine});return r}):eq,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);// History config
this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=z(this.config.entry).slice(),this.exit=z(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"===this.type?this.config.output:void 0,this.tags=z(e.tags).slice()}_initialize(){this.transitions=function(e){let t=new Map;if(e.config.on)for(let r of Object.keys(e.config.on)){if(""===r)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let n=e.config.on[r];t.set(r,V(n).map(t=>ep(e,r,t)))}if(e.config.onDone){let r=String(eG(e.id));t.set(r,V(e.config.onDone).map(t=>ep(e,r,t)))}for(let r of e.invoke){if(r.onDone){let n=`done.invoke.${r.id}`;t.set(n,V(r.onDone).map(t=>ep(e,n,t)))}if(r.onError){let n=`error.platform.${r.id}`;t.set(n,V(r.onError).map(t=>ep(e,n,t)))}if(r.onSnapshot){let n=`xstate.snapshot.${r.id}`;t.set(n,V(r.onSnapshot).map(t=>ep(e,n,t)))}}for(let r of e.after){let e=t.get(r.eventType);e||(e=[],t.set(r.eventType,e)),e.push(r)}return t}(this),this.config.always&&(this.always=V(this.config.always).map(e=>ep(this,"",e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}/**
   * The well-structured state node definition.
   */get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(eK),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(eK),eventType:null})}:void 0,history:this.history,states:D(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(eK)})),entry:this.entry.map(eK),exit:this.exit.map(eK),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}/**
   * The logic invoked as actors by this state node.
   */get invoke(){return I(this,"invoke",()=>z(this.config.invoke).map((e,t)=>{let r=`${this.id}:invocation[${t}]`,n="object"==typeof e&&"src"in e?e:{id:r,src:e},o=n.id||r,i=n.src,{systemId:s}=n,a="string"==typeof i?i:"type"in i?i:o;return this.machine.implementations.actors[o]||"string"==typeof i||"type"in i||(this.machine.implementations.actors={...this.machine.implementations.actors,// TODO: this should accept `src` as-is
    [o]:i}),{...n,src:a,id:o,systemId:s,toJSON(){let{onDone:e,onError:t,...r}=n;return{...r,type:"xstate.invoke",src:a,id:o}}}}))}/**
   * The mapping of events to transitions.
   */get on(){return I(this,"on",()=>{let e=this.transitions;return[...e].flatMap(([e,t])=>t.map(t=>[e,t])).reduce((e,[t,r])=>(e[t]=e[t]||[],e[t].push(r),e),{})})}get after(){return I(this,"delayedTransitions",()=>/**
 * All delayed transitions from the config.
 */(function(e){let t=e.config.after;if(!t)return[];let r=(t,r)=>{let n="function"==typeof t?`${e.id}:delay[${r}]`:t,o=/**
 * Returns an event type that represents an implicit event that
 * is sent after the specified `delay`.
 *
 * @param delayRef The delay in milliseconds
 * @param id The state node ID where this event is handled
 */function(e,t){let r=t?`#${t}`:"";return`${R.After}(${e})${r}`}(n,e.id);return e.entry.push(/**
 * Raises an event. This places the event in the internal event queue, so that
 * the event is immediately consumed by the machine in the current step.
 *
 * @param eventType The event to raise.
 */function(e,t){function r(e){}return r.type="xstate.raise",r.event=e,r.id=t?.id,r.delay=t?.delay,r.resolve=eF,r.execute=eV,r}({type:o},{id:o,delay:t})),e.exit.push(/**
 * Cancels an in-flight `send(...)` action. A canceled sent action will not
 * be executed, nor will its event be sent, unless it has already been sent
 * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).
 *
 * @param sendId The `id` of the `send(...)` action to cancel.
 */function(e){function t(e){}return t.type="xstate.cancel",t.sendId=e,t.resolve=T,t.execute=A,t}(o)),o},n=F(t)?t.map((e,t)=>{let n=r(e.delay,t);return{...e,event:n}}):Object.keys(t).flatMap((e,n)=>{let o=t[e],i="string"==typeof o?{target:o}:o,s=isNaN(+e)?e:+e,a=r(s,n);return z(i).map(e=>({...e,event:a,delay:s}))});return n.map(t=>{let{delay:r}=t;return{...ep(e,t.event,t),delay:r}})})(this))}get initial(){return I(this,"initial",()=>(function(e,t){if("string"==typeof t||F(t)){let r=z(t).map(t=>{// Resolve state string keys (which represent children)
    // to their state node
    let r="string"==typeof t?eu(t)?e.machine.getStateNodeById(t):e.states[t]:t;if(!r)throw Error(`Initial state node "${t}" not found on parent state node #${e.id}`);if(!em(r,e))throw Error(`Invalid initial target: state node #${r.id} is not a descendant of #${e.id}`);return r}),n=el(e,r),o={source:e,actions:[],eventType:null,reenter:!1,target:n,toJSON:()=>({...o,source:`#${e.id}`,target:n?n.map(e=>`#${e.id}`):void 0})};return o}return ep(e,"__INITIAL__",{target:z(t.target).map(e=>"string"==typeof e?eu(e)?e:`.${e}`:e),actions:t.actions})})(this,this.config.initial||[]))}next(e,t){let r;let n=t.type,o=[],i=I(this,`candidates-${n}`,()=>(function(e,t){let r=e.transitions.get(t)||[...e.transitions.keys()].filter(e=>{// check if transition is a wildcard transition,
    // which matches any non-transient events
    if("*"===e)return!0;if(!e.endsWith(".*"))return!1;let r=e.split("."),n=t.split(".");for(let e=0;e<r.length;e++){let t=r[e],o=n[e];if("*"===t){let t=e===r.length-1;return t}if(t!==o)return!1}return!0}).sort((e,t)=>t.length-e.length).flatMap(t=>e.transitions.get(t));return r})(this,n));for(let s of i){let{guard:i}=s,a=e.context,c=!1;try{c=!i||et(i,a,t,e)}catch(e){throw Error(`Unable to evaluate guard '${i.type}' in transition for event '${n}' in state node '${this.id}':
${e.message}`)}if(c){o.push(...s.actions),r=s;break}}return r?[r]:void 0}/**
   * The target state value of the history state node, if it exists. This represents the
   * default state value to transition to if no history value exists yet.
   */get target(){if("history"===this.type){let e=this.config;return e.target}}/**
   * All the state node IDs of this state node and its descendant state nodes.
   */get stateIds(){let e=L(Object.keys(this.states).map(e=>this.states[e].stateIds));return[this.id].concat(e)}/**
   * All the event types accepted by this state node and its descendants.
   */get events(){return I(this,"events",()=>{let{states:e}=this,t=new Set(this.ownEvents);if(e)for(let r of Object.keys(e)){let n=e[r];if(n.states)for(let e of n.events)t.add(`${e}`)}return Array.from(t)})}/**
   * All the events that have transitions directly from this state node.
   *
   * Excludes any inert events.
   */get ownEvents(){let e=new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(e=>!(!e.target&&!e.actions.length&&!e.reenter))));return Array.from(e)}}class eH{/**
   * The machine's own version.
   */constructor(/**
   * The raw config used to create the machine.
   */e,t){this.config=e,this.version=void 0,this.implementations=void 0,this.types=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.__TContext=void 0,this.__TEvent=void 0,this.__TAction=void 0,this.__TActor=void 0,this.__TInput=void 0,this.__TOutput=void 0,this.__TResolvedTypesMeta=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.types=this.config.types??{},this.transition=this.transition.bind(this),this.root=new eW(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}/**
   * Clones this state machine with the provided implementations
   * and merges the `context` (if provided).
   *
   * @param implementations Options (`actions`, `guards`, `actors`, `delays`, `context`)
   *  to recursively merge with the existing options.
   *
   * @returns A new `StateMachine` instance with the provided implementations.
   */provide(e){let{actions:t,guards:r,actors:n,delays:o}=this.implementations;return new eH(this.config,{actions:{...t,...e.actions},guards:{...r,...e.guards},actors:{...n,...e.actors},delays:{...o,...e.delays}})}/**
   * Resolves the given `state` to a new `State` instance relative to this machine.
   *
   * This ensures that `.nextEvents` represent the correct values.
   *
   * @param state The state to resolve
   */resolveState(e){let t=ei(eg(this.root,e.value)),r=Array.from(t);return this.createState({...e,value:ek(this.root,e.value),configuration:r,done:ec(r)})}resolveStateValue(e,...[t]){let r=ek(this.root,e);return this.resolveState(eM.from(r,t,this))}/**
   * Determines the next state given the current `state` and received `event`.
   * Calculates a full macrostep from all microsteps.
   *
   * @param state The current State instance or state value
   * @param event The received event
   */transition(e,t,r){// TODO: handle error events in a better way
if("string"==typeof t.type&&(t.type===x||t.type.startsWith(O))&&!e.nextEvents.some(e=>e===t.type))return eN(e,{error:t.data});let{state:n}=eT(e,t,r);return n}/**
   * Determines the next state given the current `state` and `event`.
   * Calculates a microstep.
   *
   * @param state The current state
   * @param event The received event
   */microstep(e,t,r){return eT(e,t,r).microstates}getTransitionData(e,t){return function e(t,r,n,o){return(// leaf node
"string"==typeof r?function(e,t,r,n){let o=ev(e,t),i=o.next(r,n);return i&&i.length?i:e.next(r,n)}(t,r,n,o):1===Object.keys(r).length?function(t,r,n,o){let i=Object.keys(r),s=ev(t,i[0]),a=e(s,r[i[0]],n,o);return a&&a.length?a:t.next(n,o)}(t,r,n,o):function(t,r,n,o){let i=[];for(let s of Object.keys(r)){let a=r[s];if(!a)continue;let c=ev(t,s),u=e(c,a,n,o);u&&i.push(...u)}return i.length?i:t.next(n,o)}(t,r,n,o))}(this.root,e.value,e,t)||[]}/**
   * The initial state _before_ evaluating any microsteps.
   * This "pre-initial" state is provided to initial actions executed in the initial state.
   */getPreInitialState(e,t){let{context:r}=this.config,n=this.resolveState(this.createState({value:{},// TODO: this is computed in state constructor
context:"function"!=typeof r&&r?r:{},meta:void 0,configuration:function(e){let t=[],r=e.initial,n=new Set,o=new Set([e]);for(let e of(eO([r],{},o,n),[...n].sort((e,t)=>e.order-t.order)))t.push(e);return t}(this.root),children:{}}));return"function"==typeof r?eI([eB(({spawn:e,event:t})=>r({spawn:e,input:t.input}))],t,n,e):n}/**
   * Returns the initial `State` instance, with reference to `self` as an `ActorRef`.
   */getInitialState(e,t){let r={type:w,input:t},n=this.getPreInitialState(e,r),o=ex([{target:[...n.configuration].filter(er),source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null// TODO: fix
}],n,e,r,!0),{state:i}=eT(o,r,e);// TODO: fix;
return i}start(e){Object.values(e.children).forEach(e=>{0===e.status&&e.start?.()})}getStateNodeById(e){let t=e.split("."),r=t.slice(1),n=eu(t[0])?t[0].slice(1):t[0],o=this.idMap.get(n);if(!o)throw Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return ey(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedState(e){return function(e){let{configuration:t,tags:r,machine:n,children:o,...i}=e,s={};for(let e in o)s[e]={state:o[e].getPersistedState?.(),src:o[e].src};return{...i,children:s}}(e)}createState(e){return e instanceof eM?e:new eM(e,this)}getStatus(e){return e.error?{status:"error",data:e.error}:e.done?{status:"done",data:e.output}:{status:"active"}}restoreState(e,t){let r={};Object.keys(e.children).forEach(n=>{let o=e.children[n],i=o.state,s=o.src,a=s?U(this.implementations.actors[s])?.src:void 0;if(!a)return;let c=a.restoreState?.(i,t),u=Y(a,{id:n,state:c});r[n]=u});let n=this.createState(new eM({...e,children:r},this));return(// TODO: DRY this up
n.configuration.forEach(e=>{e.invoke&&e.invoke.forEach(e=>{let{id:n,src:o}=e;if(r[n])return;let i=U(this.implementations.actors[o]);if(i){let o=Y(i.src,{id:n,parent:t?.self,input:"input"in e?e.input:i.input});r[n]=o}})}),n)}}var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0}),eJ.speechstate=void 0;var eQ={};Object.defineProperty(eQ,"__esModule",{value:!0}),eQ.speechstate=void 0;let e$=e=>{if("undefined"==typeof window)return;let t=function(){let e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==y?y:void 0;if(e.__xstate__)return e.__xstate__}();t&&t.register(e)},eZ=((o={}).After="xstate.after",o.DoneState="done.state",o.DoneInvoke="done.invoke",o.ErrorExecution="error.execution",o.ErrorCommunication="error.communication",o.ErrorPlatform="error.platform",o.ErrorCustom="xstate.error",o),eY=((i={}).Parent="#_parent",i.Internal="#_internal",i);eZ.After,eZ.DoneState;let eX=eZ.ErrorExecution,e0=eZ.ErrorPlatform,e1=eZ.ErrorCustom,e2="xstate.init";function e4(e,t,r,{to:n,event:o,id:i,delay:s}){let a,c;let u=t.machine.implementations.delays;if("string"==typeof o)throw Error(`Only event objects may be used with sendTo; use sendTo({ type: "${o}" }) instead`);let p="function"==typeof o?o(r):o;if("string"==typeof s){let e=u&&u[s];a="function"==typeof e?e(r):e}else a="function"==typeof s?s(r):s;let l="function"==typeof n?n(r):n;if("string"==typeof l){if(!(c=l===eY.Parent?e?.self._parent:l===eY.Internal?e?.self:l.startsWith("#_")?t.children[l.slice(2)]:t.children[l]))throw Error(`Unable to send event to actor '${l}' from machine '${t.machine.id}'.`)}else c=l||e?.self;return[t,{to:c,event:p,id:i,delay:a}]}function e3(e,t){if("number"==typeof t.delay){e.self.delaySend(t);return}let{to:r,event:n}=t;e.defer(()=>{r.send(n.type===e1?{type:`${ra(e.self.id)}`,data:n.data}:n)})}/**
 * Sends an event to this machine's parent.
 *
 * @param event The event to send to the parent machine.
 * @param options Options to pass into the send event.
 */function e6(e,t){return(/**
 * Sends an event to an actor.
 *
 * @param actor The `ActorRef` to send the event to.
 * @param event The event to send, or an expression that evaluates to the event to send
 * @param options Send action options
 *  - `id` - The unique send event identifier (used with `cancel()`).
 *  - `delay` - The number of milliseconds to delay the sending of the event.
 */function(e,t,r){function n(e){}return n.type="xstate.sendTo",n.to=e,n.event=t,n.id=r?.id,n.delay=r?.delay,n.resolve=e4,n.execute=e3,n}(eY.Parent,e,t))}let e5=new WeakMap;function e8(e,t,r){let n=e5.get(e);return n?t in n||(n[t]=r()):(n={[t]:r()},e5.set(e,n)),n[t]}function e7(e,t,r,{sendId:n}){let o="function"==typeof n?n(r):n;return[t,o]}function e9(e,t){e.self.cancel(t)}/**
 * Cancels an in-flight `send(...)` action. A canceled sent action will not
 * be executed, nor will its event be sent, unless it has already been sent
 * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).
 *
 * @param sendId The `id` of the `send(...)` action to cancel.
 */function te(e){function t(e){}return t.type="xstate.cancel",t.sendId=e,t.resolve=e7,t.execute=e9,t}class tt{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}// TODO: rethink this design
prepend(e){if(!this._current){this.enqueue(e);return}// we know that something is already queued up
// so the mailbox is already flushing or it's inactive
// therefore the only thing that we need to do is to reassign `this._current`
this._current={value:e,next:this._current}}enqueue(e){let t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){// atm the given _process is responsible for implementing proper try/catch handling
// we assume here that this won't throw in a way that can affect this mailbox
let e=this._current;this._process(e.value),e===this._current&&(this._current=this._current.next)}this._last=null}}let tr="function"==typeof Symbol&&Symbol.observable||"@@observable";function tn(e){try{if(tp(e))return e;return e.toString().split(".")}catch(t){throw Error(`'${e}' is not a valid state path.`)}}function to(e){if("object"==typeof e&&"value"in e&&"context"in e&&"event"in e)return e.value;if(tp(e))return ti(e);if("string"!=typeof e)return e;let t=tn(e);return ti(t)}function ti(e){if(1===e.length)return e[0];let t={},r=t;for(let t=0;t<e.length-1;t++)if(t===e.length-2)r[e[t]]=e[t+1];else{let n=r;r={},n[e[t]]=r}return t}function ts(e,t){let r={},n=Object.keys(e);for(let o=0;o<n.length;o++){let i=n[o];r[i]=t(e[i],i,e,o)}return r}function ta(e){return[].concat(...e)}function tc(e){return void 0===e?[]:tp(e)?e:[e]}function tu(e,t,r,n){return"function"==typeof e?e({context:t,event:r,self:n}):e}function tp(e){return Array.isArray(e)}function tl(e){return(tp(e)?e:[e]).map(e=>void 0===e||"string"==typeof e?{target:e}:e)}function tf(e){if(void 0!==e&&""!==e)return tc(e)}function th(e){return e?"transition"in e?{src:e,input:void 0}:e:void 0}function td(e){return{config:e,start:(e,{self:t})=>{t.send({type:tm})},transition:(t,r,{self:n,id:o,system:i})=>{var s;return r.type===tm?(t.dispose=e({input:t.input,system:i,self:n,sendBack:e=>{t.canceled||n._parent?.send(e)},receive:e=>{t.receivers.add(e)}}),((s=t.dispose)instanceof Promise||null!==s&&("function"==typeof s||"object"==typeof s)&&"function"==typeof s.then)&&t.dispose.then(e=>{n._parent?.send(rs(o,e)),t.canceled=!0},e=>{t.canceled=!0,n._parent?.send(ra(o,e))}),t):(r.type===tb?(t.canceled=!0,"function"==typeof t.dispose&&t.dispose()):r.type===tm||r.type===tb||t.receivers.forEach(e=>e(r)),t)},getInitialState:(e,t)=>({canceled:!1,receivers:new Set,dispose:void 0,input:t}),getSnapshot:()=>void 0,getPersistedState:({input:e,canceled:t})=>({input:e,canceled:t})}}let tv="$$xstate.resolve",ty="$$xstate.reject";function tg(e){return{config:e,transition:(e,t)=>{if("active"!==e.status)return e;switch(t.type){case tv:return{...e,status:"done",data:t.data,input:void 0};case ty:return{...e,status:"error",data:t.data,// TODO: if we keep this as `data` we should reflect this in the type
input:void 0};case tb:return{...e,status:"canceled",input:void 0};default:return e}},start:(t,{self:r,system:n})=>{// TODO: determine how to allow customizing this so that promises
// can be restarted if necessary
if("active"!==t.status)return;let o=Promise.resolve(e({input:t.input,system:n,self:r}));o.then(e=>{"active"===r._state.status&&r.send({type:tv,data:e})},e=>{"active"===r._state.status&&r.send({type:ty,data:e})})},getInitialState:(e,t)=>({status:"active",data:void 0,input:t}),getSnapshot:e=>e.data,getStatus:e=>e,getPersistedState:e=>e,restoreState:e=>e}}let tm="xstate.init",tb="xstate.stop";/**
 * This function makes sure that unhandled errors are thrown in a separate macrotask.
 * It allows those errors to be detected by global error handlers and reported to bug tracking services
 * without interrupting our own stack of execution.
 *
 * @param err error to be thrown
 */function tS(e){setTimeout(()=>{throw e})}a=void 0,s=e=>void 0,e=>e;let tP=((c={})[c.NotStarted=0]="NotStarted",c[c.Running=1]="Running",c[c.Stopped=2]="Stopped",c),tC={deferEvents:!0,clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class tR{/**
   * The current state of the interpreted logic.
   *//**
   * The clock that is responsible for setting and clearing timeouts, such as delayed events and transitions.
   *//**
   * The unique identifier for this actor relative to its parent.
   *//**
   * Whether the service is started.
   */// Actor Ref
// TODO: add typings for system
/**
   * The globally unique process ID for this invocation.
   *//**
   * Creates a new Interpreter instance (i.e., service) for the given logic with the provided options, if any.
   *
   * @param logic The logic to be interpreted
   * @param options Interpreter options
   */constructor(e,t){this.logic=e,this._state=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new tt(this._process.bind(this)),this.delayedEventsMap={},this.observers=new Set,this.logger=void 0,this.status=tP.NotStarted,this._parent=void 0,this.ref=void 0,this._actorContext=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let r={...tC,...t},{clock:n,logger:o,parent:i,id:s,systemId:a}=r;this.system=i?.system??function(){let e=0,t=new Map,r=new Map,n=new WeakMap;return{_bookId:()=>`x:${e++}`,_register:(e,r)=>(t.set(e,r),e),_unregister:e=>{t.delete(e.sessionId);let o=n.get(e);void 0!==o&&(r.delete(o),n.delete(e))},get:e=>r.get(e),_set:(e,t)=>{let o=r.get(e);if(o&&o!==t)throw Error(`Actor with system ID '${e}' already exists.`);r.set(e,t),n.set(t,e)}}}(),a&&(this._systemId=a,this.system._set(a,this)),this.sessionId=this.system._bookId(),this.id=s??this.sessionId,this.logger=o,this.clock=n,this._parent=i,this.options=r,this.src=r.src,this.ref=this,this._actorContext={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:e=>{this._deferred.push(e)},system:this.system,stopChild:e=>{if(e._parent!==this)throw Error(`Cannot stop child actor ${e.id} of ${this.id} because it is not a child`);e._stop()}},// Ensure that the send method is bound to this interpreter instance
// if destructured
this.send=this.send.bind(this),this._initState()}_initState(){this._state=this.options.state?this.logic.restoreState?this.logic.restoreState(this.options.state,this._actorContext):this.options.state:this.logic.getInitialState(this._actorContext,this.options?.input)}// array of functions to defer
update(e){let t;// Update state
this._state=e;let r=this.getSnapshot();for(;t=this._deferred.shift();)t();for(let e of this.observers)try{e.next?.(r)}catch(e){tS(e)}let n=this.logic.getStatus?.(e);switch(n?.status){case"done":this._stopProcedure(),this._complete(),this._doneEvent=rs(this.id,n.data),this._parent?.send(this._doneEvent);break;case"error":this._stopProcedure(),this._error(n.data),this._parent?.send(ra(this.id,n.data))}}subscribe(e,t,r){let n=function(e,t,r){let n="object"==typeof e,o=n?e:void 0;return{next:(n?e.next:e)?.bind(o),error:(n?e.error:t)?.bind(o),complete:(n?e.complete:r)?.bind(o)}}(e,t,r);if(this.status!==tP.Stopped)this.observers.add(n);else try{n.complete?.()}catch(e){tS(e)}return{unsubscribe:()=>{this.observers.delete(n)}}}/**
   * Starts the interpreter from the initial state
   */start(){if(this.status===tP.Running)return this;this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this.status=tP.Running;let e=this.logic.getStatus?.(this._state);switch(e?.status){case"done":// a state machine can be "done" upon intialization (it could reach a final state using initial microsteps)
// we still need to complete observers, flush deferreds etc
this.update(this._state);// fallthrough
case"error":// TODO: rethink cleanup of observers, mailbox, etc
return this}if(this.logic.start)try{this.logic.start(this._state,this._actorContext)}catch(e){return this._stopProcedure(),this._error(e),this._parent?.send(ra(this.id,e)),this}return(// TODO: this notifies all subscribers but usually this is redundant
// there is no real change happening here
// we need to rethink if this needs to be refactored
this.update(this._state),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this)}_process(e){// TODO: reexamine what happens when an action (or a guard or smth) throws
let t,r;try{t=this.logic.transition(this._state,e,this._actorContext)}catch(e){// we wrap it in a box so we can rethrow it later even if falsy value gets caught here
r={err:e}}if(r){let{err:e}=r;this._stopProcedure(),this._error(e),this._parent?.send(ra(this.id,e));return}this.update(t),e.type===tb&&(this._stopProcedure(),this._complete())}_stop(){return this.status===tP.Stopped||((this.mailbox.clear(),this.status===tP.NotStarted)?this.status=tP.Stopped:this.mailbox.enqueue({type:tb})),this}/**
   * Stops the interpreter and unsubscribe all listeners.
   */stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let e of this.observers)try{e.complete?.()}catch(e){tS(e)}this.observers.clear()}_error(e){if(!this.observers.size){this._parent||tS(e);return}let t=!1;for(let r of this.observers){let n=r.error;t||=!n;try{n?.(e)}catch(e){tS(e)}}this.observers.clear(),t&&tS(e)}_stopProcedure(){if(this.status!==tP.Running)return this;// Cancel all delayed events
for(let e of Object.keys(this.delayedEventsMap))this.clock.clearTimeout(this.delayedEventsMap[e]);return(// TODO: mailbox.reset
this.mailbox.clear(),// TODO: after `stop` we must prepare ourselves for receiving events again
// events sent *after* stop signal must be queued
// it seems like this should be the common behavior for all of our consumers
// so perhaps this should be unified somehow for all of them
this.mailbox=new tt(this._process.bind(this)),this.status=tP.Stopped,this.system._unregister(this),this)}/**
   * Sends an event to the running interpreter to trigger a transition.
   *
   * @param event The event to send
   */send(e){if("string"==typeof e)throw Error(`Only event objects may be sent to actors; use .send({ type: "${e}" }) instead`);if(this.status!==tP.Stopped){if(this.status!==tP.Running&&!this.options.deferEvents)throw Error(`Event "${e.type}" was sent to uninitialized actor "${this.id}". Make sure .start() is called for this actor, or set { deferEvents: true } in the actor options.
Event: ${JSON.stringify(e)}`);this.mailbox.enqueue(e)}}// TODO: make private (and figure out a way to do this within the machine)
delaySend({event:e,id:t,delay:r,to:n}){let o=this.clock.setTimeout(()=>{n?n.send(e):this.send(e)},r);t&&(this.delayedEventsMap[t]=o)}// TODO: make private (and figure out a way to do this within the machine)
cancel(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]}attachDevTools(){let{devTools:e}=this.options;e&&("function"==typeof e?e:e$)(this)}toJSON(){return{id:this.id}}getPersistedState(){return this.logic.getPersistedState?.(this._state)}[tr](){return this}getSnapshot(){return this.logic.getSnapshot?this.logic.getSnapshot(this._state):this._state}}/**
 * Creates a new Interpreter instance for the given machine with the provided options, if any.
 *
 * @param machine The machine to interpret
 * @param options Interpreter options
 */function tx(e,t){let r=new tR(e,t);return r}function tO(e,t,r,{id:n,systemId:o,src:i,input:s}){let a;let c=th(t.machine.implementations.actors[i]);if(c){// TODO: inline `input: undefined` should win over the referenced one
let u=s||c.input;a=tx(c.src,{id:n,src:i,parent:e?.self,systemId:o,input:"function"==typeof u?u({context:t.context,event:r.event,self:e?.self}):u})}return[t5(t,{children:{...t.children,[n]:a}}),{id:n,actorRef:a}]}function tw(e,{id:t,actorRef:r}){r&&e.defer(()=>{if(r.status!==tP.Stopped)try{r.start?.()}catch(r){e.self.send(ra(t,r));return}})}function tE(e,t,r,n){let{machine:o}=n,i=o?.implementations?.guards?.[e.type]??e.predicate;if(!i)throw Error(`Guard '${e.type}' is not implemented.'.`);return i({context:t,event:r,state:n,guard:e,evaluate:tE})}let tI=e=>"atomic"===e.type||"final"===e.type;function tT(e){return Object.values(e.states).filter(e=>"history"!==e.type)}function tA(e,t){let r=[],n=e.parent;for(;n&&n!==t;)r.push(n),n=n.parent;return r}function t_(e){let t=new Set(e),r=new Set(e),n=tk(r);// add descendants
for(let e of t)if("compound"!==e.type||n.get(e)&&n.get(e).length){if("parallel"===e.type){for(let t of tT(e))if("history"!==t.type&&!r.has(t))for(let e of tF(t))r.add(e)}}else tF(e).forEach(e=>r.add(e));// add all ancestors
for(let e of r){let t=e.parent;for(;t;)r.add(t),t=t.parent}return r}function tk(e){let t=new Map;for(let r of e)t.has(r)||t.set(r,[]),r.parent&&(t.has(r.parent)||t.set(r.parent,[]),t.get(r.parent).push(r));return t}function tM(e,t){let r=t_(t);return function e(t,r){let n=r.get(t);if(!n)return{};// todo: fix?
if("compound"===t.type){let e=n[0];if(!e)return{};if(tI(e))return e.key}let o={};for(let t of n)o[t.key]=e(t,r);return o}(e,tk(r))}function tN(e,t=e[0].machine.root){return"compound"===t.type?tT(t).some(t=>"final"===t.type&&e.includes(t)):"parallel"===t.type&&tT(t).every(t=>tN(e,t))}let tj=e=>"#"===e[0];function tD(e,t,r){let n=tf(r.target),o=r.reenter??!1,{guards:i}=e.machine.implementations,s=tL(e,n),a={...r,actions:tc(r.actions),guard:r.guard?function e(t,r){// TODO: check for cycles and consider a refactor to more lazily evaluated guards
// TODO: resolve this more recursively: https://github.com/statelyai/xstate/pull/4064#discussion_r1229915724
if("string"==typeof t){let e=r?.(t);return"function"==typeof e?{type:t,predicate:e,params:{type:t}}:e||{type:t,params:{type:t}}}if("function"==typeof t)return{type:t.name,predicate:t,params:{type:t.name,name:t.name}};let n=r?.(t.type);return"function"==typeof n?{type:t.type,params:t.params||t,children:t.children?.map(t=>e(t,r)),predicate:r?.(t.type)||t.predicate}:n||{type:t.type,params:t.params||t,children:t.children?.map(t=>e(t,r)),predicate:t.predicate}}(r.guard,e=>i[e]):void 0,target:s,source:e,reenter:o,eventType:t,toJSON:()=>({...a,source:`#${e.id}`,target:s?s.map(e=>`#${e.id}`):void 0})};return a}function tL(e,t){if(void 0!==t)return t.map(t=>{if("string"!=typeof t)return t;if(tj(t))return e.machine.getStateNodeById(t);let r="."===t[0];// If internal target is defined on machine,
// do not include machine key on target
if(r&&!e.parent)return tG(e,t.slice(1));let n=r?e.key+t:t;if(e.parent)try{let t=tG(e.parent,n);return t}catch(t){throw Error(`Invalid transition definition for state node '${e.id}':
${t.message}`)}else throw Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function tz(e){let t=tf(e.target);return t?t.map(t=>"string"==typeof t?tG(e.parent,t):t):e.parent.initial.target}function tB(e){return"history"===e.type}function tF(e){let t=new Set;return!function r(n){if(!t.has(n)){if(t.add(n),"compound"===n.type)for(let o of n.initial.target){for(let r of tA(o,e))t.add(r);r(o)}else if("parallel"===n.type)for(let e of tT(n))r(e)}}(e),[...t]}/**
 * Returns the child state node from its relative `stateKey`, or throws.
 */function tV(e,t){if(tj(t))return e.machine.getStateNodeById(t);if(!e.states)throw Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);let r=e.states[t];if(!r)throw Error(`Child state '${t}' does not exist on '${e.id}'`);return r}/**
 * Returns the relative state node from the given `statePath`, or throws.
 *
 * @param statePath The string or string array relative path to the state node.
 */function tG(e,t){if("string"==typeof t&&tj(t))try{return e.machine.getStateNodeById(t)}catch(e){// try individual paths
// throw e;
}let r=tn(t).slice(),n=e;for(;r.length;){let e=r.shift();if(!e.length)break;n=tV(n,e)}return n}/**
 * Returns the state nodes represented by the current state value.
 *
 * @param state The state value or State instance
 */function tU(e,t){let r=t instanceof t6?t.value:to(t);if("string"==typeof r)return[e,e.states[r]];let n=Object.keys(r),o=n.map(t=>tV(e,t)).filter(Boolean);return[e.machine.root,e].concat(o,n.reduce((t,n)=>{let o=tV(e,n);if(!o)return t;let i=tU(o,r[n]);return t.concat(i)},[]))}function tq(e,t){let r=e;for(;r.parent&&r.parent!==t;)r=r.parent;return r.parent===t}function tK(e){let t=[],r=e.parent;for(;r;)t.unshift(r),r=r.parent;return t}function tW(e,t,r){let n=new Set;for(let o of e){let e=!1,i=new Set;for(let s of n)if(function(e,t){let r=new Set(e),n=new Set(t);for(let e of r)if(n.has(e))return!0;for(let e of n)if(r.has(e))return!0;return!1}(tQ([o],t,r),tQ([s],t,r))){if(tq(o.source,s.source))i.add(s);else{e=!0;break}}if(!e){for(let e of i)n.delete(e);n.add(o)}}return Array.from(n)}function tH(e,t){if(!e.target)return[];let r=new Set;for(let n of e.target)if(tB(n)){if(t[n.id])for(let e of t[n.id])r.add(e);else for(let e of tH({target:tz(n)},t))r.add(e)}else r.add(n);return[...r]}function tJ(e,t){let r=tH(e,t);if(!r)return null;if(!e.reenter&&"parallel"!==e.source.type&&r.every(t=>tq(t,e.source)))return e.source;let n=function(e){let[t]=e,r=tK(t);for(let t of e){let e=tK(t);r=r.filter(t=>e.includes(t))}return r[r.length-1]}(r.concat(e.source));return n}function tQ(e,t,r){let n=new Set;for(let o of e)if(o.target?.length){let e=tJ(o,r);for(let r of t)tq(r,e)&&n.add(r)}return[...n]}/**
 * https://www.w3.org/TR/scxml/#microstepProcedure
 *
 * @private
 * @param transitions
 * @param currentState
 * @param mutConfiguration
 */function t$(e,t,r,n,o){let i=new Set(t.configuration);if(!e.length)return t;let s=function(e,t,r,n,o,i){let s=[],a={...t.historyValue},c=tW(e,r,a),u=[...t._internalQueue];i||function(e,t,r,n){let o=tQ(e,t,r);// From SCXML algorithm: https://www.w3.org/TR/scxml/#exitStates
for(let e of(o.sort((e,t)=>t.order-e.order),o))for(let n of function(e){return Object.keys(e.states).map(t=>e.states[t]).filter(e=>"history"===e.type)}(e)){let o;o="deep"===n.history?t=>tI(t)&&tq(t,e):t=>t.parent===e,r[n.id]=Array.from(t).filter(o)}for(let e of o)n.push(...e.exit,...e.invoke.map(e=>t9(e.id))),t.delete(e)}(c,r,a,s),// Execute transition content
s.push(...c.flatMap(e=>e.actions)),// Enter states
function(e,t,r,n,o,i,s,a,c){let u=new Set,p=new Set;for(let l of(tZ(t,s,p,u),a&&p.add(i.machine.root),[...u].sort((e,t)=>e.order-t.order))){for(let e of(r.add(l),l.invoke))n.push(function({id:e,systemId:t,src:r,input:n}){function o(e){}return o.type="xstate.invoke",o.id=e,o.systemId=t,o.src=r,o.input=n,o.resolve=tO,o.execute=tw,o}(e));if(// Add entry actions
n.push(...l.entry),p.has(l))for(let e of p){let t=e.initial.actions;n.push(...t)}if("final"===l.type){let t=l.parent;if(!t.parent)continue;if(o.push(ri(t.id,l.output?tu(l.output,i.context,e,c.self):void 0)),t.parent){let e=t.parent;"parallel"===e.type&&tT(e).every(e=>tN([...r],e))&&o.push(ri(e.id))}}}}(n,c,r,s,u,t,a,i,o);let p=[...r],l=tN(p);if(l){let e=p.sort((e,t)=>t.order-e.order).flatMap(e=>e.exit);s.push(...e)}try{let e=t0(s,n,t,o),r=l?function(e,t,r,n){let o=e[0].machine,i=e.find(e=>"final"===e.type&&e.parent===o.root);return i&&i.output?tu(i.output,t,r,n):void 0}(p,e.context,n,o.self):void 0;return u.push(...e._internalQueue),t5(t,{configuration:p,historyValue:a,_internalQueue:u,context:e.context,done:l,output:r,children:e.children})}catch(e){// TODO: Refactor this once proper error handling is implemented.
// See https://github.com/statelyai/rfcs/pull/4
throw e}}(e,t,i,n,r,o);return t5(s,{value:{}// TODO: make optional
})}function tZ(e,t,r,n){for(let o of e){for(let e of o.target||[])tY(e,t,r,n);let e=tJ(o,t),i=tH(o,t);for(let o of i)tX(o,e,n,t,r)}}function tY(e,t,r,n){if(tB(e)){if(t[e.id]){let o=t[e.id];for(let e of o)tY(e,t,r,n);for(let i of o)for(let o of(tX(i,e.parent,n,t,r),r))r.add(o)}else{let o=tz(e);for(let e of o)tY(e,t,r,n);for(let i of o)for(let o of(tX(i,e,n,t,r),r))r.add(o)}}else if(n.add(e),"compound"===e.type){r.add(e);let o=e.initial.target;for(let e of o)tY(e,t,r,n);for(let i of o)tX(i,e,n,t,r)}else if("parallel"===e.type)for(let o of tT(e).filter(e=>!tB(e)))[...n].some(e=>tq(e,o))||tY(o,t,r,n)}function tX(e,t,r,n,o){let i=tA(e,t);for(let e of i)if(r.add(e),"parallel"===e.type)for(let t of tT(e).filter(e=>!tB(e)))[...r].some(e=>tq(e,t))||tY(t,n,o,r)}function t0(e,t,r,n){let{machine:o}=r,i=t5(r,{_internalQueue:[]});for(let r of e){let e="function"==typeof r?r:o.implementations.actions["string"==typeof r?r:r.type];if(!e)continue;let s={context:i.context,event:t,self:n?.self,system:n?.system,// TODO: figure out story for `action` and inline actions
// what those ones should receive?
//
// entry: ({ action }) => {}
// exit: assign(({ action }) => {})
action:"string"==typeof r?{type:r}:r};if(!("resolve"in e)){n?.self.status===tP.Running?e(s):n?.defer(()=>e(s));continue}let[a,c,u]=e.resolve(n,i,s,e// this holds all params
);i=a,"execute"in e&&(n?.self.status===tP.Running?e.execute(n,c):n?.defer(e.execute.bind(null,n,c))),u&&(i=t0(u,t,i,n))}return i}function t1(e,t,r){let n=e,o=[];// Handle stop event
if(t.type===tb)return n=t2(t,n,r),o.push(n),{state:n,microstates:o};let i=t;// Assume the state is at rest (no raised events)
// Determine the next state based on the next microstep
if(i.type!==e2){let t=t4(i,n);n=t$(t,e,r,i,!1),o.push(n)}for(;!n.done;){let e=function(e,t){let r=new Set,n=e.configuration.filter(tI);for(let o of n)e:for(let n of[o].concat(tA(o,null)))if(n.always){for(let o of n.always)if(void 0===o.guard||tE(o.guard,e.context,t,e)){r.add(o);break e}}return tW(Array.from(r),new Set(e.configuration),e.historyValue)}(n,i);if(e.length)n=t$(e,n,r,i,!1),o.push(n);else if(n._internalQueue.length){i=n._internalQueue[0];let e=t4(i,n);(n=t$(e,n,r,i,!1))._internalQueue.shift(),o.push(n)}else break}return n.done&&t2(i,n,r),{state:n,microstates:o}}function t2(e,t,r){let n=[];for(let e of t.configuration.sort((e,t)=>t.order-e.order))n.push(...e.exit);for(let e of Object.values(t.children))n.push(t9(e));return t0(n,e,t,r)}function t4(e,t){return t.machine.getTransitionData(t,e)}/**
 * Resolves a partial state value with its full representation in the state node's machine.
 *
 * @param stateValue The partial state value to resolve.
 */function t3(e,t){let r=t_(tU(e,t));return tM(e,[...r])}class t6{/**
   * Indicates whether the state is a final state.
   *//**
   * The done data of the top-level finite state.
   */// TODO: add an explicit type for `output`
/**
   * The enabled state nodes representative of the state value.
   *//**
   * An object mapping actor names to spawned/invoked actors.
   *//**
   * Creates a new State instance for the given `stateValue` and `context`.
   * @param stateValue
   * @param context
   */static from(e,t={},r){if(e instanceof t6)return e.context!==t?new t6({value:e.value,context:t,meta:{},configuration:[],// TODO: fix,
children:{}},r):e;let n=t_(tU(r.root,e));return new t6({value:e,context:t,meta:void 0,configuration:Array.from(n),children:{}},r)}/**
   * Creates a new `State` instance that represents the current state of a running machine.
   *
   * @param config
   */constructor(e,t){this.machine=t,this.tags=void 0,this.value=void 0,this.done=void 0,this.output=void 0,this.error=void 0,this.context=void 0,this.historyValue={},this._internalQueue=void 0,this.configuration=void 0,this.children=void 0,this.context=e.context,this._internalQueue=e._internalQueue??[],this.historyValue=e.historyValue||{},this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration??Array.from(t_(tU(t.root,e.value))),this.children=e.children,this.value=tM(t.root,this.configuration),this.tags=new Set(ta(this.configuration.map(e=>e.tags))),this.done=e.done??!1,this.output=e.output,this.error=e.error}/**
   * Returns an array of all the string leaf state node paths.
   * @param stateValue
   * @param delimiter The character(s) that separate each subpath in the string state node path.
   */toStrings(e=this.value){if("string"==typeof e)return[e];let t=Object.keys(e);return t.concat(...t.map(t=>this.toStrings(e[t]).map(e=>t+"."+e)))}toJSON(){let{configuration:e,tags:t,machine:r,...n}=this;return{...n,tags:Array.from(t),meta:this.meta}}/**
   * Whether the current state value is a subset of the given parent state value.
   * @param parentStateValue
   */matches(e){return function e(t,r){let n=to(t),o=to(r);return"string"==typeof o?"string"==typeof n&&o===n:"string"==typeof n?n in o:Object.keys(n).every(t=>t in o&&e(n[t],o[t]))}(e,this.value)}/**
   * Whether the current state configuration has a state node with the specified `tag`.
   * @param tag
   */hasTag(e){return this.tags.has(e)}/**
   * Determines whether sending the `event` will cause a non-forbidden transition
   * to be selected, even if the transitions have no actions nor
   * change the state value.
   *
   * @param event The event to test
   * @returns Whether the event will cause a transition
   */can(e){let t=this.machine.getTransitionData(this,e);return!!t?.length&&// Check that at least one transition is not forbidden
t.some(e=>void 0!==e.target||e.actions.length)}/**
   * The next events that will cause a transition from the current state.
   */get nextEvents(){return e8(this,"nextEvents",()=>[...new Set(ta([...this.configuration.map(e=>e.ownEvents)]))])}get meta(){return this.configuration.reduce((e,t)=>(void 0!==t.meta&&(e[t.id]=t.meta),e),{})}}function t5(e,t={}){return new t6({...e,...t},e.machine)}function t8(e,t,r,{actorRef:n}){let o="function"==typeof n?n(r):n,i="string"==typeof o?t.children[o]:o,s=t.children;return i&&(s={...s},delete s[i.id]),[t5(t,{children:s}),i]}function t7(e,t){if(t){if(t.status!==tP.Running){e.stopChild(t);return}// TODO: recheck why this one has to be deferred
e.defer(()=>{e.stopChild(t)})}}/**
 * Stops an actor.
 *
 * @param actorRef The actor to stop.
 */function t9(e){function t(e){}return t.type="xstate.stop",t.actorRef=e,t.resolve=t8,t.execute=t7,t}function re(e,t,r,{assignment:n}){if(!t.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let o={},i={context:t.context,event:r.event,action:r.action,spawn:function(e,{machine:t,context:r},n,o){let i=(i,s={})=>{let{systemId:a}=s;if("string"!=typeof i)return tx(i,{id:s.id,parent:e.self,input:s.input,systemId:a});{let c=th(t.implementations.actors[i]);if(!c)throw Error(`Actor logic '${i}' not implemented in machine '${t.id}'`);let u="input"in s?s.input:c.input,p=tx(c.src,{id:s.id,parent:e.self,input:"function"==typeof u?u({context:r,event:n,self:e.self}):u,systemId:a});return o[p.id]=p,p}};return(t,r)=>{let n=i(t,r);// TODO: fix types
return o[n.id]=n,e.defer(()=>{if(n.status!==tP.Stopped)try{n.start?.()}catch(t){e.self.send(ra(n.id,t));return}}),n}}(e,t,r.event,o),self:e?.self,system:e?.system},s={};if("function"==typeof n)s=n(i);else for(let e of Object.keys(n)){let t=n[e];s[e]="function"==typeof t?t(i):t}let a=Object.assign({},t.context,s);return[t5(t,{context:a,children:Object.keys(o).length?{...t.children,...o}:t.children})]}/**
 * Updates the current context of the machine.
 *
 * @param assignment An object that represents the partial context to update.
 */function rt(e){function t(e){}return t.type="xstate.assign",t.assignment=e,t.resolve=re,t}function rr(e,t,r,{event:n,id:o,delay:i}){let s;let a=t.machine.implementations.delays;if("string"==typeof n)throw Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);let c="function"==typeof n?n(r):n;if("string"==typeof i){let e=a&&a[i];s="function"==typeof e?e(r):e}else s="function"==typeof i?i(r):i;return["number"!=typeof s?t5(t,{_internalQueue:t._internalQueue.concat(c)}):t,{event:c,id:o,delay:s}]}function rn(e,t){if("number"==typeof t.delay){e.self.delaySend(t);return}}/**
 * Raises an event. This places the event in the internal event queue, so that
 * the event is immediately consumed by the machine in the current step.
 *
 * @param eventType The event to raise.
 */function ro(e,t){function r(e){}return r.type="xstate.raise",r.event=e,r.id=t?.id,r.delay=t?.delay,r.resolve=rr,r.execute=rn,r}/**
 * Returns an event that represents that a final state node
 * has been reached in the parent state node.
 *
 * @param id The final state node's parent state node `id`
 * @param output The data to pass into the event
 */function ri(e,t){let r=`${eZ.DoneState}.${e}`,n={type:r,output:t};return n.toString=()=>r,n}/**
 * Returns an event that represents that an invoked service has terminated.
 *
 * An invoked service is terminated when it has reached a top-level final state node,
 * but not when it is canceled.
 *
 * @param invokeId The invoked service ID
 * @param output The data to pass into the event
 */function rs(e,t){let r=`${eZ.DoneInvoke}.${e}`,n={type:r,output:t};return n.toString=()=>r,n}function ra(e,t){let r=`${eZ.ErrorPlatform}.${e}`,n={type:r,data:t};return n.toString=()=>r,n}let rc={},ru=e=>"string"==typeof e?{type:e}:"function"==typeof e?"resolve"in e?{type:e.type}:{type:e.name}:e;class rp{/**
   * The relative key of the state node, which represents its location in the overall state value.
   *//**
   * The unique ID of the state node.
   *//**
   * The type of this state node:
   *
   *  - `'atomic'` - no child state nodes
   *  - `'compound'` - nested child state nodes (XOR)
   *  - `'parallel'` - orthogonal nested child state nodes (AND)
   *  - `'history'` - history state node
   *  - `'final'` - final state node
   *//**
   * The string path from the root machine node to this node.
   *//**
   * The child state nodes.
   *//**
   * The type of history on this state node. Can be:
   *
   *  - `'shallow'` - recalls only top-level historical state value
   *  - `'deep'` - recalls historical state value at all levels
   *//**
   * The action(s) to be executed upon entering the state node.
   *//**
   * The action(s) to be executed upon exiting the state node.
   *//**
   * The parent state node.
   *//**
   * The root machine node.
   *//**
   * The meta data associated with this state node, which will be returned in State instances.
   *//**
   * The output data sent with the "done.state._id_" event if this is a final state node.
   *//**
   * The order this state node appears. Corresponds to the implicit document order.
   */constructor(/**
   * The raw config used to create the machine.
   */e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join("."),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ts(this.config.states,(e,t)=>{let r=new rp(e,{_parent:this,_key:t,_machine:this.machine});return r}):rc,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);// History config
this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=tc(this.config.entry),this.exit=tc(this.config.exit),this.meta=this.config.meta,this.output="final"===this.type?this.config.output:void 0,this.tags=tc(e.tags)}_initialize(){this.transitions=function(e){let t=new Map;if(e.config.on)for(let r of Object.keys(e.config.on)){if(""===r)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let n=e.config.on[r];t.set(r,tl(n).map(t=>tD(e,r,t)))}if(e.config.onDone){let r=String(ri(e.id));t.set(r,tl(e.config.onDone).map(t=>tD(e,r,t)))}for(let r of e.invoke){if(r.onDone){let n=`done.invoke.${r.id}`;t.set(n,tl(r.onDone).map(t=>tD(e,n,t)))}if(r.onError){let n=`error.platform.${r.id}`;t.set(n,tl(r.onError).map(t=>tD(e,n,t)))}if(r.onSnapshot){let n=`xstate.snapshot.${r.id}`;t.set(n,tl(r.onSnapshot).map(t=>tD(e,n,t)))}}for(let r of e.after){let e=t.get(r.eventType);e||(e=[],t.set(r.eventType,e)),e.push(r)}return t}(this),this.config.always&&(this.always=tl(this.config.always).map(e=>tD(this,"",e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}/**
   * The well-structured state node definition.
   */get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(ru),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(ru),eventType:null})}:void 0,history:this.history,states:ts(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(ru)})),entry:this.entry.map(ru),exit:this.exit.map(ru),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}/**
   * The logic invoked as actors by this state node.
   */get invoke(){return e8(this,"invoke",()=>tc(this.config.invoke).map((e,t)=>{let r=`${this.id}:invocation[${t}]`,n="object"==typeof e&&"src"in e?e:{id:r,src:e},o=n.id||r,i=n.src,{systemId:s}=n,a="string"==typeof i?i:"type"in i?i:o;return this.machine.implementations.actors[o]||"string"==typeof i||"type"in i||(this.machine.implementations.actors={...this.machine.implementations.actors,// TODO: this should accept `src` as-is
    [o]:i}),{...n,src:a,id:o,systemId:s,toJSON(){let{onDone:e,onError:t,...r}=n;return{...r,type:"xstate.invoke",src:a,id:o}}}}))}/**
   * The mapping of events to transitions.
   */get on(){return e8(this,"on",()=>{let e=this.transitions;return[...e].flatMap(([e,t])=>t.map(t=>[e,t])).reduce((e,[t,r])=>(e[t]=e[t]||[],e[t].push(r),e),{})})}get after(){return e8(this,"delayedTransitions",()=>/**
 * All delayed transitions from the config.
 */(function(e){let t=e.config.after;if(!t)return[];let r=(t,r)=>{let n="function"==typeof t?`${e.id}:delay[${r}]`:t,o=/**
 * Returns an event type that represents an implicit event that
 * is sent after the specified `delay`.
 *
 * @param delayRef The delay in milliseconds
 * @param id The state node ID where this event is handled
 */function(e,t){let r=t?`#${t}`:"";return`${eZ.After}(${e})${r}`}(n,e.id);return e.entry.push(ro({type:o},{id:o,delay:t})),e.exit.push(te(o)),o},n=tp(t)?t.map((e,t)=>{let n=r(e.delay,t);return{...e,event:n}}):Object.keys(t).flatMap((e,n)=>{let o=t[e],i="string"==typeof o?{target:o}:o,s=isNaN(+e)?e:+e,a=r(s,n);return tc(i).map(e=>({...e,event:a,delay:s}))});return n.map(t=>{let{delay:r}=t;return{...tD(e,t.event,t),delay:r}})})(this))}get initial(){return e8(this,"initial",()=>(function(e,t){if("string"==typeof t||tp(t)){let r=tc(t).map(t=>{// Resolve state string keys (which represent children)
    // to their state node
    let r="string"==typeof t?tj(t)?e.machine.getStateNodeById(t):e.states[t]:t;if(!r)throw Error(`Initial state node "${t}" not found on parent state node #${e.id}`);if(!tq(r,e))throw Error(`Invalid initial target: state node #${r.id} is not a descendant of #${e.id}`);return r}),n=tL(e,r),o={source:e,actions:[],eventType:null,reenter:!1,target:n,toJSON:()=>({...o,source:`#${e.id}`,target:n?n.map(e=>`#${e.id}`):void 0})};return o}return tD(e,"__INITIAL__",{target:tc(t.target).map(e=>"string"==typeof e?tj(e)?e:`.${e}`:e),actions:t.actions})})(this,this.config.initial||[]))}next(e,t){let r;let n=t.type,o=[],i=e8(this,`candidates-${n}`,()=>(function(e,t){let r=e.transitions.get(t)||[...e.transitions.keys()].filter(e=>{// check if transition is a wildcard transition,
    // which matches any non-transient events
    if("*"===e)return!0;if(!e.endsWith(".*"))return!1;let r=e.split("."),n=t.split(".");for(let e=0;e<r.length;e++){let t=r[e],o=n[e];if("*"===t){let t=e===r.length-1;return t}if(t!==o)return!1}return!0}).sort((e,t)=>t.length-e.length).flatMap(t=>e.transitions.get(t));return r})(this,n));for(let s of i){let{guard:i}=s,a=e.context,c=!1;try{c=!i||tE(i,a,t,e)}catch(e){throw Error(`Unable to evaluate guard '${i.type}' in transition for event '${n}' in state node '${this.id}':
${e.message}`)}if(c){o.push(...s.actions),r=s;break}}return r?[r]:void 0}/**
   * The target state value of the history state node, if it exists. This represents the
   * default state value to transition to if no history value exists yet.
   */get target(){if("history"===this.type){let e=this.config;return e.target}}/**
   * All the state node IDs of this state node and its descendant state nodes.
   */get stateIds(){let e=ta(Object.keys(this.states).map(e=>this.states[e].stateIds));return[this.id].concat(e)}/**
   * All the event types accepted by this state node and its descendants.
   */get events(){return e8(this,"events",()=>{let{states:e}=this,t=new Set(this.ownEvents);if(e)for(let r of Object.keys(e)){let n=e[r];if(n.states)for(let e of n.events)t.add(`${e}`)}return Array.from(t)})}/**
   * All the events that have transitions directly from this state node.
   *
   * Excludes any inert events.
   */get ownEvents(){let e=new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(e=>!(!e.target&&!e.actions.length&&!e.reenter))));return Array.from(e)}}class rl{/**
   * The machine's own version.
   */constructor(/**
   * The raw config used to create the machine.
   */e,t){this.config=e,this.version=void 0,this.implementations=void 0,this.types=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.__TContext=void 0,this.__TEvent=void 0,this.__TAction=void 0,this.__TActor=void 0,this.__TResolvedTypesMeta=void 0,this.__TInput=void 0,this.id=e.id||"(machine)",this.implementations={actors:t?.actors??{},actions:t?.actions??{},delays:t?.delays??{},guards:t?.guards??{}},this.version=this.config.version,this.types=this.config.types??{},this.transition=this.transition.bind(this),this.root=new rp(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}/**
   * Clones this state machine with the provided implementations
   * and merges the `context` (if provided).
   *
   * @param implementations Options (`actions`, `guards`, `actors`, `delays`, `context`)
   *  to recursively merge with the existing options.
   *
   * @returns A new `StateMachine` instance with the provided implementations.
   */provide(e){let{actions:t,guards:r,actors:n,delays:o}=this.implementations;return new rl(this.config,{actions:{...t,...e.actions},guards:{...r,...e.guards},actors:{...n,...e.actors},delays:{...o,...e.delays}})}/**
   * Resolves the given `state` to a new `State` instance relative to this machine.
   *
   * This ensures that `.nextEvents` represent the correct values.
   *
   * @param state The state to resolve
   */resolveState(e){let t=t_(tU(this.root,e.value)),r=Array.from(t);return this.createState({...e,value:t3(this.root,e.value),configuration:r,done:tN(r)})}resolveStateValue(e,...[t]){let r=t3(this.root,e);return this.resolveState(t6.from(r,t,this))}/**
   * Determines the next state given the current `state` and received `event`.
   * Calculates a full macrostep from all microsteps.
   *
   * @param state The current State instance or state value
   * @param event The received event
   */transition(e,t,r){// TODO: handle error events in a better way
if("string"==typeof t.type&&(t.type===eX||t.type.startsWith(e0))&&!e.nextEvents.some(e=>e===t.type))return t5(e,{error:t.data});let{state:n}=t1(e,t,r);return n}/**
   * Determines the next state given the current `state` and `event`.
   * Calculates a microstep.
   *
   * @param state The current state
   * @param event The received event
   */microstep(e,t,r){return t1(e,t,r).microstates}getTransitionData(e,t){return function e(t,r,n,o){return(// leaf node
"string"==typeof r?function(e,t,r,n){let o=tV(e,t),i=o.next(r,n);return i&&i.length?i:e.next(r,n)}(t,r,n,o):1===Object.keys(r).length?function(t,r,n,o){let i=Object.keys(r),s=tV(t,i[0]),a=e(s,r[i[0]],n,o);return a&&a.length?a:t.next(n,o)}(t,r,n,o):function(t,r,n,o){let i=[];for(let s of Object.keys(r)){let a=r[s];if(!a)continue;let c=tV(t,s),u=e(c,a,n,o);u&&i.push(...u)}return i.length?i:t.next(n,o)}(t,r,n,o))}(this.root,e.value,e,t)||[]}/**
   * The initial state _before_ evaluating any microsteps.
   * This "pre-initial" state is provided to initial actions executed in the initial state.
   */getPreInitialState(e,t){let{context:r}=this.config,n=this.resolveState(this.createState({value:{},// TODO: this is computed in state constructor
context:"function"!=typeof r&&r?r:{},meta:void 0,configuration:function(e){let t=[],r=e.initial,n=new Set,o=new Set([e]);for(let e of(tZ([r],{},o,n),[...n].sort((e,t)=>e.order-t.order)))t.push(e);return t}(this.root),children:{}}));return"function"==typeof r?t0([rt(({spawn:e,event:t})=>r({spawn:e,input:t.input}))],t,n,e):n}/**
   * Returns the initial `State` instance, with reference to `self` as an `ActorRef`.
   */getInitialState(e,t){let r={type:e2,input:t},n=this.getPreInitialState(e,r),o=t$([{target:[...n.configuration].filter(tI),source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null// TODO: fix
}],n,e,r,!0),{state:i}=t1(o,r,e);// TODO: fix;
return i}start(e){Object.values(e.children).forEach(e=>{0===e.status&&e.start?.()})}getStateNodeById(e){let t=e.split("."),r=t.slice(1),n=tj(t[0])?t[0].slice(1):t[0],o=this.idMap.get(n);if(!o)throw Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return tG(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedState(e){return function(e){let{configuration:t,tags:r,machine:n,children:o,...i}=e,s={};for(let e in o)s[e]={state:o[e].getPersistedState?.(),src:o[e].src};return{...i,children:s}}(e)}createState(e){return e instanceof t6?e:new t6(e,this)}getStatus(e){return e.error?{status:"error",data:e.error}:e.done?{status:"done",data:e.output}:{status:"active"}}restoreState(e,t){let r={};Object.keys(e.children).forEach(n=>{let o=e.children[n],i=o.state,s=o.src,a=s?th(this.implementations.actors[s])?.src:void 0;if(!a)return;let c=a.restoreState?.(i,t),u=tx(a,{id:n,state:c});r[n]=u});let n=this.createState(new t6({...e,children:r},this));return(// TODO: DRY this up
n.configuration.forEach(e=>{e.invoke&&e.invoke.forEach(e=>{let{id:n,src:o}=e;if(r[n])return;let i=th(this.implementations.actors[o]);if(i){let o=tx(i.src,{id:n,parent:t?.self,input:"input"in e?e.input:i.input});r[n]=o}})}),n)}}var rf={};Object.defineProperty(rf,"__esModule",{value:!0}),rf.ttsMachine=void 0;var rh={},rd=rh&&rh.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(rh,"__esModule",{value:!0}),rh.getToken=void 0,rh.getToken=tg(({input:e})=>rd(void 0,void 0,void 0,function*(){return"string"==typeof e.credentials?fetch(new Request(e.credentials)).then(e=>e.text()):fetch(new Request(e.credentials.endpoint,{method:"POST",headers:{"Ocp-Apim-Subscription-Key":e.credentials.key}})).then(e=>e.text())}));var rv={},ry=P("WuZRa");Object.defineProperty(rv,"__esModule",{value:!0}),rv.default=void 0;var rg=ry(P("7qv08")).default;rv.default=rg,rf.ttsMachine=(u={id:"tts",types:{context:{},events:{}},context:({input:e})=>({ttsDefaultVoice:e.ttsDefaultVoice||"en-US-DavisNeural",audioContext:e.audioContext,azureCredentials:e.azureCredentials}),initial:"GetToken",on:{READY:{target:".Ready",actions:[rt({wsaTTS:({event:e})=>e.value.wsaTTS,wsaUtt:({event:e})=>e.value.wsaUtt}),e6({type:"TTS_READY"})]},ERROR:{actions:e6({type:"TTS_ERROR"})}},states:{Ready:{on:{SPEAK:{target:"Speaking",actions:rt({agenda:({event:e})=>e.value})}}},Fail:{},GetToken:{invoke:{id:"getAuthorizationToken",input:({context:e})=>({credentials:e.azureCredentials}),src:"getToken",onDone:{target:"Ponyfill",actions:[rt(({event:e})=>({azureAuthorizationToken:e.output}))]},onError:{actions:({event:e})=>console.error("[TTS] getToken error",e),target:"Fail"}}},Ponyfill:{invoke:{id:"ponyTTS",src:"ponyfill",input:({context:e})=>({audioContext:e.audioContext,azureAuthorizationToken:e.azureAuthorizationToken})}},Speaking:{initial:"Go",on:{STOP:{target:"Ready"},TTS_STARTED:{actions:e6({type:"TTS_STARTED"})},SPEAK_COMPLETE:{target:"Ready"}},exit:e6({type:"SPEAK_COMPLETE"}),states:{Go:{invoke:{src:"start",input:({context:e})=>({wsaTTS:e.wsaTTS,wsaUtt:e.wsaUtt,ttsLexicon:e.ttsLexicon,voice:e.agenda.voice||e.ttsDefaultVoice,streamURL:e.agenda.streamURL,utterance:e.agenda.utterance})},on:{CONTROL:"Paused"},exit:"ttsStop"},Paused:{on:{CONTROL:"Go"}}}}}},p={actions:{ttsStop:({context:e})=>{e.wsaTTS.cancel()}},actors:{getToken:rh.getToken,ponyfill:td(({sendBack:e,input:t})=>{let r=(0,rv.default)({audioContext:t.audioContext,credentials:{region:"northeurope",authorizationToken:t.azureAuthorizationToken}}),{speechSynthesis:n,SpeechSynthesisUtterance:o}=r;n.addEventListener("voiceschanged",()=>{let t=n.getVoices();t.length>0?(console.debug("[TTS] READY"),e({type:"READY",value:{wsaTTS:n,wsaUtt:o}})):(console.error("[TTS] No voices available"),e({type:"ERROR"}))})}),start:td(({sendBack:e,input:t})=>{if([""," "].includes(t.utterance))console.debug("[TTS] SPEAK: ",t.utterance),t.wsaTTS.speak("");else{console.debug("[TTS] SPEAK: ",t.utterance);let r=rm(t.utterance,t.voice,t.ttsLexicon,1),n=new t.wsaUtt(r);// todo speech rate;
n.addEventListener("start",()=>{e({type:"TTS_STARTED"}),console.debug("[TTS] TTS_STARTED")}),n.addEventListener("end",()=>{e({type:"SPEAK_COMPLETE"}),console.debug("[TTS] SPEAK_COMPLETE")}),t.wsaTTS.speak(n)}})}},new rl(u,p));let rm=(e,t,r,n)=>{let o=`<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="http://www.w3.org/2001/mstts" xml:lang="en-US"><voice name="${t}">`;return r&&(o+=`<lexicon uri="${r}"/>`),o=o+`<prosody rate="${n}">`+`${e}</prosody></voice></speak>`};var rb={},rS=rb&&rb.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(rb,"__esModule",{value:!0}),rb.asrMachine=void 0;var rP={},rC=P("73s0r");Object.defineProperty(rP,"__esModule",{value:!0}),Object.defineProperty(rP,"createSpeechRecognitionPonyfillFromRecognizer",{enumerable:!0,get:function(){return rR.createSpeechRecognitionPonyfillFromRecognizer}}),rP.default=void 0;var rR=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==rC(e)&&"function"!=typeof e)return{default:e};var r=rx(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(P("YULxE"));function rx(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(rx=function(e){return e?r:t})(e)}var rO=rR.default;rP.default=rO,rb.asrMachine=(l={id:"asr",types:{context:{},events:{}},context:({input:e})=>({asrDefaultCompleteTimeout:e.asrDefaultCompleteTimeout||0,asrDefaultNoInputTimeout:e.asrDefaultNoInputTimeout||5e3,locale:e.locale||"en-US",audioContext:e.audioContext,azureCredentials:e.azureCredentials}),initial:"GetToken",on:{READY:{target:".Ready",actions:[rt({wsaASR:({event:e})=>e.value.wsaASR,wsaGrammarList:({event:e})=>e.value.wsaGrammarList}),e6({type:"ASR_READY"})]}},states:{Fail:{},Ready:{on:{START:{target:"Recognising",actions:rt({params:({event:e})=>e.value})}}},Recognising:{initial:"WaitForRecogniser",invoke:{id:"recStart",input:({context:e})=>({wsaASR:e.wsaASR,wsaGrammarList:e.wsaGrammarList,locale:e.locale,phrases:(e.params||{}).hints||[]}),src:"recStart"},exit:"recStop",on:{RESULT:{actions:[rt({result:({event:e})=>e.value}),te("completeTimeout")],target:".Match"},RECOGNISED:{target:"Ready",actions:[e6(({context:e})=>({type:"RECOGNISED",value:e.result}))]},CONTROL:{target:"Pause"},NOINPUT:{actions:e6({type:"ASR_NOINPUT"}),target:"Ready"}},states:{WaitForRecogniser:{on:{STARTED:{target:"NoInput",actions:[rt({wsaASRinstance:({event:e})=>e.value.wsaASRinstance}),e6({type:"ASR_STARTED"})]}}},NoInput:{entry:[ro({type:"NOINPUT"},{delay:({context:e})=>(e.params||{}).noInputTimeout||e.asrDefaultNoInputTimeout,id:"timeout"})],on:{STARTSPEECH:{target:"InProgress",actions:te("completeTimeout")}},exit:[te("timeout")]},InProgress:{entry:()=>console.debug("[ASR] in progress")},Match:{entry:[({context:e})=>console.debug("RECOGNISED will be sent in (ms)",(e.params||{}).completeTimeout||e.asrDefaultCompleteTimeout),ro({type:"RECOGNISED"},{delay:({context:e})=>(e.params||{}).completeTimeout||e.asrDefaultCompleteTimeout,id:"completeTimeout"})]}}},Pause:{entry:e6({type:"ASR_PAUSED"}),on:{CONTROL:{target:"Recognising"}}},GetToken:{invoke:{id:"getAuthorizationToken",input:({context:e})=>({credentials:e.azureCredentials}),src:"getToken",onDone:{target:"Ponyfill",actions:[rt(({event:e})=>({azureAuthorizationToken:e.output}))]},onError:{target:"Fail"}}},Ponyfill:{invoke:{id:"ponyASR",src:"ponyfill",input:({context:e})=>({audioContext:e.audioContext,azureAuthorizationToken:e.azureAuthorizationToken,locale:e.locale})}}}},f={actions:{recStop:({context:e})=>{e.wsaASRinstance.abort(),console.debug("[ASR] stopped")}},actors:{getToken:rh.getToken,ponyfill:td(({sendBack:e,input:t})=>rS(void 0,void 0,void 0,function*(){let{SpeechGrammarList:r,SpeechRecognition:n}=(0,rP.default)({audioContext:t.audioContext,credentials:{region:"northeurope",authorizationToken:t.azureAuthorizationToken}});e({type:"READY",value:{wsaASR:n,wsaGrammarList:r}}),console.debug("[ASR] READY")})),recStart:td(({sendBack:e,input:t})=>{let r=new t.wsaASR;r.grammars=new t.wsaGrammarList,r.grammars.phrases=t.phrases||[],r.lang=t.locale,r.continuous=!0,r.interimResults=!0,r.onresult=function(t){if(t.results[t.results.length-1].isFinal){let r=t.results.map(e=>e[0].transcript.replace(/\.$/,"")).join(" "),n=t.results.map(e=>e[0].confidence).reduce((e,t)=>e+t)/t.results.length,o=[{utterance:r,confidence:n}];e({type:"RESULT",value:o}),console.debug("[ASR] RESULT (pre-final)",o)}else e({type:"STARTSPEECH"})},r.addEventListener("start",()=>{e({type:"STARTED",value:{wsaASRinstance:r}})}),// receive((event) => {
//   console.debug("bla");
//   if (event.type === "STOP") {
//     asr.abort();
//   }
// });
r.start()})}},new rl(l,f));let rw=(h={types:{context:{},events:{}},context:({input:e})=>({settings:e.settings}),id:"speechstate",type:"parallel",states:{asrTtsSpawner:{initial:"idle",states:{idle:{on:{PREPARE:"createAudioContext"}},createAudioContext:{invoke:{id:"createAudioContext",src:"audioContext",onDone:{target:"spawn",actions:rt({audioContext:({event:e})=>e.output})}}},spawn:{entry:[rt({ttsRef:({context:e,spawn:t})=>t(rf.ttsMachine,{input:{ttsDefaultVoice:e.settings.ttsDefaultVoice,audioContext:e.audioContext,azureCredentials:e.settings.azureCredentials}})}),rt({asrRef:({context:e,spawn:t})=>t(rb.asrMachine,{input:{asrDefaultCompleteTimeout:e.settings.asrDefaultCompleteTimeout,asrDefaultNoInputTimeout:e.settings.asrDefaultNoInputTimeout,locale:e.settings.locale,audioContext:e.audioContext,azureCredentials:e.settings.azureCredentials}})})],after:{3e5:{target:"spawn"}}}}},asrTtsManager:{initial:"initialize",on:{TTS_READY:{actions:()=>console.debug("[TTS→SpSt] TTS_READY"),target:".preReady"},ASR_READY:{actions:()=>console.debug("[ASR→SpSt] ASR_READY"),target:".preReady"},// ASR_ERROR not implemented
TTS_ERROR:{actions:()=>console.error("[TTS→SpSt] TTS_ERROR"),target:".fail"},ASR_NOINPUT:{actions:[()=>console.debug("[ASR→SpSt] NOINPUT"),e6({type:"ASR_NOINPUT"})],target:".ready"}},states:{initialize:{},preReady:{on:{TTS_READY:{actions:()=>console.debug("[TTS→SpSt] TTS_READY"),target:"ready"},ASR_READY:{actions:()=>console.debug("[ASR→SpSt] ASR_READY"),target:"ready"}}},ready:{initial:"idle",entry:[()=>console.debug("[SpSt] All ready"),e6({type:"ASRTTS_READY"})],states:{idle:{on:{LISTEN:{target:"waitForRecogniser"},SPEAK:[{target:"speaking"}]}},speaking:{entry:[({event:e})=>console.debug("[SpSt→TTS] SPEAK",e.value),({context:e,event:t})=>e.ttsRef.send({type:"SPEAK",value:t.value})],on:{CONTROL:{actions:[()=>console.debug("[SpSt→TTS] CONTROL"),({context:e})=>e.ttsRef.send({type:"CONTROL"})]},STOP:{actions:[()=>console.debug("[SpSt→TTS] STOP"),({context:e})=>e.ttsRef.send({type:"STOP"})]},TTS_STARTED:{actions:[()=>console.debug("[TTS→SpSt] TTS_STARTED"),e6({type:"TTS_STARTED"})]},SPEAK_COMPLETE:{target:"idle",actions:[()=>console.debug("[TTS→SpSt] SPEAK_COMPLETE"),e6({type:"SPEAK_COMPLETE"})]}}},waitForRecogniser:{entry:[({event:e})=>console.debug("[SpSt→ASR] START",e.value),({context:e,event:t})=>e.asrRef.send({type:"START",value:t.value})],on:{ASR_STARTED:{target:"recognising",actions:[()=>console.debug("[ASR→SpSt] ASR_STARTED"),e6({type:"ASR_STARTED"})]}}},recognising:{on:{CONTROL:{actions:[()=>console.debug("[SpSt→ASR] CONTROL"),({context:e})=>e.asrRef.send({type:"CONTROL"})]},RECOGNISED:{actions:[({event:e})=>console.debug("[ASR→SpSt] RECOGNISED",e.value),e6(({event:e})=>({type:"RECOGNISED",value:e.value}))],target:"idle"}}}}},fail:{}}}}},d={actors:{audioContext:tg(()=>{let e=new(window.AudioContext||window.webkitAudioContext);return navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e.createMediaStreamSource(t)}),e})},actions:{}},new rl(h,d));eQ.speechstate=rw,Object.defineProperty(eJ,"speechstate",{enumerable:!0,get:function(){return eQ.speechstate}});let rE={azureCredentials:{endpoint:"https://northeurope.api.cognitive.microsoft.com/sts/v1.0/issuetoken",key:"ad818b0cdae94e4ea41aec30f7342a73"},asrDefaultCompleteTimeout:0,locale:"en-US",asrDefaultNoInputTimeout:5e3,ttsDefaultVoice:"en-GB-RyanNeural"};//chat gpt keys:
async function rI(e,t){let r=new Headers;r.append("Authorization","Bearer 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"),r.append("Content-Type","application/json");let n=JSON.stringify({model:"gpt-4-0125-preview",messages:[{role:"user",content:e}],temperature:.1,max_tokens:t}),o=fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:r,body:n,redirect:"follow"}).then(e=>e.json()).then(e=>e.choices[0].message.content);return o}//attempting to have it keep memory
async function rT(e,t,r,n){let o=new Headers;o.append("Authorization","Bearer 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"),o.append("Content-Type","application/json");let i=JSON.stringify({model:"gpt-4-0125-preview",messages:[{role:"user",content:e},{role:"system",content:t},{role:"user",content:r}],temperature:.1,max_tokens:n}),s=fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:o,body:i,redirect:"follow"}).then(e=>e.json()).then(e=>e.choices[0].message.content);return s}async function rA(e){return new Promise((t,r)=>{let n=new Audio(e);n.addEventListener("ended",t),n.addEventListener("error",r),n.play().catch(r)})}let r_=()=>({context:e})=>e.spstRef.send({type:"LISTEN"}),rk=(v={id:"root",type:"parallel",states:{DialogueManager:{initial:"Prepare",states:{Prepare:{on:{ASRTTS_READY:"Ready"},entry:[eB({spstRef:({spawn:e})=>e(eJ.speechstate,{input:{settings:rE}})})]},Ready:{initial:"Greeting",states:{Greeting:{entry:"speak.greeting",on:{SPEAK_COMPLETE:"GetName"}},GetName:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"But before we begin, how shall I call you?"}})},on:{SPEAK_COMPLETE:"AskName"}},AskName:{entry:r_(),on:{RECOGNISED:{target:"Greet",actions:[({event:e})=>console.log(e),eB({username:({event:e})=>e.value[0].utterance.replace(/\.$/g,"").replace("i'm ","").replace("i am ","").replace("my name is ","")||"my new friend"})]}}},Backchannel:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Huh"}})},on:{SPEAK_COMPLETE:"Greet"}},Greet:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`So ${e.username}, nice to meet you! Please select one of the following topics to talk about: 1. "Which one tells a story better: Books or Movies?", 2. "Saturday plans: Going out or staying in?", or 3. "Buying a gift for a friend".`}})},on:{SPEAK_COMPLETE:"ChooseTopic"}},//move to askUniverse
ChooseTopic:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesNegotiation",guard:({event:e})=>{let t=e.value[0].utterance.toLowerCase().replace(/\.$/g,"");return!!(t.includes("books")||t.includes("movies")||t.includes("movie")||t.includes("book")||t.includes("first")||t.includes("number one"))},actions:[({event:e})=>console.log(e.output)]},{target:"InAndOutNegotiation",guard:({event:e})=>{let t=e.value[0].utterance.toLowerCase().replace(/\.$/g,"");return!!(t.includes("going out")||t.includes("staying in")||t.includes("inside")||t.includes("outdoors")||t.includes("saturday")||t.includes("plans")||t.includes("take out")||t.includes("number two")||t.includes("second")||t.includes("indoors"))},actions:[({event:e})=>console.log(e.output)]},{target:"GiftNegotiation",guard:({event:e})=>{let t=e.value[0].utterance.toLowerCase().replace(/\.$/g,"");return!!(t.includes("friend")||t.includes("buy")||t.includes("get")||t.includes("present")||t.includes("gift")||t.includes("presents")||t.includes("gifts")||t.includes("third")||t.includes("number three"))},actions:[({event:e})=>console.log(e.output)]},{target:"ExplainBooksVsMovies",guard:({event:e})=>{let t=e.value[0].utterance.toLowerCase().replace(/\.$/g,"");return!!(t.includes("i don't know")||t.includes("you can choose")||t.includes("you choose")||t.includes("you pick")||t.includes("your choice")||t.includes("i'm not sure")||t.includes("you can pick")||t.includes("you can select")||t.includes("pick")||t.includes("choose")||t.includes("select"))},actions:[({event:e})=>console.log(e.output)]},{target:"noMatchIntro",actions:[({event:e})=>console.log(e.output)]}]}},noMatchIntro:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"I didn't hear that sorry, can you say it again?"}})},on:{SPEAK_COMPLETE:"ChooseTopic"}},//states:
BooksVsMoviesNegotiation:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Oh I was hoping you'd choose that one."}})},on:{SPEAK_COMPLETE:"LaughBook1"}},LaughBook1:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"ExplainBooksVsMovies",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchIntro"}}},InAndOutNegotiation:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Hmm"}})},on:{SPEAK_COMPLETE:"ExplainInNOut"}},GiftNegotiation:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Giving away presents huh? Let's see!"}})},on:{SPEAK_COMPLETE:"ExplainGift"}},ExplainBooksVsMovies:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`A lot of movies are based on books, but maybe one is better than the other! So ${e.username} books or movies?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase1"}},BooksVsMoviesPhase1:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase1GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]},{target:"noMatch"}]}},noMatch:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase1"}},BooksVsMoviesPhase1GPT:{invoke:{src:W(async({input:e})=>{let t=await rI("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  "+e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult}),onDone:{target:"Filler",actions:[eB({answer:({event:e})=>e.output})]},onError:{target:"noMatchBook1"}}},noMatchBook1:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase1"}},Filler:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Um...I see."}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase1GPTReply"}},BooksVsMoviesPhase1GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase2"}},//2
BooksVsMoviesPhase2:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase2GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase2GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.answer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,answer:e.answer}),onDone:{target:"Filler2",actions:[eB({secondanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook2"}}},noMatchBook2:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase2"}},Filler2:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Uh"}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase2GPTReply"}},BooksVsMoviesPhase2GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.secondanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase3"}},//3
BooksVsMoviesPhase3:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase3GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase3GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.secondanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,secondanswer:e.secondanswer}),onDone:{target:"Filler3",actions:[eB({thirdanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook3"}}},noMatchBook3:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase3"}},Filler3:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Oh"}})},on:{SPEAK_COMPLETE:"LaughBook3"}},LaughBook3:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"BooksVsMoviesPhase3GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchBook3"}}},BooksVsMoviesPhase3GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.thirdanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase4"}},//4
BooksVsMoviesPhase4:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase4GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase4GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.thirdanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,thirdanswer:e.thirdanswer}),onDone:{target:"Filler4",actions:[eB({forthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook4"}}},noMatchBook4:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase4"}},Filler4:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Well..."}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase4GPTReply"}},BooksVsMoviesPhase4GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.forthanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase5"}},//5
BooksVsMoviesPhase5:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase5GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase5GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.forthanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,forthanswer:e.forthanswer}),onDone:{target:"Filler5",actions:[eB({fifthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook5"}}},noMatchBook5:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase5"}},Filler5:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Huh I hear you there but..."}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase5GPTReply"}},BooksVsMoviesPhase5GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase6"}},//6
BooksVsMoviesPhase6:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase6GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase6GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.fifthanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,fifthanswer:e.fifthanswer}),onDone:{target:"Filler6",actions:[eB({sixthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook6"}}},noMatchBook6:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase6"}},Filler6:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"I see your point, however..."}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase6GPTReply"}},BooksVsMoviesPhase6GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.sixthanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase7"}},//7
BooksVsMoviesPhase7:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase7GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase7GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.sixthanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,sixthanswer:e.sixthanswer}),onDone:{target:"LaughBook7",actions:[eB({seventhanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook7"}}},noMatchBook7:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase7"}},LaughBook7:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"BooksVsMoviesPhase7GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchBook7"}}},BooksVsMoviesPhase7GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.seventhanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase8"}},//8
BooksVsMoviesPhase8:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase8GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase8GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.seventhanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,seventhanswer:e.seventhanswer}),onDone:{target:"BooksVsMoviesPhase8GPTReply",actions:[eB({eigthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook8"}}},noMatchBook8:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase8"}},BooksVsMoviesPhase8GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.eigthanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase9"}},//9
BooksVsMoviesPhase9:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase9GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase9GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.eigthanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,eigthanswer:e.eigthanswer}),onDone:{target:"Filler9",actions:[eB({ninthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook9"}}},noMatchBook9:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase9"}},Filler9:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Uh"}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase9GPTReply"}},BooksVsMoviesPhase9GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.ninthanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase10"}},//10
BooksVsMoviesPhase10:{entry:r_(),on:{RECOGNISED:[{target:"BooksVsMoviesPhase10GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},BooksVsMoviesPhase10GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Is reading the book better than watching the movie? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.ninthanswer,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,ninthanswer:e.ninthanswer}),onDone:{target:"LaughBook10",actions:[eB({tenthanswer:({event:e})=>e.output})]},onError:{target:"noMatchBook10"}}},noMatchBook10:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"BooksVsMoviesPhase10"}},LaughBook10:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"BooksVsMoviesPhase10GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchBook10"}}},BooksVsMoviesPhase10GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.tenthanswer}})},on:{SPEAK_COMPLETE:"BooksVsMoviesFinished"}},BooksVsMoviesFinished:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`Wow ${e.username}. Let's just agree to disagree.`}})},on:{SPEAK_COMPLETE:"Goodbye"}},//SECONF TOPIC - INDOORS AND OUTDOORS
ExplainInNOut:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Spending time with friends is great for the soul and mind; But are outdoor activities better than indoors?"}})},on:{SPEAK_COMPLETE:"InNOutPhase1"}},InNOutPhase1:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase1GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]},{target:"noMatchInNOut"}]}},noMatchInNOut:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase1"}},InNOutPhase1GPT:{invoke:{src:W(async({input:e})=>{let t=await rI("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  "+e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult}),onDone:{target:"FillerInNOut1",actions:[eB({answerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut1"}}},noMatchInNOut1:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase1"}},FillerInNOut1:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Huh"}})},on:{SPEAK_COMPLETE:"InNOutPhase1GPTReply"}},InNOutPhase1GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase2"}},//2
InNOutPhase2:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase2GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase2GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.answerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,answerInNOut:e.answerInNOut}),onDone:{target:"Filler2InNOut",actions:[eB({secondanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut2"}}},noMatchInNOut2:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase2"}},Filler2InNOut:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Uh"}})},on:{SPEAK_COMPLETE:"InNOutPhase2GPTReply"}},InNOutPhase2GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.secondanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase3"}},//3
InNOutPhase3:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase3GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase3GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.secondanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,secondanswerInNOut:e.secondanswerInNOut}),onDone:{target:"Filler3InNOut",actions:[eB({thirdanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut3"}}},noMatchInNOut3:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase3"}},Filler3InNOut:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Oh"}})},on:{SPEAK_COMPLETE:"InNOutPhase3GPTReply"}},InNOutPhase3GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.thirdanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase4"}},//4
InNOutPhase4:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase4GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase4GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.thirdanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,thirdanswerInNOut:e.thirdanswerInNOut}),onDone:{target:"LaughInNOut4",actions:[eB({forthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut4"}}},noMatchInNOut4:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase4"}},LaughInNOut4:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"InNOutPhase4GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchInNOut4"}}},InNOutPhase4GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.forthanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase5"}},//5
InNOutPhase5:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase5GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase5GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.forthanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,forthanswerInNOut:e.forthanswerInNOut}),onDone:{target:"Filler5InNOut",actions:[eB({fifthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut5"}}},noMatchInNOut5:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase5"}},Filler5InNOut:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Well..."}})},on:{SPEAK_COMPLETE:"InNOutPhase5GPTReply"}},InNOutPhase5GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase6"}},//6
InNOutPhase6:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase6GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase6GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.fifthanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,fifthanswerInNOut:e.fifthanswerInNOut}),onDone:{target:"LaughInNOut6",actions:[eB({sixthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut6"}}},noMatchInNOut6:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase6"}},LaughInNOut6:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"InNOutPhase6GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchInNOut6"}}},InNOutPhase6GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.sixthanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase7"}},//7
InNOutPhase7:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase7GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase7GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.sixthanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,sixthanswerInNOut:e.sixthanswerInNOut}),onDone:{target:"FillerInNOut7",actions:[eB({seventhanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut7"}}},noMatchInNOut7:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase7"}},FillerInNOut7:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Um"}})},on:{SPEAK_COMPLETE:"InNOutPhase7GPTReply"}},InNOutPhase7GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.seventhanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase8"}},//8
InNOutPhase8:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase8GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase8GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.seventhanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,seventhanswerInNOut:e.seventhanswerInNOut}),onDone:{target:"InNOutPhase8GPTReply",actions:[eB({eigthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut8"}}},noMatchInNOut8:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase8"}},InNOutPhase8GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.eigthanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase9"}},//9
InNOutPhase9:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase9GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase9GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.eigthanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,eigthanswerInNOut:e.eigthanswerInNOut}),onDone:{target:"LaughInNOut9",actions:[eB({ninthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut9"}}},noMatchInNOut9:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase9"}},LaughInNOut9:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"InNOutPhase9GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchInNOut9"}}},InNOutPhase9GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.ninthanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutPhase10"}},//10
InNOutPhase10:{entry:r_(),on:{RECOGNISED:[{target:"InNOutPhase10GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},InNOutPhase10GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Are outdoor activities better than indoors? Task: continue the debate by giving an OPPOSITE statement AND DISAGREE from this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.ninthanswerInNOut,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,ninthanswerInNOut:e.ninthanswerInNOut}),onDone:{target:"FillerInNOut10",actions:[eB({tenthanswerInNOut:({event:e})=>e.output})]},onError:{target:"noMatchInNOut10"}}},noMatchInNOut10:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"InNOutPhase10"}},FillerInNOut10:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Okay okay"}})},on:{SPEAK_COMPLETE:"InNOutPhase10GPTReply"}},InNOutPhase10GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.tenthanswerInNOut}})},on:{SPEAK_COMPLETE:"InNOutFinished"}},InNOutFinished:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`Wow ${e.username}. Those were some interesting opinions!`}})},on:{SPEAK_COMPLETE:"Goodbye"}},//THIRD TOPIC - GIFT FOR A FRIEND:
ExplainGift:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Buying a gift for a friend can be quite challenging. What would make the perfect present?"}})},on:{SPEAK_COMPLETE:"GiftPhase1"}},GiftPhase1:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase1GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]},{target:"noMatchGift"}]}},noMatchGift:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase1"}},GiftPhase1GPT:{invoke:{src:W(async({input:e})=>{let t=await rI("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  "+e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult}),onDone:{target:"LaughGift1",actions:[eB({answergift:({event:e})=>e.output})]},onError:{target:"noMatchGift1"}}},noMatchGift1:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase1"}},LaughGift1:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"GiftPhase1GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchGift1"}}},GiftPhase1GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answergift}})},on:{SPEAK_COMPLETE:"GiftPhase2"}},//2
GiftPhase2:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase2GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase2GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS): ",e.answergift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,answergift:e.answergift}),onDone:{target:"Filler2Gift",actions:[eB({secondanswergift:({event:e})=>e.output})]},onError:{target:"noMatchGift2"}}},noMatchGift2:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase2"}},Filler2Gift:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Uh"}})},on:{SPEAK_COMPLETE:"GiftPhase2GPTReply"}},GiftPhase2GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.secondanswergift}})},on:{SPEAK_COMPLETE:"GiftPhase3"}},//3
GiftPhase3:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase3GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase3GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.secondanswergift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,secondanswergift:e.secondanswergift}),onDone:{target:"Filler3Gift",actions:[eB({thirdanswergift:({event:e})=>e.output})]},onError:{target:"noMatchGift3"}}},noMatchGift3:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase3"}},Filler3Gift:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Oh"}})},on:{SPEAK_COMPLETE:"GiftPhase3GPTReply"}},GiftPhase3GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.thirdanswergift}})},on:{SPEAK_COMPLETE:"GiftPhase4"}},//4
GiftPhase4:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase4GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase4GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.thirdanswergift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,thirdanswergift:e.thirdanswergift}),onDone:{target:"LaughGift4",actions:[eB({forthanswergift:({event:e})=>e.output})]},onError:{target:"noMatchGift4"}}},noMatchGift4:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase4"}},LaughGift4:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"GiftPhase4GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchGift4"}}},GiftPhase4GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.forthanswergift}})},on:{SPEAK_COMPLETE:"GiftPhase5"}},//5
GiftPhase5:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase5GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase5GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.forthanswergift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,forthanswergift:e.forthanswergift}),onDone:{target:"Filler5Gift",actions:[eB({fifthanswergift:({event:e})=>e.output})]},onError:{target:"noMatchGift5"}}},noMatchGift5:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase5"}},Filler5Gift:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Well..."}})},on:{SPEAK_COMPLETE:"GiftPhase5GPTReply"}},GiftPhase5GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.answergift}})},on:{SPEAK_COMPLETE:"GiftPhase6"}},//6
GiftPhase6:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase6GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase6GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.fifthanswergift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,fifthanswergift:e.fifthanswergift}),onDone:{target:"FillerGift6",actions:[eB({sixthanswergift:({event:e})=>e.output})]},onError:{target:"noMatchGift6"}}},noMatchGift6:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase6"}},FillerGift6:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"I see your point, however..."}})},on:{SPEAK_COMPLETE:"GiftPhase6GPTReply"}},GiftPhase6GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.sixthanswergift}})},on:{SPEAK_COMPLETE:"GiftPhase7"}},//7
GiftPhase7:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase7GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase7GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.sixthanswerGift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,sixthanswergift:e.sixthanswergift}),onDone:{target:"FillerGift7",actions:[eB({seventhanswerGift:({event:e})=>e.output})]},onError:{target:"noMatchGift7"}}},noMatchGift7:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase7"}},FillerGift7:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Huh"}})},on:{SPEAK_COMPLETE:"GiftPhase7GPTReply"}},GiftPhase7GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.seventhanswerGift}})},on:{SPEAK_COMPLETE:"GiftPhase8"}},//8
GiftPhase8:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase8GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase8GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.seventhanswerGift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,seventhanswerGift:e.seventhanswerGift}),onDone:{target:"LaughGift8",actions:[eB({eigthanswerGift:({event:e})=>e.output})]},onError:{target:"noMatchGift8"}}},noMatchGift8:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase8"}},LaughGift8:{invoke:{src:W(async()=>(await rA("https://furhat-audio.s3.eu-north-1.amazonaws.com/chuckleMan.wav"),"Audio playback complete")),onDone:{target:"GiftPhase8GPTReply",actions:[({event:e})=>console.log(e.output)]},onError:{target:"noMatchGift8"}}},GiftPhase8GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.eigthanswerGift}})},on:{SPEAK_COMPLETE:"GiftPhase9"}},//9
GiftPhase9:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase9GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase9GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.eigthanswerGift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,eigthanswerGift:e.eigthanswerGift}),onDone:{target:"FillerGift9",actions:[eB({ninthanswerGift:({event:e})=>e.output})]},onError:{target:"noMatchGift9"}}},noMatchGift9:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase9"}},FillerGift9:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Uh"}})},on:{SPEAK_COMPLETE:"GiftPhase9GPTReply"}},GiftPhase9GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.ninthanswerGift}})},on:{SPEAK_COMPLETE:"GiftPhase10"}},//10
GiftPhase10:{entry:r_(),on:{RECOGNISED:[{target:"GiftPhase10GPT",actions:[({event:e})=>console.log(e),eB({lastResult:({event:e})=>e.value})]}]}},GiftPhase10GPT:{invoke:{src:W(async({input:e})=>{let t=await rT("Topic: Buying a gift for a friend can be quite challenging! Task: continue the debate by disagreeing and suggesting a DIFFERENT gift from the one presented in this argument (ANSWER WITH ONLY 50 TOKENS):  ",e.ninthanswerGift,e.lastResult[0].utterance,50);return t}),input:({context:e})=>({lastResult:e.lastResult,ninthanswerGift:e.ninthanswerGift}),onDone:{target:"FillerGift10",actions:[eB({tenthanswerGift:({event:e})=>e.output})]},onError:{target:"noMatchGift10"}}},noMatchGift10:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I'm sorry ${e.username} I couldn't understand that correctly, could you please repeat it?`}})},on:{SPEAK_COMPLETE:"GiftPhase10"}},FillerGift10:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Okay okay"}})},on:{SPEAK_COMPLETE:"GiftPhase10GPTReply"}},GiftPhase10GPTReply:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:e.tenthanswerGift}})},on:{SPEAK_COMPLETE:"GiftFinished"}},GiftFinished:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:`I still believe they will like my present more than yours ${e.username}`}})},on:{SPEAK_COMPLETE:"Goodbye"}},//FINAL STATES
Goodbye:{entry:({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"That was so much fun! Thank you for participating!"}})},on:{SPEAK_COMPLETE:"IdleEnd"}},IdleEnd:{entry:"GUI.PageLoaded"}}}}},GUI:{initial:"PageLoaded",states:{PageLoaded:{entry:"gui.PageLoaded",on:{CLICK:{target:"Inactive",actions:"prepare"}}},Inactive:{entry:"gui.Inactive",on:{ASRTTS_READY:"Active"}},Active:{initial:"Idle",states:{Idle:{entry:"gui.Idle",on:{TTS_STARTED:"Speaking",ASR_STARTED:"Listening"}},Speaking:{entry:"gui.Speaking",on:{SPEAK_COMPLETE:"Idle"}},Listening:{entry:"gui.Listening",on:{RECOGNISED:"Idle"}}}}}}}},new eH(v,{// custom actions
//
actions:{prepare:({context:e})=>e.spstRef.send({type:"PREPARE"}),// saveLastResult:
"speak.greeting":({context:e})=>{e.spstRef.send({type:"SPEAK",value:{utterance:"Hello and welcome to today's experiment!"}})},"speak.how-can-I-help":({context:e})=>e.spstRef.send({type:"SPEAK",value:{utterance:"How can I help you?"}}),CookBook:({context:e})=>{window.open(`https://www.cookingclassy.com/?s=${e.what}`,"_blank")},"gui.PageLoaded":({})=>{document.getElementById("button").innerText="Click to start!",document.querySelector(".animation-speaking").classList.remove("active"),document.querySelector(".animation-listening").classList.remove("active"),document.querySelector(".animation-speaking").classList.add("hidden"),document.querySelector(".animation-listening").classList.add("hidden")},"gui.Inactive":({})=>{document.getElementById("button").innerText="Inactive",document.querySelector(".animation-speaking").classList.remove("active"),document.querySelector(".animation-listening").classList.remove("active"),document.querySelector(".animation-speaking").classList.add("hidden"),document.querySelector(".animation-listening").classList.add("hidden")},"gui.Idle":({})=>{document.getElementById("button").innerText="Idle",document.querySelector(".animation-speaking").classList.remove("active"),document.querySelector(".animation-listening").classList.remove("active"),document.querySelector(".animation-speaking").classList.add("hidden"),document.querySelector(".animation-listening").classList.remove("hidden")},"gui.Speaking":({})=>{document.getElementById("button").innerText="Speaking...",document.getElementById("button").className="speakWave",document.querySelector(".animation-speaking").classList.add("active"),document.querySelector(".animation-speaking").classList.remove("hidden"),document.querySelector(".animation-listening").classList.remove("active"),document.querySelector(".animation-listening").classList.add("hidden")},"gui.Listening":({})=>{document.getElementById("button").innerText="Listening...",document.getElementById("button").className="listening",document.querySelector(".animation-speaking").classList.remove("active"),document.querySelector(".animation-speaking").classList.add("hidden"),document.querySelector(".animation-listening").classList.add("active"),document.querySelector(".animation-listening").classList.remove("hidden")},"gui.AudioPlaying":({})=>{document.getElementById("button").innerText="Playing audio...",document.getElementById("button").className="speakWave",document.querySelector(".animation-speaking").classList.add("active"),document.querySelector(".animation-speaking").classList.remove("hidden"),document.querySelector(".animation-listening").classList.remove("active"),document.querySelector(".animation-listening").classList.add("hidden");// Add any other necessary GUI updates for audio playback
}}})),rM=Y(rk).start();document.getElementById("button").onclick=()=>rM.send({type:"CLICK"}),rM.subscribe(e=>{console.log(e.value)})})();